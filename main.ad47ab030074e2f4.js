"use strict";(self.webpackChunktodo_app=self.webpackChunktodo_app||[]).push([[179],{2011:(dt,Ae,k)=>{k.d(Ae,{Dh:()=>de,GT:()=>pe,cc:()=>Se,hO:()=>We,on:()=>$,pX:()=>X,xv:()=>le});var f=k(5e3),Z=k(127),O=k(5813);dt=k.hmd(dt);const ae=["ngOnDestroy"],X=(we,it,Qe,Ie={})=>new Proxy(we,{get:(ye,ve)=>Qe.runOutsideAngular(()=>{var He;if(we[ve])return(null===(He=null==Ie?void 0:Ie.spy)||void 0===He?void 0:He.get)&&Ie.spy.get(ve,we[ve]),we[ve];if(ae.indexOf(ve)>-1)return()=>{};const $e=it.toPromise().then(re=>{const Ke=re&&re[ve];return"function"==typeof Ke?Ke.bind(re):Ke&&Ke.then?Ke.then(J=>Qe.run(()=>J)):Qe.run(()=>Ke)});return new Proxy(()=>{},{get:(re,Ke)=>$e[Ke],apply:(re,Ke,J)=>$e.then(oe=>{var ne;const be=oe&&oe(...J);return(null===(ne=null==Ie?void 0:Ie.spy)||void 0===ne?void 0:ne.apply)&&Ie.spy.apply(ve,J,be),be})})})}),pe=(we,it)=>{it.forEach(Qe=>{Object.getOwnPropertyNames(Qe.prototype||Qe).forEach(Ie=>{Object.defineProperty(we.prototype,Ie,Object.getOwnPropertyDescriptor(Qe.prototype||Qe,Ie))})})};class ie{constructor(it){return it}}const de=new f.OlP("angularfire2.app.options"),le=new f.OlP("angularfire2.app.name");function $(we,it,Qe){const ye="object"==typeof Qe&&Qe||{};ye.name=ye.name||"string"==typeof Qe&&Qe||"[DEFAULT]";const He=Z.Z.apps.filter($e=>$e&&$e.name===ye.name)[0]||it.runOutsideAngular(()=>Z.Z.initializeApp(we,ye));try{JSON.stringify(we)!==JSON.stringify(He.options)&&H("error",`${He.name} Firebase App already initialized with different options${dt.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch($e){}return new ie(He)}const H=(we,...it)=>{(0,f.X6Q)()&&"undefined"!=typeof console&&console[we](...it)},Q={provide:ie,useFactory:$,deps:[de,f.R0b,[new f.FiY,le]]};let We=(()=>{class we{constructor(Qe){Z.Z.registerVersion("angularfire",O.q4.full,"core"),Z.Z.registerVersion("angularfire",O.q4.full,"app-compat"),Z.Z.registerVersion("angular",f.q4F.full,Qe.toString())}static initializeApp(Qe,Ie){return{ngModule:we,providers:[{provide:de,useValue:Qe},{provide:le,useValue:Ie}]}}}return we.\u0275fac=function(Qe){return new(Qe||we)(f.LFG(f.Lbi))},we.\u0275mod=f.oAB({type:we}),we.\u0275inj=f.cJS({providers:[Q]}),we})();function Se(we,it,Qe,Ie,ye){const[,ve,He]=globalThis.\u0275AngularfireInstanceCache.find($e=>$e[0]===we)||[];if(ve)return function Ne(we,it){try{return we.toString()===it.toString()}catch(Qe){return we===it}}(ye,He)||(he("error",`${it} was already initialized on the ${Qe} Firebase App with different settings.${Le?" You may need to reload as Firebase is not HMR aware.":""}`),he("warn",{is:ye,was:He})),ve;{const $e=Ie();return globalThis.\u0275AngularfireInstanceCache.push([we,$e,ye]),$e}}const Le=!!dt.hot,he=(we,...it)=>{(0,f.X6Q)()&&"undefined"!=typeof console&&console[we](...it)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},5813:(dt,Ae,k)=>{k.d(Ae,{q4:()=>Nl,iC:()=>Ll,HU:()=>xu,vb:()=>od,JM:()=>Xs});var f=k(5e3),Z=k(5867),O=k(5861),ae=k(9681),X=k(2090),pe=k(4859),ie=k(1877);const de="@firebase/installations",H="w:0.5.8",Q="FIS_v2",we=new X.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function it(C){return C instanceof X.ZR&&C.code.includes("request-failed")}function Qe({projectId:C}){return`https://firebaseinstallations.googleapis.com/v1/projects/${C}/installations`}function Ie(C){return{token:C.token,requestStatus:2,expiresIn:J(C.expiresIn),creationTime:Date.now()}}function ye(C,I){return ve.apply(this,arguments)}function ve(){return(ve=(0,O.Z)(function*(C,I){const L=(yield I.json()).error;return we.create("request-failed",{requestName:C,serverCode:L.code,serverMessage:L.message,serverStatus:L.status})})).apply(this,arguments)}function He({apiKey:C}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":C})}function $e(C,{refreshToken:I}){const R=He(C);return R.append("Authorization",function oe(C){return`${Q} ${C}`}(I)),R}function re(C){return Ke.apply(this,arguments)}function Ke(){return(Ke=(0,O.Z)(function*(C){const I=yield C();return I.status>=500&&I.status<600?C():I})).apply(this,arguments)}function J(C){return Number(C.replace("s","000"))}function ne(C,I){return be.apply(this,arguments)}function be(){return(be=(0,O.Z)(function*({appConfig:C,heartbeatServiceProvider:I},{fid:R}){const L=Qe(C),W=He(C),ee=I.getImmediate({optional:!0});if(ee){const It=yield ee.getHeartbeatsHeader();It&&W.append("x-firebase-client",It)}const xe={method:"POST",headers:W,body:JSON.stringify({fid:R,authVersion:Q,appId:C.appId,sdkVersion:H})},nt=yield re(()=>fetch(L,xe));if(nt.ok){const It=yield nt.json();return{fid:It.fid||R,registrationStatus:2,refreshToken:It.refreshToken,authToken:Ie(It.authToken)}}throw yield ye("Create Installation",nt)})).apply(this,arguments)}function ge(C){return new Promise(I=>{setTimeout(I,C)})}const St=/^[cdef][\w-]{21}$/;function an(){try{const C=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(C),C[0]=112+C[0]%16;const R=function qe(C){return function Fe(C){return btoa(String.fromCharCode(...C)).replace(/\+/g,"-").replace(/\//g,"_")}(C).substr(0,22)}(C);return St.test(R)?R:""}catch(C){return""}}function Wt(C){return`${C.appName}!${C.appId}`}const Jn=new Map;function bn(C,I){const R=Wt(C);Jt(R,I),function Kt(C,I){const R=function ii(){return!ur&&"BroadcastChannel"in self&&(ur=new BroadcastChannel("[Firebase] FID Change"),ur.onmessage=C=>{Jt(C.data.key,C.data.fid)}),ur}();R&&R.postMessage({key:C,fid:I}),function Rs(){0===Jn.size&&ur&&(ur.close(),ur=null)}()}(R,I)}function Jt(C,I){const R=Jn.get(C);if(R)for(const L of R)L(I)}let ur=null;const Pr="firebase-installations-store";let us=null;function ls(){return us||(us=(0,X.X3)("firebase-installations-database",1,(C,I)=>{0===I&&C.createObjectStore(Pr)})),us}function ht(C,I){return Hr.apply(this,arguments)}function Hr(){return(Hr=(0,O.Z)(function*(C,I){const R=Wt(C),W=(yield ls()).transaction(Pr,"readwrite"),ee=W.objectStore(Pr),Me=yield ee.get(R);return yield ee.put(I,R),yield W.complete,(!Me||Me.fid!==I.fid)&&bn(C,I.fid),I})).apply(this,arguments)}function Xn(C){return Hn.apply(this,arguments)}function Hn(){return(Hn=(0,O.Z)(function*(C){const I=Wt(C),L=(yield ls()).transaction(Pr,"readwrite");yield L.objectStore(Pr).delete(I),yield L.complete})).apply(this,arguments)}function si(C,I){return lo.apply(this,arguments)}function lo(){return(lo=(0,O.Z)(function*(C,I){const R=Wt(C),W=(yield ls()).transaction(Pr,"readwrite"),ee=W.objectStore(Pr),Me=yield ee.get(R),xe=I(Me);return void 0===xe?yield ee.delete(R):yield ee.put(xe,R),yield W.complete,xe&&(!Me||Me.fid!==xe.fid)&&bn(C,xe.fid),xe})).apply(this,arguments)}function yn(C){return er.apply(this,arguments)}function er(){return(er=(0,O.Z)(function*(C){let I;const R=yield si(C.appConfig,L=>{const W=Ns(L),ee=ba(C,W);return I=ee.registrationPromise,ee.installationEntry});return""===R.fid?{installationEntry:yield I}:{installationEntry:R,registrationPromise:I}})).apply(this,arguments)}function Ns(C){return Gt(C||{fid:an(),registrationStatus:0})}function ba(C,I){if(0===I.registrationStatus){if(!navigator.onLine)return{installationEntry:I,registrationPromise:Promise.reject(we.create("app-offline"))};const R={fid:I.fid,registrationStatus:1,registrationTime:Date.now()},L=function Zt(C,I){return lt.apply(this,arguments)}(C,R);return{installationEntry:R,registrationPromise:L}}return 1===I.registrationStatus?{installationEntry:I,registrationPromise:bt(C)}:{installationEntry:I}}function lt(){return(lt=(0,O.Z)(function*(C,I){try{const R=yield ne(C,I);return ht(C.appConfig,R)}catch(R){throw it(R)&&409===R.customData.serverCode?yield Xn(C.appConfig):yield ht(C.appConfig,{fid:I.fid,registrationStatus:0}),R}})).apply(this,arguments)}function bt(C){return lr.apply(this,arguments)}function lr(){return(lr=(0,O.Z)(function*(C){let I=yield Wi(C.appConfig);for(;1===I.registrationStatus;)yield ge(100),I=yield Wi(C.appConfig);if(0===I.registrationStatus){const{installationEntry:R,registrationPromise:L}=yield yn(C);return L||R}return I})).apply(this,arguments)}function Wi(C){return si(C,I=>{if(!I)throw we.create("installation-not-found");return Gt(I)})}function Gt(C){return function co(C){return 1===C.registrationStatus&&C.registrationTime+1e4<Date.now()}(C)?{fid:C.fid,registrationStatus:0}:C}function vr(C,I){return cr.apply(this,arguments)}function cr(){return(cr=(0,O.Z)(function*({appConfig:C,heartbeatServiceProvider:I},R){const L=ft(C,R),W=$e(C,R),ee=I.getImmediate({optional:!0});if(ee){const It=yield ee.getHeartbeatsHeader();It&&W.append("x-firebase-client",It)}const xe={method:"POST",headers:W,body:JSON.stringify({installation:{sdkVersion:H,appId:C.appId}})},nt=yield re(()=>fetch(L,xe));if(nt.ok)return Ie(yield nt.json());throw yield ye("Generate Auth Token",nt)})).apply(this,arguments)}function ft(C,{fid:I}){return`${Qe(C)}/${I}/authTokens:generate`}function Er(C){return jt.apply(this,arguments)}function jt(){return(jt=(0,O.Z)(function*(C,I=!1){let R;const L=yield si(C.appConfig,ee=>{if(!Bt(ee))throw we.create("not-registered");const Me=ee.authToken;if(!I&&j(Me))return ee;if(1===Me.requestStatus)return R=Xe(C,I),ee;{if(!navigator.onLine)throw we.create("app-offline");const xe=q(ee);return R=pt(C,xe),xe}});return R?yield R:L.authToken})).apply(this,arguments)}function Xe(C,I){return Te.apply(this,arguments)}function Te(){return(Te=(0,O.Z)(function*(C,I){let R=yield tt(C.appConfig);for(;1===R.authToken.requestStatus;)yield ge(100),R=yield tt(C.appConfig);const L=R.authToken;return 0===L.requestStatus?Er(C,I):L})).apply(this,arguments)}function tt(C){return si(C,I=>{if(!Bt(I))throw we.create("not-registered");return function ce(C){return 1===C.requestStatus&&C.requestTime+1e4<Date.now()}(I.authToken)?Object.assign(Object.assign({},I),{authToken:{requestStatus:0}}):I})}function pt(C,I){return Ht.apply(this,arguments)}function Ht(){return(Ht=(0,O.Z)(function*(C,I){try{const R=yield vr(C,I),L=Object.assign(Object.assign({},I),{authToken:R});return yield ht(C.appConfig,L),R}catch(R){if(!it(R)||401!==R.customData.serverCode&&404!==R.customData.serverCode){const L=Object.assign(Object.assign({},I),{authToken:{requestStatus:0}});yield ht(C.appConfig,L)}else yield Xn(C.appConfig);throw R}})).apply(this,arguments)}function Bt(C){return void 0!==C&&2===C.registrationStatus}function j(C){return 2===C.requestStatus&&!function V(C){const I=Date.now();return I<C.creationTime||C.creationTime+C.expiresIn<I+36e5}(C)}function q(C){const I={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},C),{authToken:I})}function Be(){return(Be=(0,O.Z)(function*(C){const I=C,{installationEntry:R,registrationPromise:L}=yield yn(I);return L?L.catch(console.error):Er(I).catch(console.error),R.fid})).apply(this,arguments)}function Xt(){return(Xt=(0,O.Z)(function*(C,I=!1){const R=C;return yield wr(R),(yield Er(R,I)).token})).apply(this,arguments)}function wr(C){return Yt.apply(this,arguments)}function Yt(){return(Yt=(0,O.Z)(function*(C){const{registrationPromise:I}=yield yn(C);I&&(yield I)})).apply(this,arguments)}function Gn(C){return we.create("missing-app-config-values",{valueName:C})}const Ca="installations",Oe=C=>{const I=C.getProvider("app").getImmediate(),R=function cs(C){if(!C||!C.options)throw Gn("App Configuration");if(!C.name)throw Gn("App Name");const I=["projectId","apiKey","appId"];for(const R of I)if(!C.options[R])throw Gn(R);return{appName:C.name,projectId:C.options.projectId,apiKey:C.options.apiKey,appId:C.options.appId}}(I);return{app:I,appConfig:R,heartbeatServiceProvider:(0,ae._getProvider)(I,"heartbeat"),_delete:()=>Promise.resolve()}},Lt=C=>{const I=C.getProvider("app").getImmediate(),R=(0,ae._getProvider)(I,Ca).getImmediate();return{getId:()=>function Y(C){return Be.apply(this,arguments)}(R),getToken:W=>function vt(C){return Xt.apply(this,arguments)}(R,W)}};(function pn(){(0,ae._registerComponent)(new pe.wA(Ca,Oe,"PUBLIC")),(0,ae._registerComponent)(new pe.wA("installations-internal",Lt,"PRIVATE"))})(),(0,ae.registerVersion)(de,"0.5.8"),(0,ae.registerVersion)(de,"0.5.8","esm2017");const dr="@firebase/remote-config",Sn=new X.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class Vh{constructor(I,R,L,W){this.client=I,this.storage=R,this.storageCache=L,this.logger=W}isCachedDataFresh(I,R){if(!R)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const L=Date.now()-R,W=L<=I;return this.logger.debug(`Config fetch cache check. Cache age millis: ${L}. Cache max age millis (minimumFetchIntervalMillis setting): ${I}. Is cache hit: ${W}.`),W}fetch(I){var R=this;return(0,O.Z)(function*(){const[L,W]=yield Promise.all([R.storage.getLastSuccessfulFetchTimestampMillis(),R.storage.getLastSuccessfulFetchResponse()]);if(W&&R.isCachedDataFresh(I.cacheMaxAgeMillis,L))return W;I.eTag=W&&W.eTag;const ee=yield R.client.fetch(I),Me=[R.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===ee.status&&Me.push(R.storage.setLastSuccessfulFetchResponse(ee)),yield Promise.all(Me),ee})()}}function Bc(C=navigator){return C.languages&&C.languages[0]||C.language}class lu{constructor(I,R,L,W,ee,Me){this.firebaseInstallations=I,this.sdkVersion=R,this.namespace=L,this.projectId=W,this.apiKey=ee,this.appId=Me}fetch(I){var R=this;return(0,O.Z)(function*(){const[L,W]=yield Promise.all([R.firebaseInstallations.getId(),R.firebaseInstallations.getToken()]),Me=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${R.projectId}/namespaces/${R.namespace}:fetch?key=${R.apiKey}`,xe={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":I.eTag||"*"},nt={sdk_version:R.sdkVersion,app_instance_id:L,app_instance_id_token:W,app_id:R.appId,language_code:Bc()},It={method:"POST",headers:xe,body:JSON.stringify(nt)},Pt=fetch(Me,It),Mt=new Promise((mi,Bi)=>{I.signal.addEventListener(()=>{const Ao=new Error("The operation was aborted.");Ao.name="AbortError",Bi(Ao)})});let Un;try{yield Promise.race([Pt,Mt]),Un=yield Pt}catch(mi){let Bi="fetch-client-network";throw"AbortError"===mi.name&&(Bi="fetch-timeout"),Sn.create(Bi,{originalErrorMessage:mi.message})}let In=Un.status;const ia=Un.headers.get("ETag")||void 0;let To,Vr;if(200===Un.status){let mi;try{mi=yield Un.json()}catch(Bi){throw Sn.create("fetch-client-parse",{originalErrorMessage:Bi.message})}To=mi.entries,Vr=mi.state}if("INSTANCE_STATE_UNSPECIFIED"===Vr?In=500:"NO_CHANGE"===Vr?In=304:("NO_TEMPLATE"===Vr||"EMPTY_CONFIG"===Vr)&&(To={}),304!==In&&200!==In)throw Sn.create("fetch-status",{httpStatus:In});return{status:In,eTag:ia,config:To}})()}}class Wp{constructor(I,R){this.client=I,this.storage=R}fetch(I){var R=this;return(0,O.Z)(function*(){const L=(yield R.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return R.attemptFetch(I,L)})()}attemptFetch(I,{throttleEndTimeMillis:R,backoffCount:L}){var W=this;return(0,O.Z)(function*(){yield function Ln(C,I){return new Promise((R,L)=>{const W=Math.max(I-Date.now(),0),ee=setTimeout(R,W);C.addEventListener(()=>{clearTimeout(ee),L(Sn.create("fetch-throttle",{throttleEndTimeMillis:I}))})})}(I.signal,R);try{const ee=yield W.client.fetch(I);return yield W.storage.deleteThrottleMetadata(),ee}catch(ee){if(!function Uc(C){if(!(C instanceof X.ZR&&C.customData))return!1;const I=Number(C.customData.httpStatus);return 429===I||500===I||503===I||504===I}(ee))throw ee;const Me={throttleEndTimeMillis:Date.now()+(0,X.$s)(L),backoffCount:L+1};return yield W.storage.setThrottleMetadata(Me),W.attemptFetch(I,Me)}})()}}class cu{constructor(I,R,L,W,ee){this.app=I,this._client=R,this._storageCache=L,this._storage=W,this._logger=ee,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function ul(C,I){const R=C.target.error||void 0;return Sn.create(I,{originalErrorMessage:R&&R.message})}const Ls="app_namespace_store";class Qp{constructor(I,R,L,W=function Yp(){return new Promise((C,I)=>{try{const R=indexedDB.open("firebase_remote_config",1);R.onerror=L=>{I(ul(L,"storage-open"))},R.onsuccess=L=>{C(L.target.result)},R.onupgradeneeded=L=>{0===L.oldVersion&&L.target.result.createObjectStore(Ls,{keyPath:"compositeKey"})}}catch(R){I(Sn.create("storage-open",{originalErrorMessage:R}))}})}()){this.appId=I,this.appName=R,this.namespace=L,this.openDbPromise=W}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(I){return this.set("last_fetch_status",I)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(I){return this.set("last_successful_fetch_timestamp_millis",I)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(I){return this.set("last_successful_fetch_response",I)}getActiveConfig(){return this.get("active_config")}setActiveConfig(I){return this.set("active_config",I)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(I){return this.set("active_config_etag",I)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(I){return this.set("throttle_metadata",I)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(I){var R=this;return(0,O.Z)(function*(){const L=yield R.openDbPromise;return new Promise((W,ee)=>{const xe=L.transaction([Ls],"readonly").objectStore(Ls),nt=R.createCompositeKey(I);try{const It=xe.get(nt);It.onerror=Pt=>{ee(ul(Pt,"storage-get"))},It.onsuccess=Pt=>{const Mt=Pt.target.result;W(Mt?Mt.value:void 0)}}catch(It){ee(Sn.create("storage-get",{originalErrorMessage:It&&It.message}))}})})()}set(I,R){var L=this;return(0,O.Z)(function*(){const W=yield L.openDbPromise;return new Promise((ee,Me)=>{const nt=W.transaction([Ls],"readwrite").objectStore(Ls),It=L.createCompositeKey(I);try{const Pt=nt.put({compositeKey:It,value:R});Pt.onerror=Mt=>{Me(ul(Mt,"storage-set"))},Pt.onsuccess=()=>{ee()}}catch(Pt){Me(Sn.create("storage-set",{originalErrorMessage:Pt&&Pt.message}))}})})()}delete(I){var R=this;return(0,O.Z)(function*(){const L=yield R.openDbPromise;return new Promise((W,ee)=>{const xe=L.transaction([Ls],"readwrite").objectStore(Ls),nt=R.createCompositeKey(I);try{const It=xe.delete(nt);It.onerror=Pt=>{ee(ul(Pt,"storage-delete"))},It.onsuccess=()=>{W()}}catch(It){ee(Sn.create("storage-delete",{originalErrorMessage:It&&It.message}))}})})()}createCompositeKey(I){return[this.appId,this.appName,this.namespace,I].join()}}class $c{constructor(I){this.storage=I}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var I=this;return(0,O.Z)(function*(){const R=I.storage.getLastFetchStatus(),L=I.storage.getLastSuccessfulFetchTimestampMillis(),W=I.storage.getActiveConfig(),ee=yield R;ee&&(I.lastFetchStatus=ee);const Me=yield L;Me&&(I.lastSuccessfulFetchTimestampMillis=Me);const xe=yield W;xe&&(I.activeConfig=xe)})()}setLastFetchStatus(I){return this.lastFetchStatus=I,this.storage.setLastFetchStatus(I)}setLastSuccessfulFetchTimestampMillis(I){return this.lastSuccessfulFetchTimestampMillis=I,this.storage.setLastSuccessfulFetchTimestampMillis(I)}setActiveConfig(I){return this.activeConfig=I,this.storage.setActiveConfig(I)}}function fo(){return Bh.apply(this,arguments)}function Bh(){return(Bh=(0,O.Z)(function*(){if(!(0,X.hl)())return!1;try{return yield(0,X.eu)()}catch(C){return!1}})).apply(this,arguments)}!function Go(){(0,ae._registerComponent)(new pe.wA("remote-config",function C(I,{instanceIdentifier:R}){const L=I.getProvider("app").getImmediate(),W=I.getProvider("installations-internal").getImmediate();if("undefined"==typeof window)throw Sn.create("registration-window");if(!(0,X.hl)())throw Sn.create("indexed-db-unavailable");const{projectId:ee,apiKey:Me,appId:xe}=L.options;if(!ee)throw Sn.create("registration-project-id");if(!Me)throw Sn.create("registration-api-key");if(!xe)throw Sn.create("registration-app-id");const nt=new Qp(xe,L.name,R=R||"firebase"),It=new $c(nt),Pt=new ie.Yd(dr);Pt.logLevel=ie.in.ERROR;const Mt=new lu(W,ae.SDK_VERSION,R,ee,Me,xe),Un=new Wp(Mt,nt),In=new Vh(Un,nt,It,Pt),ia=new cu(L,In,It,nt,Pt);return function ai(C){const I=(0,X.m9)(C);I._initializePromise||(I._initializePromise=I._storageCache.loadFromStorage().then(()=>{I._isInitializationComplete=!0}))}(ia),ia},"PUBLIC").setMultipleInstances(!0)),(0,ae.registerVersion)(dr,"0.3.7"),(0,ae.registerVersion)(dr,"0.3.7","esm2017")}();const ll="/firebase-messaging-sw.js",Vs="/firebase-cloud-messaging-push-scope",qr="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",po="google.c.a.c_id",Ta="google.c.a.c_l",Hc="google.c.a.ts",Jp="google.c.a.e";var Bs=(()=>{return(C=Bs||(Bs={})).PUSH_RECEIVED="push-received",C.NOTIFICATION_CLICKED="notification-clicked",Bs;var C})();function li(C){const I=new Uint8Array(C);return btoa(String.fromCharCode(...I)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function hu(C){const R=(C+"=".repeat((4-C.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),L=atob(R),W=new Uint8Array(L.length);for(let ee=0;ee<L.length;++ee)W[ee]=L.charCodeAt(ee);return W}const fu="fcm_token_details_db",hr="fcm_token_object_Store";function Uh(C){return pu.apply(this,arguments)}function pu(){return pu=(0,O.Z)(function*(C){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(ee=>ee.name).includes(fu))return null;let I=null;return(yield(0,X.X3)(fu,5,function(){var L=(0,O.Z)(function*(W,ee,Me,xe){var nt;if(ee<2||!W.objectStoreNames.contains(hr))return;const It=xe.objectStore(hr),Pt=yield It.index("fcmSenderId").get(C);if(yield It.clear(),Pt)if(2===ee){const Mt=Pt;if(!Mt.auth||!Mt.p256dh||!Mt.endpoint)return;I={token:Mt.fcmToken,createTime:null!==(nt=Mt.createTime)&&void 0!==nt?nt:Date.now(),subscriptionOptions:{auth:Mt.auth,p256dh:Mt.p256dh,endpoint:Mt.endpoint,swScope:Mt.swScope,vapidKey:"string"==typeof Mt.vapidKey?Mt.vapidKey:li(Mt.vapidKey)}}}else if(3===ee){const Mt=Pt;I={token:Mt.fcmToken,createTime:Mt.createTime,subscriptionOptions:{auth:li(Mt.auth),p256dh:li(Mt.p256dh),endpoint:Mt.endpoint,swScope:Mt.swScope,vapidKey:li(Mt.vapidKey)}}}else if(4===ee){const Mt=Pt;I={token:Mt.fcmToken,createTime:Mt.createTime,subscriptionOptions:{auth:li(Mt.auth),p256dh:li(Mt.p256dh),endpoint:Mt.endpoint,swScope:Mt.swScope,vapidKey:li(Mt.vapidKey)}}}});return function(W,ee,Me,xe){return L.apply(this,arguments)}}())).close(),yield(0,X.Lj)(fu),yield(0,X.Lj)("fcm_vapid_details_db"),yield(0,X.Lj)("undefined"),Gc(I)?I:null}),pu.apply(this,arguments)}function Gc(C){if(!C||!C.subscriptionOptions)return!1;const{subscriptionOptions:I}=C;return"number"==typeof C.createTime&&C.createTime>0&&"string"==typeof C.token&&C.token.length>0&&"string"==typeof I.auth&&I.auth.length>0&&"string"==typeof I.p256dh&&I.p256dh.length>0&&"string"==typeof I.endpoint&&I.endpoint.length>0&&"string"==typeof I.swScope&&I.swScope.length>0&&"string"==typeof I.vapidKey&&I.vapidKey.length>0}const gs="firebase-messaging-store";let Aa=null;function cl(){return Aa||(Aa=(0,X.X3)("firebase-messaging-database",1,(C,I)=>{0===I&&C.createObjectStore(gs)})),Aa}function mn(C){return zo.apply(this,arguments)}function zo(){return(zo=(0,O.Z)(function*(C){const I=mo(C),L=yield(yield cl()).transaction(gs).objectStore(gs).get(I);if(L)return L;{const W=yield Uh(C.appConfig.senderId);if(W)return yield Us(C,W),W}})).apply(this,arguments)}function Us(C,I){return cn.apply(this,arguments)}function cn(){return(cn=(0,O.Z)(function*(C,I){const R=mo(C),W=(yield cl()).transaction(gs,"readwrite");return yield W.objectStore(gs).put(I,R),yield W.complete,I})).apply(this,arguments)}function qc(C){return go.apply(this,arguments)}function go(){return(go=(0,O.Z)(function*(C){const I=mo(C),L=(yield cl()).transaction(gs,"readwrite");yield L.objectStore(gs).delete(I),yield L.complete})).apply(this,arguments)}function mo({appConfig:C}){return C.appId}const Mn=new X.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function Sa(C,I){return Ni.apply(this,arguments)}function Ni(){return(Ni=(0,O.Z)(function*(C,I){const R=yield $s(C),L=gt(I),W={method:"POST",headers:R,body:JSON.stringify(L)};let ee;try{ee=yield(yield fetch(zr(C.appConfig),W)).json()}catch(Me){throw Mn.create("token-subscribe-failed",{errorInfo:Me})}if(ee.error)throw Mn.create("token-subscribe-failed",{errorInfo:ee.error.message});if(!ee.token)throw Mn.create("token-subscribe-no-token");return ee.token})).apply(this,arguments)}function Ir(C,I){return js.apply(this,arguments)}function js(){return(js=(0,O.Z)(function*(C,I){const R=yield $s(C),L=gt(I.subscriptionOptions),W={method:"PATCH",headers:R,body:JSON.stringify(L)};let ee;try{ee=yield(yield fetch(`${zr(C.appConfig)}/${I.token}`,W)).json()}catch(Me){throw Mn.create("token-update-failed",{errorInfo:Me})}if(ee.error)throw Mn.create("token-update-failed",{errorInfo:ee.error.message});if(!ee.token)throw Mn.create("token-update-no-token");return ee.token})).apply(this,arguments)}function ms(C,I){return yu.apply(this,arguments)}function yu(){return(yu=(0,O.Z)(function*(C,I){const L={method:"DELETE",headers:yield $s(C)};try{const ee=yield(yield fetch(`${zr(C.appConfig)}/${I}`,L)).json();if(ee.error)throw Mn.create("token-unsubscribe-failed",{errorInfo:ee.error.message})}catch(W){throw Mn.create("token-unsubscribe-failed",{errorInfo:W})}})).apply(this,arguments)}function zr({projectId:C}){return`https://fcmregistrations.googleapis.com/v1/projects/${C}/registrations`}function $s(C){return Hs.apply(this,arguments)}function Hs(){return(Hs=(0,O.Z)(function*({appConfig:C,installations:I}){const R=yield I.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":C.apiKey,"x-goog-firebase-installations-auth":`FIS ${R}`})})).apply(this,arguments)}function gt({p256dh:C,auth:I,endpoint:R,vapidKey:L}){const W={web:{endpoint:R,auth:I,p256dh:C}};return L!==qr&&(W.web.applicationPubKey=L),W}const _u=6048e5;function Ma(C){return vu.apply(this,arguments)}function vu(){return(vu=(0,O.Z)(function*(C){const I=yield fl(C.swRegistration,C.vapidKey),R={vapidKey:C.vapidKey,swScope:C.swRegistration.scope,endpoint:I.endpoint,auth:li(I.getKey("auth")),p256dh:li(I.getKey("p256dh"))},L=yield mn(C.firebaseDependencies);if(L){if(Wo(L.subscriptionOptions,R))return Date.now()>=L.createTime+_u?dl(C,{token:L.token,createTime:Date.now(),subscriptionOptions:R}):L.token;try{yield ms(C.firebaseDependencies,L.token)}catch(W){console.warn(W)}return De(C.firebaseDependencies,R)}return De(C.firebaseDependencies,R)})).apply(this,arguments)}function Eu(C){return wu.apply(this,arguments)}function wu(){return(wu=(0,O.Z)(function*(C){const I=yield mn(C.firebaseDependencies);I&&(yield ms(C.firebaseDependencies,I.token),yield qc(C.firebaseDependencies));const R=yield C.swRegistration.pushManager.getSubscription();return!R||R.unsubscribe()})).apply(this,arguments)}function dl(C,I){return hl.apply(this,arguments)}function hl(){return(hl=(0,O.Z)(function*(C,I){try{const R=yield Ir(C.firebaseDependencies,I),L=Object.assign(Object.assign({},I),{token:R,createTime:Date.now()});return yield Us(C.firebaseDependencies,L),R}catch(R){throw yield Eu(C),R}})).apply(this,arguments)}function De(C,I){return Ut.apply(this,arguments)}function Ut(){return(Ut=(0,O.Z)(function*(C,I){const L={token:yield Sa(C,I),createTime:Date.now(),subscriptionOptions:I};return yield Us(C,L),L.token})).apply(this,arguments)}function fl(C,I){return _n.apply(this,arguments)}function _n(){return(_n=(0,O.Z)(function*(C,I){return(yield C.pushManager.getSubscription())||C.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:hu(I)})})).apply(this,arguments)}function Wo(C,I){return I.vapidKey===C.vapidKey&&I.endpoint===C.endpoint&&I.auth===C.auth&&I.p256dh===C.p256dh}function Ko(C){const I={from:C.from,collapseKey:C.collapse_key,messageId:C.fcmMessageId};return function Wr(C,I){if(!I.notification)return;C.notification={};const R=I.notification.title;R&&(C.notification.title=R);const L=I.notification.body;L&&(C.notification.body=L);const W=I.notification.image;W&&(C.notification.image=W)}(I,C),function pl(C,I){!I.data||(C.data=I.data)}(I,C),function gl(C,I){if(!I.fcmOptions)return;C.fcmOptions={};const R=I.fcmOptions.link;R&&(C.fcmOptions.link=R);const L=I.fcmOptions.analytics_label;L&&(C.fcmOptions.analyticsLabel=L)}(I,C),I}function zc(C){return"object"==typeof C&&!!C&&po in C}function ml(C,I){const R=[];for(let L=0;L<C.length;L++)R.push(C.charAt(L)),L<I.length&&R.push(I.charAt(L));return R.join("")}function Gs(C){return Mn.create("missing-app-config-values",{valueName:C})}ml("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),ml("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class fr{constructor(I,R,L){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const W=function bu(C){if(!C||!C.options)throw Gs("App Configuration Object");if(!C.name)throw Gs("App Name");const I=["projectId","apiKey","appId","messagingSenderId"],{options:R}=C;for(const L of I)if(!R[L])throw Gs(L);return{appName:C.name,projectId:R.projectId,apiKey:R.apiKey,appId:R.appId,senderId:R.messagingSenderId}}(I);this.firebaseDependencies={app:I,appConfig:W,installations:R,analyticsProvider:L}}_delete(){return Promise.resolve()}}function ci(C){return Du.apply(this,arguments)}function Du(){return(Du=(0,O.Z)(function*(C){try{C.swRegistration=yield navigator.serviceWorker.register(ll,{scope:Vs}),C.swRegistration.update().catch(()=>{})}catch(I){throw Mn.create("failed-service-worker-registration",{browserErrorMessage:I.message})}})).apply(this,arguments)}function qs(C,I){return Oi.apply(this,arguments)}function Oi(){return(Oi=(0,O.Z)(function*(C,I){if(!I&&!C.swRegistration&&(yield ci(C)),I||!C.swRegistration){if(!(I instanceof ServiceWorkerRegistration))throw Mn.create("invalid-sw-registration");C.swRegistration=I}})).apply(this,arguments)}function yl(C,I){return Cu.apply(this,arguments)}function Cu(){return(Cu=(0,O.Z)(function*(C,I){I?C.vapidKey=I:C.vapidKey||(C.vapidKey=qr)})).apply(this,arguments)}function _l(){return(_l=(0,O.Z)(function*(C,I){if(!navigator)throw Mn.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw Mn.create("permission-blocked");return yield yl(C,null==I?void 0:I.vapidKey),yield qs(C,null==I?void 0:I.serviceWorkerRegistration),Ma(C)})).apply(this,arguments)}function xa(C,I,R){return Zo.apply(this,arguments)}function Zo(){return(Zo=(0,O.Z)(function*(C,I,R){const L=vl(I);(yield C.firebaseDependencies.analyticsProvider.get()).logEvent(L,{message_id:R[po],message_name:R[Ta],message_time:R[Hc],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function vl(C){switch(C){case Bs.NOTIFICATION_CLICKED:return"notification_open";case Bs.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function Wc(){return(Wc=(0,O.Z)(function*(C,I){const R=I.data;if(!R.isFirebaseMessaging)return;C.onMessageHandler&&R.messageType===Bs.PUSH_RECEIVED&&("function"==typeof C.onMessageHandler?C.onMessageHandler(Ko(R)):C.onMessageHandler.next(Ko(R)));const L=R.data;zc(L)&&"1"===L[Jp]&&(yield xa(C,R.messageType,L))})).apply(this,arguments)}const wl="@firebase/messaging",Kc=C=>{const I=new fr(C.getProvider("app").getImmediate(),C.getProvider("installations-internal").getImmediate(),C.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",R=>function El(C,I){return Wc.apply(this,arguments)}(I,R)),I},_o=C=>{const I=C.getProvider("messaging").getImmediate();return{getToken:L=>function Iu(C,I){return _l.apply(this,arguments)}(I,L)}};function Yc(){return vo.apply(this,arguments)}function vo(){return(vo=(0,O.Z)(function*(){try{yield(0,X.eu)()}catch(C){return!1}return"undefined"!=typeof window&&(0,X.hl)()&&(0,X.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function Zc(){(0,ae._registerComponent)(new pe.wA("messaging",Kc,"PUBLIC")),(0,ae._registerComponent)(new pe.wA("messaging-internal",_o,"PRIVATE")),(0,ae.registerVersion)(wl,"0.9.12"),(0,ae.registerVersion)(wl,"0.9.12","esm2017")}();const Dl="analytics",Oy="firebase_id",Ra="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",Tu="https://www.googletagmanager.com/gtag/js",Vn=new ie.Yd("@firebase/analytics");function Jc(C){return Promise.all(C.map(I=>I.catch(R=>R)))}function Xp(C,I){const R=document.createElement("script");R.src=`${Tu}?l=${C}&id=${I}`,R.async=!0,document.head.appendChild(R)}function Yo(C,I,R,L,W,ee){return Xc.apply(this,arguments)}function Xc(){return(Xc=(0,O.Z)(function*(C,I,R,L,W,ee){const Me=L[W];try{if(Me)yield I[Me];else{const nt=(yield Jc(R)).find(It=>It.measurementId===W);nt&&(yield I[nt.appId])}}catch(xe){Vn.error(xe)}C("config",W,ee)})).apply(this,arguments)}function Il(C,I,R,L,W){return Eo.apply(this,arguments)}function Eo(){return(Eo=(0,O.Z)(function*(C,I,R,L,W){try{let ee=[];if(W&&W.send_to){let Me=W.send_to;Array.isArray(Me)||(Me=[Me]);const xe=yield Jc(R);for(const nt of Me){const It=xe.find(Mt=>Mt.measurementId===nt),Pt=It&&I[It.appId];if(!Pt){ee=[];break}ee.push(Pt)}}0===ee.length&&(ee=Object.values(I)),yield Promise.all(ee),C("event",L,W||{})}catch(ee){Vn.error(ee)}})).apply(this,arguments)}function eg(){const C=window.document.getElementsByTagName("script");for(const I of Object.values(C))if(I.src&&I.src.includes(Tu))return I;return null}const Rn=new X.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'}),Fr=new class Kr{constructor(I={},R=1e3){this.throttleMetadata=I,this.intervalMillis=R}getThrottleMetadata(I){return this.throttleMetadata[I]}setThrottleMetadata(I,R){this.throttleMetadata[I]=R}deleteThrottleMetadata(I){delete this.throttleMetadata[I]}};function Qo(C){return new Headers({Accept:"application/json","x-goog-api-key":C})}function td(C){return gn.apply(this,arguments)}function gn(){return(gn=(0,O.Z)(function*(C){var I;const{appId:R,apiKey:L}=C,W={method:"GET",headers:Qo(L)},ee=Ra.replace("{app-id}",R),Me=yield fetch(ee,W);if(200!==Me.status&&304!==Me.status){let xe="";try{const nt=yield Me.json();(null===(I=nt.error)||void 0===I?void 0:I.message)&&(xe=nt.error.message)}catch(nt){}throw Rn.create("config-fetch-failed",{httpStatus:Me.status,responseMessage:xe})}return Me.json()})).apply(this,arguments)}function $h(C){return ki.apply(this,arguments)}function ki(){return(ki=(0,O.Z)(function*(C,I=Fr,R){const{appId:L,apiKey:W,measurementId:ee}=C.options;if(!L)throw Rn.create("no-app-id");if(!W){if(ee)return{measurementId:ee,appId:L};throw Rn.create("no-api-key")}const Me=I.getThrottleMetadata(L)||{backoffCount:0,throttleEndTimeMillis:Date.now()},xe=new Tl;return setTimeout((0,O.Z)(function*(){xe.abort()}),void 0!==R?R:6e4),Au({appId:L,apiKey:W,measurementId:ee},Me,xe,I)})).apply(this,arguments)}function Au(C,I,R){return di.apply(this,arguments)}function di(){return(di=(0,O.Z)(function*(C,{throttleEndTimeMillis:I,backoffCount:R},L,W=Fr){const{appId:ee,measurementId:Me}=C;try{yield Rt(L,I)}catch(xe){if(Me)return Vn.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Me} provided in the "measurementId" field in the local Firebase config. [${xe.message}]`),{appId:ee,measurementId:Me};throw xe}try{const xe=yield td(C);return W.deleteThrottleMetadata(ee),xe}catch(xe){if(!nd(xe)){if(W.deleteThrottleMetadata(ee),Me)return Vn.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Me} provided in the "measurementId" field in the local Firebase config. [${xe.message}]`),{appId:ee,measurementId:Me};throw xe}const nt=503===Number(xe.customData.httpStatus)?(0,X.$s)(R,W.intervalMillis,30):(0,X.$s)(R,W.intervalMillis),It={throttleEndTimeMillis:Date.now()+nt,backoffCount:R+1};return W.setThrottleMetadata(ee,It),Vn.debug(`Calling attemptFetch again in ${nt} millis`),Au(C,It,L,W)}})).apply(this,arguments)}function Rt(C,I){return new Promise((R,L)=>{const W=Math.max(I-Date.now(),0),ee=setTimeout(R,W);C.addEventListener(()=>{clearTimeout(ee),L(Rn.create("fetch-throttle",{throttleEndTimeMillis:I}))})})}function nd(C){if(!(C instanceof X.ZR&&C.customData))return!1;const I=Number(C.customData.httpStatus);return 429===I||500===I||503===I||504===I}class Tl{constructor(){this.listeners=[]}addEventListener(I){this.listeners.push(I)}abort(){this.listeners.forEach(I=>I())}}function Al(){return wo.apply(this,arguments)}function wo(){return(wo=(0,O.Z)(function*(){if(!(0,X.hl)())return Vn.warn(Rn.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,X.eu)()}catch(C){return Vn.warn(Rn.create("indexeddb-unavailable",{errorInfo:C}).message),!1}return!0})).apply(this,arguments)}function vs(){return(vs=(0,O.Z)(function*(C,I,R,L,W,ee,Me){var xe;const nt=$h(C);nt.then(In=>{R[In.measurementId]=In.appId,C.options.measurementId&&In.measurementId!==C.options.measurementId&&Vn.warn(`The measurement ID in the local Firebase config (${C.options.measurementId}) does not match the measurement ID fetched from the server (${In.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(In=>Vn.error(In)),I.push(nt);const It=Al().then(In=>{if(In)return L.getId()}),[Pt,Mt]=yield Promise.all([nt,It]);eg()||Xp(ee,Pt.measurementId),W("js",new Date);const Un=null!==(xe=null==Me?void 0:Me.config)&&void 0!==xe?xe:{};return Un.origin="firebase",Un.update=!0,null!=Mt&&(Un[Oy]=Mt),W("config",Pt.measurementId,Un),Pt.measurementId})).apply(this,arguments)}class Jo{constructor(I){this.app=I}_delete(){return delete hi[this.app.options.appId],Promise.resolve()}}let hi={},Ks=[];const fi={};let Zs,Yi,Zi="dataLayer",Ml=!1;function Pi(C,I,R){!function bo(){const C=[];if((0,X.ru)()&&C.push("This is a browser extension environment."),(0,X.zI)()||C.push("Cookies are not available."),C.length>0){const I=C.map((L,W)=>`(${W+1}) ${L}`).join(" "),R=Rn.create("invalid-analytics-context",{errorInfo:I});Vn.warn(R.message)}}();const L=C.options.appId;if(!L)throw Rn.create("no-app-id");if(!C.options.apiKey){if(!C.options.measurementId)throw Rn.create("no-api-key");Vn.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${C.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=hi[L])throw Rn.create("already-exists",{id:L});if(!Ml){!function _s(C){let I=[];Array.isArray(window[C])?I=window[C]:window[C]=I}(Zi);const{wrappedGtag:ee,gtagCore:Me}=function jh(C,I,R,L,W){let ee=function(...Me){window[L].push(arguments)};return window[W]&&"function"==typeof window[W]&&(ee=window[W]),window[W]=function ed(C,I,R,L){function ee(){return(ee=(0,O.Z)(function*(Me,xe,nt){try{"event"===Me?yield Il(C,I,R,xe,nt):"config"===Me?yield Yo(C,I,R,L,xe,nt):C("set",xe)}catch(It){Vn.error(It)}})).apply(this,arguments)}return function W(Me,xe,nt){return ee.apply(this,arguments)}}(ee,C,I,R),{gtagCore:ee,wrappedGtag:window[W]}}(hi,Ks,fi,Zi,"gtag");Yi=ee,Zs=Me,Ml=!0}return hi[L]=function Bn(C,I,R,L,W,ee,Me){return vs.apply(this,arguments)}(C,Ks,fi,I,Zs,Zi,R),new Jo(C)}function ea(){return(ea=(0,O.Z)(function*(C,I,R,L,W){if(W&&W.global)C("event",R,L);else{const ee=yield I;C("event",R,Object.assign(Object.assign({},L),{send_to:ee}))}})).apply(this,arguments)}function vn(){return Ys.apply(this,arguments)}function Ys(){return(Ys=(0,O.Z)(function*(){if((0,X.ru)()||!(0,X.zI)()||!(0,X.hl)())return!1;try{return yield(0,X.eu)()}catch(C){return!1}})).apply(this,arguments)}const Qs="@firebase/analytics";!function ig(){(0,ae._registerComponent)(new pe.wA(Dl,(I,{options:R})=>Pi(I.getProvider("app").getImmediate(),I.getProvider("installations-internal").getImmediate(),R),"PUBLIC")),(0,ae._registerComponent)(new pe.wA("analytics-internal",function C(I){try{const R=I.getProvider(Dl).getImmediate();return{logEvent:(L,W,ee)=>function rg(C,I,R,L){C=(0,X.m9)(C),function Xo(C,I,R,L,W){return ea.apply(this,arguments)}(Yi,hi[C.app.options.appId],I,R,L).catch(W=>Vn.error(W))}(R,L,W,ee)}}catch(R){throw Rn.create("interop-component-reg-failed",{reason:R})}},"PRIVATE")),(0,ae.registerVersion)(Qs,"0.7.8"),(0,ae.registerVersion)(Qs,"0.7.8","esm2017")}();var Js=k(4408),Su=k(7565);const xl=new class wn extends Su.v{}(class Es extends Js.o{constructor(I,R){super(I,R),this.scheduler=I,this.work=R}schedule(I,R=0){return R>0?super.schedule(I,R):(this.delay=R,this.state=I,this.scheduler.flush(this),this)}execute(I,R){return R>0||this.closed?super.execute(I,R):this._execute(I,R)}requestAsyncId(I,R,L=0){return null!=L&&L>0||null==L&&this.delay>0?super.requestAsyncId(I,R,L):I.flush(this)}});var sg=k(4986),Rl=k(8505),Sr=k(9468),pi=k(5363);const Nl=new f.GfV("7.3.0"),ws="__angularfire_symbol__analyticsIsSupportedValue",Vi="__angularfire_symbol__analyticsIsSupported",Xi="__angularfire_symbol__remoteConfigIsSupportedValue",Na="__angularfire_symbol__remoteConfigIsSupported",Ol="__angularfire_symbol__messagingIsSupportedValue",kl="__angularfire_symbol__messagingIsSupported";function Xs(C,I,R){if(I){if(1===I.length)return I[0];const ee=I.filter(Me=>Me.app===R);if(1===ee.length)return ee[0]}return R.container.getProvider(C).getImmediate({optional:!0})}globalThis[Vi]||(globalThis[Vi]=vn().then(C=>globalThis[ws]=C).catch(()=>globalThis[ws]=!1)),globalThis[kl]||(globalThis[kl]=Yc().then(C=>globalThis[Ol]=C).catch(()=>globalThis[Ol]=!1)),globalThis[Na]||(globalThis[Na]=fo().then(C=>globalThis[Xi]=C).catch(()=>globalThis[Xi]=!1));const od=(C,I)=>{const R=I?[I]:(0,Z.C6)(),L=[];return R.forEach(W=>{W.container.getProvider(C).instances.forEach(Me=>{L.includes(Me)||L.push(Me)})}),L};function Co(){}class Mu{constructor(I,R=xl){this.zone=I,this.delegate=R}now(){return this.delegate.now()}schedule(I,R,L){const W=this.zone;return this.delegate.schedule(function(Me){W.runGuarded(()=>{I.apply(this,[Me])})},R,L)}}class es{constructor(I){this.zone=I,this.task=null}call(I,R){const L=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Co,{},Co,Co)),R.pipe((0,Rl.b)({next:L,complete:L,error:L})).subscribe(I).add(L)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let xu=(()=>{class C{constructor(R){this.ngZone=R,this.outsideAngular=R.runOutsideAngular(()=>new Mu(Zone.current)),this.insideAngular=R.run(()=>new Mu(Zone.current,sg.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return C.\u0275fac=function(R){return new(R||C)(f.LFG(f.R0b))},C.\u0275prov=f.Yz7({token:C,factory:C.\u0275fac,providedIn:"root"}),C})();function ts(){const C=globalThis.\u0275AngularFireScheduler;if(!C)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return C}function Ll(C){return ts(),function Io(C){return function(R){return(R=R.lift(new es(C.ngZone))).pipe((0,Sr.R)(C.outsideAngular),(0,pi.Q)(C.insideAngular))}}(ts())(C)}},2090:(dt,Ae,k)=>{k.d(Ae,{$s:()=>co,BH:()=>Se,G6:()=>re,L:()=>le,LL:()=>Fe,Lj:()=>Ht,Mn:()=>He,Sg:()=>Ne,UG:()=>we,US:()=>ie,X3:()=>pt,ZB:()=>Q,ZR:()=>ge,b$:()=>Ie,d:()=>ye,eu:()=>J,hl:()=>Ke,jU:()=>it,m9:()=>ft,ne:()=>ht,pd:()=>us,r3:()=>Jt,ru:()=>Qe,tV:()=>$,uI:()=>he,vZ:()=>Rs,w1:()=>ve,xO:()=>zi,xb:()=>ur,z$:()=>Le,zI:()=>oe,zd:()=>Pr});var f=k(5861);const X=function(j){const V=[];let q=0;for(let ce=0;ce<j.length;ce++){let Y=j.charCodeAt(ce);Y<128?V[q++]=Y:Y<2048?(V[q++]=Y>>6|192,V[q++]=63&Y|128):55296==(64512&Y)&&ce+1<j.length&&56320==(64512&j.charCodeAt(ce+1))?(Y=65536+((1023&Y)<<10)+(1023&j.charCodeAt(++ce)),V[q++]=Y>>18|240,V[q++]=Y>>12&63|128,V[q++]=Y>>6&63|128,V[q++]=63&Y|128):(V[q++]=Y>>12|224,V[q++]=Y>>6&63|128,V[q++]=63&Y|128)}return V},ie={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(j,V){if(!Array.isArray(j))throw Error("encodeByteArray takes an array as a parameter");this.init_();const q=V?this.byteToCharMapWebSafe_:this.byteToCharMap_,ce=[];for(let Y=0;Y<j.length;Y+=3){const Be=j[Y],vt=Y+1<j.length,Xt=vt?j[Y+1]:0,wr=Y+2<j.length,Yt=wr?j[Y+2]:0;let fn=(15&Xt)<<2|Yt>>6,tr=63&Yt;wr||(tr=64,vt||(fn=64)),ce.push(q[Be>>2],q[(3&Be)<<4|Xt>>4],q[fn],q[tr])}return ce.join("")},encodeString(j,V){return this.HAS_NATIVE_SUPPORT&&!V?btoa(j):this.encodeByteArray(X(j),V)},decodeString(j,V){return this.HAS_NATIVE_SUPPORT&&!V?atob(j):function(j){const V=[];let q=0,ce=0;for(;q<j.length;){const Y=j[q++];if(Y<128)V[ce++]=String.fromCharCode(Y);else if(Y>191&&Y<224){const Be=j[q++];V[ce++]=String.fromCharCode((31&Y)<<6|63&Be)}else if(Y>239&&Y<365){const wr=((7&Y)<<18|(63&j[q++])<<12|(63&j[q++])<<6|63&j[q++])-65536;V[ce++]=String.fromCharCode(55296+(wr>>10)),V[ce++]=String.fromCharCode(56320+(1023&wr))}else{const Be=j[q++],vt=j[q++];V[ce++]=String.fromCharCode((15&Y)<<12|(63&Be)<<6|63&vt)}}return V.join("")}(this.decodeStringToByteArray(j,V))},decodeStringToByteArray(j,V){this.init_();const q=V?this.charToByteMapWebSafe_:this.charToByteMap_,ce=[];for(let Y=0;Y<j.length;){const Be=q[j.charAt(Y++)],Xt=Y<j.length?q[j.charAt(Y)]:0;++Y;const Yt=Y<j.length?q[j.charAt(Y)]:64;++Y;const kt=Y<j.length?q[j.charAt(Y)]:64;if(++Y,null==Be||null==Xt||null==Yt||null==kt)throw Error();ce.push(Be<<2|Xt>>4),64!==Yt&&(ce.push(Xt<<4&240|Yt>>2),64!==kt&&ce.push(Yt<<6&192|kt))}return ce},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let j=0;j<this.ENCODED_VALS.length;j++)this.byteToCharMap_[j]=this.ENCODED_VALS.charAt(j),this.charToByteMap_[this.byteToCharMap_[j]]=j,this.byteToCharMapWebSafe_[j]=this.ENCODED_VALS_WEBSAFE.charAt(j),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[j]]=j,j>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(j)]=j,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(j)]=j)}}},le=function(j){return function(j){const V=X(j);return ie.encodeByteArray(V,!0)}(j).replace(/\./g,"")},$=function(j){try{return ie.decodeString(j,!0)}catch(V){console.error("base64Decode failed: ",V)}return null};function Q(j,V){if(!(V instanceof Object))return V;switch(V.constructor){case Date:return new Date(V.getTime());case Object:void 0===j&&(j={});break;case Array:j=[];break;default:return V}for(const q in V)!V.hasOwnProperty(q)||!We(q)||(j[q]=Q(j[q],V[q]));return j}function We(j){return"__proto__"!==j}class Se{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((V,q)=>{this.resolve=V,this.reject=q})}wrapCallback(V){return(q,ce)=>{q?this.reject(q):this.resolve(ce),"function"==typeof V&&(this.promise.catch(()=>{}),1===V.length?V(q):V(q,ce))}}}function Ne(j,V){if(j.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const ce=V||"demo-project",Y=j.iat||0,Be=j.sub||j.user_id;if(!Be)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const vt=Object.assign({iss:`https://securetoken.google.com/${ce}`,aud:ce,iat:Y,exp:Y+3600,auth_time:Y,sub:Be,user_id:Be,firebase:{sign_in_provider:"custom",identities:{}}},j);return[le(JSON.stringify({alg:"none",type:"JWT"})),le(JSON.stringify(vt)),""].join(".")}function Le(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function he(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Le())}function we(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(j){return!1}}function it(){return"object"==typeof self&&self.self===self}function Qe(){const j="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof j&&void 0!==j.id}function Ie(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function ye(){return Le().indexOf("Electron/")>=0}function ve(){const j=Le();return j.indexOf("MSIE ")>=0||j.indexOf("Trident/")>=0}function He(){return Le().indexOf("MSAppHost/")>=0}function re(){return!we()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Ke(){return"object"==typeof indexedDB}function J(){return new Promise((j,V)=>{try{let q=!0;const ce="validate-browser-context-for-indexeddb-analytics-module",Y=self.indexedDB.open(ce);Y.onsuccess=()=>{Y.result.close(),q||self.indexedDB.deleteDatabase(ce),j(!0)},Y.onupgradeneeded=()=>{q=!1},Y.onerror=()=>{var Be;V((null===(Be=Y.error)||void 0===Be?void 0:Be.message)||"")}}catch(q){V(q)}})}function oe(){return!("undefined"==typeof navigator||!navigator.cookieEnabled)}class ge extends Error{constructor(V,q,ce){super(q),this.code=V,this.customData=ce,this.name="FirebaseError",Object.setPrototypeOf(this,ge.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Fe.prototype.create)}}class Fe{constructor(V,q,ce){this.service=V,this.serviceName=q,this.errors=ce}create(V,...q){const ce=q[0]||{},Y=`${this.service}/${V}`,Be=this.errors[V],vt=Be?function St(j,V){return j.replace(Qt,(q,ce)=>{const Y=V[ce];return null!=Y?String(Y):`<${ce}?>`})}(Be,ce):"Error";return new ge(Y,`${this.serviceName}: ${vt} (${Y}).`,ce)}}const Qt=/\{\$([^}]+)}/g;function Jt(j,V){return Object.prototype.hasOwnProperty.call(j,V)}function ur(j){for(const V in j)if(Object.prototype.hasOwnProperty.call(j,V))return!1;return!0}function Rs(j,V){if(j===V)return!0;const q=Object.keys(j),ce=Object.keys(V);for(const Y of q){if(!ce.includes(Y))return!1;const Be=j[Y],vt=V[Y];if(kr(Be)&&kr(vt)){if(!Rs(Be,vt))return!1}else if(Be!==vt)return!1}for(const Y of ce)if(!q.includes(Y))return!1;return!0}function kr(j){return null!==j&&"object"==typeof j}function zi(j){const V=[];for(const[q,ce]of Object.entries(j))Array.isArray(ce)?ce.forEach(Y=>{V.push(encodeURIComponent(q)+"="+encodeURIComponent(Y))}):V.push(encodeURIComponent(q)+"="+encodeURIComponent(ce));return V.length?"&"+V.join("&"):""}function Pr(j){const V={};return j.replace(/^\?/,"").split("&").forEach(ce=>{if(ce){const[Y,Be]=ce.split("=");V[decodeURIComponent(Y)]=decodeURIComponent(Be)}}),V}function us(j){const V=j.indexOf("?");if(!V)return"";const q=j.indexOf("#",V);return j.substring(V,q>0?q:void 0)}function ht(j,V){const q=new Hr(j,V);return q.subscribe.bind(q)}class Hr{constructor(V,q){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=q,this.task.then(()=>{V(this)}).catch(ce=>{this.error(ce)})}next(V){this.forEachObserver(q=>{q.next(V)})}error(V){this.forEachObserver(q=>{q.error(V)}),this.close(V)}complete(){this.forEachObserver(V=>{V.complete()}),this.close()}subscribe(V,q,ce){let Y;if(void 0===V&&void 0===q&&void 0===ce)throw new Error("Missing Observer.");Y=function Hn(j,V){if("object"!=typeof j||null===j)return!1;for(const q of V)if(q in j&&"function"==typeof j[q])return!0;return!1}(V,["next","error","complete"])?V:{next:V,error:q,complete:ce},void 0===Y.next&&(Y.next=si),void 0===Y.error&&(Y.error=si),void 0===Y.complete&&(Y.complete=si);const Be=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?Y.error(this.finalError):Y.complete()}catch(vt){}}),this.observers.push(Y),Be}unsubscribeOne(V){void 0===this.observers||void 0===this.observers[V]||(delete this.observers[V],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(V){if(!this.finalized)for(let q=0;q<this.observers.length;q++)this.sendOne(q,V)}sendOne(V,q){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[V])try{q(this.observers[V])}catch(ce){"undefined"!=typeof console&&console.error&&console.error(ce)}})}close(V){this.finalized||(this.finalized=!0,void 0!==V&&(this.finalError=V),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function si(){}function co(j,V=1e3,q=2){const ce=V*Math.pow(q,j),Y=Math.round(.5*ce*(Math.random()-.5)*2);return Math.min(144e5,ce+Y)}function ft(j){return j&&j._delegate?j._delegate:j}function Er(j,V){return new Promise((q,ce)=>{j.onsuccess=Y=>{q(Y.target.result)},j.onerror=Y=>{var Be;ce(`${V}: ${null===(Be=Y.target.error)||void 0===Be?void 0:Be.message}`)}})}class jt{constructor(V){this._db=V,this.objectStoreNames=this._db.objectStoreNames}transaction(V,q="readonly"){return new Xe(this._db.transaction.call(this._db,V,q))}createObjectStore(V,q){return new Te(this._db.createObjectStore(V,q))}close(){this._db.close()}}class Xe{constructor(V){this._transaction=V,this.complete=new Promise((q,ce)=>{this._transaction.oncomplete=function(){q()},this._transaction.onerror=()=>{ce(this._transaction.error)},this._transaction.onabort=()=>{ce(this._transaction.error)}})}objectStore(V){return new Te(this._transaction.objectStore(V))}}class Te{constructor(V){this._store=V}index(V){return new tt(this._store.index(V))}createIndex(V,q,ce){return new tt(this._store.createIndex(V,q,ce))}get(V){return Er(this._store.get(V),"Error reading from IndexedDB")}put(V,q){return Er(this._store.put(V,q),"Error writing to IndexedDB")}delete(V){return Er(this._store.delete(V),"Error deleting from IndexedDB")}clear(){return Er(this._store.clear(),"Error clearing IndexedDB object store")}}class tt{constructor(V){this._index=V}get(V){return Er(this._index.get(V),"Error reading from IndexedDB")}}function pt(j,V,q){return new Promise((ce,Y)=>{try{const Be=indexedDB.open(j,V);Be.onsuccess=vt=>{ce(new jt(vt.target.result))},Be.onerror=vt=>{var Xt;Y(`Error opening indexedDB: ${null===(Xt=vt.target.error)||void 0===Xt?void 0:Xt.message}`)},Be.onupgradeneeded=vt=>{q(new jt(Be.result),vt.oldVersion,vt.newVersion,new Xe(Be.transaction))}}catch(Be){Y(`Error opening indexedDB: ${Be.message}`)}})}function Ht(j){return Bt.apply(this,arguments)}function Bt(){return(Bt=(0,f.Z)(function*(j){return new Promise((V,q)=>{try{const ce=indexedDB.deleteDatabase(j);ce.onsuccess=()=>{V()},ce.onerror=Y=>{var Be;q(`Error deleting indexedDB database "${j}": ${null===(Be=Y.target.error)||void 0===Be?void 0:Be.message}`)}}catch(ce){q(`Error deleting indexedDB database "${j}": ${ce.message}`)}})})).apply(this,arguments)}},1947:(dt,Ae,k)=>{var f=k(5e3);let Z=null;function O(){return Z}const ie=new f.OlP("DocumentToken");let de=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=f.Yz7({token:n,factory:function(){return function le(){return(0,f.LFG)(H)}()},providedIn:"platform"}),n})();const $=new f.OlP("Location Initialized");let H=(()=>{class n extends de{constructor(t){super(),this._doc=t,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return O().getBaseHref(this._doc)}onPopState(t){const r=O().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){const r=O().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(t){this.location.pathname=t}pushState(t,r,i){Q()?this._history.pushState(t,r,i):this.location.hash=i}replaceState(t,r,i){Q()?this._history.replaceState(t,r,i):this.location.hash=i}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(ie))},n.\u0275prov=f.Yz7({token:n,factory:function(){return function We(){return new H((0,f.LFG)(ie))}()},providedIn:"platform"}),n})();function Q(){return!!window.history.pushState}function Se(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function Ne(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function Le(n){return n&&"?"!==n[0]?"?"+n:n}let he=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=f.Yz7({token:n,factory:function(){return function we(n){const e=(0,f.LFG)(ie).location;return new Qe((0,f.LFG)(de),e&&e.origin||"")}()},providedIn:"root"}),n})();const it=new f.OlP("appBaseHref");let Qe=(()=>{class n extends he{constructor(t,r){if(super(),this._platformLocation=t,this._removeListenerFns=[],null==r&&(r=this._platformLocation.getBaseHrefFromDOM()),null==r)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=r}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return Se(this._baseHref,t)}path(t=!1){const r=this._platformLocation.pathname+Le(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,u){const c=this.prepareExternalUrl(i+Le(u));this._platformLocation.pushState(t,r,c)}replaceState(t,r,i,u){const c=this.prepareExternalUrl(i+Le(u));this._platformLocation.replaceState(t,r,c)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(t=0){var r,i;null===(i=(r=this._platformLocation).historyGo)||void 0===i||i.call(r,t)}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(de),f.LFG(it,8))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})(),Ie=(()=>{class n extends he{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(t){const r=Se(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,i,u){let c=this.prepareExternalUrl(i+Le(u));0==c.length&&(c=this._platformLocation.pathname),this._platformLocation.pushState(t,r,c)}replaceState(t,r,i,u){let c=this.prepareExternalUrl(i+Le(u));0==c.length&&(c=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,c)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(t=0){var r,i;null===(i=(r=this._platformLocation).historyGo)||void 0===i||i.call(r,t)}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(de),f.LFG(it,8))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})(),ye=(()=>{class n{constructor(t,r){this._subject=new f.vpe,this._urlChangeListeners=[],this._platformStrategy=t;const i=this._platformStrategy.getBaseHref();this._platformLocation=r,this._baseHref=Ne($e(i)),this._platformStrategy.onPopState(u=>{this._subject.emit({url:this.path(!0),pop:!0,state:u.state,type:u.type})})}path(t=!1){return this.normalize(this._platformStrategy.path(t))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+Le(r))}normalize(t){return n.stripTrailingSlash(function He(n,e){return n&&e.startsWith(n)?e.substring(n.length):e}(this._baseHref,$e(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._platformStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._platformStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Le(r)),i)}replaceState(t,r="",i=null){this._platformStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Le(r)),i)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}historyGo(t=0){var r,i;null===(i=(r=this._platformStrategy).historyGo)||void 0===i||i.call(r,t)}onUrlChange(t){this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}))}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r,complete:i})}}return n.normalizeQueryParams=Le,n.joinWithSlash=Se,n.stripTrailingSlash=Ne,n.\u0275fac=function(t){return new(t||n)(f.LFG(he),f.LFG(de))},n.\u0275prov=f.Yz7({token:n,factory:function(){return function ve(){return new ye((0,f.LFG)(he),(0,f.LFG)(de))}()},providedIn:"root"}),n})();function $e(n){return n.replace(/\/index.html$/,"")}let ds=(()=>{class n{constructor(t,r,i,u){this._iterableDiffers=t,this._keyValueDiffers=r,this._ngEl=i,this._renderer=u,this._iterableDiffer=null,this._keyValueDiffer=null,this._initialClasses=[],this._rawClass=null}set klass(t){this._removeClasses(this._initialClasses),this._initialClasses="string"==typeof t?t.split(/\s+/):[],this._applyClasses(this._initialClasses),this._applyClasses(this._rawClass)}set ngClass(t){this._removeClasses(this._rawClass),this._applyClasses(this._initialClasses),this._iterableDiffer=null,this._keyValueDiffer=null,this._rawClass="string"==typeof t?t.split(/\s+/):t,this._rawClass&&((0,f.sIi)(this._rawClass)?this._iterableDiffer=this._iterableDiffers.find(this._rawClass).create():this._keyValueDiffer=this._keyValueDiffers.find(this._rawClass).create())}ngDoCheck(){if(this._iterableDiffer){const t=this._iterableDiffer.diff(this._rawClass);t&&this._applyIterableChanges(t)}else if(this._keyValueDiffer){const t=this._keyValueDiffer.diff(this._rawClass);t&&this._applyKeyValueChanges(t)}}_applyKeyValueChanges(t){t.forEachAddedItem(r=>this._toggleClass(r.key,r.currentValue)),t.forEachChangedItem(r=>this._toggleClass(r.key,r.currentValue)),t.forEachRemovedItem(r=>{r.previousValue&&this._toggleClass(r.key,!1)})}_applyIterableChanges(t){t.forEachAddedItem(r=>{if("string"!=typeof r.item)throw new Error(`NgClass can only toggle CSS classes expressed as strings, got ${(0,f.AaK)(r.item)}`);this._toggleClass(r.item,!0)}),t.forEachRemovedItem(r=>this._toggleClass(r.item,!1))}_applyClasses(t){t&&(Array.isArray(t)||t instanceof Set?t.forEach(r=>this._toggleClass(r,!0)):Object.keys(t).forEach(r=>this._toggleClass(r,!!t[r])))}_removeClasses(t){t&&(Array.isArray(t)||t instanceof Set?t.forEach(r=>this._toggleClass(r,!1)):Object.keys(t).forEach(r=>this._toggleClass(r,!1)))}_toggleClass(t,r){(t=t.trim())&&t.split(/\s+/g).forEach(i=>{r?this._renderer.addClass(this._ngEl.nativeElement,i):this._renderer.removeClass(this._ngEl.nativeElement,i)})}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(f.ZZ4),f.Y36(f.aQg),f.Y36(f.SBq),f.Y36(f.Qsj))},n.\u0275dir=f.lG2({type:n,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"}}),n})();class Ps{constructor(e,t,r,i){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=i}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let nr=(()=>{class n{constructor(t,r,i){this._viewContainer=t,this._template=r,this._differs=i,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const r=this._viewContainer;t.forEachOperation((i,u,c)=>{if(null==i.previousIndex)r.createEmbeddedView(this._template,new Ps(i.item,this._ngForOf,-1,-1),null===c?void 0:c);else if(null==c)r.remove(null===u?void 0:u);else if(null!==u){const p=r.get(u);r.move(p,c),hs(p,i)}});for(let i=0,u=r.length;i<u;i++){const p=r.get(i).context;p.index=i,p.count=u,p.ngForOf=this._ngForOf}t.forEachIdentityChange(i=>{hs(r.get(i.currentIndex),i)})}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(f.s_b),f.Y36(f.Rgc),f.Y36(f.ZZ4))},n.\u0275dir=f.lG2({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}}),n})();function hs(n,e){n.context.$implicit=e.item}let ai=(()=>{class n{constructor(t,r){this._viewContainer=t,this._context=new ln,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){ou("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){ou("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(f.s_b),f.Y36(f.Rgc))},n.\u0275dir=f.lG2({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}}),n})();class ln{constructor(){this.$implicit=null,this.ngIf=null}}function ou(n,e){if(e&&!e.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${(0,f.AaK)(e)}'.`)}class Uc{createSubscription(e,t){return e.subscribe({next:t,error:r=>{throw r}})}dispose(e){e.unsubscribe()}onDestroy(e){e.unsubscribe()}}class Wp{createSubscription(e,t){return e.then(t,r=>{throw r})}dispose(e){}onDestroy(e){}}const ps=new Wp,Kp=new Uc;let cu=(()=>{class n{constructor(t){this._ref=t,this._latestValue=null,this._subscription=null,this._obj=null,this._strategy=null}ngOnDestroy(){this._subscription&&this._dispose()}transform(t){return this._obj?t!==this._obj?(this._dispose(),this.transform(t)):this._latestValue:(t&&this._subscribe(t),this._latestValue)}_subscribe(t){this._obj=t,this._strategy=this._selectStrategy(t),this._subscription=this._strategy.createSubscription(t,r=>this._updateLatestValue(t,r))}_selectStrategy(t){if((0,f.QGY)(t))return ps;if((0,f.F4k)(t))return Kp;throw function Ln(n,e){return new f.vHH(2100,"")}()}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(t,r){t===this._obj&&(this._latestValue=r,this._ref.markForCheck())}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(f.sBO,16))},n.\u0275pipe=f.Yjl({name:"async",type:n,pure:!1}),n})(),br=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({}),n})();const Bs="browser";function Dr(n){return n===Bs}function hr(n){return"server"===n}let gu=(()=>{class n{}return n.\u0275prov=(0,f.Yz7)({token:n,providedIn:"root",factory:()=>new mu((0,f.LFG)(ie),window)}),n})();class mu{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function Aa(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&(n.body.createShadowRoot||n.body.attachShadow)){const r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let i=r.currentNode;for(;i;){const u=i.shadowRoot;if(u){const c=u.getElementById(e)||u.querySelector(`[name="${e}"]`);if(c)return c}i=r.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){if(this.supportScrollRestoration()){const t=this.window.history;t&&t.scrollRestoration&&(t.scrollRestoration=e)}}scrollToElement(e){const t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,i=t.top+this.window.pageYOffset,u=this.offset();this.window.scrollTo(r-u[0],i-u[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const e=gs(this.window.history)||gs(Object.getPrototypeOf(this.window.history));return!(!e||!e.writable&&!e.set)}catch(e){return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch(e){return!1}}}function gs(n){return Object.getOwnPropertyDescriptor(n,"scrollRestoration")}class Us extends class zo extends class pe{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){!function X(n){Z||(Z=n)}(new Us)}onAndCancel(e,t,r){return e.addEventListener(t,r,!1),()=>{e.removeEventListener(t,r,!1)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function qc(){return cn=cn||document.querySelector("base"),cn?cn.getAttribute("href"):null}();return null==t?null:function mo(n){go=go||document.createElement("a"),go.setAttribute("href",n);const e=go.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){cn=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return function Ho(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const r=t.indexOf("="),[i,u]=-1==r?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(u)}return null}(document.cookie,e)}}let go,cn=null;const Cr=new f.OlP("TRANSITION_ID"),Sa=[{provide:f.ip1,useFactory:function Mn(n,e,t){return()=>{t.get(f.CZH).donePromise.then(()=>{const r=O(),i=e.querySelectorAll(`style[ng-transition="${n}"]`);for(let u=0;u<i.length;u++)r.remove(i[u])})}},deps:[Cr,ie,f.zs3],multi:!0}];class Ni{static init(){(0,f.VLi)(new Ni)}addToWindow(e){f.dqk.getAngularTestability=(r,i=!0)=>{const u=e.findTestabilityInTree(r,i);if(null==u)throw new Error("Could not find testability for element.");return u},f.dqk.getAllAngularTestabilities=()=>e.getAllTestabilities(),f.dqk.getAllAngularRootElements=()=>e.getAllRootElements(),f.dqk.frameworkStabilizers||(f.dqk.frameworkStabilizers=[]),f.dqk.frameworkStabilizers.push(r=>{const i=f.dqk.getAllAngularTestabilities();let u=i.length,c=!1;const p=function(y){c=c||y,u--,0==u&&r(c)};i.forEach(function(y){y.whenStable(p)})})}findTestabilityInTree(e,t,r){if(null==t)return null;const i=e.getTestability(t);return null!=i?i:r?O().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null}}let Ir=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();const js=new f.OlP("EventManagerPlugins");let ms=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(i=>i.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,r,i){return this._findPluginFor(r).addEventListener(t,r,i)}addGlobalEventListener(t,r,i){return this._findPluginFor(r).addGlobalEventListener(t,r,i)}getZone(){return this._zone}_findPluginFor(t){const r=this._eventNameToPlugin.get(t);if(r)return r;const i=this._plugins;for(let u=0;u<i.length;u++){const c=i[u];if(c.supports(t))return this._eventNameToPlugin.set(t,c),c}throw new Error(`No event manager plugin found for event ${t}`)}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(js),f.LFG(f.R0b))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();class yu{constructor(e){this._doc=e}addGlobalEventListener(e,t,r){const i=O().getGlobalEventTarget(this._doc,e);if(!i)throw new Error(`Unsupported event target ${i} for event ${t}`);return this.addEventListener(i,t,r)}}let zr=(()=>{class n{constructor(){this._stylesSet=new Set}addStyles(t){const r=new Set;t.forEach(i=>{this._stylesSet.has(i)||(this._stylesSet.add(i),r.add(i))}),this.onStylesAdded(r)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})(),$s=(()=>{class n extends zr{constructor(t){super(),this._doc=t,this._hostNodes=new Map,this._hostNodes.set(t.head,[])}_addStylesToHost(t,r,i){t.forEach(u=>{const c=this._doc.createElement("style");c.textContent=u,i.push(r.appendChild(c))})}addHost(t){const r=[];this._addStylesToHost(this._stylesSet,t,r),this._hostNodes.set(t,r)}removeHost(t){const r=this._hostNodes.get(t);r&&r.forEach(Hs),this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach((r,i)=>{this._addStylesToHost(t,i,r)})}ngOnDestroy(){this._hostNodes.forEach(t=>t.forEach(Hs))}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(ie))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();function Hs(n){O().remove(n)}const gt={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},_u=/%COMP%/g;function De(n,e,t){for(let r=0;r<e.length;r++){let i=e[r];Array.isArray(i)?De(n,i,t):(i=i.replace(_u,n),t.push(i))}return t}function Ut(n){return e=>{if("__ngUnwrap__"===e)return n;!1===n(e)&&(e.preventDefault(),e.returnValue=!1)}}let _n=(()=>{class n{constructor(t,r,i){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.rendererByCompId=new Map,this.defaultRenderer=new Wo(t)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;switch(r.encapsulation){case f.ifc.Emulated:{let i=this.rendererByCompId.get(r.id);return i||(i=new pl(this.eventManager,this.sharedStylesHost,r,this.appId),this.rendererByCompId.set(r.id,i)),i.applyToHost(t),i}case 1:case f.ifc.ShadowDom:return new gl(this.eventManager,this.sharedStylesHost,t,r);default:if(!this.rendererByCompId.has(r.id)){const i=De(r.id,r.styles,[]);this.sharedStylesHost.addStyles(i),this.rendererByCompId.set(r.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(ms),f.LFG($s),f.LFG(f.AFp))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();class Wo{constructor(e){this.eventManager=e,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?document.createElementNS(gt[t]||t,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,t){e.appendChild(t)}insertBefore(e,t,r){e&&e.insertBefore(t,r)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let r="string"==typeof e?document.querySelector(e):e;if(!r)throw new Error(`The selector "${e}" did not match any elements`);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;const u=gt[i];u?e.setAttributeNS(u,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){const i=gt[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(f.JOm.DashCase|f.JOm.Important)?e.style.setProperty(t,r,i&f.JOm.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&f.JOm.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e[t]=r}setValue(e,t){e.nodeValue=t}listen(e,t,r){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,Ut(r)):this.eventManager.addEventListener(e,t,Ut(r))}}class pl extends Wo{constructor(e,t,r,i){super(e),this.component=r;const u=De(i+"-"+r.id,r.styles,[]);t.addStyles(u),this.contentAttr=function dl(n){return"_ngcontent-%COMP%".replace(_u,n)}(i+"-"+r.id),this.hostAttr=function hl(n){return"_nghost-%COMP%".replace(_u,n)}(i+"-"+r.id)}applyToHost(e){super.setAttribute(e,this.hostAttr,"")}createElement(e,t){const r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}}class gl extends Wo{constructor(e,t,r,i){super(e),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const u=De(i.id,i.styles,[]);for(let c=0;c<u.length;c++){const p=document.createElement("style");p.textContent=u[c],this.shadowRoot.appendChild(p)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}}let zc=(()=>{class n extends yu{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i){return t.addEventListener(r,i,!1),()=>this.removeEventListener(t,r,i)}removeEventListener(t,r,i){return t.removeEventListener(r,i)}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(ie))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();const ml=["alt","control","meta","shift"],Gs={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},fr={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},ci={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let Du=(()=>{class n extends yu{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,r,i){const u=n.parseEventName(r),c=n.eventCallback(u.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>O().onAndCancel(t,u.domEventName,c))}static parseEventName(t){const r=t.toLowerCase().split("."),i=r.shift();if(0===r.length||"keydown"!==i&&"keyup"!==i)return null;const u=n._normalizeKey(r.pop());let c="";if(ml.forEach(y=>{const b=r.indexOf(y);b>-1&&(r.splice(b,1),c+=y+".")}),c+=u,0!=r.length||0===u.length)return null;const p={};return p.domEventName=i,p.fullKey=c,p}static getEventFullKey(t){let r="",i=function qs(n){let e=n.key;if(null==e){if(e=n.keyIdentifier,null==e)return"Unidentified";e.startsWith("U+")&&(e=String.fromCharCode(parseInt(e.substring(2),16)),3===n.location&&fr.hasOwnProperty(e)&&(e=fr[e]))}return Gs[e]||e}(t);return i=i.toLowerCase()," "===i?i="space":"."===i&&(i="dot"),ml.forEach(u=>{u!=i&&ci[u](t)&&(r+=u+".")}),r+=i,r}static eventCallback(t,r,i){return u=>{n.getEventFullKey(u)===t&&i.runGuarded(()=>r(u))}}static _normalizeKey(t){return"esc"===t?"escape":t}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(ie))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();const _l=(0,f.eFA)(f._c5,"browser",[{provide:f.Lbi,useValue:Bs},{provide:f.g9A,useValue:function Oi(){Us.makeCurrent(),Ni.init()},multi:!0},{provide:ie,useFactory:function Cu(){return(0,f.RDi)(document),document},deps:[]}]),xa=[{provide:f.zSh,useValue:"root"},{provide:f.qLn,useFactory:function yl(){return new f.qLn},deps:[]},{provide:js,useClass:zc,multi:!0,deps:[ie,f.R0b,f.Lbi]},{provide:js,useClass:Du,multi:!0,deps:[ie]},{provide:_n,useClass:_n,deps:[ms,$s,f.AFp]},{provide:f.FYo,useExisting:_n},{provide:zr,useExisting:$s},{provide:$s,useClass:$s,deps:[ie]},{provide:f.dDg,useClass:f.dDg,deps:[f.R0b]},{provide:ms,useClass:ms,deps:[js,f.R0b]},{provide:class mn{},useClass:Ir,deps:[]}];let Zo=(()=>{class n{constructor(t){if(t)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(t){return{ngModule:n,providers:[{provide:f.AFp,useValue:t.appId},{provide:Cr,useExisting:f.AFp},Sa]}}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(n,12))},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({providers:xa,imports:[br,f.hGG]}),n})();"undefined"!=typeof window&&window;var xn=k(8996),Rn=k(7669);function yt(...n){const e=(0,Rn.yG)(n);return(0,xn.D)(n,e)}var rr=k(7579);class Kr extends rr.x{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){const{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}}var Fr=k(8306);const{isArray:Qo}=Array,{getPrototypeOf:td,prototype:gn,keys:$h}=Object;function ki(n){if(1===n.length){const e=n[0];if(Qo(e))return{args:e,keys:null};if(function Au(n){return n&&"object"==typeof n&&td(n)===gn}(e)){const t=$h(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}var di=k(4671),Rt=k(4004);const{isArray:nd}=Array;function Al(n){return(0,Rt.U)(e=>function Tl(n,e){return nd(e)?n(...e):n(e)}(n,e))}function wo(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}var Bn=k(5403),vs=k(9672);function Ks(n,e,t){n?(0,vs.f)(t,n,e):e()}var fi=k(576);function Zi(n,e){const t=(0,fi.m)(n)?n:()=>n,r=i=>i.error(t());return new Fr.y(e?i=>e.schedule(r,0,i):r)}const Zs=(0,k(3888).d)(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});var Yi=k(8189);function rd(...n){return function Ml(){return(0,Yi.J)(1)}()((0,xn.D)(n,(0,Rn.yG)(n)))}var bo=k(8421);function Pi(n){return new Fr.y(e=>{(0,bo.Xf)(n()).subscribe(e)})}var Xo=k(515),ea=k(727),Lr=k(4482);function Fi(){return(0,Lr.e)((n,e)=>{let t=null;n._refCount++;const r=(0,Bn.x)(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(t=null);const i=n._connection,u=t;t=null,i&&(!u||i===u)&&i.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}class id extends Fr.y{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,(0,Lr.A)(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,null==e||e.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new ea.w0;const t=this.getSubject();e.add(this.source.subscribe((0,Bn.x)(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=ea.w0.EMPTY)}return e}refCount(){return Fi()(this)}}function Nn(n,e){return(0,Lr.e)((t,r)=>{let i=null,u=0,c=!1;const p=()=>c&&!i&&r.complete();t.subscribe((0,Bn.x)(r,y=>{null==i||i.unsubscribe();let b=0;const S=u++;(0,bo.Xf)(n(y,S)).subscribe(i=(0,Bn.x)(r,M=>r.next(e?e(y,M,S,b++):M),()=>{i=null,p()}))},()=>{c=!0,p()}))})}var Do=k(5698);function Li(...n){const e=(0,Rn.yG)(n);return(0,Lr.e)((t,r)=>{(e?rd(n,t,e):rd(n,t)).subscribe(r)})}function ta(n,e,t,r,i){return(u,c)=>{let p=t,y=e,b=0;u.subscribe((0,Bn.x)(c,S=>{const M=b++;y=p?n(y,S,M):(p=!0,S),r&&c.next(y)},i&&(()=>{p&&c.next(y),c.complete()})))}}function Ar(n,e){return(0,Lr.e)(ta(n,e,arguments.length>=2,!0))}function Qi(n,e){return(0,Lr.e)((t,r)=>{let i=0;t.subscribe((0,Bn.x)(r,u=>n.call(e,u,i++)&&r.next(u)))})}function Ji(n){return(0,Lr.e)((e,t)=>{let u,r=null,i=!1;r=e.subscribe((0,Bn.x)(t,void 0,void 0,c=>{u=(0,bo.Xf)(n(c,Ji(n)(e))),r?(r.unsubscribe(),r=null,u.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,u.subscribe(t))})}var vn=k(5577);function Ys(n,e){return(0,fi.m)(e)?(0,vn.z)(n,e,1):(0,vn.z)(n,1)}function sd(n){return n<=0?()=>Xo.E:(0,Lr.e)((e,t)=>{let r=[];e.subscribe((0,Bn.x)(t,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(const i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}function En(n=tg){return(0,Lr.e)((e,t)=>{let r=!1;e.subscribe((0,Bn.x)(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function tg(){return new Zs}function ng(n){return(0,Lr.e)((e,t)=>{let r=!1;e.subscribe((0,Bn.x)(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function Qs(n,e){const t=arguments.length>=2;return r=>r.pipe(n?Qi((i,u)=>n(i,u,r)):di.y,(0,Do.q)(1),t?ng(e):En(()=>new Zs))}var Zr=k(8505);class Js{constructor(e,t){this.id=e,this.url=t}}class Es extends Js{constructor(e,t,r="imperative",i=null){super(e,t),this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Su extends Js{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class wn extends Js{constructor(e,t,r){super(e,t),this.reason=r}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class xl extends Js{constructor(e,t,r){super(e,t),this.error=r}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class na extends Js{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class sg extends Js{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Rl extends Js{constructor(e,t,r,i,u){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=u}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class Sr extends Js{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class pi extends Js{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Nl{constructor(e){this.route=e}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class ws{constructor(e){this.route=e}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class Vi{constructor(e){this.snapshot=e}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Xi{constructor(e){this.snapshot=e}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Na{constructor(e){this.snapshot=e}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Ol{constructor(e){this.snapshot=e}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class kl{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}const Vt="primary";class Pl{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function qn(n){return new Pl(n)}const Fl="ngNavigationCancelingError";function Xs(n){const e=Error("NavigationCancelingError: "+n);return e[Fl]=!0,e}function Co(n,e,t){const r=t.path.split("/");if(r.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||r.length<n.length))return null;const i={};for(let u=0;u<r.length;u++){const c=r[u],p=n[u];if(c.startsWith(":"))i[c.substring(1)]=p;else if(c!==p.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function es(n,e){const t=n?Object.keys(n):void 0,r=e?Object.keys(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let u=0;u<t.length;u++)if(i=t[u],!xu(n[i],e[i]))return!1;return!0}function xu(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),r=[...e].sort();return t.every((i,u)=>r[u]===i)}return n===e}function ts(n){return Array.prototype.concat.apply([],n)}function ad(n){return n.length>0?n[n.length-1]:null}function zn(n,e){for(const t in n)n.hasOwnProperty(t)&&e(n[t],t)}function gi(n){return(0,f.CqO)(n)?n:(0,f.QGY)(n)?(0,xn.D)(Promise.resolve(n)):yt(n)}const Io={exact:function I(n,e,t){if(!Pt(n.segments,e.segments)||!ee(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!n.children[r]||!I(n.children[r],e.children[r],t))return!1;return!0},subset:L},ra={exact:function C(n,e){return es(n,e)},subset:function R(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>xu(n[t],e[t]))},ignored:()=>!0};function Ru(n,e,t){return Io[t.paths](n.root,e.root,t.matrixParams)&&ra[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function L(n,e,t){return W(n,e,e.segments,t)}function W(n,e,t,r){if(n.segments.length>t.length){const i=n.segments.slice(0,t.length);return!(!Pt(i,t)||e.hasChildren()||!ee(i,t,r))}if(n.segments.length===t.length){if(!Pt(n.segments,t)||!ee(n.segments,t,r))return!1;for(const i in e.children)if(!n.children[i]||!L(n.children[i],e.children[i],r))return!1;return!0}{const i=t.slice(0,n.segments.length),u=t.slice(n.segments.length);return!!(Pt(n.segments,i)&&ee(n.segments,i,r)&&n.children[Vt])&&W(n.children[Vt],e,u,r)}}function ee(n,e,t){return e.every((r,i)=>ra[t](n[i].parameters,r.parameters))}class Me{constructor(e,t,r){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=qn(this.queryParams)),this._queryParamMap}toString(){return ia.serialize(this)}}class xe{constructor(e,t){this.segments=e,this.children=t,this.parent=null,zn(t,(r,i)=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return To(this)}}class nt{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=qn(this.parameters)),this._parameterMap}toString(){return Oa(this)}}function Pt(n,e){return n.length===e.length&&n.every((t,r)=>t.path===e[r].path)}class Un{}class In{parse(e){const t=new ld(e);return new Me(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${Vr(e.root,!0)}`,r=function ky(n){const e=Object.keys(n).map(t=>{const r=n[t];return Array.isArray(r)?r.map(i=>`${Bi(t)}=${Bi(i)}`).join("&"):`${Bi(t)}=${Bi(r)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams);return`${t}${r}${"string"==typeof e.fragment?`#${function Ao(n){return encodeURI(n)}(e.fragment)}`:""}`}}const ia=new In;function To(n){return n.segments.map(e=>Oa(e)).join("/")}function Vr(n,e){if(!n.hasChildren())return To(n);if(e){const t=n.children[Vt]?Vr(n.children[Vt],!1):"",r=[];return zn(n.children,(i,u)=>{u!==Vt&&r.push(`${u}:${Vr(i,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}{const t=function Mt(n,e){let t=[];return zn(n.children,(r,i)=>{i===Vt&&(t=t.concat(e(r,i)))}),zn(n.children,(r,i)=>{i!==Vt&&(t=t.concat(e(r,i)))}),t}(n,(r,i)=>i===Vt?[Vr(n.children[Vt],!1)]:[`${i}:${Vr(r,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[Vt]?`${To(n)}/${t[0]}`:`${To(n)}/(${t.join("//")})`}}function mi(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Bi(n){return mi(n).replace(/%3B/gi,";")}function ud(n){return mi(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Vl(n){return decodeURIComponent(n)}function Bl(n){return Vl(n.replace(/\+/g,"%20"))}function Oa(n){return`${ud(n.path)}${function og(n){return Object.keys(n).map(e=>`;${ud(e)}=${ud(n[e])}`).join("")}(n.parameters)}`}const Py=/^[^\/()?;=#]+/;function bs(n){const e=n.match(Py);return e?e[0]:""}const Ul=/^[^=?&#]+/,Ly=/^[^&#]+/;class ld{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new xe([],{}):new xe([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[Vt]=new xe(e,t)),r}parseSegment(){const e=bs(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(e),new nt(Vl(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=bs(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const i=bs(this.remaining);i&&(r=i,this.capture(r))}e[Vl(t)]=Vl(r)}parseQueryParam(e){const t=function Fy(n){const e=n.match(Ul);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const c=function ag(n){const e=n.match(Ly);return e?e[0]:""}(this.remaining);c&&(r=c,this.capture(r))}const i=Bl(t),u=Bl(r);if(e.hasOwnProperty(i)){let c=e[i];Array.isArray(c)||(c=[c],e[i]=c),c.push(u)}else e[i]=u}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=bs(this.remaining),i=this.remaining[r.length];if("/"!==i&&")"!==i&&";"!==i)throw new Error(`Cannot parse url '${this.url}'`);let u;r.indexOf(":")>-1?(u=r.substr(0,r.indexOf(":")),this.capture(u),this.capture(":")):e&&(u=Vt);const c=this.parseChildren();t[u]=1===Object.keys(c).length?c[Vt]:new xe([],c),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new Error(`Expected "${e}".`)}}class Vy{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=Hh(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){const t=Hh(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=Gh(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return Gh(e,this._root).map(t=>t.value)}}function Hh(n,e){if(n===e.value)return e;for(const t of e.children){const r=Hh(n,t);if(r)return r}return null}function Gh(n,e){if(n===e.value)return[e];for(const t of e.children){const r=Gh(n,t);if(r.length)return r.unshift(e),r}return[]}class So{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function Mo(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class cd extends Vy{constructor(e,t){super(e),this.snapshot=t,hd(this,e)}toString(){return this.snapshot.toString()}}function ka(n,e){const t=function By(n,e){const c=new Nu([],{},{},"",{},Vt,e,null,n.root,-1,{});return new qh("",new So(c,[]))}(n,e),r=new Kr([new nt("",{})]),i=new Kr({}),u=new Kr({}),c=new Kr({}),p=new Kr(""),y=new sa(r,i,c,p,u,Vt,e,t.root);return y.snapshot=t.root,new cd(new So(y,[]),t)}class sa{constructor(e,t,r,i,u,c,p,y){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=u,this.outlet=c,this.component=p,this._futureSnapshot=y}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,Rt.U)(e=>qn(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,Rt.U)(e=>qn(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function Uy(n,e="emptyOnly"){const t=n.pathFromRoot;let r=0;if("always"!==e)for(r=t.length-1;r>=1;){const i=t[r],u=t[r-1];if(i.routeConfig&&""===i.routeConfig.path)r--;else{if(u.component)break;r--}}return function dd(n){return n.reduce((e,t)=>({params:Object.assign(Object.assign({},e.params),t.params),data:Object.assign(Object.assign({},e.data),t.data),resolve:Object.assign(Object.assign({},e.resolve),t._resolvedData)}),{params:{},data:{},resolve:{}})}(t.slice(r))}class Nu{constructor(e,t,r,i,u,c,p,y,b,S,M){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=u,this.outlet=c,this.component=p,this.routeConfig=y,this._urlSegment=b,this._lastPathIndex=S,this._resolve=M}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=qn(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=qn(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class qh extends Vy{constructor(e,t){super(t),this.url=e,hd(this,t)}toString(){return fd(this._root)}}function hd(n,e){e.value._routerState=n,e.children.forEach(t=>hd(n,t))}function fd(n){const e=n.children.length>0?` { ${n.children.map(fd).join(", ")} } `:"";return`${n.value}${e}`}function pd(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,es(e.queryParams,t.queryParams)||n.queryParams.next(t.queryParams),e.fragment!==t.fragment&&n.fragment.next(t.fragment),es(e.params,t.params)||n.params.next(t.params),function Mu(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!es(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.url.next(t.url),es(e.data,t.data)||n.data.next(t.data)}else n.snapshot=n._futureSnapshot,n.data.next(n._futureSnapshot.data)}function zh(n,e){const t=es(n.params,e.params)&&function It(n,e){return Pt(n,e)&&n.every((t,r)=>es(t.parameters,e[r].parameters))}(n.url,e.url);return t&&!(!n.parent!=!e.parent)&&(!n.parent||zh(n.parent,e.parent))}function jl(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const r=t.value;r._futureSnapshot=e.value;const i=function Wh(n,e,t){return e.children.map(r=>{for(const i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return jl(n,r,i);return jl(n,r)})}(n,e,t);return new So(r,i)}{if(n.shouldAttach(e.value)){const u=n.retrieve(e.value);if(null!==u){const c=u.route;return c.value._futureSnapshot=e.value,c.children=e.children.map(p=>jl(n,p)),c}}const r=function $y(n){return new sa(new Kr(n.url),new Kr(n.params),new Kr(n.queryParams),new Kr(n.fragment),new Kr(n.data),n.outlet,n.component,n)}(e.value),i=e.children.map(u=>jl(n,u));return new So(r,i)}}function oa(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function Ou(n){return"object"==typeof n&&null!=n&&n.outlets}function ug(n,e,t,r,i){let u={};if(r&&zn(r,(p,y)=>{u[y]=Array.isArray(p)?p.map(b=>`${b}`):`${p}`}),n===e)return new Me(t,u,i);const c=Kh(n,e,t);return new Me(c,u,i)}function Kh(n,e,t){const r={};return zn(n.children,(i,u)=>{r[u]=i===e?t:Kh(i,e,t)}),new xe(n.segments,r)}class Hy{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&oa(r[0]))throw new Error("Root segment cannot have matrix parameters");const i=r.find(Ou);if(i&&i!==ad(r))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class Zh{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}}function Wy(n,e,t){if(n||(n=new xe([],{})),0===n.segments.length&&n.hasChildren())return to(n,e,t);const r=function fE(n,e,t){let r=0,i=e;const u={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return u;const c=n.segments[i],p=t[r];if(Ou(p))break;const y=`${p}`,b=r<t.length-1?t[r+1]:null;if(i>0&&void 0===y)break;if(y&&b&&"object"==typeof b&&void 0===b.outlets){if(!Ui(y,b,c))return u;r+=2}else{if(!Ui(y,{},c))return u;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){const u=new xe(n.segments.slice(0,r.pathIndex),{});return u.children[Vt]=new xe(n.segments.slice(r.pathIndex),n.children),to(u,0,i)}return r.match&&0===i.length?new xe(n.segments,{}):r.match&&!n.hasChildren()?Yh(n,e,t):r.match?to(n,0,i):Yh(n,e,t)}function to(n,e,t){if(0===t.length)return new xe(n.segments,{});{const r=function zy(n){return Ou(n[0])?n[0].outlets:{[Vt]:n}}(t),i={};return zn(r,(u,c)=>{"string"==typeof u&&(u=[u]),null!==u&&(i[c]=Wy(n.children[c],e,u))}),zn(n.children,(u,c)=>{void 0===r[c]&&(i[c]=u)}),new xe(n.segments,i)}}function Yh(n,e,t){const r=n.segments.slice(0,e);let i=0;for(;i<t.length;){const u=t[i];if(Ou(u)){const y=ku(u.outlets);return new xe(r,y)}if(0===i&&oa(t[0])){r.push(new nt(n.segments[e].path,Qh(t[0]))),i++;continue}const c=Ou(u)?u.outlets[Vt]:`${u}`,p=i<t.length-1?t[i+1]:null;c&&p&&oa(p)?(r.push(new nt(c,Qh(p))),i+=2):(r.push(new nt(c,{})),i++)}return new xe(r,{})}function ku(n){const e={};return zn(n,(t,r)=>{"string"==typeof t&&(t=[t]),null!==t&&(e[r]=Yh(new xe([],{}),0,t))}),e}function Qh(n){const e={};return zn(n,(t,r)=>e[r]=`${t}`),e}function Ui(n,e,t){return n==t.path&&es(e,t.parameters)}class cg{constructor(e,t,r,i){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i}activate(e){const t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),pd(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){const i=Mo(t);e.children.forEach(u=>{const c=u.value.outlet;this.deactivateRoutes(u,i[c],r),delete i[c]}),zn(i,(u,c)=>{this.deactivateRouteAndItsChildren(u,r)})}deactivateRoutes(e,t,r){const i=e.value,u=t?t.value:null;if(i===u)if(i.component){const c=r.getContext(i.outlet);c&&this.deactivateChildRoutes(e,t,c.children)}else this.deactivateChildRoutes(e,t,r);else u&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,u=Mo(e);for(const c of Object.keys(u))this.deactivateRouteAndItsChildren(u[c],i);if(r&&r.outlet){const c=r.outlet.detach(),p=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:c,route:e,contexts:p})}}deactivateRouteAndOutlet(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,u=Mo(e);for(const c of Object.keys(u))this.deactivateRouteAndItsChildren(u[c],i);r&&r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated(),r.attachRef=null,r.resolver=null,r.route=null)}activateChildRoutes(e,t,r){const i=Mo(t);e.children.forEach(u=>{this.activateRoutes(u,i[u.value.outlet],r),this.forwardEvent(new Ol(u.value.snapshot))}),e.children.length&&this.forwardEvent(new Xi(e.value.snapshot))}activateRoutes(e,t,r){const i=e.value,u=t?t.value:null;if(pd(i),i===u)if(i.component){const c=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,c.children)}else this.activateChildRoutes(e,t,r);else if(i.component){const c=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){const p=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),c.children.onOutletReAttached(p.contexts),c.attachRef=p.componentRef,c.route=p.route.value,c.outlet&&c.outlet.attach(p.componentRef,p.route.value),pd(p.route.value),this.activateChildRoutes(e,null,c.children)}else{const p=function gd(n){for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig;if(t&&t.component)return null}return null}(i.snapshot),y=p?p.module.componentFactoryResolver:null;c.attachRef=null,c.route=i,c.resolver=y,c.outlet&&c.outlet.activateWith(i,y),this.activateChildRoutes(e,null,c.children)}}else this.activateChildRoutes(e,null,r)}}class md{constructor(e,t){this.routes=e,this.module=t}}function Pa(n){return"function"==typeof n}function Pu(n){return n instanceof Me}const Hl=Symbol("INITIAL_VALUE");function aa(){return Nn(n=>function Jo(...n){const e=(0,Rn.yG)(n),t=(0,Rn.jO)(n),{args:r,keys:i}=ki(n);if(0===r.length)return(0,xn.D)([],e);const u=new Fr.y(function hi(n,e,t=di.y){return r=>{Ks(e,()=>{const{length:i}=n,u=new Array(i);let c=i,p=i;for(let y=0;y<i;y++)Ks(e,()=>{const b=(0,xn.D)(n[y],e);let S=!1;b.subscribe((0,Bn.x)(r,M=>{u[y]=M,S||(S=!0,p--),p||r.next(t(u.slice()))},()=>{--c||r.complete()}))},r)},r)}}(r,e,i?c=>wo(i,c):di.y));return t?u.pipe(Al(t)):u}(n.map(e=>e.pipe((0,Do.q)(1),Li(Hl)))).pipe(Ar((e,t)=>{let r=!1;return t.reduce((i,u,c)=>i!==Hl?i:(u===Hl&&(r=!0),r||!1!==u&&c!==t.length-1&&!Pu(u)?i:u),e)},Hl),Qi(e=>e!==Hl),(0,Rt.U)(e=>Pu(e)?e:!0===e),(0,Do.q)(1)))}class Ky{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new Gl,this.attachRef=null}}class Gl{constructor(){this.contexts=new Map}onChildOutletCreated(e,t){const r=this.getOrCreateContext(e);r.outlet=t,this.contexts.set(e,r)}onChildOutletDestroyed(e){const t=this.getContext(e);t&&(t.outlet=null,t.attachRef=null)}onOutletDeactivated(){const e=this.contexts;return this.contexts=new Map,e}onOutletReAttached(e){this.contexts=e}getOrCreateContext(e){let t=this.getContext(e);return t||(t=new Ky,this.contexts.set(e,t)),t}getContext(e){return this.contexts.get(e)||null}}let ql=(()=>{class n{constructor(t,r,i,u,c){this.parentContexts=t,this.location=r,this.resolver=i,this.changeDetector=c,this.activated=null,this._activatedRoute=null,this.activateEvents=new f.vpe,this.deactivateEvents=new f.vpe,this.attachEvents=new f.vpe,this.detachEvents=new f.vpe,this.name=u||Vt,t.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const t=this.parentContexts.getContext(this.name);t&&t.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=t;const c=(r=r||this.resolver).resolveComponentFactory(t._futureSnapshot.routeConfig.component),p=this.parentContexts.getOrCreateContext(this.name).children,y=new tf(t,p,this.location.injector);this.activated=this.location.createComponent(c,this.location.length,y),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(Gl),f.Y36(f.s_b),f.Y36(f._Vd),f.$8M("name"),f.Y36(f.sBO))},n.\u0275dir=f.lG2({type:n,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"]}),n})();class tf{constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===sa?this.route:e===Gl?this.childContexts:this.parent.get(e,t)}}let nf=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=f.Xpm({type:n,selectors:[["ng-component"]],decls:1,vars:0,template:function(t,r){1&t&&f._UZ(0,"router-outlet")},directives:[ql],encapsulation:2}),n})();function zl(n,e=""){for(let t=0;t<n.length;t++){const r=n[t];yd(r,rf(e,r))}}function yd(n,e){n.children&&zl(n.children,e)}function rf(n,e){return e?n||e.path?n&&!e.path?`${n}/`:!n&&e.path?e.path:`${n}/${e.path}`:"":n}function sf(n){const e=n.children&&n.children.map(sf),t=e?Object.assign(Object.assign({},n),{children:e}):Object.assign({},n);return!t.component&&(e||t.loadChildren)&&t.outlet&&t.outlet!==Vt&&(t.component=nf),t}function sn(n){return n.outlet||Vt}function of(n,e){const t=n.filter(r=>sn(r)===e);return t.push(...n.filter(r=>sn(r)!==e)),t}const hg={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function Fu(n,e,t){var r;if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?Object.assign({},hg):{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};const u=(e.matcher||Co)(t,n,e);if(!u)return Object.assign({},hg);const c={};zn(u.posParams,(y,b)=>{c[b]=y.path});const p=u.consumed.length>0?Object.assign(Object.assign({},c),u.consumed[u.consumed.length-1].parameters):c;return{matched:!0,consumedSegments:u.consumed,remainingSegments:t.slice(u.consumed.length),parameters:p,positionalParamSegments:null!==(r=u.posParams)&&void 0!==r?r:{}}}function Wl(n,e,t,r,i="corrected"){if(t.length>0&&function Yy(n,e,t){return t.some(r=>vd(n,e,r)&&sn(r)!==Vt)}(n,t,r)){const c=new xe(e,function _d(n,e,t,r){const i={};i[Vt]=r,r._sourceSegment=n,r._segmentIndexShift=e.length;for(const u of t)if(""===u.path&&sn(u)!==Vt){const c=new xe([],{});c._sourceSegment=n,c._segmentIndexShift=e.length,i[sn(u)]=c}return i}(n,e,r,new xe(t,n.children)));return c._sourceSegment=n,c._segmentIndexShift=e.length,{segmentGroup:c,slicedSegments:[]}}if(0===t.length&&function fg(n,e,t){return t.some(r=>vd(n,e,r))}(n,t,r)){const c=new xe(n.segments,function Zy(n,e,t,r,i,u){const c={};for(const p of r)if(vd(n,t,p)&&!i[sn(p)]){const y=new xe([],{});y._sourceSegment=n,y._segmentIndexShift="legacy"===u?n.segments.length:e.length,c[sn(p)]=y}return Object.assign(Object.assign({},i),c)}(n,e,t,r,n.children,i));return c._sourceSegment=n,c._segmentIndexShift=e.length,{segmentGroup:c,slicedSegments:t}}const u=new xe(n.segments,n.children);return u._sourceSegment=n,u._segmentIndexShift=e.length,{segmentGroup:u,slicedSegments:t}}function vd(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}function Qy(n,e,t,r){return!!(sn(n)===r||r!==Vt&&vd(e,t,n))&&("**"===n.path||Fu(e,n,t).matched)}function Jy(n,e,t){return 0===e.length&&!n.children[t]}class ua{constructor(e){this.segmentGroup=e||null}}class Mr{constructor(e){this.urlTree=e}}function xo(n){return Zi(new ua(n))}function Kl(n){return Zi(new Mr(n))}class uf{constructor(e,t,r,i,u){this.configLoader=t,this.urlSerializer=r,this.urlTree=i,this.config=u,this.allowRedirects=!0,this.ngModule=e.get(f.h0i)}apply(){const e=Wl(this.urlTree.root,[],[],this.config).segmentGroup,t=new xe(e.segments,e.children);return this.expandSegmentGroup(this.ngModule,this.config,t,Vt).pipe((0,Rt.U)(u=>this.createUrlTree(La(u),this.urlTree.queryParams,this.urlTree.fragment))).pipe(Ji(u=>{if(u instanceof Mr)return this.allowRedirects=!1,this.match(u.urlTree);throw u instanceof ua?this.noMatchError(u):u}))}match(e){return this.expandSegmentGroup(this.ngModule,this.config,e.root,Vt).pipe((0,Rt.U)(i=>this.createUrlTree(La(i),e.queryParams,e.fragment))).pipe(Ji(i=>{throw i instanceof ua?this.noMatchError(i):i}))}noMatchError(e){return new Error(`Cannot match any routes. URL Segment: '${e.segmentGroup}'`)}createUrlTree(e,t,r){const i=e.segments.length>0?new xe([],{[Vt]:e}):e;return new Me(i,t,r)}expandSegmentGroup(e,t,r,i){return 0===r.segments.length&&r.hasChildren()?this.expandChildren(e,t,r).pipe((0,Rt.U)(u=>new xe([],u))):this.expandSegment(e,r,t,r.segments,i,!0)}expandChildren(e,t,r){const i=[];for(const u of Object.keys(r.children))"primary"===u?i.unshift(u):i.push(u);return(0,xn.D)(i).pipe(Ys(u=>{const c=r.children[u],p=of(t,u);return this.expandSegmentGroup(e,p,c,u).pipe((0,Rt.U)(y=>({segment:y,outlet:u})))}),Ar((u,c)=>(u[c.outlet]=c.segment,u),{}),function rg(n,e){const t=arguments.length>=2;return r=>r.pipe(n?Qi((i,u)=>n(i,u,r)):di.y,sd(1),t?ng(e):En(()=>new Zs))}())}expandSegment(e,t,r,i,u,c){return(0,xn.D)(r).pipe(Ys(p=>this.expandSegmentAgainstRoute(e,t,r,p,i,u,c).pipe(Ji(b=>{if(b instanceof ua)return yt(null);throw b}))),Qs(p=>!!p),Ji((p,y)=>{if(p instanceof Zs||"EmptyError"===p.name)return Jy(t,i,u)?yt(new xe([],{})):xo(t);throw p}))}expandSegmentAgainstRoute(e,t,r,i,u,c,p){return Qy(i,t,u,c)?void 0===i.redirectTo?this.matchSegmentAgainstRoute(e,t,i,u,c):p&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,t,r,i,u,c):xo(t):xo(t)}expandSegmentAgainstRouteUsingRedirect(e,t,r,i,u,c){return"**"===i.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,r,i,c):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,u,c)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,r,i){const u=this.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?Kl(u):this.lineralizeSegments(r,u).pipe((0,vn.z)(c=>{const p=new xe(c,{});return this.expandSegment(e,p,t,c,i,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,u,c){const{matched:p,consumedSegments:y,remainingSegments:b,positionalParamSegments:S}=Fu(t,i,u);if(!p)return xo(t);const M=this.applyRedirectCommands(y,i.redirectTo,S);return i.redirectTo.startsWith("/")?Kl(M):this.lineralizeSegments(i,M).pipe((0,vn.z)(F=>this.expandSegment(e,t,r,F.concat(b),c,!1)))}matchSegmentAgainstRoute(e,t,r,i,u){if("**"===r.path)return r.loadChildren?(r._loadedConfig?yt(r._loadedConfig):this.configLoader.load(e.injector,r)).pipe((0,Rt.U)(M=>(r._loadedConfig=M,new xe(i,{})))):yt(new xe(i,{}));const{matched:c,consumedSegments:p,remainingSegments:y}=Fu(t,r,i);return c?this.getChildConfig(e,r,i).pipe((0,vn.z)(S=>{const M=S.module,F=S.routes,{segmentGroup:B,slicedSegments:G}=Wl(t,p,y,F),te=new xe(B.segments,B.children);if(0===G.length&&te.hasChildren())return this.expandChildren(M,F,te).pipe((0,Rt.U)(je=>new xe(p,je)));if(0===F.length&&0===G.length)return yt(new xe(p,{}));const Ee=sn(r)===u;return this.expandSegment(M,te,F,G,Ee?Vt:u,!0).pipe((0,Rt.U)(Ye=>new xe(p.concat(Ye.segments),Ye.children)))})):xo(t)}getChildConfig(e,t,r){return t.children?yt(new md(t.children,e)):t.loadChildren?void 0!==t._loadedConfig?yt(t._loadedConfig):this.runCanLoadGuards(e.injector,t,r).pipe((0,vn.z)(i=>i?this.configLoader.load(e.injector,t).pipe((0,Rt.U)(u=>(t._loadedConfig=u,u))):function Br(n){return Zi(Xs(`Cannot load children because the guard of the route "path: '${n.path}'" returned false`))}(t))):yt(new md([],e))}runCanLoadGuards(e,t,r){const i=t.canLoad;return i&&0!==i.length?yt(i.map(c=>{const p=e.get(c);let y;if(function Jh(n){return n&&Pa(n.canLoad)}(p))y=p.canLoad(t,r);else{if(!Pa(p))throw new Error("Invalid CanLoad guard");y=p(t,r)}return gi(y)})).pipe(aa(),(0,Zr.b)(c=>{if(!Pu(c))return;const p=Xs(`Redirecting to "${this.urlSerializer.serialize(c)}"`);throw p.url=c,p}),(0,Rt.U)(c=>!0===c)):yt(!0)}lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),0===i.numberOfChildren)return yt(r);if(i.numberOfChildren>1||!i.children[Vt])return Zi(new Error(`Only absolute redirects can have named outlets. redirectTo: '${e.redirectTo}'`));i=i.children[Vt]}}applyRedirectCommands(e,t,r){return this.applyRedirectCreatreUrlTree(t,this.urlSerializer.parse(t),e,r)}applyRedirectCreatreUrlTree(e,t,r,i){const u=this.createSegmentGroup(e,t.root,r,i);return new Me(u,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const r={};return zn(e,(i,u)=>{if("string"==typeof i&&i.startsWith(":")){const p=i.substring(1);r[u]=t[p]}else r[u]=i}),r}createSegmentGroup(e,t,r,i){const u=this.createSegments(e,t.segments,r,i);let c={};return zn(t.children,(p,y)=>{c[y]=this.createSegmentGroup(e,p,r,i)}),new xe(u,c)}createSegments(e,t,r,i){return t.map(u=>u.path.startsWith(":")?this.findPosParam(e,u,i):this.findOrReturn(u,r))}findPosParam(e,t,r){const i=r[t.path.substring(1)];if(!i)throw new Error(`Cannot redirect to '${e}'. Cannot find '${t.path}'.`);return i}findOrReturn(e,t){let r=0;for(const i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}}function La(n){const e={};for(const r of Object.keys(n.children)){const u=La(n.children[r]);(u.segments.length>0||u.hasChildren())&&(e[r]=u)}return function ji(n){if(1===n.numberOfChildren&&n.children[Vt]){const e=n.children[Vt];return new xe(n.segments.concat(e.segments),e.children)}return n}(new xe(n.segments,e))}class pg{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class Va{constructor(e,t){this.component=e,this.route=t}}function cf(n,e,t){const r=n._root;return yi(r,e?e._root:null,t,[r.value])}function Zl(n,e,t){const r=function Xy(n){if(!n)return null;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig}return null}(e);return(r?r.module.injector:t).get(n)}function yi(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const u=Mo(e);return n.children.forEach(c=>{(function mg(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const u=n.value,c=e?e.value:null,p=t?t.getContext(n.value.outlet):null;if(c&&u.routeConfig===c.routeConfig){const y=function e_(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!Pt(n.url,e.url);case"pathParamsOrQueryParamsChange":return!Pt(n.url,e.url)||!es(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!zh(n,e)||!es(n.queryParams,e.queryParams);default:return!zh(n,e)}}(c,u,u.routeConfig.runGuardsAndResolvers);y?i.canActivateChecks.push(new pg(r)):(u.data=c.data,u._resolvedData=c._resolvedData),yi(n,e,u.component?p?p.children:null:t,r,i),y&&p&&p.outlet&&p.outlet.isActivated&&i.canDeactivateChecks.push(new Va(p.outlet.component,c))}else c&&Ba(e,p,i),i.canActivateChecks.push(new pg(r)),yi(n,null,u.component?p?p.children:null:t,r,i)})(c,u[c.value.outlet],t,r.concat([c.value]),i),delete u[c.value.outlet]}),zn(u,(c,p)=>Ba(c,t.getContext(p),i)),i}function Ba(n,e,t){const r=Mo(n),i=n.value;zn(r,(u,c)=>{Ba(u,i.component?e?e.children.getContext(c):null:e,t)}),t.canDeactivateChecks.push(new Va(i.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,i))}class ff{}function pf(n){return new Fr.y(e=>e.error(n))}class gf{constructor(e,t,r,i,u,c){this.rootComponentType=e,this.config=t,this.urlTree=r,this.url=i,this.paramsInheritanceStrategy=u,this.relativeLinkResolution=c}recognize(){const e=Wl(this.urlTree.root,[],[],this.config.filter(c=>void 0===c.redirectTo),this.relativeLinkResolution).segmentGroup,t=this.processSegmentGroup(this.config,e,Vt);if(null===t)return null;const r=new Nu([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},Vt,this.rootComponentType,null,this.urlTree.root,-1,{}),i=new So(r,t),u=new qh(this.url,i);return this.inheritParamsAndData(u._root),u}inheritParamsAndData(e){const t=e.value,r=Uy(t,this.paramsInheritanceStrategy);t.params=Object.freeze(r.params),t.data=Object.freeze(r.data),e.children.forEach(i=>this.inheritParamsAndData(i))}processSegmentGroup(e,t,r){return 0===t.segments.length&&t.hasChildren()?this.processChildren(e,t):this.processSegment(e,t,t.segments,r)}processChildren(e,t){const r=[];for(const u of Object.keys(t.children)){const c=t.children[u],p=of(e,u),y=this.processSegmentGroup(p,c,u);if(null===y)return null;r.push(...y)}const i=vg(r);return function i_(n){n.sort((e,t)=>e.value.outlet===Vt?-1:t.value.outlet===Vt?1:e.value.outlet.localeCompare(t.value.outlet))}(i),i}processSegment(e,t,r,i){for(const u of e){const c=this.processSegmentAgainstRoute(u,t,r,i);if(null!==c)return c}return Jy(t,r,i)?[]:null}processSegmentAgainstRoute(e,t,r,i){if(e.redirectTo||!Qy(e,t,r,i))return null;let u,c=[],p=[];if("**"===e.path){const B=r.length>0?ad(r).parameters:{};u=new Nu(r,B,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,E(e),sn(e),e.component,e,h(t),m(t)+r.length,T(e))}else{const B=Fu(t,e,r);if(!B.matched)return null;c=B.consumedSegments,p=B.remainingSegments,u=new Nu(c,B.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,E(e),sn(e),e.component,e,h(t),m(t)+c.length,T(e))}const y=function s_(n){return n.children?n.children:n.loadChildren?n._loadedConfig.routes:[]}(e),{segmentGroup:b,slicedSegments:S}=Wl(t,c,p,y.filter(B=>void 0===B.redirectTo),this.relativeLinkResolution);if(0===S.length&&b.hasChildren()){const B=this.processChildren(y,b);return null===B?null:[new So(u,B)]}if(0===y.length&&0===S.length)return[new So(u,[])];const M=sn(e)===i,F=this.processSegment(y,b,S,M?Vt:i);return null===F?null:[new So(u,F)]}}function _g(n){const e=n.value.routeConfig;return e&&""===e.path&&void 0===e.redirectTo}function vg(n){const e=[],t=new Set;for(const r of n){if(!_g(r)){e.push(r);continue}const i=e.find(u=>r.value.routeConfig===u.value.routeConfig);void 0!==i?(i.children.push(...r.children),t.add(i)):e.push(r)}for(const r of t){const i=vg(r.children);e.push(new So(r.value,i))}return e.filter(r=>!t.has(r))}function h(n){let e=n;for(;e._sourceSegment;)e=e._sourceSegment;return e}function m(n){let e=n,t=e._segmentIndexShift?e._segmentIndexShift:0;for(;e._sourceSegment;)e=e._sourceSegment,t+=e._segmentIndexShift?e._segmentIndexShift:0;return t-1}function E(n){return n.data||{}}function T(n){return n.resolve||{}}function rt(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function ct(n){return Nn(e=>{const t=n(e);return t?(0,xn.D)(t).pipe((0,Rt.U)(()=>e)):yt(e)})}class Ql extends class rs{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}{}const Lu=new f.OlP("ROUTES");class Vu{constructor(e,t,r,i){this.injector=e,this.compiler=t,this.onLoadStartListener=r,this.onLoadEndListener=i}load(e,t){if(t._loader$)return t._loader$;this.onLoadStartListener&&this.onLoadStartListener(t);const i=this.loadModuleFactory(t.loadChildren).pipe((0,Rt.U)(u=>{this.onLoadEndListener&&this.onLoadEndListener(t);const c=u.create(e);return new md(ts(c.injector.get(Lu,void 0,f.XFs.Self|f.XFs.Optional)).map(sf),c)}),Ji(u=>{throw t._loader$=void 0,u}));return t._loader$=new id(i,()=>new rr.x).pipe(Fi()),t._loader$}loadModuleFactory(e){return gi(e()).pipe((0,vn.z)(t=>t instanceof f.YKP?yt(t):(0,xn.D)(this.compiler.compileModuleAsync(t))))}}class o_{shouldProcessUrl(e){return!0}extract(e){return e}merge(e,t){return e}}function la(n){throw n}function Ed(n,e,t){return e.parse("/")}function wd(n,e){return yt(null)}const yf={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},bd={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let $i=(()=>{class n{constructor(t,r,i,u,c,p,y){this.rootComponentType=t,this.urlSerializer=r,this.rootContexts=i,this.location=u,this.config=y,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new rr.x,this.errorHandler=la,this.malformedUriErrorHandler=Ed,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:wd,afterPreactivation:wd},this.urlHandlingStrategy=new o_,this.routeReuseStrategy=new Ql,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.ngModule=c.get(f.h0i),this.console=c.get(f.c2e);const M=c.get(f.R0b);this.isNgZoneEnabled=M instanceof f.R0b&&f.R0b.isInAngularZone(),this.resetConfig(y),this.currentUrlTree=function Ll(){return new Me(new xe([],{}),{},null)}(),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new Vu(c,p,F=>this.triggerEvent(new Nl(F)),F=>this.triggerEvent(new ws(F))),this.routerState=ka(this.currentUrlTree,this.rootComponentType),this.transitions=new Kr({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){var t;return null===(t=this.location.getState())||void 0===t?void 0:t.\u0275routerPageId}setupNavigations(t){const r=this.events;return t.pipe(Qi(i=>0!==i.id),(0,Rt.U)(i=>Object.assign(Object.assign({},i),{extractedUrl:this.urlHandlingStrategy.extract(i.rawUrl)})),Nn(i=>{let u=!1,c=!1;return yt(i).pipe((0,Zr.b)(p=>{this.currentNavigation={id:p.id,initialUrl:p.currentRawUrl,extractedUrl:p.extractedUrl,trigger:p.source,extras:p.extras,previousNavigation:this.lastSuccessfulNavigation?Object.assign(Object.assign({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),Nn(p=>{const y=this.browserUrlTree.toString(),b=!this.navigated||p.extractedUrl.toString()!==y||y!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||b)&&this.urlHandlingStrategy.shouldProcessUrl(p.rawUrl))return Eg(p.source)&&(this.browserUrlTree=p.extractedUrl),yt(p).pipe(Nn(M=>{const F=this.transitions.getValue();return r.next(new Es(M.id,this.serializeUrl(M.extractedUrl),M.source,M.restoredState)),F!==this.transitions.getValue()?Xo.E:Promise.resolve(M)}),function lf(n,e,t,r){return Nn(i=>function Fa(n,e,t,r,i){return new uf(n,e,t,r,i).apply()}(n,e,t,i.extractedUrl,r).pipe((0,Rt.U)(u=>Object.assign(Object.assign({},i),{urlAfterRedirects:u}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),(0,Zr.b)(M=>{this.currentNavigation=Object.assign(Object.assign({},this.currentNavigation),{finalUrl:M.urlAfterRedirects})}),function N(n,e,t,r,i){return(0,vn.z)(u=>function r_(n,e,t,r,i="emptyOnly",u="legacy"){try{const c=new gf(n,e,t,r,i,u).recognize();return null===c?pf(new ff):yt(c)}catch(c){return pf(c)}}(n,e,u.urlAfterRedirects,t(u.urlAfterRedirects),r,i).pipe((0,Rt.U)(c=>Object.assign(Object.assign({},u),{targetSnapshot:c}))))}(this.rootComponentType,this.config,M=>this.serializeUrl(M),this.paramsInheritanceStrategy,this.relativeLinkResolution),(0,Zr.b)(M=>{if("eager"===this.urlUpdateStrategy){if(!M.extras.skipLocationChange){const B=this.urlHandlingStrategy.merge(M.urlAfterRedirects,M.rawUrl);this.setBrowserUrl(B,M)}this.browserUrlTree=M.urlAfterRedirects}const F=new na(M.id,this.serializeUrl(M.extractedUrl),this.serializeUrl(M.urlAfterRedirects),M.targetSnapshot);r.next(F)}));if(b&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:F,extractedUrl:B,source:G,restoredState:te,extras:Ee}=p,Ze=new Es(F,this.serializeUrl(B),G,te);r.next(Ze);const Ye=ka(B,this.rootComponentType).snapshot;return yt(Object.assign(Object.assign({},p),{targetSnapshot:Ye,urlAfterRedirects:B,extras:Object.assign(Object.assign({},Ee),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=p.rawUrl,p.resolve(null),Xo.E}),ct(p=>{const{targetSnapshot:y,id:b,extractedUrl:S,rawUrl:M,extras:{skipLocationChange:F,replaceUrl:B}}=p;return this.hooks.beforePreactivation(y,{navigationId:b,appliedUrlTree:S,rawUrlTree:M,skipLocationChange:!!F,replaceUrl:!!B})}),(0,Zr.b)(p=>{const y=new sg(p.id,this.serializeUrl(p.extractedUrl),this.serializeUrl(p.urlAfterRedirects),p.targetSnapshot);this.triggerEvent(y)}),(0,Rt.U)(p=>Object.assign(Object.assign({},p),{guards:cf(p.targetSnapshot,p.currentSnapshot,this.rootContexts)})),function t_(n,e){return(0,vn.z)(t=>{const{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:u,canDeactivateChecks:c}}=t;return 0===c.length&&0===u.length?yt(Object.assign(Object.assign({},t),{guardsResult:!0})):function yg(n,e,t,r){return(0,xn.D)(n).pipe((0,vn.z)(i=>function Yl(n,e,t,r,i){const u=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return u&&0!==u.length?yt(u.map(p=>{const y=Zl(p,e,i);let b;if(function pE(n){return n&&Pa(n.canDeactivate)}(y))b=gi(y.canDeactivate(n,e,t,r));else{if(!Pa(y))throw new Error("Invalid CanDeactivate guard");b=gi(y(n,e,t,r))}return b.pipe(Qs())})).pipe(aa()):yt(!0)}(i.component,i.route,t,e,r)),Qs(i=>!0!==i,!0))}(c,r,i,n).pipe((0,vn.z)(p=>p&&function dg(n){return"boolean"==typeof n}(p)?function xr(n,e,t,r){return(0,xn.D)(e).pipe(Ys(i=>rd(function hf(n,e){return null!==n&&e&&e(new Vi(n)),yt(!0)}(i.route.parent,r),function df(n,e){return null!==n&&e&&e(new Na(n)),yt(!0)}(i.route,r),function Ro(n,e,t){const r=e[e.length-1],u=e.slice(0,e.length-1).reverse().map(c=>function gg(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(c)).filter(c=>null!==c).map(c=>Pi(()=>yt(c.guards.map(y=>{const b=Zl(y,c.node,t);let S;if(function ef(n){return n&&Pa(n.canActivateChild)}(b))S=gi(b.canActivateChild(r,n));else{if(!Pa(b))throw new Error("Invalid CanActivateChild guard");S=gi(b(r,n))}return S.pipe(Qs())})).pipe(aa())));return yt(u).pipe(aa())}(n,i.path,t),function n_(n,e,t){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return yt(!0);const i=r.map(u=>Pi(()=>{const c=Zl(u,e,t);let p;if(function Xh(n){return n&&Pa(n.canActivate)}(c))p=gi(c.canActivate(e,n));else{if(!Pa(c))throw new Error("Invalid CanActivate guard");p=gi(c(e,n))}return p.pipe(Qs())}));return yt(i).pipe(aa())}(n,i.route,t))),Qs(i=>!0!==i,!0))}(r,u,n,e):yt(p)),(0,Rt.U)(p=>Object.assign(Object.assign({},t),{guardsResult:p})))})}(this.ngModule.injector,p=>this.triggerEvent(p)),(0,Zr.b)(p=>{if(Pu(p.guardsResult)){const b=Xs(`Redirecting to "${this.serializeUrl(p.guardsResult)}"`);throw b.url=p.guardsResult,b}const y=new Rl(p.id,this.serializeUrl(p.extractedUrl),this.serializeUrl(p.urlAfterRedirects),p.targetSnapshot,!!p.guardsResult);this.triggerEvent(y)}),Qi(p=>!!p.guardsResult||(this.restoreHistory(p),this.cancelNavigationTransition(p,""),!1)),ct(p=>{if(p.guards.canActivateChecks.length)return yt(p).pipe((0,Zr.b)(y=>{const b=new Sr(y.id,this.serializeUrl(y.extractedUrl),this.serializeUrl(y.urlAfterRedirects),y.targetSnapshot);this.triggerEvent(b)}),Nn(y=>{let b=!1;return yt(y).pipe(function z(n,e){return(0,vn.z)(t=>{const{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return yt(t);let u=0;return(0,xn.D)(i).pipe(Ys(c=>function se(n,e,t,r){return function Ue(n,e,t,r){const i=rt(n);if(0===i.length)return yt({});const u={};return(0,xn.D)(i).pipe((0,vn.z)(c=>function Et(n,e,t,r){const i=Zl(n,e,r);return gi(i.resolve?i.resolve(e,t):i(e,t))}(n[c],e,t,r).pipe((0,Zr.b)(p=>{u[c]=p}))),sd(1),(0,vn.z)(()=>rt(u).length===i.length?yt(u):Xo.E))}(n._resolve,n,e,r).pipe((0,Rt.U)(u=>(n._resolvedData=u,n.data=Object.assign(Object.assign({},n.data),Uy(n,t).resolve),null)))}(c.route,r,n,e)),(0,Zr.b)(()=>u++),sd(1),(0,vn.z)(c=>u===i.length?yt(t):Xo.E))})}(this.paramsInheritanceStrategy,this.ngModule.injector),(0,Zr.b)({next:()=>b=!0,complete:()=>{b||(this.restoreHistory(y),this.cancelNavigationTransition(y,"At least one route resolver didn't emit any value."))}}))}),(0,Zr.b)(y=>{const b=new pi(y.id,this.serializeUrl(y.extractedUrl),this.serializeUrl(y.urlAfterRedirects),y.targetSnapshot);this.triggerEvent(b)}))}),ct(p=>{const{targetSnapshot:y,id:b,extractedUrl:S,rawUrl:M,extras:{skipLocationChange:F,replaceUrl:B}}=p;return this.hooks.afterPreactivation(y,{navigationId:b,appliedUrlTree:S,rawUrlTree:M,skipLocationChange:!!F,replaceUrl:!!B})}),(0,Rt.U)(p=>{const y=function jy(n,e,t){const r=jl(n,e._root,t?t._root:void 0);return new cd(r,e)}(this.routeReuseStrategy,p.targetSnapshot,p.currentRouterState);return Object.assign(Object.assign({},p),{targetRouterState:y})}),(0,Zr.b)(p=>{this.currentUrlTree=p.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(p.urlAfterRedirects,p.rawUrl),this.routerState=p.targetRouterState,"deferred"===this.urlUpdateStrategy&&(p.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,p),this.browserUrlTree=p.urlAfterRedirects)}),((n,e,t)=>(0,Rt.U)(r=>(new cg(e,r.targetRouterState,r.currentRouterState,t).activate(n),r)))(this.rootContexts,this.routeReuseStrategy,p=>this.triggerEvent(p)),(0,Zr.b)({next(){u=!0},complete(){u=!0}}),function ig(n){return(0,Lr.e)((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}(()=>{var p;u||c||this.cancelNavigationTransition(i,`Navigation ID ${i.id} is not equal to the current navigation id ${this.navigationId}`),(null===(p=this.currentNavigation)||void 0===p?void 0:p.id)===i.id&&(this.currentNavigation=null)}),Ji(p=>{if(c=!0,function od(n){return n&&n[Fl]}(p)){const y=Pu(p.url);y||(this.navigated=!0,this.restoreHistory(i,!0));const b=new wn(i.id,this.serializeUrl(i.extractedUrl),p.message);r.next(b),y?setTimeout(()=>{const S=this.urlHandlingStrategy.merge(p.url,this.rawUrlTree),M={skipLocationChange:i.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||Eg(i.source)};this.scheduleNavigation(S,"imperative",null,M,{resolve:i.resolve,reject:i.reject,promise:i.promise})},0):i.resolve(!1)}else{this.restoreHistory(i,!0);const y=new xl(i.id,this.serializeUrl(i.extractedUrl),p);r.next(y);try{i.resolve(this.errorHandler(p))}catch(b){i.reject(b)}}return Xo.E}))}))}resetRootComponentType(t){this.rootComponentType=t,this.routerState.root.component=this.rootComponentType}setTransition(t){this.transitions.next(Object.assign(Object.assign({},this.transitions.value),t))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const r="popstate"===t.type?"popstate":"hashchange";"popstate"===r&&setTimeout(()=>{var i;const u={replaceUrl:!0},c=(null===(i=t.state)||void 0===i?void 0:i.navigationId)?t.state:null;if(c){const y=Object.assign({},c);delete y.navigationId,delete y.\u0275routerPageId,0!==Object.keys(y).length&&(u.state=y)}const p=this.parseUrl(t.url);this.scheduleNavigation(p,r,c,u)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(t){this.events.next(t)}resetConfig(t){zl(t),this.config=t.map(sf),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,r={}){const{relativeTo:i,queryParams:u,fragment:c,queryParamsHandling:p,preserveFragment:y}=r,b=i||this.routerState.root,S=y?this.currentUrlTree.fragment:c;let M=null;switch(p){case"merge":M=Object.assign(Object.assign({},this.currentUrlTree.queryParams),u);break;case"preserve":M=this.currentUrlTree.queryParams;break;default:M=u||null}return null!==M&&(M=this.removeEmptyProps(M)),function eo(n,e,t,r,i){if(0===t.length)return ug(e.root,e.root,e.root,r,i);const u=function Gy(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new Hy(!0,0,n);let e=0,t=!1;const r=n.reduce((i,u,c)=>{if("object"==typeof u&&null!=u){if(u.outlets){const p={};return zn(u.outlets,(y,b)=>{p[b]="string"==typeof y?y.split("/"):y}),[...i,{outlets:p}]}if(u.segmentPath)return[...i,u.segmentPath]}return"string"!=typeof u?[...i,u]:0===c?(u.split("/").forEach((p,y)=>{0==y&&"."===p||(0==y&&""===p?t=!0:".."===p?e++:""!=p&&i.push(p))}),i):[...i,u]},[]);return new Hy(t,e,r)}(t);if(u.toRoot())return ug(e.root,e.root,new xe([],{}),r,i);const c=function lg(n,e,t){if(n.isAbsolute)return new Zh(e.root,!0,0);if(-1===t.snapshot._lastPathIndex){const u=t.snapshot._urlSegment;return new Zh(u,u===e.root,0)}const r=oa(n.commands[0])?0:1;return function qy(n,e,t){let r=n,i=e,u=t;for(;u>i;){if(u-=i,r=r.parent,!r)throw new Error("Invalid number of '../'");i=r.segments.length}return new Zh(r,!1,i-u)}(t.snapshot._urlSegment,t.snapshot._lastPathIndex+r,n.numberOfDoubleDots)}(u,e,n),p=c.processChildren?to(c.segmentGroup,c.index,u.commands):Wy(c.segmentGroup,c.index,u.commands);return ug(e.root,c.segmentGroup,p,r,i)}(b,this.currentUrlTree,t,M,null!=S?S:null)}navigateByUrl(t,r={skipLocationChange:!1}){const i=Pu(t)?t:this.parseUrl(t),u=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(u,"imperative",null,r)}navigate(t,r={skipLocationChange:!1}){return function _f(n){for(let e=0;e<n.length;e++){const t=n[e];if(null==t)throw new Error(`The requested path contains ${t} segment at index ${e}`)}}(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let r;try{r=this.urlSerializer.parse(t)}catch(i){r=this.malformedUriErrorHandler(i,this.urlSerializer,t)}return r}isActive(t,r){let i;if(i=!0===r?Object.assign({},yf):!1===r?Object.assign({},bd):r,Pu(t))return Ru(this.currentUrlTree,t,i);const u=this.parseUrl(t);return Ru(this.currentUrlTree,u,i)}removeEmptyProps(t){return Object.keys(t).reduce((r,i)=>{const u=t[i];return null!=u&&(r[i]=u),r},{})}processNavigations(){this.navigations.subscribe(t=>{this.navigated=!0,this.lastSuccessfulId=t.id,this.currentPageId=t.targetPageId,this.events.next(new Su(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,t.resolve(!0)},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)})}scheduleNavigation(t,r,i,u,c){var p,y;if(this.disposed)return Promise.resolve(!1);let b,S,M;c?(b=c.resolve,S=c.reject,M=c.promise):M=new Promise((G,te)=>{b=G,S=te});const F=++this.navigationId;let B;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(i=this.location.getState()),B=i&&i.\u0275routerPageId?i.\u0275routerPageId:u.replaceUrl||u.skipLocationChange?null!==(p=this.browserPageId)&&void 0!==p?p:0:(null!==(y=this.browserPageId)&&void 0!==y?y:0)+1):B=0,this.setTransition({id:F,targetPageId:B,source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:t,extras:u,resolve:b,reject:S,promise:M,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),M.catch(G=>Promise.reject(G))}setBrowserUrl(t,r){const i=this.urlSerializer.serialize(t),u=Object.assign(Object.assign({},r.extras.state),this.generateNgRouterState(r.id,r.targetPageId));this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl?this.location.replaceState(i,"",u):this.location.go(i,"",u)}restoreHistory(t,r=!1){var i,u;if("computed"===this.canceledNavigationResolution){const c=this.currentPageId-t.targetPageId;"popstate"!==t.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==(null===(i=this.currentNavigation)||void 0===i?void 0:i.finalUrl)||0===c?this.currentUrlTree===(null===(u=this.currentNavigation)||void 0===u?void 0:u.finalUrl)&&0===c&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(c)}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(t,r){const i=new wn(t.id,this.serializeUrl(t.extractedUrl),r);this.triggerEvent(i),t.resolve(!1)}generateNgRouterState(t,r){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}}return n.\u0275fac=function(t){f.$Z()},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();function Eg(n){return"imperative"!==n}let vf=(()=>{class n{constructor(t,r,i,u,c){this.router=t,this.route=r,this.tabIndexAttribute=i,this.renderer=u,this.el=c,this.commands=null,this.onChanges=new rr.x,this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(t){if(null!=this.tabIndexAttribute)return;const r=this.renderer,i=this.el.nativeElement;null!==t?r.setAttribute(i,"tabindex",t):r.removeAttribute(i,"tabindex")}ngOnChanges(t){this.onChanges.next(this)}set routerLink(t){null!=t?(this.commands=Array.isArray(t)?t:[t],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(){if(null===this.urlTree)return!0;const t={skipLocationChange:Dd(this.skipLocationChange),replaceUrl:Dd(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,t),!0}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:Dd(this.preserveFragment)})}}return n.\u0275fac=function(t){return new(t||n)(f.Y36($i),f.Y36(sa),f.$8M("tabindex"),f.Y36(f.Qsj),f.Y36(f.SBq))},n.\u0275dir=f.lG2({type:n,selectors:[["","routerLink","",5,"a",5,"area"]],hostBindings:function(t,r){1&t&&f.NdJ("click",function(){return r.onClick()})},inputs:{queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo",routerLink:"routerLink"},features:[f.TTD]}),n})();function Dd(n){return""===n||!!n}class l_{}class mE{preload(e,t){return yt(null)}}let yE=(()=>{class n{constructor(t,r,i,u){this.router=t,this.injector=i,this.preloadingStrategy=u,this.loader=new Vu(i,r,y=>t.triggerEvent(new Nl(y)),y=>t.triggerEvent(new ws(y)))}setUpPreloading(){this.subscription=this.router.events.pipe(Qi(t=>t instanceof Su),Ys(()=>this.preload())).subscribe(()=>{})}preload(){const t=this.injector.get(f.h0i);return this.processRoutes(t,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){const i=[];for(const u of r)if(u.loadChildren&&!u.canLoad&&u._loadedConfig){const c=u._loadedConfig;i.push(this.processRoutes(c.module,c.routes))}else u.loadChildren&&!u.canLoad?i.push(this.preloadConfig(t,u)):u.children&&i.push(this.processRoutes(t,u.children));return(0,xn.D)(i).pipe((0,Yi.J)(),(0,Rt.U)(u=>{}))}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>(r._loadedConfig?yt(r._loadedConfig):this.loader.load(t.injector,r)).pipe((0,vn.z)(u=>(r._loadedConfig=u,this.processRoutes(u.module,u.routes)))))}}return n.\u0275fac=function(t){return new(t||n)(f.LFG($i),f.LFG(f.Sil),f.LFG(f.zs3),f.LFG(l_))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})(),wg=(()=>{class n{constructor(t,r,i={}){this.router=t,this.viewportScroller=r,this.options=i,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},i.scrollPositionRestoration=i.scrollPositionRestoration||"disabled",i.anchorScrolling=i.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(t=>{t instanceof Es?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof Su&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.router.parseUrl(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(t=>{t instanceof kl&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.router.triggerEvent(new kl(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return n.\u0275fac=function(t){f.$Z()},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();const Ds=new f.OlP("ROUTER_CONFIGURATION"),d_=new f.OlP("ROUTER_FORROOT_GUARD"),_E=[ye,{provide:Un,useClass:In},{provide:$i,useFactory:function f_(n,e,t,r,i,u,c={},p,y){const b=new $i(null,n,e,t,r,i,ts(u));return p&&(b.urlHandlingStrategy=p),y&&(b.routeReuseStrategy=y),function wE(n,e){n.errorHandler&&(e.errorHandler=n.errorHandler),n.malformedUriErrorHandler&&(e.malformedUriErrorHandler=n.malformedUriErrorHandler),n.onSameUrlNavigation&&(e.onSameUrlNavigation=n.onSameUrlNavigation),n.paramsInheritanceStrategy&&(e.paramsInheritanceStrategy=n.paramsInheritanceStrategy),n.relativeLinkResolution&&(e.relativeLinkResolution=n.relativeLinkResolution),n.urlUpdateStrategy&&(e.urlUpdateStrategy=n.urlUpdateStrategy),n.canceledNavigationResolution&&(e.canceledNavigationResolution=n.canceledNavigationResolution)}(c,b),c.enableTracing&&b.events.subscribe(S=>{var M,F;null===(M=console.group)||void 0===M||M.call(console,`Router Event: ${S.constructor.name}`),console.log(S.toString()),console.log(S),null===(F=console.groupEnd)||void 0===F||F.call(console)}),b},deps:[Un,Gl,ye,f.zs3,f.Sil,Lu,Ds,[class mf{},new f.FiY],[class Tn{},new f.FiY]]},Gl,{provide:sa,useFactory:function bg(n){return n.routerState.root},deps:[$i]},yE,mE,class c_{preload(e,t){return t().pipe(Ji(()=>yt(null)))}},{provide:Ds,useValue:{enableTracing:!1}}];function EC(){return new f.PXZ("Router",$i)}let ca=(()=>{class n{constructor(t,r){}static forRoot(t,r){return{ngModule:n,providers:[_E,h_(t),{provide:d_,useFactory:EE,deps:[[$i,new f.FiY,new f.tp0]]},{provide:Ds,useValue:r||{}},{provide:he,useFactory:vE,deps:[de,[new f.tBr(it),new f.FiY],Ds]},{provide:wg,useFactory:wC,deps:[$i,gu,Ds]},{provide:l_,useExisting:r&&r.preloadingStrategy?r.preloadingStrategy:mE},{provide:f.PXZ,multi:!0,useFactory:EC},[Cd,{provide:f.ip1,multi:!0,useFactory:bE,deps:[Cd]},{provide:g_,useFactory:p_,deps:[Cd]},{provide:f.tb,multi:!0,useExisting:g_}]]}}static forChild(t){return{ngModule:n,providers:[h_(t)]}}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(d_,8),f.LFG($i,8))},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({}),n})();function wC(n,e,t){return t.scrollOffset&&e.setOffset(t.scrollOffset),new wg(n,e,t)}function vE(n,e,t={}){return t.useHash?new Ie(n,e):new Qe(n,e)}function EE(n){return"guarded"}function h_(n){return[{provide:f.deG,multi:!0,useValue:n},{provide:Lu,multi:!0,useValue:n}]}let Cd=(()=>{class n{constructor(t){this.injector=t,this.initNavigation=!1,this.destroyed=!1,this.resultOfPreactivationDone=new rr.x}appInitializer(){return this.injector.get($,Promise.resolve(null)).then(()=>{if(this.destroyed)return Promise.resolve(!0);let r=null;const i=new Promise(p=>r=p),u=this.injector.get($i),c=this.injector.get(Ds);return"disabled"===c.initialNavigation?(u.setUpLocationChangeListener(),r(!0)):"enabled"===c.initialNavigation||"enabledBlocking"===c.initialNavigation?(u.hooks.afterPreactivation=()=>this.initNavigation?yt(null):(this.initNavigation=!0,r(!0),this.resultOfPreactivationDone),u.initialNavigation()):r(!0),i})}bootstrapListener(t){const r=this.injector.get(Ds),i=this.injector.get(yE),u=this.injector.get(wg),c=this.injector.get($i),p=this.injector.get(f.z2F);t===p.components[0]&&(("enabledNonBlocking"===r.initialNavigation||void 0===r.initialNavigation)&&c.initialNavigation(),i.setUpPreloading(),u.init(),c.resetRootComponentType(p.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}ngOnDestroy(){this.destroyed=!0}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(f.zs3))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();function bE(n){return n.appInitializer.bind(n)}function p_(n){return n.bootstrapListener.bind(n)}const g_=new f.OlP("Router Initializer");let bC=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=f.Xpm({type:n,selectors:[["lib-home-page"]],decls:8,vars:0,consts:[[1,"d-flex","justify-content-center","pt-5"],[1,"d-flex","justify-content-center"],[1,"d-flex","justify-content-center","py-5"],["routerLink","/add-task","type","button",1,"addButton"]],template:function(t,r){1&t&&(f.TgZ(0,"div",0)(1,"h2"),f._uU(2,"Get a clear view of the day ahead"),f.qZA()(),f.TgZ(3,"div",1),f._uU(4," All your tasks that are due today will show up there.\n"),f.qZA(),f.TgZ(5,"div",2)(6,"button",3),f._uU(7," Add tasks "),f.qZA()())},directives:[vf],encapsulation:2,changeDetection:0}),n})(),DE=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=f.Xpm({type:n,selectors:[["app-home-page-page"]],decls:1,vars:0,template:function(t,r){1&t&&f._UZ(0,"lib-home-page")},directives:[bC],encapsulation:2,changeDetection:0}),n})(),DC=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({providers:[],imports:[[br,ca]]}),n})(),CC=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({providers:[],imports:[[br,ca.forChild([{path:"",component:DE}]),DC]]}),n})();const y_=new f.OlP("GETS_ALL_TASK_DTO"),Ef=new f.OlP("REMOVES_TASK_DTO"),__=new f.OlP("SETS_TASK_DTO");let v_=(()=>{class n{constructor(t,r){this._renderer=t,this._elementRef=r,this.onChange=i=>{},this.onTouched=()=>{}}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(f.Qsj),f.Y36(f.SBq))},n.\u0275dir=f.lG2({type:n}),n})(),Jl=(()=>{class n extends v_{}return n.\u0275fac=function(){let e;return function(r){return(e||(e=f.n5z(n)))(r||n)}}(),n.\u0275dir=f.lG2({type:n,features:[f.qOj]}),n})();const No=new f.OlP("NgValueAccessor"),Oo={provide:No,useExisting:(0,f.Gpc)(()=>Cg),multi:!0},IE=new f.OlP("CompositionEventMode");let Cg=(()=>{class n extends v_{constructor(t,r,i){super(t,r),this._compositionMode=i,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function TC(){const n=O()?O().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}())}writeValue(t){this.setProperty("value",null==t?"":t)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(f.Qsj),f.Y36(f.SBq),f.Y36(IE,8))},n.\u0275dir=f.lG2({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(t,r){1&t&&f.NdJ("input",function(u){return r._handleInput(u.target.value)})("blur",function(){return r.onTouched()})("compositionstart",function(){return r._compositionStart()})("compositionend",function(u){return r._compositionEnd(u.target.value)})},features:[f._Bn([Oo]),f.qOj]}),n})();const _i=new f.OlP("NgValidators"),Ua=new f.OlP("NgAsyncValidators");function E_(n){return function Bu(n){return null==n||0===n.length}(n.value)?{required:!0}:null}function Ig(n){return null}function Tg(n){return null!=n}function da(n){const e=(0,f.QGY)(n)?(0,xn.D)(n):n;return(0,f.CqO)(e),e}function Ag(n){let e={};return n.forEach(t=>{e=null!=t?Object.assign(Object.assign({},e),t):e}),0===Object.keys(e).length?null:e}function C_(n,e){return e.map(t=>t(n))}function SC(n){return n.map(e=>function I_(n){return!n.validate}(e)?e:t=>e.validate(t))}function SE(n){return null!=n?function T_(n){if(!n)return null;const e=n.filter(Tg);return 0==e.length?null:function(t){return Ag(C_(t,e))}}(SC(n)):null}function Id(n){return null!=n?function bf(n){if(!n)return null;const e=n.filter(Tg);return 0==e.length?null:function(t){return function MM(...n){const e=(0,Rn.jO)(n),{args:t,keys:r}=ki(n),i=new Fr.y(u=>{const{length:c}=t;if(!c)return void u.complete();const p=new Array(c);let y=c,b=c;for(let S=0;S<c;S++){let M=!1;(0,bo.Xf)(t[S]).subscribe((0,Bn.x)(u,F=>{M||(M=!0,b--),p[S]=F},()=>y--,void 0,()=>{(!y||!M)&&(b||u.next(r?wo(r,p):p),u.complete())}))}});return e?i.pipe(Al(e)):i}(C_(t,e).map(da)).pipe((0,Rt.U)(Ag))}}(SC(n)):null}function Sg(n,e){return null===n?[e]:Array.isArray(n)?[...n,e]:[n,e]}function Mg(n){return n._rawValidators}function xg(n){return n._rawAsyncValidators}function ME(n){return n?Array.isArray(n)?n:[n]:[]}function Rg(n,e){return Array.isArray(n)?n.includes(e):n===e}function xE(n,e){const t=ME(e);return ME(n).forEach(i=>{Rg(t,i)||t.push(i)}),t}function RE(n,e){return ME(e).filter(t=>!Rg(n,t))}class NE{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=SE(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=Id(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e){this.control&&this.control.reset(e)}hasError(e,t){return!!this.control&&this.control.hasError(e,t)}getError(e,t){return this.control?this.control.getError(e,t):null}}class ja extends NE{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class is extends NE{get formDirective(){return null}get path(){return null}}class OE{constructor(e){this._cd=e}is(e){var t,r,i;return"submitted"===e?!!(null===(t=this._cd)||void 0===t?void 0:t.submitted):!!(null===(i=null===(r=this._cd)||void 0===r?void 0:r.control)||void 0===i?void 0:i[e])}}let A_=(()=>{class n extends OE{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(ja,2))},n.\u0275dir=f.lG2({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(t,r){2&t&&f.ekj("ng-untouched",r.is("untouched"))("ng-touched",r.is("touched"))("ng-pristine",r.is("pristine"))("ng-dirty",r.is("dirty"))("ng-valid",r.is("valid"))("ng-invalid",r.is("invalid"))("ng-pending",r.is("pending"))},features:[f.qOj]}),n})(),S_=(()=>{class n extends OE{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(is,10))},n.\u0275dir=f.lG2({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(t,r){2&t&&f.ekj("ng-untouched",r.is("untouched"))("ng-touched",r.is("touched"))("ng-pristine",r.is("pristine"))("ng-dirty",r.is("dirty"))("ng-valid",r.is("valid"))("ng-invalid",r.is("invalid"))("ng-pending",r.is("pending"))("ng-submitted",r.is("submitted"))},features:[f.qOj]}),n})();function Xl(n,e){R_(n,e),e.valueAccessor.writeValue(n.value),function RC(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&VE(n,e)})}(n,e),function NC(n,e){const t=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}(n,e),function LE(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&VE(n,e),"submit"!==n.updateOn&&n.markAsTouched()})}(n,e),function FE(n,e){if(e.valueAccessor.setDisabledState){const t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}(n,e)}function Og(n,e,t=!0){const r=()=>{};e.valueAccessor&&(e.valueAccessor.registerOnChange(r),e.valueAccessor.registerOnTouched(r)),Td(n,e),n&&(e._invokeOnDestroyCallbacks(),n._registerOnCollectionChange(()=>{}))}function ko(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function R_(n,e){const t=Mg(n);null!==e.validator?n.setValidators(Sg(t,e.validator)):"function"==typeof t&&n.setValidators([t]);const r=xg(n);null!==e.asyncValidator?n.setAsyncValidators(Sg(r,e.asyncValidator)):"function"==typeof r&&n.setAsyncValidators([r]);const i=()=>n.updateValueAndValidity();ko(e._rawValidators,i),ko(e._rawAsyncValidators,i)}function Td(n,e){let t=!1;if(null!==n){if(null!==e.validator){const i=Mg(n);if(Array.isArray(i)&&i.length>0){const u=i.filter(c=>c!==e.validator);u.length!==i.length&&(t=!0,n.setValidators(u))}}if(null!==e.asyncValidator){const i=xg(n);if(Array.isArray(i)&&i.length>0){const u=i.filter(c=>c!==e.asyncValidator);u.length!==i.length&&(t=!0,n.setAsyncValidators(u))}}}const r=()=>{};return ko(e._rawValidators,r),ko(e._rawAsyncValidators,r),t}function VE(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function Af(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}const Sf="VALID",Mf="INVALID",xf="PENDING",Nd="DISABLED";function k_(n){return(vi(n)?n.validators:n)||null}function P_(n){return Array.isArray(n)?SE(n):n||null}function F_(n,e){return(vi(e)?e.asyncValidators:n)||null}function $E(n){return Array.isArray(n)?Id(n):n||null}function vi(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}const HE=n=>n instanceof Od,L_=n=>n instanceof kd;function kC(n){return HE(n)?n.value:n.getRawValue()}function V_(n,e){const t=L_(n),r=n.controls;if(!(t?Object.keys(r):r).length)throw new f.vHH(1e3,"");if(!r[e])throw new f.vHH(1001,"")}function PC(n,e){L_(n),n._forEachChild((r,i)=>{if(void 0===e[i])throw new f.vHH(1002,"")})}class B_{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=e,this._rawAsyncValidators=t,this._composedValidatorFn=P_(this._rawValidators),this._composedAsyncValidatorFn=$E(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===Sf}get invalid(){return this.status===Mf}get pending(){return this.status==xf}get disabled(){return this.status===Nd}get enabled(){return this.status!==Nd}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._rawValidators=e,this._composedValidatorFn=P_(e)}setAsyncValidators(e){this._rawAsyncValidators=e,this._composedAsyncValidatorFn=$E(e)}addValidators(e){this.setValidators(xE(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(xE(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(RE(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(RE(e,this._rawAsyncValidators))}hasValidator(e){return Rg(this._rawValidators,e)}hasAsyncValidator(e){return Rg(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=xf,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=Nd,this.errors=null,this._forEachChild(r=>{r.disable(Object.assign(Object.assign({},e),{onlySelf:!0}))}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Object.assign(Object.assign({},e),{skipPristineCheck:t})),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=Sf,this._forEachChild(r=>{r.enable(Object.assign(Object.assign({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(Object.assign(Object.assign({},e),{skipPristineCheck:t})),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Sf||this.status===xf)&&this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Nd:Sf}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=xf,this._hasOwnPendingAsyncValidator=!0;const t=da(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(!1!==t.emitEvent)}get(e){return function jE(n,e,t){if(null==e||(Array.isArray(e)||(e=e.split(t)),Array.isArray(e)&&0===e.length))return null;let r=n;return e.forEach(i=>{r=L_(r)?r.controls.hasOwnProperty(i)?r.controls[i]:null:(n=>n instanceof FC)(r)&&r.at(i)||null}),r}(this,e,".")}getError(e,t){const r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new f.vpe,this.statusChanges=new f.vpe}_calculateStatus(){return this._allControlsDisabled()?Nd:this.errors?Mf:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(xf)?xf:this._anyControlsHaveStatus(Mf)?Mf:Sf}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_isBoxedValue(e){return"object"==typeof e&&null!==e&&2===Object.keys(e).length&&"value"in e&&"disabled"in e}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){vi(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}}class Od extends B_{constructor(e=null,t,r){super(k_(t),F_(r,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),vi(t)&&t.initialValueIsDefault&&(this.defaultValue=this._isBoxedValue(e)?e.value:e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(r=>r(this.value,!1!==t.emitViewToModelChange)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){Af(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){Af(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){this._isBoxedValue(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}}class kd extends B_{constructor(e,t,r){super(k_(t),F_(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){PC(this,e),Object.keys(e).forEach(r=>{V_(this,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(Object.keys(e).forEach(r=>{this.controls[r]&&this.controls[r].patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,i)=>{r.reset(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=kC(t),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>!!r._syncPendingControls()||t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{const r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(const t of Object.keys(this.controls)){const r=this.controls[t];if(this.contains(t)&&e(r))return!0}return!1}_reduceValue(){return this._reduceChildren({},(e,t,r)=>((t.enabled||this.disabled)&&(e[r]=t.value),e))}_reduceChildren(e,t){let r=e;return this._forEachChild((i,u)=>{r=t(r,i,u)}),r}_allControlsDisabled(){for(const e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}}class FC extends B_{constructor(e,t,r){super(k_(t),F_(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(e){return this.controls[e]}push(e,t={}){this.controls.push(e),this._registerControl(e),this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}insert(e,t,r={}){this.controls.splice(e,0,t),this._registerControl(t),this.updateValueAndValidity({emitEvent:r.emitEvent})}removeAt(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),this.controls.splice(e,1),this.updateValueAndValidity({emitEvent:t.emitEvent})}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),this.controls.splice(e,1),t&&(this.controls.splice(e,0,t),this._registerControl(t)),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(e,t={}){PC(this,e),e.forEach((r,i)=>{V_(this,i),this.at(i).setValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(e.forEach((r,i)=>{this.at(i)&&this.at(i).patchValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e=[],t={}){this._forEachChild((r,i)=>{r.reset(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this.controls.map(e=>kC(e))}clear(e={}){this.controls.length<1||(this._forEachChild(t=>t._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:e.emitEvent}))}_syncPendingControls(){let e=this.controls.reduce((t,r)=>!!r._syncPendingControls()||t,!1);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){this.controls.forEach((t,r)=>{e(t,r)})}_updateValue(){this.value=this.controls.filter(e=>e.enabled||this.disabled).map(e=>e.value)}_anyControls(e){return this.controls.some(t=>t.enabled&&e(t))}_setUpControls(){this._forEachChild(e=>this._registerControl(e))}_allControlsDisabled(){for(const e of this.controls)if(e.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(e){e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)}}let U_=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=f.lG2({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),n})(),KE=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({}),n})();const Of=new f.OlP("NgModelWithFormControlWarning"),H_={provide:is,useExisting:(0,f.Gpc)(()=>Pd)};let Pd=(()=>{class n extends is{constructor(t,r){super(),this.validators=t,this.asyncValidators=r,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new f.vpe,this._setValidators(t),this._setAsyncValidators(r)}ngOnChanges(t){this._checkFormPresent(),t.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(Td(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(t){const r=this.form.get(t.path);return Xl(r,t),r.updateValueAndValidity({emitEvent:!1}),this.directives.push(t),r}getControl(t){return this.form.get(t.path)}removeControl(t){Og(t.control||null,t,!1),Af(this.directives,t)}addFormGroup(t){this._setUpFormContainer(t)}removeFormGroup(t){this._cleanUpFormContainer(t)}getFormGroup(t){return this.form.get(t.path)}addFormArray(t){this._setUpFormContainer(t)}removeFormArray(t){this._cleanUpFormContainer(t)}getFormArray(t){return this.form.get(t.path)}updateModel(t,r){this.form.get(t.path).setValue(r)}onSubmit(t){return this.submitted=!0,function O_(n,e){n._syncPendingControls(),e.forEach(t=>{const r=t.control;"submit"===r.updateOn&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}(this.form,this.directives),this.ngSubmit.emit(t),!1}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_updateDomValue(){this.directives.forEach(t=>{const r=t.control,i=this.form.get(t.path);r!==i&&(Og(r||null,t),HE(i)&&(Xl(i,t),t.control=i))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(t){const r=this.form.get(t.path);(function Ad(n,e){R_(n,e)})(r,t),r.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(t){if(this.form){const r=this.form.get(t.path);r&&function Sd(n,e){return Td(n,e)}(r,t)&&r.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){R_(this.form,this),this._oldForm&&Td(this._oldForm,this)}_checkFormPresent(){}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(_i,10),f.Y36(Ua,10))},n.\u0275dir=f.lG2({type:n,selectors:[["","formGroup",""]],hostBindings:function(t,r){1&t&&f.NdJ("submit",function(u){return r.onSubmit(u)})("reset",function(){return r.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[f._Bn([H_]),f.qOj,f.TTD]}),n})();const JE={provide:ja,useExisting:(0,f.Gpc)(()=>Lg)};let Lg=(()=>{class n extends ja{constructor(t,r,i,u,c){super(),this._ngModelWarningConfig=c,this._added=!1,this.update=new f.vpe,this._ngModelWarningSent=!1,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=function Tf(n,e){if(!e)return null;let t,r,i;return Array.isArray(e),e.forEach(u=>{u.constructor===Cg?t=u:function UE(n){return Object.getPrototypeOf(n.constructor)===Jl}(u)?r=u:i=u}),i||r||t||null}(0,u)}set isDisabled(t){}ngOnChanges(t){this._added||this._setUpControl(),function N_(n,e){if(!n.hasOwnProperty("model"))return!1;const t=n.model;return!!t.isFirstChange()||!Object.is(e,t.currentValue)}(t,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}get path(){return function Cf(n,e){return[...e.path,n]}(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this.control.disabled&&this.valueAccessor.setDisabledState&&this.valueAccessor.setDisabledState(!0),this._added=!0}}return n._ngModelWarningSentOnce=!1,n.\u0275fac=function(t){return new(t||n)(f.Y36(is,13),f.Y36(_i,10),f.Y36(Ua,10),f.Y36(No,10),f.Y36(Of,8))},n.\u0275dir=f.lG2({type:n,selectors:[["","formControlName",""]],inputs:{name:["formControlName","name"],isDisabled:["disabled","isDisabled"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},features:[f._Bn([JE]),f.qOj,f.TTD]}),n})(),ju=(()=>{class n{constructor(){this._validator=Ig}ngOnChanges(t){if(this.inputName in t){const r=this.normalizeInput(t[this.inputName].currentValue);this._enabled=this.enabled(r),this._validator=this._enabled?this.createValidator(r):Ig,this._onChange&&this._onChange()}}validate(t){return this._validator(t)}registerOnValidatorChange(t){this._onChange=t}enabled(t){return null!=t}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=f.lG2({type:n,features:[f.TTD]}),n})();const WC={provide:_i,useExisting:(0,f.Gpc)(()=>kf),multi:!0};let kf=(()=>{class n extends ju{constructor(){super(...arguments),this.inputName="required",this.normalizeInput=t=>function qC(n){return null!=n&&!1!==n&&"false"!=`${n}`}(t),this.createValidator=t=>E_}enabled(t){return t}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=f.n5z(n)))(r||n)}}(),n.\u0275dir=f.lG2({type:n,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(t,r){2&t&&f.uIk("required",r._enabled?"":null)},inputs:{required:"required"},features:[f._Bn([WC]),f.qOj]}),n})(),lw=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({imports:[[KE]]}),n})(),Z_=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:Of,useValue:t.warnOnNgModelWithFormControl}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({imports:[lw]}),n})();class eI{constructor(e,t){this.open=e,this.close=t||e}isManual(){return"manual"===this.open||"manual"===this.close}}const cw={hover:["mouseover","mouseout"],focus:["focusin","focusout"]};const jn="undefined"!=typeof window&&window||{};var $g=(()=>{return(n=$g||($g={})).isBs3="bs3",n.isBs4="bs4",n.isBs5="bs5",$g;var n})();let ro;function Hg(){if(void 0===jn.document)return"bs4";const n=jn.document.createElement("span");n.innerText="testing bs version",n.classList.add("d-none"),n.classList.add("pl-1"),jn.document.head.appendChild(n);const e=n.getBoundingClientRect(),t=jn.getComputedStyle(n).paddingLeft;return!e||e&&0!==e.top?(jn.document.head.removeChild(n),"bs3"):t&&parseFloat(t)?(jn.document.head.removeChild(n),"bs4"):(jn.document.head.removeChild(n),"bs5")}function Ha(){return void 0===jn||(void 0===jn.__theme?(ro||(ro=Hg()),"bs3"===ro):"bs3"===jn.__theme)}function Gg(){return!Ha()&&(ro||(ro=Hg()),"bs4"===ro)}function Pf(){return{isBs3:Ha(),isBs4:Gg(),isBs5:!Ha()&&!Gg()&&(ro||(ro=Hg()),"bs5"===ro)}}"undefined"==typeof console||console;let Y_,Lf=(()=>{class n{constructor(){this._focusTrapStack=[]}register(t){this._focusTrapStack=this._focusTrapStack.filter(i=>i!==t);let r=this._focusTrapStack;r.length&&r[r.length-1]._disable(),r.push(t),t._enable()}deregister(t){t._disable();const r=this._focusTrapStack,i=r.indexOf(t);-1!==i&&(r.splice(i,1),r.length&&r[r.length-1]._enable())}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();try{Y_="undefined"!=typeof Intl&&Intl.v8BreakIterator}catch(n){Y_=!1}let fw=(()=>{class n{constructor(t){this._platformId=t,this.isBrowser=this._platformId?Dr(this._platformId):"object"==typeof document&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!(!window.chrome&&!Y_)&&"undefined"!=typeof CSS&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(f.Lbi))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Fo=(()=>{class n{constructor(t){this._platform=t}isDisabled(t){return t.hasAttribute("disabled")}isVisible(t){return function Ei(n){return!!(n.offsetWidth||n.offsetHeight||"function"==typeof n.getClientRects&&n.getClientRects().length)}(t)&&"visible"===getComputedStyle(t).visibility}isTabbable(t){if(!this._platform.isBrowser)return!1;const r=function Vf(n){try{return n.frameElement}catch(e){return null}}(function jd(n){return n.ownerDocument&&n.ownerDocument.defaultView||window}(t));if(r&&(-1===ic(r)||!this.isVisible(r)))return!1;let i=t.nodeName.toLowerCase(),u=ic(t);return t.hasAttribute("contenteditable")?-1!==u:!("iframe"===i||"object"===i||this._platform.WEBKIT&&this._platform.IOS&&!function Bd(n){let e=n.nodeName.toLowerCase(),t="input"===e&&n.type;return"text"===t||"password"===t||"select"===e||"textarea"===e}(t))&&("audio"===i?!!t.hasAttribute("controls")&&-1!==u:"video"===i?-1!==u&&(null!==u||this._platform.FIREFOX||t.hasAttribute("controls")):t.tabIndex>=0)}isFocusable(t,r){return function Ud(n){return!function qg(n){return function Q_(n){return"input"==n.nodeName.toLowerCase()}(n)&&"hidden"==n.type}(n)&&(function nc(n){let e=n.nodeName.toLowerCase();return"input"===e||"select"===e||"button"===e||"textarea"===e}(n)||function io(n){return function Vd(n){return"a"==n.nodeName.toLowerCase()}(n)&&n.hasAttribute("href")}(n)||n.hasAttribute("contenteditable")||rc(n))}(t)&&!this.isDisabled(t)&&((null==r?void 0:r.ignoreVisibility)||this.isVisible(t))}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(fw))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function rc(n){if(!n.hasAttribute("tabindex")||void 0===n.tabIndex)return!1;let e=n.getAttribute("tabindex");return"-32768"!=e&&!(!e||isNaN(parseInt(e,10)))}function ic(n){if(!rc(n))return null;const e=parseInt(n.getAttribute("tabindex")||"",10);return isNaN(e)?-1:e}function sc(n){return null!=n&&"false"!=`${n}`}class $d{constructor(e,t,r,i,u=!1){this._element=e,this._checker=t,this._ngZone=r,this._document=i,this._hasAttached=!1,this.startAnchorListener=()=>this.focusLastTabbableElement(),this.endAnchorListener=()=>this.focusFirstTabbableElement(),this._enabled=!0,u||this.attachAnchors()}get enabled(){return this._enabled}set enabled(e){this._enabled=e,this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(e,this._startAnchor),this._toggleAnchorTabIndex(e,this._endAnchor))}destroy(){const e=this._startAnchor,t=this._endAnchor;e&&(e.removeEventListener("focus",this.startAnchorListener),e.parentNode&&e.parentNode.removeChild(e)),t&&(t.removeEventListener("focus",this.endAnchorListener),t.parentNode&&t.parentNode.removeChild(t)),this._startAnchor=this._endAnchor=null,this._hasAttached=!1}attachAnchors(){return!!this._hasAttached||(this._ngZone.runOutsideAngular(()=>{this._startAnchor||(this._startAnchor=this._createAnchor(),this._startAnchor.addEventListener("focus",this.startAnchorListener)),this._endAnchor||(this._endAnchor=this._createAnchor(),this._endAnchor.addEventListener("focus",this.endAnchorListener))}),this._element.parentNode&&(this._element.parentNode.insertBefore(this._startAnchor,this._element),this._element.parentNode.insertBefore(this._endAnchor,this._element.nextSibling),this._hasAttached=!0),this._hasAttached)}focusInitialElementWhenReady(){return new Promise(e=>{this._executeOnStable(()=>e(this.focusInitialElement()))})}focusFirstTabbableElementWhenReady(){return new Promise(e=>{this._executeOnStable(()=>e(this.focusFirstTabbableElement()))})}focusLastTabbableElementWhenReady(){return new Promise(e=>{this._executeOnStable(()=>e(this.focusLastTabbableElement()))})}_getRegionBoundary(e){let t=this._element.querySelectorAll(`[cdk-focus-region-${e}], [cdkFocusRegion${e}], [cdk-focus-${e}]`);for(let r=0;r<t.length;r++)t[r].hasAttribute(`cdk-focus-${e}`)?console.warn(`Found use of deprecated attribute 'cdk-focus-${e}', use 'cdkFocusRegion${e}' instead. The deprecated attribute will be removed in 8.0.0.`,t[r]):t[r].hasAttribute(`cdk-focus-region-${e}`)&&console.warn(`Found use of deprecated attribute 'cdk-focus-region-${e}', use 'cdkFocusRegion${e}' instead. The deprecated attribute will be removed in 8.0.0.`,t[r]);return"start"==e?t.length?t[0]:this._getFirstTabbableElement(this._element):t.length?t[t.length-1]:this._getLastTabbableElement(this._element)}focusInitialElement(){const e=this._element.querySelector("[cdk-focus-initial], [cdkFocusInitial]");if(e){if(e.hasAttribute("cdk-focus-initial")&&console.warn("Found use of deprecated attribute 'cdk-focus-initial', use 'cdkFocusInitial' instead. The deprecated attribute will be removed in 8.0.0",e),!this._checker.isFocusable(e)){const t=this._getFirstTabbableElement(e);return null==t||t.focus(),!!t}return e.focus(),!0}return this.focusFirstTabbableElement()}focusFirstTabbableElement(){const e=this._getRegionBoundary("start");return e&&e.focus(),!!e}focusLastTabbableElement(){const e=this._getRegionBoundary("end");return e&&e.focus(),!!e}hasAttached(){return this._hasAttached}_getFirstTabbableElement(e){if(this._checker.isFocusable(e)&&this._checker.isTabbable(e))return e;let t=e.children||e.childNodes;for(let r=0;r<t.length;r++){let i=t[r].nodeType===this._document.ELEMENT_NODE?this._getFirstTabbableElement(t[r]):null;if(i)return i}return null}_getLastTabbableElement(e){if(this._checker.isFocusable(e)&&this._checker.isTabbable(e))return e;let t=e.children||e.childNodes;for(let r=t.length-1;r>=0;r--){let i=t[r].nodeType===this._document.ELEMENT_NODE?this._getLastTabbableElement(t[r]):null;if(i)return i}return null}_createAnchor(){const e=this._document.createElement("div");return this._toggleAnchorTabIndex(this._enabled,e),e.classList.add("cdk-visually-hidden"),e.classList.add("cdk-focus-trap-anchor"),e.setAttribute("aria-hidden","true"),e}_toggleAnchorTabIndex(e,t){e?t.setAttribute("tabindex","0"):t.removeAttribute("tabindex")}toggleAnchors(e){this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(e,this._startAnchor),this._toggleAnchorTabIndex(e,this._endAnchor))}_executeOnStable(e){this._ngZone.isStable?e():this._ngZone.onStable.pipe((0,Do.q)(1)).subscribe(e)}}let Hd=(()=>{class n{constructor(t,r,i){this._checker=t,this._ngZone=r,this._document=i}create(t,r=!1){return new $d(t,this._checker,this._ngZone,this._document,r)}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(Fo),f.LFG(f.R0b),f.LFG(ie))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),gw=(()=>{class n{constructor(t,r,i){this._elementRef=t,this._focusTrapFactory=r,this._previouslyFocusedElement=null,this._autoCapture=!1,this._document=i,this.focusTrap=this._focusTrapFactory.create(this._elementRef.nativeElement,!0)}get enabled(){return this.focusTrap.enabled}set enabled(t){this.focusTrap.enabled=sc(t)}get autoCapture(){return this._autoCapture}set autoCapture(t){this._autoCapture=sc(t)}ngOnDestroy(){this.focusTrap.destroy(),this._previouslyFocusedElement&&(this._previouslyFocusedElement.focus(),this._previouslyFocusedElement=null)}ngAfterContentInit(){this.focusTrap.attachAnchors(),this.autoCapture&&this._captureFocus()}ngDoCheck(){this.focusTrap.hasAttached()||this.focusTrap.attachAnchors()}ngOnChanges(t){const r=t.autoCapture;r&&!r.firstChange&&this.autoCapture&&this.focusTrap.hasAttached()&&this._captureFocus()}_captureFocus(){this._previouslyFocusedElement=this._document.activeElement,this.focusTrap.focusInitialElementWhenReady()}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(f.SBq),f.Y36(Hd),f.Y36(ie))},n.\u0275dir=f.lG2({type:n,selectors:[["","focusTrap",""]],inputs:{enabled:["cdkTrapFocus","enabled"],autoCapture:["cdkTrapFocusAutoCapture","autoCapture"]},exportAs:["focusTrap"],features:[f.TTD]}),n})(),J_=(()=>{class n{static forRoot(){return{ngModule:n,providers:[Lf,fw,Fo]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({imports:[[br]]}),n})();var X_=k(6451),mw=k(1144);const yw=["addListener","removeListener"],_w=["addEventListener","removeEventListener"],vw=["on","off"];function Bf(n,e,t,r){if((0,fi.m)(t)&&(r=t,t=void 0),r)return Bf(n,e,t).pipe(Al(r));const[i,u]=function pI(n){return(0,fi.m)(n.addEventListener)&&(0,fi.m)(n.removeEventListener)}(n)?_w.map(c=>p=>n[c](e,p,t)):function fI(n){return(0,fi.m)(n.addListener)&&(0,fi.m)(n.removeListener)}(n)?yw.map(ev(n,e)):function Ew(n){return(0,fi.m)(n.on)&&(0,fi.m)(n.off)}(n)?vw.map(ev(n,e)):[];if(!i&&(0,mw.z)(n))return(0,vn.z)(c=>Bf(c,e,t))((0,bo.Xf)(n));if(!i)throw new TypeError("Invalid event target");return new Fr.y(c=>{const p=(...y)=>c.next(1<y.length?y:y[0]);return i(p),()=>u(p)})}function ev(n,e){return t=>r=>n[t](e,r)}var ww=k(4408);const Gd={schedule(n){let e=requestAnimationFrame,t=cancelAnimationFrame;const{delegate:r}=Gd;r&&(e=r.requestAnimationFrame,t=r.cancelAnimationFrame);const i=e(u=>{t=void 0,n(u)});return new ea.w0(()=>null==t?void 0:t(i))},requestAnimationFrame(...n){const{delegate:e}=Gd;return((null==e?void 0:e.requestAnimationFrame)||requestAnimationFrame)(...n)},cancelAnimationFrame(...n){const{delegate:e}=Gd;return((null==e?void 0:e.cancelAnimationFrame)||cancelAnimationFrame)(...n)},delegate:void 0};var mI=k(7565);const yI=new class bw extends mI.v{flush(e){this._active=!0;const t=this._scheduled;this._scheduled=void 0;const{actions:r}=this;let i;e=e||r.shift();do{if(i=e.execute(e.state,e.delay))break}while((e=r[0])&&e.id===t&&r.shift());if(this._active=!1,i){for(;(e=r[0])&&e.id===t&&r.shift();)e.unsubscribe();throw i}}}(class gI extends ww.o{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}requestAsyncId(e,t,r=0){return null!==r&&r>0?super.requestAsyncId(e,t,r):(e.actions.push(this),e._scheduled||(e._scheduled=Gd.requestAnimationFrame(()=>e.flush(void 0))))}recycleAsyncId(e,t,r=0){if(null!=r&&r>0||null==r&&this.delay>0)return super.recycleAsyncId(e,t,r);e.actions.some(i=>i.id===t)||(Gd.cancelAnimationFrame(t),e._scheduled=void 0)}});var zg=(()=>{return(n=zg||(zg={})).top="top",n.bottom="bottom",n.left="left",n.right="right",n.auto="auto",n.end="right",n.start="left",n["top left"]="top left",n["top right"]="top right",n["right top"]="right top",n["right bottom"]="right bottom",n["bottom right"]="bottom right",n["bottom left"]="bottom left",n["left bottom"]="left bottom",n["left top"]="left top",n["top start"]="top left",n["top end"]="top right",n["end top"]="right top",n["end bottom"]="right bottom",n["bottom end"]="bottom right",n["bottom start"]="bottom left",n["start bottom"]="start bottom",n["start top"]="left top",zg;var n})(),Uf=(()=>{return(n=Uf||(Uf={})).top="top",n.bottom="bottom",n.left="start",n.right="end",n.auto="auto",n.end="end",n.start="start",n["top left"]="top start",n["top right"]="top end",n["right top"]="end top",n["right bottom"]="end bottom",n["bottom right"]="bottom end",n["bottom left"]="bottom start",n["left bottom"]="start bottom",n["left top"]="start top",n["top start"]="top start",n["top end"]="top end",n["end top"]="end top",n["end bottom"]="end bottom",n["bottom end"]="bottom end",n["bottom start"]="bottom start",n["start bottom"]="start bottom",n["start top"]="start top",Uf;var n})();function qd(n,e){if(1!==n.nodeType)return[];const t=n.ownerDocument.defaultView,r=null==t?void 0:t.getComputedStyle(n,null);return e?r&&r[e]:r}function tv(n){if(!n)return document.documentElement;let r,t=null==n?void 0:n.offsetParent;for(;null===t&&n.nextElementSibling&&r!==n.nextElementSibling;)r=n.nextElementSibling,t=r.offsetParent;const i=t&&t.nodeName;return i&&"BODY"!==i&&"HTML"!==i?t&&-1!==["TH","TD","TABLE"].indexOf(t.nodeName)&&"static"===qd(t,"position")?tv(t):t:r?r.ownerDocument.documentElement:document.documentElement}function jf(n){return null!==n.parentNode?jf(n.parentNode):n}function Wg(n,e){if(!(n&&n.nodeType&&e&&e.nodeType))return document.documentElement;const t=n.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_FOLLOWING,r=t?n:e,i=t?e:n,u=document.createRange();u.setStart(r,0),u.setEnd(i,0);const c=u.commonAncestorContainer;if(n!==c&&e!==c||r.contains(i))return function nv(n){const{nodeName:e}=n;return"BODY"!==e&&("HTML"===e||tv(n.firstElementChild)===n)}(c)?c:tv(c);const p=jf(n);return p.host?Wg(p.host,e):Wg(n,jf(e).host)}function vI(n){if(!n||!n.parentElement)return document.documentElement;let e=n.parentElement;for(;(null==e?void 0:e.parentElement)&&"none"===qd(e,"transform");)e=e.parentElement;return e||document.documentElement}function EI(n,e){const t="x"===e?"Left":"Top",r="Left"===t?"Right":"Bottom";return parseFloat(n[`border${t}Width`])+parseFloat(n[`border${r}Width`])}function wI(n,e,t,r){return Math.max(e[`offset${n}`],e[`scroll${n}`],t[`client${n}`],t[`offset${n}`],t[`scroll${n}`],0)}function Dw(n){const e=n.body,t=n.documentElement;return{height:wI("Height",e,t),width:wI("Width",e,t)}}function zd(n){return Object.assign(Object.assign({},n),{right:(n.left||0)+n.width,bottom:(n.top||0)+n.height})}function On(n){return"number"==typeof n||"[object Number]"===Object.prototype.toString.call(n)}function oc(n){const e=n.getBoundingClientRect();if(!(e&&On(e.top)&&On(e.left)&&On(e.bottom)&&On(e.right)))return e;const t={left:e.left,top:e.top,width:e.right-e.left,height:e.bottom-e.top},r="HTML"===n.nodeName?Dw(n.ownerDocument):void 0,i=(null==r?void 0:r.width)||n.clientWidth||On(e.right)&&On(t.left)&&e.right-t.left||0,u=(null==r?void 0:r.height)||n.clientHeight||On(e.bottom)&&On(t.top)&&e.bottom-t.top||0;let c=n.offsetWidth-i,p=n.offsetHeight-u;if(c||p){const y=qd(n);c-=EI(y,"x"),p-=EI(y,"y"),t.width-=c,t.height-=p}return zd(t)}function rv(n){return"HTML"===n.nodeName?n:n.parentNode||n.host}function Kg(n){if(!n)return document.body;switch(n.nodeName){case"HTML":case"BODY":return n.ownerDocument.body;case"#document":return n.body}const{overflow:e,overflowX:t,overflowY:r}=qd(n);return/(auto|scroll|overlay)/.test(String(e)+String(r)+String(t))?n:Kg(rv(n))}function iv(n,e,t=!1){var r,i,u,c,p,y;const b="HTML"===e.nodeName,S=oc(n),M=oc(e),B=(Kg(n),qd(e)),G=parseFloat(B.borderTopWidth),te=parseFloat(B.borderLeftWidth);t&&b&&(M.top=Math.max(null!==(r=M.top)&&void 0!==r?r:0,0),M.left=Math.max(null!==(i=M.left)&&void 0!==i?i:0,0));const Ee=zd({top:(null!==(u=S.top)&&void 0!==u?u:0)-(null!==(c=M.top)&&void 0!==c?c:0)-G,left:(null!==(p=S.left)&&void 0!==p?p:0)-(null!==(y=M.left)&&void 0!==y?y:0)-te,width:S.width,height:S.height});if(Ee.marginTop=0,Ee.marginLeft=0,b){const Ze=parseFloat(B.marginTop),Ye=parseFloat(B.marginLeft);On(Ee.top)&&(Ee.top-=G-Ze),On(Ee.bottom)&&(Ee.bottom-=G-Ze),On(Ee.left)&&(Ee.left-=te-Ye),On(Ee.right)&&(Ee.right-=te-Ye),Ee.marginTop=Ze,Ee.marginLeft=Ye}return Ee}function sv(n,e="top"){const t="top"===e?"scrollTop":"scrollLeft",r=n.nodeName;if("BODY"===r||"HTML"===r){const i=n.ownerDocument.documentElement;return(n.ownerDocument.scrollingElement||i)[t]}return n[t]}function Cw(n){const e=n.nodeName;return"BODY"!==e&&"HTML"!==e&&("fixed"===qd(n,"position")||Cw(rv(n)))}function Yg(n,e,t=0,r,i=!1){let u={top:0,left:0};const c=i?vI(n):Wg(n,e);if("viewport"===r)u=function Zg(n,e=!1){const t=n.ownerDocument.documentElement,r=iv(n,t),i=Math.max(t.clientWidth,window.innerWidth||0),u=Math.max(t.clientHeight,window.innerHeight||0),c=e?0:sv(t),p=e?0:sv(t,"left");return zd({top:c-Number(null==r?void 0:r.top)+Number(null==r?void 0:r.marginTop),left:p-Number(null==r?void 0:r.left)+Number(null==r?void 0:r.marginLeft),width:i,height:u})}(c,i);else{let p;"scrollParent"===r?(p=Kg(rv(e)),"BODY"===p.nodeName&&(p=n.ownerDocument.documentElement)):p="window"===r?n.ownerDocument.documentElement:r;const y=iv(p,c,i);if(y&&"HTML"===p.nodeName&&!Cw(c)){const{height:b,width:S}=Dw(n.ownerDocument);On(u.top)&&On(y.top)&&On(y.marginTop)&&(u.top+=y.top-y.marginTop),On(u.top)&&(u.bottom=Number(b)+Number(y.top)),On(u.left)&&On(y.left)&&On(y.marginLeft)&&(u.left+=y.left-y.marginLeft),On(u.top)&&(u.right=Number(S)+Number(y.left))}else y&&(u=y)}return On(u.left)&&(u.left+=t),On(u.top)&&(u.top+=t),On(u.right)&&(u.right-=t),On(u.bottom)&&(u.bottom-=t),u}function bI({width:n,height:e}){return n*e}function Iw(n,e,t,r,i=["top","bottom","right","left"],u="viewport",c=0){var p,y,b,S,M,F,B,G,te,Ee,Ze,Ye;if(-1===n.indexOf("auto"))return n;const je=Yg(t,r,c,u),et={top:{width:null!==(p=null==je?void 0:je.width)&&void 0!==p?p:0,height:(null!==(y=null==e?void 0:e.top)&&void 0!==y?y:0)-(null!==(b=null==je?void 0:je.top)&&void 0!==b?b:0)},right:{width:(null!==(S=null==je?void 0:je.right)&&void 0!==S?S:0)-(null!==(M=null==e?void 0:e.right)&&void 0!==M?M:0),height:null!==(F=null==je?void 0:je.height)&&void 0!==F?F:0},bottom:{width:null!==(B=null==je?void 0:je.width)&&void 0!==B?B:0,height:(null!==(G=null==je?void 0:je.bottom)&&void 0!==G?G:0)-(null!==(te=null==e?void 0:e.bottom)&&void 0!==te?te:0)},left:{width:(null!==(Ee=e.left)&&void 0!==Ee?Ee:0)-(null!==(Ze=null==je?void 0:je.left)&&void 0!==Ze?Ze:0),height:null!==(Ye=null==je?void 0:je.height)&&void 0!==Ye?Ye:0}},_t=Object.keys(et).map(or=>Object.assign(Object.assign({position:or},et[or]),{area:bI(et[or])})).sort((or,ri)=>ri.area-or.area);let Ct=_t.filter(({width:or,height:ri})=>or>=t.clientWidth&&ri>=t.clientHeight);Ct=Ct.filter(({position:or})=>i.some(ri=>ri===or));const $t=Ct.length>0?Ct[0].position:_t[0].position,Qn=n.split(" ")[1];return t.className=t.className.replace(/bs-tooltip-auto/g,`bs-tooltip-${Pf().isBs5?Uf[$t]:$t}`),$t+(Qn?`-${Qn}`:"")}const $f=(n,e=0)=>n?parseFloat(n):e;function Tw(n){const e=n.ownerDocument.defaultView,t=null==e?void 0:e.getComputedStyle(n),r=$f(null==t?void 0:t.marginTop)+$f(null==t?void 0:t.marginBottom),i=$f(null==t?void 0:t.marginLeft)+$f(null==t?void 0:t.marginRight);return{width:Number(n.offsetWidth)+i,height:Number(n.offsetHeight)+r}}function ov(n,e,t){return iv(e,t?vI(n):Wg(n,e),t)}function Qg(n,e,t){var r,i,u;const c=t.split(" ")[0],p=Tw(n),y={width:p.width,height:p.height},b=-1!==["right","left"].indexOf(c),S=b?"top":"left",M=b?"left":"top",F=b?"height":"width",B=b?"width":"height";return y[S]=(null!==(r=e[S])&&void 0!==r?r:0)+e[F]/2-p[F]/2,y[M]=c===M?(null!==(i=e[M])&&void 0!==i?i:0)-p[B]:null!==(u=e[function CI(n){const e={left:"right",right:"left",bottom:"top",top:"bottom"};return n.replace(/left|right|bottom|top/g,t=>e[t])}(M)])&&void 0!==u?u:0,y}function Jg(n,e){var t;return!!(null===(t=n.modifiers[e])||void 0===t?void 0:t.enabled)}const KM={top:["top","top start","top end"],bottom:["bottom","bottom start","bottom end"],start:["start","start top","start bottom"],end:["end","end top","end bottom"]};function Wd(n,e){return!!Pf().isBs5&&KM[e].includes(n)}function Kd(n,e,t){!n||!e||Object.keys(e).forEach(r=>{let i="";-1!==["width","height","top","right","bottom","left"].indexOf(r)&&function WM(n){return""!==n&&!isNaN(parseFloat(n))&&isFinite(Number(n))}(e[r])&&(i="px"),t?t.setStyle(n,r,`${String(e[r])}${i}`):n.style[r]=String(e[r])+i})}function Aw(n){var e,t,r,i,u,c;let p=n.offsets.target;const y=n.instance.target.querySelector(".arrow");if(!y)return n;const b=-1!==["left","right"].indexOf(n.placement.split(" ")[0]),S=b?"height":"width",M=b?"Top":"Left",F=M.toLowerCase(),B=b?"left":"top",G=b?"bottom":"right",te=Tw(y)[S],Ee=n.placement.split(" ")[1];(null!==(e=n.offsets.host[G])&&void 0!==e?e:0)-te<(null!==(t=p[F])&&void 0!==t?t:0)&&(p[F]-=(null!==(r=p[F])&&void 0!==r?r:0)-((null!==(i=n.offsets.host[G])&&void 0!==i?i:0)-te)),Number(n.offsets.host[F])+Number(te)>(null!==(u=p[G])&&void 0!==u?u:0)&&(p[F]+=Number(n.offsets.host[F])+Number(te)-Number(p[G])),p=zd(p);const Ze=qd(n.instance.target),Ye=parseFloat(Ze[`margin${M}`])||0,je=parseFloat(Ze[`border${M}Width`])||0;let et;if(Ee){const Ct=parseFloat(Ze.borderRadius)||0,$t=Number(Ye+je+Ct);et=F===Ee?Number(n.offsets.host[F])+$t:Number(n.offsets.host[F])+Number(n.offsets.host[S]-$t)}else et=Number(n.offsets.host[F])+Number(n.offsets.host[S]/2-te/2);let _t=et-(null!==(c=p[F])&&void 0!==c?c:0)-Ye-je;return _t=Math.max(Math.min(p[S]-(te+5),_t),0),n.offsets.arrow={[F]:Math.round(_t),[B]:""},n.instance.arrow=y,n}function av(n){if(n.offsets.target=zd(n.offsets.target),!Jg(n.options,"flip"))return n.offsets.target=Object.assign(Object.assign({},n.offsets.target),Qg(n.instance.target,n.offsets.host,n.placement)),n;const e=Yg(n.instance.target,n.instance.host,0,"viewport",!1);let t=n.placement.split(" ")[0],r=n.placement.split(" ")[1]||"";const p=Iw("auto",n.offsets.host,n.instance.target,n.instance.host,n.options.allowedPositions),y=[t,p];return y.forEach((b,S)=>{var M,F,B,G,te,Ee,Ze,Ye,je,et,_t,Ct,$t,Qn,or,ri;if(t!==b||y.length===S+1)return;t=n.placement.split(" ")[0];const lE="left"===t&&Math.floor(null!==(M=n.offsets.target.right)&&void 0!==M?M:0)>Math.floor(null!==(F=n.offsets.host.left)&&void 0!==F?F:0)||"right"===t&&Math.floor(null!==(B=n.offsets.target.left)&&void 0!==B?B:0)<Math.floor(null!==(G=n.offsets.host.right)&&void 0!==G?G:0)||"top"===t&&Math.floor(null!==(te=n.offsets.target.bottom)&&void 0!==te?te:0)>Math.floor(null!==(Ee=n.offsets.host.top)&&void 0!==Ee?Ee:0)||"bottom"===t&&Math.floor(null!==(Ze=n.offsets.target.top)&&void 0!==Ze?Ze:0)<Math.floor(null!==(Ye=n.offsets.host.bottom)&&void 0!==Ye?Ye:0),Ph=Math.floor(null!==(je=n.offsets.target.left)&&void 0!==je?je:0)<Math.floor(null!==(et=e.left)&&void 0!==et?et:0),ol=Math.floor(null!==(_t=n.offsets.target.right)&&void 0!==_t?_t:0)>Math.floor(null!==(Ct=e.right)&&void 0!==Ct?Ct:0),cE=Math.floor(null!==($t=n.offsets.target.top)&&void 0!==$t?$t:0)<Math.floor(null!==(Qn=e.top)&&void 0!==Qn?Qn:0),dE=Math.floor(null!==(or=n.offsets.target.bottom)&&void 0!==or?or:0)>Math.floor(null!==(ri=e.bottom)&&void 0!==ri?ri:0),ut="left"===t&&Ph||"right"===t&&ol||"top"===t&&cE||"bottom"===t&&dE,mt=-1!==["top","bottom"].indexOf(t),At=mt&&"left"===r&&Ph||mt&&"right"===r&&ol||!mt&&"left"===r&&cE||!mt&&"right"===r&&dE;(lE||ut||At)&&((lE||ut)&&(t=y[S+1]),At&&(r=function II(n){return"right"===n?"left":"left"===n?"right":n}(r)),n.placement=t+(r?` ${r}`:""),n.offsets.target=Object.assign(Object.assign({},n.offsets.target),Qg(n.instance.target,n.offsets.host,n.placement)))}),n}function AI(n){var e;if(!Jg(n.options,"preventOverflow"))return n;const t="transform",r=n.instance.target.style,{top:i,left:u,[t]:c}=r;r.top="",r.left="",r[t]="";const p=Yg(n.instance.target,n.instance.host,0,(null===(e=n.options.modifiers.preventOverflow)||void 0===e?void 0:e.boundariesElement)||"scrollParent",!1);r.top=i,r.left=u,r[t]=c;const b={primary(S){var M,F,B,G;let te=n.offsets.target[S];return(null!==(M=n.offsets.target[S])&&void 0!==M?M:0)<(null!==(F=p[S])&&void 0!==F?F:0)&&(te=Math.max(null!==(B=n.offsets.target[S])&&void 0!==B?B:0,null!==(G=p[S])&&void 0!==G?G:0)),{[S]:te}},secondary(S){var M,F,B,G;const te="right"===S,Ee=te?"left":"top";let Ye=n.offsets.target[Ee];return(null!==(M=n.offsets.target[S])&&void 0!==M?M:0)>(null!==(F=p[S])&&void 0!==F?F:0)&&(Ye=Math.min(null!==(B=n.offsets.target[Ee])&&void 0!==B?B:0,(null!==(G=p[S])&&void 0!==G?G:0)-n.offsets.target[te?"width":"height"])),{[Ee]:Ye}}};return["left","right","top","bottom"].forEach(S=>{const M=-1!==["left","top","start"].indexOf(S)?b.primary:b.secondary;n.offsets.target=Object.assign(Object.assign({},n.offsets.target),M(S))}),n}function Xg(n){var e;const t=n.placement,r=t.split(" ")[0],i=t.split(" ")[1];if(i){const{host:u,target:c}=n.offsets,p=-1!==["bottom","top"].indexOf(r),y=p?"left":"top",b=p?"width":"height",S={start:{[y]:u[y]},end:{[y]:(null!==(e=u[y])&&void 0!==e?e:0)+u[b]-c[b]}};n.offsets.target=Object.assign(Object.assign({},c),{[y]:y===i?S.start[y]:S.end[y]})}return n}const lv=new class em{position(e,t){return this.offset(e,t)}offset(e,t){return ov(t,e)}positionElements(e,t,r,i,u){const c=[av,Xg,AI,Aw],y=function uv(n,e,t,r){if(!n||!e)return;const i=ov(n,e);!t.match(/^(auto)*\s*(left|right|top|bottom|start|end)*$/)&&!t.match(/^(left|right|top|bottom|start|end)*(?: (left|right|top|bottom|start|end))*$/)&&(t="auto");const u=!!t.match(/auto/g);let c=t.match(/auto\s(left|right|top|bottom|start|end)/)?t.split(" ")[1]||"auto":t;const p=c.match(/^(left|right|top|bottom|start|end)* ?(?!\1)(left|right|top|bottom|start|end)?/);return p&&(c=p[1]+(p[2]?` ${p[2]}`:"")),-1!==["left right","right left","top bottom","bottom top"].indexOf(c)&&(c="auto"),c=Iw(c,i,n,e,r?r.allowedPositions:void 0),{options:r||{modifiers:{}},instance:{target:n,host:e,arrow:void 0},offsets:{target:Qg(n,i,c),host:i,arrow:void 0},positionFixed:!1,placement:c,placementAuto:u}}(t,e,zg[r],u);if(y)return c.reduce((b,S)=>S(b),y)}};function YM(n,e,t,r,i,u){const c=lv.positionElements(n,e,t,r,i);if(!c)return;const p=function DI(n){var e,t,r,i;return{width:n.offsets.target.width,height:n.offsets.target.height,left:Math.floor(null!==(e=n.offsets.target.left)&&void 0!==e?e:0),top:Math.round(null!==(t=n.offsets.target.top)&&void 0!==t?t:0),bottom:Math.round(null!==(r=n.offsets.target.bottom)&&void 0!==r?r:0),right:Math.floor(null!==(i=n.offsets.target.right)&&void 0!==i?i:0)}}(c);Kd(e,{"will-change":"transform",top:"0px",left:"0px",transform:`translate3d(${p.left}px, ${p.top}px, 0px)`},u),c.instance.arrow&&Kd(c.instance.arrow,c.offsets.arrow,u),function ZM(n,e){const t=n.instance.target;let r=t.className;const i=Pf().isBs5?Uf[n.placement]:n.placement;n.placementAuto&&(r=r.replace(/bs-popover-auto/g,`bs-popover-${i}`),r=r.replace(/ms-2|me-2|mb-2|mt-2/g,""),r=r.replace(/bs-tooltip-auto/g,`bs-tooltip-${i}`),r=r.replace(/\sauto/g,` ${i}`),-1!==r.indexOf("popover")&&(r=r+" "+function TI(n){return Pf().isBs5?Wd(n,"end")?"ms-2":Wd(n,"start")?"me-2":Wd(n,"top")?"mb-2":Wd(n,"bottom")?"mt-2":"":""}(i)),-1!==r.indexOf("popover")&&-1===r.indexOf("popover-auto")&&(r+=" popover-auto"),-1!==r.indexOf("tooltip")&&-1===r.indexOf("tooltip-auto")&&(r+=" tooltip-auto")),r=r.replace(/left|right|top|bottom|end|start/g,`${i.split(" ")[0]}`),e?e.setAttribute(t,"class",r):t.className=r}(c,u)}let tm=(()=>{class n{constructor(t,r,i){this.update$$=new rr.x,this.positionElements=new Map,this.isDisabled=!1,Dr(i)&&t.runOutsideAngular(()=>{this.triggerEvent$=(0,X_.T)(Bf(window,"scroll",{passive:!0}),Bf(window,"resize",{passive:!0}),yt(0,yI),this.update$$),this.triggerEvent$.subscribe(()=>{this.isDisabled||this.positionElements.forEach(u=>{YM(Zd(u.target),Zd(u.element),u.attachment,u.appendToBody,this.options,r.createRenderer(null,null))})})})}position(t){this.addPositionElement(t)}get event$(){return this.triggerEvent$}disable(){this.isDisabled=!0}enable(){this.isDisabled=!1}addPositionElement(t){this.positionElements.set(Zd(t.element),t)}calcPosition(){this.update$$.next(null)}deletePositionElement(t){this.positionElements.delete(Zd(t))}setOptions(t){this.options=t}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(f.R0b),f.LFG(f.FYo),f.LFG(f.Lbi))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function Zd(n){return"string"==typeof n?document.querySelector(n):n instanceof f.SBq?n.nativeElement:null!=n?n:null}class Yd{constructor(e,t,r){this.nodes=e,this.viewRef=t,this.componentRef=r}}class Mw{constructor(e,t,r,i,u,c,p,y){this._viewContainerRef=e,this._renderer=t,this._elementRef=r,this._injector=i,this._componentFactoryResolver=u,this._ngZone=c,this._applicationRef=p,this._posService=y,this.onBeforeShow=new f.vpe,this.onShown=new f.vpe,this.onBeforeHide=new f.vpe,this.onHidden=new f.vpe,this._providers=[],this._isHiding=!1,this.containerDefaultSelector="body",this._listenOpts={},this._globalListener=Function.prototype}get isShown(){return!this._isHiding&&!!this._componentRef}attach(e){return this._componentFactory=this._componentFactoryResolver.resolveComponentFactory(e),this}to(e){return this.container=e||this.container,this}position(e){return e?(this.attachment=e.attachment||this.attachment,this._elementRef=e.target||this._elementRef,this):this}provide(e){return this._providers.push(e),this}show(e={}){if(this._subscribePositioning(),this._innerComponent=void 0,!this._componentRef){this.onBeforeShow.emit(),this._contentRef=this._getContentRef(e.content,e.context,e.initialState);const t=f.zs3.create({providers:this._providers,parent:this._injector});if(!this._componentFactory)return;if(this._componentRef=this._componentFactory.create(t,this._contentRef.nodes),this._applicationRef.attachView(this._componentRef.hostView),this.instance=this._componentRef.instance,Object.assign(this._componentRef.instance,e),this.container instanceof f.SBq&&this.container.nativeElement.appendChild(this._componentRef.location.nativeElement),"string"==typeof this.container&&"undefined"!=typeof document){const r=document.querySelector(this.container)||document.querySelector(this.containerDefaultSelector);if(!r)return;r.appendChild(this._componentRef.location.nativeElement)}!this.container&&this._elementRef&&this._elementRef.nativeElement.parentElement&&this._elementRef.nativeElement.parentElement.appendChild(this._componentRef.location.nativeElement),this._contentRef.componentRef&&(this._innerComponent=this._contentRef.componentRef.instance,this._contentRef.componentRef.changeDetectorRef.markForCheck(),this._contentRef.componentRef.changeDetectorRef.detectChanges()),this._componentRef.changeDetectorRef.markForCheck(),this._componentRef.changeDetectorRef.detectChanges(),this.onShown.emit(e.id?{id:e.id}:this._componentRef.instance)}return this._registerOutsideClick(),this._componentRef}hide(e){var t,r,i,u,c,p;if(!this._componentRef)return this;this._posService.deletePositionElement(this._componentRef.location),this.onBeforeHide.emit(this._componentRef.instance);const y=this._componentRef.location.nativeElement;return null===(t=y.parentNode)||void 0===t||t.removeChild(y),null===(i=null===(r=this._contentRef)||void 0===r?void 0:r.componentRef)||void 0===i||i.destroy(),this._viewContainerRef&&(null===(u=this._contentRef)||void 0===u?void 0:u.viewRef)&&this._viewContainerRef.remove(this._viewContainerRef.indexOf(this._contentRef.viewRef)),null===(p=null===(c=this._contentRef)||void 0===c?void 0:c.viewRef)||void 0===p||p.destroy(),this._contentRef=void 0,this._componentRef=void 0,this._removeGlobalListener(),this.onHidden.emit(e?{id:e}:null),this}toggle(){this.isShown?this.hide():this.show()}dispose(){this.isShown&&this.hide(),this._unsubscribePositioning(),this._unregisterListenersFn&&this._unregisterListenersFn()}listen(e){var t;this.triggers=e.triggers||this.triggers,this._listenOpts.outsideClick=e.outsideClick,this._listenOpts.outsideEsc=e.outsideEsc,e.target=e.target||(null===(t=this._elementRef)||void 0===t?void 0:t.nativeElement);const r=this._listenOpts.hide=()=>e.hide?e.hide():void this.hide(),i=this._listenOpts.show=c=>{e.show?e.show(c):this.show(c),c()};return this._renderer&&(this._unregisterListenersFn=function rI(n,e){const t=function tI(n,e=cw){const t=(n||"").trim();if(0===t.length)return[];const r=t.split(/\s+/).map(u=>u.split(":")).map(u=>{const c=e[u[0]]||u;return new eI(c[0],c[1])}),i=r.filter(u=>u.isManual());if(i.length>1)throw new Error("Triggers parse error: only one manual trigger is allowed");if(1===i.length&&r.length>1)throw new Error("Triggers parse error: manual trigger can't be mixed with other triggers");return r}(e.triggers),r=e.target;if(1===t.length&&t[0].isManual())return Function.prototype;const i=[],u=[],c=()=>{u.forEach(p=>i.push(p())),u.length=0};return t.forEach(p=>{const y=p.open===p.close,b=y?e.toggle:e.show;if(!y&&p.close&&e.hide){const S=n.listen(r,p.close,e.hide);u.push(()=>S)}b&&i.push(n.listen(r,p.open,()=>b(c)))}),()=>{i.forEach(p=>p())}}(this._renderer,{target:e.target,triggers:e.triggers,show:i,hide:r,toggle:c=>{this.isShown?r():i(c)}})),this}_removeGlobalListener(){this._globalListener&&(this._globalListener(),this._globalListener=Function.prototype)}attachInline(e,t){return e&&t&&(this._inlineViewRef=e.createEmbeddedView(t)),this}_registerOutsideClick(){if(this._componentRef&&this._componentRef.location){if(this._listenOpts.outsideClick){const e=this._componentRef.location.nativeElement;setTimeout(()=>{this._renderer&&this._elementRef&&(this._globalListener=function iI(n,e){return e.outsideClick?n.listen("document","click",t=>{e.target&&e.target.contains(t.target)||e.targets&&e.targets.some(r=>r.contains(t.target))||e.hide&&e.hide()}):Function.prototype}(this._renderer,{targets:[e,this._elementRef.nativeElement],outsideClick:this._listenOpts.outsideClick,hide:()=>this._listenOpts.hide&&this._listenOpts.hide()}))})}this._listenOpts.outsideEsc&&this._renderer&&this._elementRef&&(this._globalListener=function $M(n,e){return e.outsideEsc?n.listen("document","keyup.esc",t=>{e.target&&e.target.contains(t.target)||e.targets&&e.targets.some(r=>r.contains(t.target))||e.hide&&e.hide()}):Function.prototype}(this._renderer,{targets:[this._componentRef.location.nativeElement,this._elementRef.nativeElement],outsideEsc:this._listenOpts.outsideEsc,hide:()=>this._listenOpts.hide&&this._listenOpts.hide()}))}}getInnerComponent(){return this._innerComponent}_subscribePositioning(){this._zoneSubscription||!this.attachment||(this.onShown.subscribe(()=>{var e;this._posService.position({element:null===(e=this._componentRef)||void 0===e?void 0:e.location,target:this._elementRef,attachment:this.attachment,appendToBody:"body"===this.container})}),this._zoneSubscription=this._ngZone.onStable.subscribe(()=>{!this._componentRef||this._posService.calcPosition()}))}_unsubscribePositioning(){!this._zoneSubscription||(this._zoneSubscription.unsubscribe(),this._zoneSubscription=void 0)}_getContentRef(e,t,r){if(!e)return new Yd([]);if(e instanceof f.Rgc){if(this._viewContainerRef){const c=this._viewContainerRef.createEmbeddedView(e,t);return c.markForCheck(),new Yd([c.rootNodes],c)}const u=e.createEmbeddedView({});return this._applicationRef.attachView(u),new Yd([u.rootNodes],u)}if("function"==typeof e){const u=this._componentFactoryResolver.resolveComponentFactory(e),c=f.zs3.create({providers:this._providers,parent:this._injector}),p=u.create(c);return Object.assign(p.instance,r),this._applicationRef.attachView(p.hostView),new Yd([[p.location.nativeElement]],p.hostView,p)}const i=this._renderer?[this._renderer.createText(`${e}`)]:[];return new Yd([i])}}let ac=(()=>{class n{constructor(t,r,i,u,c){this._componentFactoryResolver=t,this._ngZone=r,this._injector=i,this._posService=u,this._applicationRef=c}createLoader(t,r,i){return new Mw(r,i,t,this._injector,this._componentFactoryResolver,this._ngZone,this._applicationRef,this._posService)}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(f._Vd),f.LFG(f.R0b),f.LFG(f.zs3),f.LFG(tm),f.LFG(f.z2F))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const xw=["*"];let cv=(()=>{class n{constructor(){this.hide=()=>{},this.setClass=()=>{}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"platform"}),n})(),dv=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"platform"}),n})();const nm={backdrop:!0,keyboard:!0,focus:!0,show:!1,ignoreBackdropClick:!1,class:"",animated:!0,initialState:{},closeInterceptor:void 0},Nw=new f.OlP("override-default-config");let kw=(()=>{class n{constructor(t,r,i){this._element=r,this._renderer=i,this.isShown=!1,this.isAnimated=!1,this.isModalHiding=!1,this.clickStartedInContent=!1,this.config=Object.assign({},t)}ngOnInit(){this.isAnimated&&this._renderer.addClass(this._element.nativeElement,"fade"),this._renderer.setStyle(this._element.nativeElement,"display","block"),setTimeout(()=>{this.isShown=!0,this._renderer.addClass(this._element.nativeElement,Ha()?"in":"show")},this.isAnimated?150:0),document&&document.body&&(this.bsModalService&&1===this.bsModalService.getModalsCount()&&(this.bsModalService.checkScrollbar(),this.bsModalService.setScrollbar()),this._renderer.addClass(document.body,"modal-open"),this._renderer.setStyle(document.body,"overflow-y","hidden")),this._element.nativeElement&&this._element.nativeElement.focus()}onClickStarted(t){this.clickStartedInContent=t.target!==this._element.nativeElement}onClickStop(t){var r;this.config.ignoreBackdropClick||"static"===this.config.backdrop||t.target!==this._element.nativeElement||this.clickStartedInContent?this.clickStartedInContent=!1:(null===(r=this.bsModalService)||void 0===r||r.setDismissReason("backdrop-click"),this.hide())}onPopState(){var t;null===(t=this.bsModalService)||void 0===t||t.setDismissReason("browser-back-navigation-clicked"),this.hide()}onEsc(t){var r,i;!this.isShown||((27===t.keyCode||"Escape"===t.key)&&t.preventDefault(),this.config.keyboard&&this.level===(null===(r=this.bsModalService)||void 0===r?void 0:r.getModalsCount())&&(null===(i=this.bsModalService)||void 0===i||i.setDismissReason("esc"),this.hide()))}ngOnDestroy(){this.isShown&&this._hide()}hide(){if(!this.isModalHiding&&this.isShown){if(this.config.closeInterceptor)return void this.config.closeInterceptor().then(()=>this._hide(),()=>{});this._hide()}}_hide(){this.isModalHiding=!0,this._renderer.removeClass(this._element.nativeElement,Ha()?"in":"show"),setTimeout(()=>{var t,r;this.isShown=!1,document&&document.body&&1===(null===(t=this.bsModalService)||void 0===t?void 0:t.getModalsCount())&&(this._renderer.removeClass(document.body,"modal-open"),this._renderer.setStyle(document.body,"overflow-y","")),null===(r=this.bsModalService)||void 0===r||r.hide(this.config.id),this.isModalHiding=!1},this.isAnimated?300:0)}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(dv),f.Y36(f.SBq),f.Y36(f.Qsj))},n.\u0275cmp=f.Xpm({type:n,selectors:[["modal-container"]],hostAttrs:["role","dialog","tabindex","-1",1,"modal"],hostVars:3,hostBindings:function(t,r){1&t&&f.NdJ("mousedown",function(u){return r.onClickStarted(u)})("click",function(u){return r.onClickStop(u)})("popstate",function(){return r.onPopState()},!1,f.Jf7)("keydown.esc",function(u){return r.onEsc(u)},!1,f.Jf7),2&t&&f.uIk("aria-modal",!0)("aria-labelledby",r.config.ariaLabelledBy)("aria-describedby",r.config.ariaDescribedby)},ngContentSelectors:xw,decls:3,vars:2,consts:[["role","document","focusTrap",""],[1,"modal-content"]],template:function(t,r){1&t&&(f.F$t(),f.TgZ(0,"div",0)(1,"div",1),f.Hsn(2),f.qZA()()),2&t&&f.Tol("modal-dialog"+(r.config.class?" "+r.config.class:""))},directives:[gw],encapsulation:2}),n})(),Pw=(()=>{class n{constructor(t,r){this._isAnimated=!1,this._isShown=!1,this.element=t,this.renderer=r}get isAnimated(){return this._isAnimated}set isAnimated(t){this._isAnimated=t}get isShown(){return this._isShown}set isShown(t){this._isShown=t,t?this.renderer.addClass(this.element.nativeElement,"in"):this.renderer.removeClass(this.element.nativeElement,"in"),Ha()||(t?this.renderer.addClass(this.element.nativeElement,"show"):this.renderer.removeClass(this.element.nativeElement,"show"))}ngOnInit(){this.isAnimated&&(this.renderer.addClass(this.element.nativeElement,"fade"),class hI{static reflow(e){}static getStyles(e){let t=e.ownerDocument.defaultView;return(!t||!t.opener)&&(t=jn),t.getComputedStyle(e)}static stackOverflowConfig(){const e=function dI(){const n=Pf(),e=Object.keys(n).find(t=>n[t]);return $g[e]}();return{crossorigin:"bs3"!==e?"anonymous":void 0,integrity:"bs5"===e?"sha384-KyZXEAg3QhqLMpG8r+8fhAXLRk2vvoC2f3B09zVXn8CA5QIVfZOJ3BCsw2P0p/We":"bs4"===e?"sha384-TX8t27EcRE3e/ihU7zmQxVncDAy5uIKz4rEkgIXeMed4M0jlfIDPvg6uqKI2xXr2":void 0,cdnLink:"bs5"===e?"https://cdn.jsdelivr.net/npm/bootstrap@5.1.0/dist/css/bootstrap.min.css":"bs4"===e?"https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/css/bootstrap.min.css":"https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css"}}}.reflow(this.element.nativeElement)),this.isShown=!0}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(f.SBq),f.Y36(f.Qsj))},n.\u0275cmp=f.Xpm({type:n,selectors:[["bs-modal-backdrop"]],hostAttrs:[1,"modal-backdrop"],decls:0,vars:0,template:function(t,r){},encapsulation:2}),n})(),Lw=1,rm=(()=>{class n{constructor(t,r,i){this.clf=r,this.modalDefaultOption=i,this.onShow=new f.vpe,this.onShown=new f.vpe,this.onHide=new f.vpe,this.onHidden=new f.vpe,this.isBodyOverflowing=!1,this.originalBodyPadding=0,this.scrollbarWidth=0,this.modalsCount=0,this.loaders=[],this._backdropLoader=this.clf.createLoader(),this._renderer=t.createRenderer(null,null),this.config=i?Object.assign({},nm,i):nm}show(t,r){this.modalsCount++,this._createLoaders();const i=(null==r?void 0:r.id)||Lw++;return this.config=this.modalDefaultOption?Object.assign({},nm,this.modalDefaultOption,r):Object.assign({},nm,r),this.config.id=i,this._showBackdrop(),this.lastDismissReason=void 0,this._showModal(t)}hide(t){(1===this.modalsCount||null==t)&&(this._hideBackdrop(),this.resetScrollbar()),this.modalsCount=this.modalsCount>=1&&null!=t?this.modalsCount-1:0,setTimeout(()=>{this._hideModal(t),this.removeLoaders(t)},this.config.animated?150:0)}_showBackdrop(){const t=!0===this.config.backdrop||"static"===this.config.backdrop,r=!this.backdropRef||!this.backdropRef.instance.isShown;1===this.modalsCount&&(this.removeBackdrop(),t&&r&&(this._backdropLoader.attach(Pw).to("body").show({isAnimated:this.config.animated}),this.backdropRef=this._backdropLoader._componentRef))}_hideBackdrop(){this.backdropRef&&(this.backdropRef.instance.isShown=!1,setTimeout(()=>this.removeBackdrop(),this.config.animated?150:0))}_showModal(t){var r;const i=this.loaders[this.loaders.length-1];if(this.config&&this.config.providers)for(const p of this.config.providers)i.provide(p);const u=new cv,c=i.provide({provide:dv,useValue:this.config}).provide({provide:cv,useValue:u}).attach(kw).to("body");return u.hide=()=>{var p;return null===(p=c.instance)||void 0===p?void 0:p.hide()},u.setClass=p=>{c.instance&&(c.instance.config.class=p)},u.onHidden=new f.vpe,u.onHide=new f.vpe,this.copyEvent(i.onBeforeHide,u.onHide),this.copyEvent(i.onHidden,u.onHidden),c.show({content:t,isAnimated:this.config.animated,initialState:this.config.initialState,bsModalService:this,id:this.config.id}),c.instance&&(c.instance.level=this.getModalsCount(),u.content=i.getInnerComponent(),u.id=null===(r=c.instance.config)||void 0===r?void 0:r.id),u}_hideModal(t){if(null!=t){const r=this.loaders.findIndex(u=>{var c;return(null===(c=u.instance)||void 0===c?void 0:c.config.id)===t}),i=this.loaders[r];i&&i.hide(t)}else this.loaders.forEach(r=>{r.instance&&r.hide(r.instance.config.id)})}getModalsCount(){return this.modalsCount}setDismissReason(t){this.lastDismissReason=t}removeBackdrop(){this._renderer.removeClass(document.body,"modal-open"),this._renderer.setStyle(document.body,"overflow-y",""),this._backdropLoader.hide(),this.backdropRef=void 0}checkScrollbar(){this.isBodyOverflowing=document.body.clientWidth<window.innerWidth,this.scrollbarWidth=this.getScrollbarWidth()}setScrollbar(){!document||(this.originalBodyPadding=parseInt(window.getComputedStyle(document.body).getPropertyValue("padding-right")||"0",10),this.isBodyOverflowing&&(document.body.style.paddingRight=`${this.originalBodyPadding+this.scrollbarWidth}px`))}resetScrollbar(){document.body.style.paddingRight=`${this.originalBodyPadding}px`}getScrollbarWidth(){const t=this._renderer.createElement("div");this._renderer.addClass(t,"modal-scrollbar-measure"),this._renderer.appendChild(document.body,t);const r=t.offsetWidth-t.clientWidth;return this._renderer.removeChild(document.body,t),r}_createLoaders(){const t=this.clf.createLoader();this.copyEvent(t.onBeforeShow,this.onShow),this.copyEvent(t.onShown,this.onShown),this.copyEvent(t.onBeforeHide,this.onHide),this.copyEvent(t.onHidden,this.onHidden),this.loaders.push(t)}removeLoaders(t){if(null!=t){const r=this.loaders.findIndex(i=>{var u;return(null===(u=i.instance)||void 0===u?void 0:u.config.id)===t});r>=0&&(this.loaders.splice(r,1),this.loaders.forEach((i,u)=>{i.instance&&(i.instance.level=u+1)}))}else this.loaders.splice(0,this.loaders.length)}copyEvent(t,r){t.subscribe(i=>{r.emit(this.lastDismissReason||i)})}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(f.FYo),f.LFG(ac),f.LFG(Nw,8))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"platform"}),n})();J_.forRoot();let fv=(()=>{class n{static forRoot(){return{ngModule:n,providers:[rm,ac,tm]}}static forChild(){return{ngModule:n,providers:[rm,ac,tm]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({imports:[[J_]]}),n})();class Gf{}const pa="*";function pv(n,e=null){return{type:2,steps:n,options:e}}function im(n){return{type:6,styles:n,offset:null}}function uc(n){Promise.resolve(null).then(n)}class qf{constructor(e=0,t=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=e+t}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}onStart(e){this._onStartFns.push(e)}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){uc(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(e=>e()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this._started=!1}setPosition(e){this._position=this.totalTime?e*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}}class Bw{constructor(e){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=e;let t=0,r=0,i=0;const u=this.players.length;0==u?uc(()=>this._onFinish()):this.players.forEach(c=>{c.onDone(()=>{++t==u&&this._onFinish()}),c.onDestroy(()=>{++r==u&&this._onDestroy()}),c.onStart(()=>{++i==u&&this._onStart()})}),this.totalTime=this.players.reduce((c,p)=>Math.max(c,p.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this.players.forEach(e=>e.init())}onStart(e){this._onStartFns.push(e)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(e=>e()),this._onStartFns=[])}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(e=>e.play())}pause(){this.players.forEach(e=>e.pause())}restart(){this.players.forEach(e=>e.restart())}finish(){this._onFinish(),this.players.forEach(e=>e.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(e=>e.destroy()),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this.players.forEach(e=>e.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(e){const t=e*this.totalTime;this.players.forEach(r=>{const i=r.totalTime?Math.min(1,t/r.totalTime):1;r.setPosition(i)})}getPosition(){const e=this.players.reduce((t,r)=>null===t||r.totalTime>t.totalTime?r:t,null);return null!=e?e.getPosition():0}beforeDestroy(){this.players.forEach(e=>{e.beforeDestroy&&e.beforeDestroy()})}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}}const FI=function(n){return{dropdown:n}},Uw=["*"],gv=[im({height:0,overflow:"hidden"}),function RI(n,e=null){return{type:4,styles:e,timings:n}}("220ms cubic-bezier(0, 0, 0.2, 1)",im({height:"*",overflow:"hidden"}))];let Ga=(()=>{class n{constructor(){this.direction="down",this.autoClose=!0,this.insideClick=!1,this.isAnimated=!1,this.stopOnClickPropagation=!1,this.isOpenChange=new f.vpe,this.isDisabledChange=new f.vpe,this.toggleClick=new f.vpe,this.counts=0,this.dropdownMenu=new Promise(t=>{this.resolveDropdownMenu=t})}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"platform"}),n})(),ga=(()=>{class n{constructor(t,r,i,u,c){this._state=t,this.cd=r,this._renderer=i,this._element=u,this.isOpen=!1,this._factoryDropDownAnimation=c.build(gv),this._subscription=t.isOpenChange.subscribe(p=>{this.isOpen=p;const y=this._element.nativeElement.querySelector(".dropdown-menu");this._renderer.addClass(this._element.nativeElement.querySelector("div"),"open"),y&&!Ha()&&(this._renderer.addClass(y,"show"),(y.classList.contains("dropdown-menu-right")||y.classList.contains("dropdown-menu-end"))&&(this._renderer.setStyle(y,"left","auto"),this._renderer.setStyle(y,"right","0")),"up"===this.direction&&(this._renderer.setStyle(y,"top","auto"),this._renderer.setStyle(y,"transform","translateY(-101%)"))),y&&this._state.isAnimated&&this._factoryDropDownAnimation.create(y).play(),this.cd.markForCheck(),this.cd.detectChanges()})}get direction(){return this._state.direction}_contains(t){return this._element.nativeElement.contains(t)}ngOnDestroy(){this._subscription.unsubscribe()}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(Ga),f.Y36(f.sBO),f.Y36(f.Qsj),f.Y36(f.SBq),f.Y36(Gf))},n.\u0275cmp=f.Xpm({type:n,selectors:[["bs-dropdown-container"]],hostAttrs:[2,"display","block","position","absolute","z-index","1040"],ngContentSelectors:Uw,decls:2,vars:9,consts:[[3,"ngClass"]],template:function(t,r){1&t&&(f.F$t(),f.TgZ(0,"div",0),f.Hsn(1),f.qZA()),2&t&&(f.ekj("dropup","up"===r.direction)("show",r.isOpen)("open",r.isOpen),f.Q6J("ngClass",f.VKq(7,FI,"down"===r.direction)))},directives:[ds],encapsulation:2,changeDetection:0}),n})(),LI=(()=>{class n{constructor(){this.autoClose=!0,this.insideClick=!1,this.isAnimated=!1,this.stopOnClickPropagation=!1}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),mv=(()=>{class n{constructor(t,r,i,u,c,p,y){this._elementRef=t,this._renderer=r,this._viewContainerRef=i,this._cis=u,this._state=c,this._config=p,this.dropup=!1,this._isInlineOpen=!1,this._isDisabled=!1,this._subscriptions=[],this._isInited=!1,this._state.autoClose=this._config.autoClose,this._state.insideClick=this._config.insideClick,this._state.isAnimated=this._config.isAnimated,this._state.stopOnClickPropagation=this._config.stopOnClickPropagation,this._factoryDropDownAnimation=y.build(gv),this._dropdown=this._cis.createLoader(this._elementRef,this._viewContainerRef,this._renderer).provide({provide:Ga,useValue:this._state}),this.onShown=this._dropdown.onShown,this.onHidden=this._dropdown.onHidden,this.isOpenChange=this._state.isOpenChange}set autoClose(t){this._state.autoClose=t}get autoClose(){return this._state.autoClose}set isAnimated(t){this._state.isAnimated=t}get isAnimated(){return this._state.isAnimated}set insideClick(t){this._state.insideClick=t}get insideClick(){return this._state.insideClick}set isDisabled(t){this._isDisabled=t,this._state.isDisabledChange.emit(t),t&&this.hide()}get isDisabled(){return this._isDisabled}get isOpen(){return this._showInline?this._isInlineOpen:this._dropdown.isShown}set isOpen(t){t?this.show():this.hide()}get isBs4(){return!Ha()}get _showInline(){return!this.container}ngOnInit(){this._isInited||(this._isInited=!0,this._dropdown.listen({outsideClick:!1,triggers:this.triggers,show:()=>this.show()}),this._subscriptions.push(this._state.toggleClick.subscribe(t=>this.toggle(t))),this._subscriptions.push(this._state.isDisabledChange.pipe(Qi(t=>t)).subscribe(()=>this.hide())))}show(){if(!this.isOpen&&!this.isDisabled){if(this._showInline)return this._inlinedMenu||this._state.dropdownMenu.then(t=>{this._dropdown.attachInline(t.viewContainer,t.templateRef),this._inlinedMenu=this._dropdown._inlineViewRef,this.addBs4Polyfills(),this._inlinedMenu&&this._renderer.addClass(this._inlinedMenu.rootNodes[0].parentNode,"open"),this.playAnimation()}).catch(),this.addBs4Polyfills(),this._isInlineOpen=!0,this.onShown.emit(!0),this._state.isOpenChange.emit(!0),void this.playAnimation();this._state.dropdownMenu.then(t=>{const r=this.dropup||void 0!==this.dropup&&this.dropup;this._state.direction=r?"up":"down";const i=this.placement||(r?"top start":"bottom start");this._dropdown.attach(ga).to(this.container).position({attachment:i}).show({content:t.templateRef,placement:i}),this._state.isOpenChange.emit(!0)}).catch()}}hide(){!this.isOpen||(this._showInline?(this.removeShowClass(),this.removeDropupStyles(),this._isInlineOpen=!1,this.onHidden.emit(!0)):this._dropdown.hide(),this._state.isOpenChange.emit(!1))}toggle(t){return this.isOpen||!t?this.hide():this.show()}_contains(t){return this._elementRef.nativeElement.contains(t.target)||this._dropdown.instance&&this._dropdown.instance._contains(t.target)}navigationClick(t){const r=this._elementRef.nativeElement.querySelector(".dropdown-menu");if(!r)return;const i=this._elementRef.nativeElement.ownerDocument.activeElement,u=r.querySelectorAll(".dropdown-item");switch(t.keyCode){case 38:this._state.counts>0&&u[--this._state.counts].focus();break;case 40:this._state.counts+1<u.length&&(i.classList!==u[this._state.counts].classList?u[this._state.counts].focus():u[++this._state.counts].focus())}t.preventDefault()}ngOnDestroy(){for(const t of this._subscriptions)t.unsubscribe();this._dropdown.dispose()}addBs4Polyfills(){Ha()||(this.addShowClass(),this.checkRightAlignment(),this.addDropupStyles())}playAnimation(){this._state.isAnimated&&this._inlinedMenu&&setTimeout(()=>{this._inlinedMenu&&this._factoryDropDownAnimation.create(this._inlinedMenu.rootNodes[0]).play()})}addShowClass(){this._inlinedMenu&&this._inlinedMenu.rootNodes[0]&&this._renderer.addClass(this._inlinedMenu.rootNodes[0],"show")}removeShowClass(){this._inlinedMenu&&this._inlinedMenu.rootNodes[0]&&this._renderer.removeClass(this._inlinedMenu.rootNodes[0],"show")}checkRightAlignment(){if(this._inlinedMenu&&this._inlinedMenu.rootNodes[0]){const t=this._inlinedMenu.rootNodes[0].classList.contains("dropdown-menu-right")||this._inlinedMenu.rootNodes[0].classList.contains("dropdown-menu-end");this._renderer.setStyle(this._inlinedMenu.rootNodes[0],"left",t?"auto":"0"),this._renderer.setStyle(this._inlinedMenu.rootNodes[0],"right",t?"0":"auto")}}addDropupStyles(){this._inlinedMenu&&this._inlinedMenu.rootNodes[0]&&(this._renderer.setStyle(this._inlinedMenu.rootNodes[0],"top",this.dropup?"auto":"100%"),this._renderer.setStyle(this._inlinedMenu.rootNodes[0],"transform",this.dropup?"translateY(-101%)":"translateY(0)"),this._renderer.setStyle(this._inlinedMenu.rootNodes[0],"bottom","auto"))}removeDropupStyles(){this._inlinedMenu&&this._inlinedMenu.rootNodes[0]&&(this._renderer.removeStyle(this._inlinedMenu.rootNodes[0],"top"),this._renderer.removeStyle(this._inlinedMenu.rootNodes[0],"transform"),this._renderer.removeStyle(this._inlinedMenu.rootNodes[0],"bottom"))}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(f.SBq),f.Y36(f.Qsj),f.Y36(f.s_b),f.Y36(ac),f.Y36(Ga),f.Y36(LI),f.Y36(Gf))},n.\u0275dir=f.lG2({type:n,selectors:[["","bsDropdown",""],["","dropdown",""]],hostVars:6,hostBindings:function(t,r){1&t&&f.NdJ("keydown.arrowDown",function(u){return r.navigationClick(u)})("keydown.arrowUp",function(u){return r.navigationClick(u)}),2&t&&f.ekj("dropup",r.dropup)("open",r.isOpen)("show",r.isOpen&&r.isBs4)},inputs:{placement:"placement",triggers:"triggers",container:"container",dropup:"dropup",autoClose:"autoClose",isAnimated:"isAnimated",insideClick:"insideClick",isDisabled:"isDisabled",isOpen:"isOpen"},outputs:{isOpenChange:"isOpenChange",onShown:"onShown",onHidden:"onHidden"},exportAs:["bs-dropdown"],features:[f._Bn([Ga])]}),n})(),ma=(()=>{class n{constructor(t,r,i){t.resolveDropdownMenu({templateRef:i,viewContainer:r})}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(Ga),f.Y36(f.s_b),f.Y36(f.Rgc))},n.\u0275dir=f.lG2({type:n,selectors:[["","bsDropdownMenu",""],["","dropdownMenu",""]],exportAs:["bs-dropdown-menu"]}),n})(),Lo=(()=>{class n{constructor(t,r,i,u,c){this._changeDetectorRef=t,this._dropdown=r,this._element=i,this._renderer=u,this._state=c,this.isOpen=!1,this._subscriptions=[],this._subscriptions.push(this._state.isOpenChange.subscribe(p=>{this.isOpen=p,p?(this._documentClickListener=this._renderer.listen("document","click",y=>{this._state.autoClose&&2!==y.button&&!this._element.nativeElement.contains(y.target)&&(!this._state.insideClick||!this._dropdown._contains(y))&&(this._state.toggleClick.emit(!1),this._changeDetectorRef.detectChanges())}),this._escKeyUpListener=this._renderer.listen(this._element.nativeElement,"keyup.esc",()=>{this._state.autoClose&&(this._state.toggleClick.emit(!1),this._changeDetectorRef.detectChanges())})):(this._documentClickListener&&this._documentClickListener(),this._escKeyUpListener&&this._escKeyUpListener())})),this._subscriptions.push(this._state.isDisabledChange.subscribe(p=>this.isDisabled=p||void 0))}onClick(t){this._state.stopOnClickPropagation&&t.stopPropagation(),!this.isDisabled&&this._state.toggleClick.emit(!0)}ngOnDestroy(){this._documentClickListener&&this._documentClickListener(),this._escKeyUpListener&&this._escKeyUpListener();for(const t of this._subscriptions)t.unsubscribe()}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(f.sBO),f.Y36(mv),f.Y36(f.SBq),f.Y36(f.Qsj),f.Y36(Ga))},n.\u0275dir=f.lG2({type:n,selectors:[["","bsDropdownToggle",""],["","dropdownToggle",""]],hostVars:3,hostBindings:function(t,r){1&t&&f.NdJ("click",function(u){return r.onClick(u)}),2&t&&f.uIk("aria-haspopup",!0)("disabled",r.isDisabled)("aria-expanded",r.isOpen)},exportAs:["bs-dropdown-toggle"]}),n})(),Vo=(()=>{class n{static forRoot(){return{ngModule:n,providers:[ac,tm,Ga]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({imports:[[br]]}),n})();function jw(n,e){if(1&n){const t=f.EpF();f.TgZ(0,"ul",17)(1,"li",18)(2,"a",19),f.NdJ("click",function(){f.CHM(t),f.oxw();const i=f.MAs(15);return f.oxw().openModal(i)}),f._uU(3,"Delete"),f.qZA()()()}}function $w(n,e){if(1&n){const t=f.EpF();f.TgZ(0,"div",20)(1,"h4",21),f._uU(2,"DELETE TASK"),f.qZA(),f.TgZ(3,"button",22),f.NdJ("click",function(){f.CHM(t);const i=f.oxw(2);return null==i.modalRef?null:i.modalRef.hide()}),f.TgZ(4,"span",23),f._uU(5,"\xd7"),f.qZA()()(),f.TgZ(6,"div",24),f._uU(7," Are you sure you want to delete this task? "),f.qZA(),f.TgZ(8,"div",25),f._UZ(9,"hr",26),f.qZA(),f.TgZ(10,"div",27)(11,"div",28)(12,"button",29),f.NdJ("click",function(){f.CHM(t);const i=f.oxw().$implicit;return f.oxw().removeTask(i.id)})("click",function(){f.CHM(t);const i=f.oxw(2);return null==i.modalRef?null:i.modalRef.hide()})("click",function(){return f.CHM(t),f.oxw(2).showDeleteTask()}),f._uU(13," Delete task "),f.qZA()(),f.TgZ(14,"div",30)(15,"button",31),f.NdJ("click",function(){f.CHM(t);const i=f.oxw(2);return null==i.modalRef?null:i.modalRef.hide()}),f._uU(16," Cancel "),f.qZA()()()}}const VI=function(n){return{"bg-success":n}},BI=function(n){return{"text-decoration-line-through":n}};function UI(n,e){if(1&n){const t=f.EpF();f.TgZ(0,"li",3)(1,"div",4)(2,"div",5)(3,"div",6)(4,"input",7),f.NdJ("click",function(){const u=f.CHM(t).$implicit;return f.oxw().onItemClicked(u)})("click",function(){const u=f.CHM(t).$implicit;return f.oxw().showCompleteTask(u.done)}),f.qZA(),f.TgZ(5,"p",8),f._uU(6),f.qZA()(),f.TgZ(7,"div",9)(8,"div",10)(9,"button",11),f.O4$(),f.TgZ(10,"svg",12),f._UZ(11,"path",13),f.qZA(),f.kcU(),f._UZ(12,"span",14),f.qZA(),f.YNc(13,jw,4,0,"ul",15),f.qZA()(),f.YNc(14,$w,17,0,"ng-template",null,16,f.W1O),f.qZA()()()}if(2&n){const t=e.$implicit;f.xp6(4),f.Q6J("ngClass",f.VKq(4,VI,!0===t.done))("checked",t.done),f.xp6(1),f.Q6J("ngClass",f.VKq(6,BI,!0===t.done)),f.xp6(1),f.Oqu(t.task)}}function jI(n,e){1&n&&(f.TgZ(0,"div",32),f._uU(1," task deleted! "),f.qZA())}function yv(n,e){if(1&n&&(f.TgZ(0,"div",32),f._uU(1),f.ALo(2,"async"),f.qZA()),2&n){const t=f.oxw();f.xp6(1),f.hij(" ",f.lcZ(2,1,t.created$)," Task completed! ")}}let zf=(()=>{class n{constructor(t,r,i,u){this.modalService=t,this._getsAllTaskDto=r,this._setsTaskDto=i,this._removesTaskDto=u,this.tasks$=this._getsAllTaskDto.getAll().pipe((0,Rt.U)(c=>c.sort((p,y)=>y.created-p.created))),this.created$=this.tasks$.pipe((0,Rt.U)(c=>c.filter(p=>p.done).length)),this.setTask=new kd({setTask:new Od}),this.deleteTaskAlert=!1,this.completeTaskAlert=!1}onItemClicked(t){this._setsTaskDto.set(!1===t.done?{id:t.id,done:!0}:{id:t.id,done:!1})}removeTask(t){this._removesTaskDto.remove(t)}openModal(t){this.modalRef=this.modalService.show(t)}showDeleteTask(){this.deleteTaskAlert=!0,this.completeTaskAlert=!1}showCompleteTask(t){this.deleteTaskAlert=!1,this.completeTaskAlert=!0}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(rm),f.Y36(y_),f.Y36(__),f.Y36(Ef))},n.\u0275cmp=f.Xpm({type:n,selectors:[["lib-task-list"]],decls:6,vars:6,consts:[[3,"formGroup"],["class","list-unstyled",4,"ngFor","ngForOf"],["class","p-3 text-white border-2 bg-success deleteTask position-absolute top-0 end-0","role","alert",4,"ngIf"],[1,"list-unstyled"],[1,"container","px-0"],[1,"row"],[1,"col","px-0"],["type","checkbox","id","checkboxNoLabel",1,"form-check-input","rounded-circle","pointer",3,"ngClass","checked","click"],[1,"d-inline",3,"ngClass"],[1,"col","col-lg-2"],["dropdown","",1,"btn-group"],["id","button-basic","dropdownToggle","","type","button","aria-controls","dropdown-basic",1,"btn","py-0"],["xmlns","http://www.w3.org/2000/svg","width","16","height","16","fill","currentColor","viewBox","0 0 16 16",1,"bi","bi-three-dots"],["d","M3 9.5a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3zm5 0a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3zm5 0a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3z"],[1,"caret"],["id","dropdown-basic","class","dropdown-menu","role","menu","aria-labelledby","button-basic",4,"dropdownMenu"],["template",""],["id","dropdown-basic","role","menu","aria-labelledby","button-basic",1,"dropdown-menu"],["role","menuitem"],[1,"dropdown-item","pointer",3,"click"],[1,"modal-header"],[1,"modal-title","pull-center"],["type","button","aria-label","Close",1,"btn-close","close","pull-center",3,"click"],["aria-hidden","true",1,"visually-hidden"],[1,"modal-body"],[1,"container-flex"],[1,"container"],[1,"d-flex","flex-row-reverse","bd-highlight"],[1,"p-2","bd-highlight"],[1,"me-2","bg-danger","border-dark","rounded","text-white",3,"click"],[1,"p-2","bd-highlight","pe-2"],[1,"me-1","bg-light","border","border-dark","rounded",3,"click"],["role","alert",1,"p-3","text-white","border-2","bg-success","deleteTask","position-absolute","top-0","end-0"]],template:function(t,r){1&t&&(f.TgZ(0,"form",0)(1,"ul"),f.YNc(2,UI,16,8,"li",1),f.ALo(3,"async"),f.qZA()(),f.YNc(4,jI,2,0,"div",2),f.YNc(5,yv,3,3,"div",2)),2&t&&(f.Q6J("formGroup",r.setTask),f.xp6(2),f.Q6J("ngForOf",f.lcZ(3,4,r.tasks$)),f.xp6(2),f.Q6J("ngIf",r.deleteTaskAlert),f.xp6(1),f.Q6J("ngIf",r.completeTaskAlert))},directives:[U_,S_,Pd,nr,ds,mv,Lo,ma,ai],pipes:[cu],encapsulation:2,changeDetection:0}),n})();const Hw=new f.OlP("ADDS_TASK_DTO");let Gw=(()=>{class n{constructor(t,r){this._addsAddTaskDto=t,this._removesTaskDto=r,this.task=new kd({task:new Od})}onAddTaskSubmited(t){var r;this._addsAddTaskDto.add({task:null===(r=t.get("task"))||void 0===r?void 0:r.value,created:(new Date).getTime()}),this.task.reset()}cancelAnimationFrame(){this.task.reset()}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(Hw),f.Y36(Ef))},n.\u0275cmp=f.Xpm({type:n,selectors:[["lib-add-task"]],decls:6,vars:2,consts:[[3,"formGroup","ngSubmit"],["type","text","formControlName","task","placeholder","Task","ngModel","","required","",1,"d-block"],["type","submit",1,"addButton",3,"disabled"],["type","button",1,"bg-secondary","m-3","cancelMain",3,"click"]],template:function(t,r){1&t&&(f.TgZ(0,"form",0),f.NdJ("ngSubmit",function(){return r.onAddTaskSubmited(r.task)}),f._UZ(1,"input",1),f.TgZ(2,"button",2),f._uU(3,"Add Task"),f.qZA(),f.TgZ(4,"button",3),f.NdJ("click",function(){return r.cancelAnimationFrame()}),f._uU(5,"Cancel"),f.qZA()()),2&t&&(f.Q6J("formGroup",r.task),f.xp6(2),f.Q6J("disabled",r.task.invalid))},directives:[U_,S_,Pd,Cg,A_,Lg,kf],encapsulation:2,changeDetection:0}),n})(),$I=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=f.Xpm({type:n,selectors:[["app-add-task-page"]],decls:10,vars:0,consts:[[1,"container","px-0"],[1,"row","gx-5"],[1,"col"],[1,"p-4"]],template:function(t,r){1&t&&(f.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),f._UZ(4,"lib-task-list"),f.qZA()()()(),f.TgZ(5,"div")(6,"div",1)(7,"div",2)(8,"div",3),f._UZ(9,"lib-add-task"),f.qZA()()()())},directives:[zf,Gw],encapsulation:2,changeDetection:0}),n})(),qw=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({providers:[],imports:[[br,Z_,ca]]}),n})();var zw=k(4986),pr=k(5813);function _v(){return(0,Lr.e)((n,e)=>{let t,r=!1;n.subscribe((0,Bn.x)(e,i=>{const u=t;t=i,r&&e.next([u,i]),r=!0}))})}function Kw(n,e){return n===e}var ot,Cs=k(2011),Zw=(k(820),k(3942)),_e=k(5861),$u=k(9681),Wf=k(4859),qa=k(1877),qt=k(2090),Yw="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},ya={},Ev=Ev||{},Ot=Yw||self;function om(){}function wv(n){var e=typeof n;return"array"==(e="object"!=e?e:n?Array.isArray(n)?"array":e:"null")||"object"==e&&"number"==typeof n.length}function Kf(n){var e=typeof n;return"object"==e&&null!=n||"function"==e}var bv="closure_uid_"+(1e9*Math.random()>>>0),GI=0;function qI(n,e,t){return n.call.apply(n.bind,arguments)}function zI(n,e,t){if(!n)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var i=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(i,r),n.apply(e,i)}}return function(){return n.apply(e,arguments)}}function Yr(n,e,t){return(Yr=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?qI:zI).apply(null,arguments)}function am(n,e){var t=Array.prototype.slice.call(arguments,1);return function(){var r=t.slice();return r.push.apply(r,arguments),n.apply(this,r)}}function Qr(n,e){function t(){}t.prototype=e.prototype,n.Z=e.prototype,n.prototype=new t,n.prototype.constructor=n,n.Vb=function(r,i,u){for(var c=Array(arguments.length-2),p=2;p<arguments.length;p++)c[p-2]=arguments[p];return e.prototype[i].apply(r,c)}}function Hu(){this.s=this.s,this.o=this.o}var KI={};Hu.prototype.s=!1,Hu.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var n=function HI(n){return Object.prototype.hasOwnProperty.call(n,bv)&&n[bv]||(n[bv]=++GI)}(this);delete KI[n]}},Hu.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const Qw=Array.prototype.indexOf?function(n,e){return Array.prototype.indexOf.call(n,e,void 0)}:function(n,e){if("string"==typeof n)return"string"!=typeof e||1!=e.length?-1:n.indexOf(e,0);for(let t=0;t<n.length;t++)if(t in n&&n[t]===e)return t;return-1},Dv=Array.prototype.forEach?function(n,e,t){Array.prototype.forEach.call(n,e,t)}:function(n,e,t){const r=n.length,i="string"==typeof n?n.split(""):n;for(let u=0;u<r;u++)u in i&&e.call(t,i[u],u,n)};function Cv(n){return Array.prototype.concat.apply([],arguments)}function um(n){const e=n.length;if(0<e){const t=Array(e);for(let r=0;r<e;r++)t[r]=n[r];return t}return[]}function Zf(n){return/^[\s\xa0]*$/.test(n)}var bi,Iv=String.prototype.trim?function(n){return n.trim()}:function(n){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(n)[1]};function wi(n,e){return-1!=n.indexOf(e)}function lm(n,e){return n<e?-1:n>e?1:0}e:{var Tv=Ot.navigator;if(Tv){var Av=Tv.userAgent;if(Av){bi=Av;break e}}bi=""}function za(n,e,t){for(const r in n)e.call(t,n[r],r,n)}function Xw(n){const e={};for(const t in n)e[t]=n[t];return e}var eb="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function lc(n,e){let t,r;for(let i=1;i<arguments.length;i++){for(t in r=arguments[i],r)n[t]=r[t];for(let u=0;u<eb.length;u++)t=eb[u],Object.prototype.hasOwnProperty.call(r,t)&&(n[t]=r[t])}}function tb(n){return tb[" "](n),n}tb[" "]=om;var cm,n,nx=wi(bi,"Opera"),cc=wi(bi,"Trident")||wi(bi,"MSIE"),Mv=wi(bi,"Edge"),nb=Mv||cc,wt=wi(bi,"Gecko")&&!(wi(bi.toLowerCase(),"webkit")&&!wi(bi,"Edge"))&&!(wi(bi,"Trident")||wi(bi,"MSIE"))&&!wi(bi,"Edge"),ZI=wi(bi.toLowerCase(),"webkit")&&!wi(bi,"Edge");function rb(){var n=Ot.document;return n?n.documentMode:void 0}e:{var Qd="",xv=(n=bi,wt?/rv:([^\);]+)(\)|;)/.exec(n):Mv?/Edge\/([\d\.]+)/.exec(n):cc?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n):ZI?/WebKit\/(\S+)/.exec(n):nx?/(?:Version)[ \/]?(\S+)/.exec(n):void 0);if(xv&&(Qd=xv?xv[1]:""),cc){var Jd=rb();if(null!=Jd&&Jd>parseFloat(Qd)){cm=String(Jd);break e}}cm=Qd}var dm={};var YI=Ot.document&&cc&&(rb()||parseInt(cm,10))||void 0,QI=function(){if(!Ot.addEventListener||!Object.defineProperty)return!1;var n=!1,e=Object.defineProperty({},"passive",{get:function(){n=!0}});try{Ot.addEventListener("test",om,e),Ot.removeEventListener("test",om,e)}catch(t){}return n}();function Jr(n,e){this.type=n,this.g=this.target=e,this.defaultPrevented=!1}function Xd(n,e){if(Jr.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var t=this.type=n.type,r=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=e,e=n.relatedTarget){if(wt){e:{try{tb(e.nodeName);var i=!0;break e}catch(u){}i=!1}i||(e=null)}}else"mouseover"==t?e=n.fromElement:"mouseout"==t&&(e=n.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType="string"==typeof n.pointerType?n.pointerType:sb[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&Xd.Z.h.call(this)}}Jr.prototype.h=function(){this.defaultPrevented=!0},Qr(Xd,Jr);var sb={2:"touch",3:"pen",4:"mouse"};Xd.prototype.h=function(){Xd.Z.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var eh="closure_listenable_"+(1e6*Math.random()|0),JI=0;function XI(n,e,t,r,i){this.listener=n,this.proxy=null,this.src=e,this.type=t,this.capture=!!r,this.ia=i,this.key=++JI,this.ca=this.fa=!1}function hm(n){n.ca=!0,n.listener=null,n.proxy=null,n.src=null,n.ia=null}function Gu(n){this.src=n,this.g={},this.h=0}function Nv(n,e){var t=e.type;if(t in n.g){var u,r=n.g[t],i=Qw(r,e);(u=0<=i)&&Array.prototype.splice.call(r,i,1),u&&(hm(e),0==n.g[t].length&&(delete n.g[t],n.h--))}}function Ov(n,e,t,r){for(var i=0;i<n.length;++i){var u=n[i];if(!u.ca&&u.listener==e&&u.capture==!!t&&u.ia==r)return i}return-1}Gu.prototype.add=function(n,e,t,r,i){var u=n.toString();(n=this.g[u])||(n=this.g[u]=[],this.h++);var c=Ov(n,e,r,i);return-1<c?(e=n[c],t||(e.fa=!1)):((e=new XI(e,this.src,u,!!r,i)).fa=t,n.push(e)),e};var kv="closure_lm_"+(1e6*Math.random()|0),th={};function Pv(n,e,t,r,i){if(r&&r.once)return ab(n,e,t,r,i);if(Array.isArray(e)){for(var u=0;u<e.length;u++)Pv(n,e[u],t,r,i);return null}return t=pm(t),n&&n[eh]?n.N(e,t,Kf(r)?!!r.capture:!!r,i):Fv(n,e,t,!1,r,i)}function Fv(n,e,t,r,i,u){if(!e)throw Error("Invalid event type");var c=Kf(i)?!!i.capture:!!i,p=Lv(n);if(p||(n[kv]=p=new Gu(n)),(t=p.add(e,t,r,c,u)).proxy)return t;if(r=function ob(){var e=eT;return function n(t){return e.call(n.src,n.listener,t)}}(),t.proxy=r,r.src=n,r.listener=t,n.addEventListener)QI||(i=c),void 0===i&&(i=!1),n.addEventListener(e.toString(),r,i);else if(n.attachEvent)n.attachEvent(ub(e.toString()),r);else{if(!n.addListener||!n.removeListener)throw Error("addEventListener and attachEvent are unavailable.");n.addListener(r)}return t}function ab(n,e,t,r,i){if(Array.isArray(e)){for(var u=0;u<e.length;u++)ab(n,e[u],t,r,i);return null}return t=pm(t),n&&n[eh]?n.O(e,t,Kf(r)?!!r.capture:!!r,i):Fv(n,e,t,!0,r,i)}function nh(n,e,t,r,i){if(Array.isArray(e))for(var u=0;u<e.length;u++)nh(n,e[u],t,r,i);else r=Kf(r)?!!r.capture:!!r,t=pm(t),n&&n[eh]?(n=n.i,(e=String(e).toString())in n.g&&-1<(t=Ov(u=n.g[e],t,r,i))&&(hm(u[t]),Array.prototype.splice.call(u,t,1),0==u.length&&(delete n.g[e],n.h--))):n&&(n=Lv(n))&&(e=n.g[e.toString()],n=-1,e&&(n=Ov(e,t,r,i)),(t=-1<n?e[n]:null)&&dc(t))}function dc(n){if("number"!=typeof n&&n&&!n.ca){var e=n.src;if(e&&e[eh])Nv(e.i,n);else{var t=n.type,r=n.proxy;e.removeEventListener?e.removeEventListener(t,r,n.capture):e.detachEvent?e.detachEvent(ub(t),r):e.addListener&&e.removeListener&&e.removeListener(r),(t=Lv(e))?(Nv(t,n),0==t.h&&(t.src=null,e[kv]=null)):hm(n)}}}function ub(n){return n in th?th[n]:th[n]="on"+n}function eT(n,e){if(n.ca)n=!0;else{e=new Xd(e,this);var t=n.listener,r=n.ia||n.src;n.fa&&dc(n),n=t.call(r,e)}return n}function Lv(n){return(n=n[kv])instanceof Gu?n:null}var fm="__closure_events_fn_"+(1e9*Math.random()>>>0);function pm(n){return"function"==typeof n?n:(n[fm]||(n[fm]=function(e){return n.handleEvent(e)}),n[fm])}function Rr(){Hu.call(this),this.i=new Gu(this),this.P=this,this.I=null}function Xr(n,e){var t,r=n.I;if(r)for(t=[];r;r=r.I)t.push(r);if(n=n.P,r=e.type||e,"string"==typeof e)e=new Jr(e,n);else if(e instanceof Jr)e.target=e.target||n;else{var i=e;lc(e=new Jr(r,n),i)}if(i=!0,t)for(var u=t.length-1;0<=u;u--){var c=e.g=t[u];i=Yf(c,r,!0,e)&&i}if(i=Yf(c=e.g=n,r,!0,e)&&i,i=Yf(c,r,!1,e)&&i,t)for(u=0;u<t.length;u++)i=Yf(c=e.g=t[u],r,!1,e)&&i}function Yf(n,e,t,r){if(!(e=n.i.g[String(e)]))return!0;e=e.concat();for(var i=!0,u=0;u<e.length;++u){var c=e[u];if(c&&!c.ca&&c.capture==t){var p=c.listener,y=c.ia||c.src;c.fa&&Nv(n.i,c),i=!1!==p.call(y,r)&&i}}return i&&!r.defaultPrevented}Qr(Rr,Hu),Rr.prototype[eh]=!0,Rr.prototype.removeEventListener=function(n,e,t,r){nh(this,n,e,t,r)},Rr.prototype.M=function(){if(Rr.Z.M.call(this),this.i){var e,n=this.i;for(e in n.g){for(var t=n.g[e],r=0;r<t.length;r++)hm(t[r]);delete n.g[e],n.h--}}this.I=null},Rr.prototype.N=function(n,e,t,r){return this.i.add(String(n),e,!1,t,r)},Rr.prototype.O=function(n,e,t,r){return this.i.add(String(n),e,!0,t,r)};var Vv=Ot.JSON.stringify;function tT(){var n=Uv;let e=null;return n.g&&(e=n.g,n.g=n.g.next,n.g||(n.h=null),e.next=null),e}var rh,nT=new class{constructor(n,e){this.i=n,this.j=e,this.h=0,this.g=null}get(){let n;return 0<this.h?(this.h--,n=this.g,this.g=n.next,n.next=null):n=this.i(),n}}(()=>new ix,n=>n.reset());class ix{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function sx(n){Ot.setTimeout(()=>{throw n},0)}function gm(n,e){rh||function rT(){var n=Ot.Promise.resolve(void 0);rh=function(){n.then(Qf)}}(),Bv||(rh(),Bv=!0),Uv.add(n,e)}var Bv=!1,Uv=new class rx{constructor(){this.h=this.g=null}add(e,t){const r=nT.get();r.set(e,t),this.h?this.h.next=r:this.g=r,this.h=r}};function Qf(){for(var n;n=tT();){try{n.h.call(n.g)}catch(t){sx(t)}var e=nT;e.j(n),100>e.h&&(e.h++,n.next=e.g,e.g=n)}Bv=!1}function mm(n,e){Rr.call(this),this.h=n||1,this.g=e||Ot,this.j=Yr(this.kb,this),this.l=Date.now()}function jv(n){n.da=!1,n.S&&(n.g.clearTimeout(n.S),n.S=null)}function $v(n,e,t){if("function"==typeof n)t&&(n=Yr(n,t));else{if(!n||"function"!=typeof n.handleEvent)throw Error("Invalid listener argument");n=Yr(n.handleEvent,n)}return 2147483647<Number(e)?-1:Ot.setTimeout(n,e||0)}function lb(n){n.g=$v(()=>{n.g=null,n.i&&(n.i=!1,lb(n))},n.j);const e=n.h;n.h=null,n.m.apply(null,e)}Qr(mm,Rr),(ot=mm.prototype).da=!1,ot.S=null,ot.kb=function(){if(this.da){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-n):(this.S&&(this.g.clearTimeout(this.S),this.S=null),Xr(this,"tick"),this.da&&(jv(this),this.start()))}},ot.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},ot.M=function(){mm.Z.M.call(this),jv(this),delete this.g};class iT extends Hu{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:lb(this)}M(){super.M(),this.g&&(Ot.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ih(n){Hu.call(this),this.h=n,this.g={}}Qr(ih,Hu);var cb=[];function db(n,e,t,r){Array.isArray(t)||(t&&(cb[0]=t.toString()),t=cb);for(var i=0;i<t.length;i++){var u=Pv(e,t[i],r||n.handleEvent,!1,n.h||n);if(!u)break;n.g[u.key]=u}}function hc(n){za(n.g,function(e,t){this.g.hasOwnProperty(t)&&dc(e)},n),n.g={}}function ym(){this.g=!0}function fc(n,e,t,r){n.info(function(){return"XMLHTTP TEXT ("+e+"): "+function fb(n,e){if(!n.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(n=0;n<t.length;n++)if(Array.isArray(t[n])){var r=t[n];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var u=i[0];if("noop"!=u&&"stop"!=u&&"close"!=u)for(var c=1;c<i.length;c++)i[c]=""}}}return Vv(t)}catch(p){return e}}(n,t)+(r?" "+r:"")})}ih.prototype.M=function(){ih.Z.M.call(this),hc(this)},ih.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},ym.prototype.Aa=function(){this.g=!1},ym.prototype.info=function(){};var pc={},_m=null;function vm(){return _m=_m||new Rr}function Hv(n){Jr.call(this,pc.Ma,n)}function sh(n){const e=vm();Xr(e,new Hv(e,n))}function pb(n,e){Jr.call(this,pc.STAT_EVENT,n),this.stat=e}function Gi(n){const e=vm();Xr(e,new pb(e,n))}function gb(n,e){Jr.call(this,pc.Na,n),this.size=e}function gc(n,e){if("function"!=typeof n)throw Error("Fn must not be null and must be a function");return Ot.setTimeout(function(){n()},e)}pc.Ma="serverreachability",Qr(Hv,Jr),pc.STAT_EVENT="statevent",Qr(pb,Jr),pc.Na="timingevent",Qr(gb,Jr);var Em={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},Gv={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function qv(){}function yb(){}qv.prototype.h=null;var Kv,Jf={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function zv(){Jr.call(this,"d")}function Wv(){Jr.call(this,"c")}function wm(){}function oh(n,e,t,r){this.l=n,this.j=e,this.m=t,this.X=r||1,this.V=new ih(this),this.P=aT,this.W=new mm(n=nb?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new Zv}function Zv(){this.i=null,this.g="",this.h=!1}Qr(zv,Jr),Qr(Wv,Jr),Qr(wm,qv),wm.prototype.g=function(){return new XMLHttpRequest},wm.prototype.i=function(){return{}},Kv=new wm;var aT=45e3,Yv={},Xf={};function Qv(n,e,t){n.K=1,n.v=Tm(Ka(e)),n.s=t,n.U=!0,_b(n,null)}function _b(n,e){n.F=Date.now(),ah(n),n.A=Ka(n.v);var t=n.A,r=n.X;Array.isArray(r)||(r=[String(r)]),Cb(t.h,"t",r),n.C=0,t=n.l.H,n.h=new Zv,n.g=Vm(n.l,t?e:null,!n.s),0<n.O&&(n.L=new iT(Yr(n.Ia,n,n.g),n.O)),db(n.V,n.g,"readystatechange",n.gb),e=n.H?Xw(n.H):{},n.s?(n.u||(n.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",n.g.ea(n.A,n.u,n.s,e)):(n.u="GET",n.g.ea(n.A,n.u,null,e)),sh(1),function hb(n,e,t,r,i,u){n.info(function(){if(n.g)if(u)for(var c="",p=u.split("&"),y=0;y<p.length;y++){var b=p[y].split("=");if(1<b.length){var S=b[0];b=b[1];var M=S.split("_");c=2<=M.length&&"type"==M[1]?c+(S+"=")+b+"&":c+(S+"=redacted&")}}else c=null;else c=u;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+"\n"+t+"\n"+c})}(n.j,n.u,n.A,n.m,n.X,n.s)}function vb(n){return!!n.g&&"GET"==n.u&&2!=n.K&&n.l.Ba}function bm(n,e,t){let i,r=!0;for(;!n.I&&n.C<t.length;){if(i=Jv(n,t),i==Xf){4==e&&(n.o=4,Gi(14),r=!1),fc(n.j,n.m,null,"[Incomplete Response]");break}if(i==Yv){n.o=4,Gi(15),fc(n.j,n.m,t,"[Invalid Chunk]"),r=!1;break}fc(n.j,n.m,i,null),Xv(n,i)}vb(n)&&i!=Xf&&i!=Yv&&(n.h.g="",n.C=0),4!=e||0!=t.length||n.h.h||(n.o=1,Gi(16),r=!1),n.i=n.i&&r,r?0<t.length&&!n.aa&&(n.aa=!0,(e=n.l).g==n&&e.$&&!e.L&&(e.h.info("Great, no buffering proxy detected. Bytes received: "+t.length),Fm(e),e.L=!0,Gi(11))):(fc(n.j,n.m,t,"[Invalid Chunked Response]"),Wa(n),ep(n))}function Jv(n,e){var t=n.C,r=e.indexOf("\n",t);return-1==r?Xf:(t=Number(e.substring(t,r)),isNaN(t)?Yv:(r+=1)+t>e.length?Xf:(e=e.substr(r,t),n.C=r+t,e))}function ah(n){n.Y=Date.now()+n.P,Dm(n,n.P)}function Dm(n,e){if(null!=n.B)throw Error("WatchDog timer not null");n.B=gc(Yr(n.eb,n),e)}function Cm(n){n.B&&(Ot.clearTimeout(n.B),n.B=null)}function ep(n){0==n.l.G||n.I||d0(n.l,n)}function Wa(n){Cm(n);var e=n.L;e&&"function"==typeof e.na&&e.na(),n.L=null,jv(n.W),hc(n.V),n.g&&(e=n.g,n.g=null,e.abort(),e.na())}function Xv(n,e){try{var t=n.l;if(0!=t.G&&(t.g==n||xm(t.i,n)))if(t.I=n.N,!n.J&&xm(t.i,n)&&3==t.G){try{var r=t.Ca.g.parse(e)}catch(b){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0])e:if(t.u)t.ta=i[1],0<t.ta-t.U&&37500>i[2]&&t.N&&0==t.A&&!t.v&&(t.v=gc(Yr(t.ab,t),6e3));else{if(t.g){if(!(t.g.F+3e3<n.F))break e;dh(t),Om(t)}l0(t),Gi(18)}if(1>=mT(t.i)&&t.ka){try{t.ka()}catch(b){}t.ka=void 0}}else wc(t,11)}else if((n.J||t.g==n)&&dh(t),!Zf(e))for(i=t.Ca.g.parse(e),e=0;e<i.length;e++){let b=i[e];if(t.U=b[0],b=b[1],2==t.G)if("c"==b[0]){t.J=b[1],t.la=b[2];const S=b[3];null!=S&&(t.ma=S,t.h.info("VER="+t.ma));const M=b[4];null!=M&&(t.za=M,t.h.info("SVER="+t.za));const F=b[5];null!=F&&"number"==typeof F&&0<F&&(t.K=r=1.5*F,t.h.info("backChannelRequestTimeoutMs_="+r)),r=t;const B=n.g;if(B){const G=B.g?B.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(G){var u=r.i;!u.g&&(wi(G,"spdy")||wi(G,"quic")||wi(G,"h2"))&&(u.j=u.l,u.g=new Set,u.h&&(n0(u,u.h),u.h=null))}if(r.D){const te=B.g?B.g.getResponseHeader("X-HTTP-Session-Id"):null;te&&(r.sa=te,An(r.F,r.D,te))}}t.G=3,t.j&&t.j.xa(),t.$&&(t.O=Date.now()-n.F,t.h.info("Handshake RTT: "+t.O+"ms"));var c=n;if((r=t).oa=Lm(r,r.H?r.la:null,r.W),c.J){yT(r.i,c);var p=c,y=r.K;y&&p.setTimeout(y),p.B&&(Cm(p),ah(p)),r.g=c}else Lb(r);0<t.l.length&&Pm(t)}else"stop"!=b[0]&&"close"!=b[0]||wc(t,7);else 3==t.G&&("stop"==b[0]||"close"==b[0]?"stop"==b[0]?wc(t,7):so(t):"noop"!=b[0]&&t.j&&t.j.wa(b),t.A=0)}sh(4)}catch(b){}}function e0(n,e){if(n.forEach&&"function"==typeof n.forEach)n.forEach(e,void 0);else if(wv(n)||"string"==typeof n)Dv(n,e,void 0);else{if(n.T&&"function"==typeof n.T)var t=n.T();else if(n.R&&"function"==typeof n.R)t=void 0;else if(wv(n)||"string"==typeof n){t=[];for(var r=n.length,i=0;i<r;i++)t.push(i)}else for(i in t=[],r=0,n)t[r++]=i;r=function Eb(n){if(n.R&&"function"==typeof n.R)return n.R();if("string"==typeof n)return n.split("");if(wv(n)){for(var e=[],t=n.length,r=0;r<t;r++)e.push(n[r]);return e}for(r in e=[],t=0,n)e[t++]=n[r];return e}(n),i=r.length;for(var u=0;u<i;u++)e.call(void 0,r[u],t&&t[u],n)}}function mc(n,e){this.h={},this.g=[],this.i=0;var t=arguments.length;if(1<t){if(t%2)throw Error("Uneven number of arguments");for(var r=0;r<t;r+=2)this.set(arguments[r],arguments[r+1])}else if(n)if(n instanceof mc)for(t=n.T(),r=0;r<t.length;r++)this.set(t[r],n.get(t[r]));else for(r in n)this.set(r,n[r])}function t0(n){if(n.i!=n.g.length){for(var e=0,t=0;e<n.g.length;){var r=n.g[e];qu(n.h,r)&&(n.g[t++]=r),e++}n.g.length=t}if(n.i!=n.g.length){var i={};for(t=e=0;e<n.g.length;)qu(i,r=n.g[e])||(n.g[t++]=r,i[r]=1),e++;n.g.length=t}}function qu(n,e){return Object.prototype.hasOwnProperty.call(n,e)}(ot=oh.prototype).setTimeout=function(n){this.P=n},ot.gb=function(n){n=n.target;const e=this.L;e&&3==Ya(n)?e.l():this.Ia(n)},ot.Ia=function(n){try{if(n==this.g)e:{const S=Ya(this.g);var e=this.g.Da();const M=this.g.ba();if(!(3>S)&&(3!=S||nb||this.g&&(this.h.h||this.g.ga()||Pb(this.g)))){this.I||4!=S||7==e||sh(8==e||0>=M?3:2),Cm(this);var t=this.g.ba();this.N=t;t:if(vb(this)){var r=Pb(this.g);n="";var i=r.length,u=4==Ya(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){Wa(this),ep(this);var c="";break t}this.h.i=new Ot.TextDecoder}for(e=0;e<i;e++)this.h.h=!0,n+=this.h.i.decode(r[e],{stream:u&&e==i-1});r.splice(0,i),this.h.g+=n,this.C=0,c=this.h.g}else c=this.g.ga();if(this.i=200==t,function sT(n,e,t,r,i,u,c){n.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+"\n"+t+"\n"+u+" "+c})}(this.j,this.u,this.A,this.m,this.X,S,t),this.i){if(this.$&&!this.J){t:{if(this.g){var p,y=this.g;if((p=y.g?y.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Zf(p)){var b=p;break t}}b=null}if(!(t=b)){this.i=!1,this.o=3,Gi(12),Wa(this),ep(this);break e}fc(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,Xv(this,t)}this.U?(bm(this,S,c),nb&&this.i&&3==S&&(db(this.V,this.W,"tick",this.fb),this.W.start())):(fc(this.j,this.m,c,null),Xv(this,c)),4==S&&Wa(this),this.i&&!this.I&&(4==S?d0(this.l,this):(this.i=!1,ah(this)))}else 400==t&&0<c.indexOf("Unknown SID")?(this.o=3,Gi(12)):(this.o=0,Gi(13)),Wa(this),ep(this)}}}catch(S){}},ot.fb=function(){if(this.g){var n=Ya(this.g),e=this.g.ga();this.C<e.length&&(Cm(this),bm(this,n,e),this.i&&4!=n&&ah(this))}},ot.cancel=function(){this.I=!0,Wa(this)},ot.eb=function(){this.B=null;const n=Date.now();0<=n-this.Y?(function oT(n,e){n.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.K&&(sh(3),Gi(17)),Wa(this),this.o=2,ep(this)):Dm(this,this.Y-n)},(ot=mc.prototype).R=function(){t0(this);for(var n=[],e=0;e<this.g.length;e++)n.push(this.h[this.g[e]]);return n},ot.T=function(){return t0(this),this.g.concat()},ot.get=function(n,e){return qu(this.h,n)?this.h[n]:e},ot.set=function(n,e){qu(this.h,n)||(this.i++,this.g.push(n)),this.h[n]=e},ot.forEach=function(n,e){for(var t=this.T(),r=0;r<t.length;r++){var i=t[r],u=this.get(i);n.call(e,u,i,this)}};var uT=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function _a(n,e){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,n instanceof _a){this.g=void 0!==e?e:n.g,Za(this,n.j),this.s=n.s,zu(this,n.i),Im(this,n.m),this.l=n.l,e=n.h;var t=new lh;t.i=e.i,e.g&&(t.g=new mc(e.g),t.h=e.h),cT(this,t),this.o=n.o}else n&&(t=String(n).match(uT))?(this.g=!!e,Za(this,t[1]||"",!0),this.s=tp(t[2]||""),zu(this,t[3]||"",!0),Im(this,t[4]),this.l=tp(t[5]||"",!0),cT(this,t[6]||"",!0),this.o=tp(t[7]||"")):(this.g=!!e,this.h=new lh(null,this.g))}function Ka(n){return new _a(n)}function Za(n,e,t){n.j=t?tp(e,!0):e,n.j&&(n.j=n.j.replace(/:$/,""))}function zu(n,e,t){n.i=t?tp(e,!0):e}function Im(n,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);n.m=e}else n.m=null}function cT(n,e,t){e instanceof lh?(n.h=e,function pT(n,e){e&&!n.j&&(Wu(n),n.i=null,n.g.forEach(function(t,r){var i=r.toLowerCase();r!=i&&(Db(this,r),Cb(this,i,t))},n)),n.j=e}(n.h,n.g)):(t||(e=uh(e,fT)),n.h=new lh(e,n.g))}function An(n,e,t){n.h.set(e,t)}function Tm(n){return An(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function tp(n,e){return n?e?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function uh(n,e,t){return"string"==typeof n?(n=encodeURI(n).replace(e,wb),t&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function wb(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}_a.prototype.toString=function(){var n=[],e=this.j;e&&n.push(uh(e,Am,!0),":");var t=this.i;return(t||"file"==e)&&(n.push("//"),(e=this.s)&&n.push(uh(e,Am,!0),"@"),n.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&n.push(":",String(t))),(t=this.l)&&(this.i&&"/"!=t.charAt(0)&&n.push("/"),n.push(uh(t,"/"==t.charAt(0)?np:Sm,!0))),(t=this.h.toString())&&n.push("?",t),(t=this.o)&&n.push("#",uh(t,bb)),n.join("")};var Am=/[#\/\?@]/g,Sm=/[#\?:]/g,np=/[#\?]/g,fT=/[#\?@]/g,bb=/#/g;function lh(n,e){this.h=this.g=null,this.i=n||null,this.j=!!e}function Wu(n){n.g||(n.g=new mc,n.h=0,n.i&&function lT(n,e){if(n){n=n.split("&");for(var t=0;t<n.length;t++){var r=n[t].indexOf("="),i=null;if(0<=r){var u=n[t].substring(0,r);i=n[t].substring(r+1)}else u=n[t];e(u,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(n.i,function(e,t){n.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function Db(n,e){Wu(n),e=rp(n,e),qu(n.g.h,e)&&(n.i=null,n.h-=n.g.get(e).length,qu((n=n.g).h,e)&&(delete n.h[e],n.i--,n.g.length>2*n.i&&t0(n)))}function Mm(n,e){return Wu(n),e=rp(n,e),qu(n.g.h,e)}function Cb(n,e,t){Db(n,e),0<t.length&&(n.i=null,n.g.set(rp(n,e),um(t)),n.h+=t.length)}function rp(n,e){return e=String(e),n.j&&(e=e.toLowerCase()),e}function yc(n){this.l=n||Ib,n=Ot.PerformanceNavigationTiming?0<(n=Ot.performance.getEntriesByType("navigation")).length&&("hq"==n[0].nextHopProtocol||"h2"==n[0].nextHopProtocol):!!(Ot.g&&Ot.g.Ea&&Ot.g.Ea()&&Ot.g.Ea().Zb),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(ot=lh.prototype).add=function(n,e){Wu(this),this.i=null,n=rp(this,n);var t=this.g.get(n);return t||this.g.set(n,t=[]),t.push(e),this.h+=1,this},ot.forEach=function(n,e){Wu(this),this.g.forEach(function(t,r){Dv(t,function(i){n.call(e,i,r,this)},this)},this)},ot.T=function(){Wu(this);for(var n=this.g.R(),e=this.g.T(),t=[],r=0;r<e.length;r++)for(var i=n[r],u=0;u<i.length;u++)t.push(e[r]);return t},ot.R=function(n){Wu(this);var e=[];if("string"==typeof n)Mm(this,n)&&(e=Cv(e,this.g.get(rp(this,n))));else{n=this.g.R();for(var t=0;t<n.length;t++)e=Cv(e,n[t])}return e},ot.set=function(n,e){return Wu(this),this.i=null,Mm(this,n=rp(this,n))&&(this.h-=this.g.get(n).length),this.g.set(n,[e]),this.h+=1,this},ot.get=function(n,e){return n&&0<(n=this.R(n)).length?String(n[0]):e},ot.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var n=[],e=this.g.T(),t=0;t<e.length;t++){var r=e[t],i=encodeURIComponent(String(r));r=this.R(r);for(var u=0;u<r.length;u++){var c=i;""!==r[u]&&(c+="="+encodeURIComponent(String(r[u]))),n.push(c)}}return this.i=n.join("&")};var Ib=10;function _c(n){return!!n.h||!!n.g&&n.g.size>=n.j}function mT(n){return n.h?1:n.g?n.g.size:0}function xm(n,e){return n.h?n.h==e:!!n.g&&n.g.has(e)}function n0(n,e){n.g?n.g.add(e):n.h=e}function yT(n,e){n.h&&n.h==e?n.h=null:n.g&&n.g.has(e)&&n.g.delete(e)}function r0(n){if(null!=n.h)return n.i.concat(n.h.D);if(null!=n.g&&0!==n.g.size){let e=n.i;for(const t of n.g.values())e=e.concat(t.D);return e}return um(n.i)}function Tb(){}function Ab(){this.g=new Tb}function s0(n,e,t){const r=t||"";try{e0(n,function(i,u){let c=i;Kf(i)&&(c=Vv(i)),e.push(r+u+"="+encodeURIComponent(c))})}catch(i){throw e.push(r+"type="+encodeURIComponent("_badmap")),i}}function ip(n,e,t,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch(u){}}function sp(n){this.l=n.$b||null,this.j=n.ib||!1}function Rm(n,e){Rr.call(this),this.D=n,this.u=e,this.m=void 0,this.readyState=o0,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}yc.prototype.cancel=function(){if(this.i=r0(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const n of this.g.values())n.cancel();this.g.clear()}},Tb.prototype.stringify=function(n){return Ot.JSON.stringify(n,void 0)},Tb.prototype.parse=function(n){return Ot.JSON.parse(n,void 0)},Qr(sp,qv),sp.prototype.g=function(){return new Rm(this.l,this.j)},sp.prototype.i=function(n){return function(){return n}}({}),Qr(Rm,Rr);var o0=0;function Sb(n){n.j.read().then(n.Sa.bind(n)).catch(n.ha.bind(n))}function op(n){n.readyState=4,n.l=null,n.j=null,n.A=null,ap(n)}function ap(n){n.onreadystatechange&&n.onreadystatechange.call(n)}(ot=Rm.prototype).open=function(n,e){if(this.readyState!=o0)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=e,this.readyState=1,ap(this)},ot.send=function(n){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(e.body=n),(this.D||Ot).fetch(new Request(this.B,e)).then(this.Va.bind(this),this.ha.bind(this))},ot.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,op(this)),this.readyState=o0},ot.Va=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,ap(this)),this.g&&(this.readyState=3,ap(this),this.g)))if("arraybuffer"===this.responseType)n.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if(void 0!==Ot.ReadableStream&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;Sb(this)}else n.text().then(this.Ua.bind(this),this.ha.bind(this))},ot.Sa=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var e=n.value?n.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!n.done}))&&(this.response=this.responseText+=e)}n.done?op(this):ap(this),3==this.readyState&&Sb(this)}},ot.Ua=function(n){this.g&&(this.response=this.responseText=n,op(this))},ot.Ta=function(n){this.g&&(this.response=n,op(this))},ot.ha=function(){this.g&&op(this)},ot.setRequestHeader=function(n,e){this.v.append(n,e)},ot.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""},ot.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],e=this.h.entries();for(var t=e.next();!t.done;)n.push((t=t.value)[0]+": "+t[1]),t=e.next();return n.join("\r\n")},Object.defineProperty(Rm.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(n){this.m=n?"include":"same-origin"}});var vT=Ot.JSON.parse;function gr(n){Rr.call(this),this.headers=new mc,this.u=n||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=ch,this.K=this.L=!1}Qr(gr,Rr);var ch="",Mb=/^https?$/i,xb=["POST","PUT"];function Nb(n){return"content-type"==n.toLowerCase()}function a0(n,e){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=e,n.m=5,u0(n),up(n)}function u0(n){n.D||(n.D=!0,Xr(n,"complete"),Xr(n,"error"))}function Ob(n){if(n.h&&void 0!==Ev&&(!n.C[1]||4!=Ya(n)||2!=n.ba()))if(n.v&&4==Ya(n))$v(n.Fa,0,n);else if(Xr(n,"readystatechange"),4==Ya(n)){n.h=!1;try{const p=n.ba();e:switch(p){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var r;if(r=0===p){var i=String(n.H).match(uT)[1]||null;if(!i&&Ot.self&&Ot.self.location){var u=Ot.self.location.protocol;i=u.substr(0,u.length-1)}r=!Mb.test(i?i.toLowerCase():"")}t=r}if(t)Xr(n,"complete"),Xr(n,"success");else{n.m=6;try{var c=2<Ya(n)?n.g.statusText:""}catch(y){c=""}n.j=c+" ["+n.ba()+"]",u0(n)}}finally{up(n)}}}function up(n,e){if(n.g){kb(n);const t=n.g,r=n.C[0]?om:null;n.g=null,n.C=null,e||Xr(n,"ready");try{t.onreadystatechange=r}catch(i){}}}function kb(n){n.g&&n.K&&(n.g.ontimeout=null),n.A&&(Ot.clearTimeout(n.A),n.A=null)}function Ya(n){return n.g?n.g.readyState:0}function Pb(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.J){case ch:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch(e){return null}}function vc(n,e,t){e:{for(r in t){var r=!1;break e}r=!0}r||(t=function ET(n){let e="";return za(n,function(t,r){e+=r,e+=":",e+=t,e+="\r\n"}),e}(t),"string"==typeof n?null!=t&&encodeURIComponent(String(t)):An(n,e,t))}function lp(n,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[n]||e}function Nm(n){this.za=0,this.l=[],this.h=new ym,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=lp("failFast",!1,n),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=lp("baseRetryDelayMs",5e3,n),this.$a=lp("retryDelaySeedMs",1e4,n),this.Ya=lp("forwardChannelMaxRetries",2,n),this.ra=lp("forwardChannelRequestTimeoutMs",2e4,n),this.qa=n&&n.xmlHttpFactory||void 0,this.Ba=n&&n.Yb||!1,this.K=void 0,this.H=n&&n.supportsCrossDomainXhr||!1,this.J="",this.i=new yc(n&&n.concurrentRequestLimit),this.Ca=new Ab,this.ja=n&&n.fastHandshake||!1,this.Ra=n&&n.Wb||!1,n&&n.Aa&&this.h.Aa(),n&&n.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&n&&n.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!n||!1!==n.Xb}function so(n){if(km(n),3==n.G){var e=n.V++,t=Ka(n.F);An(t,"SID",n.J),An(t,"RID",e),An(t,"TYPE","terminate"),Ku(n,t),(e=new oh(n,n.h,e,void 0)).K=2,e.v=Tm(Ka(t)),t=!1,Ot.navigator&&Ot.navigator.sendBeacon&&(t=Ot.navigator.sendBeacon(e.v.toString(),"")),!t&&Ot.Image&&((new Image).src=e.v,t=!0),t||(e.g=Vm(e.l,null),e.g.ea(e.v)),e.F=Date.now(),ah(e)}bT(n)}function Om(n){n.g&&(Fm(n),n.g.cancel(),n.g=null)}function km(n){Om(n),n.u&&(Ot.clearTimeout(n.u),n.u=null),dh(n),n.i.cancel(),n.m&&("number"==typeof n.m&&Ot.clearTimeout(n.m),n.m=null)}function Ec(n,e){n.l.push(new class{constructor(n,e){this.h=n,this.g=e}}(n.Za++,e)),3==n.G&&Pm(n)}function Pm(n){_c(n.i)||n.m||(n.m=!0,gm(n.Ha,n),n.C=0)}function Fb(n,e){var t;t=e?e.m:n.V++;const r=Ka(n.F);An(r,"SID",n.J),An(r,"RID",t),An(r,"AID",n.U),Ku(n,r),n.o&&n.s&&vc(r,n.o,n.s),t=new oh(n,n.h,t,n.C+1),null===n.o&&(t.H=n.s),e&&(n.l=e.D.concat(n.l)),e=cp(n,t,1e3),t.setTimeout(Math.round(.5*n.ra)+Math.round(.5*n.ra*Math.random())),n0(n.i,t),Qv(t,r,e)}function Ku(n,e){n.j&&e0({},function(t,r){An(e,r,t)})}function cp(n,e,t){t=Math.min(n.l.length,t);var r=n.j?Yr(n.j.Oa,n.j,n):null;e:{var i=n.l;let u=-1;for(;;){const c=["count="+t];-1==u?0<t?(u=i[0].h,c.push("ofs="+u)):u=0:c.push("ofs="+u);let p=!0;for(let y=0;y<t;y++){let b=i[y].h;const S=i[y].g;if(b-=u,0>b)u=Math.max(0,i[y].h-100),p=!1;else try{s0(S,c,"req"+b+"_")}catch(M){r&&r(S)}}if(p){r=c.join("&");break e}}}return n=n.l.splice(0,t),e.D=n,r}function Lb(n){n.g||n.u||(n.Y=1,gm(n.Ga,n),n.A=0)}function l0(n){return!(n.g||n.u||3<=n.A||(n.Y++,n.u=gc(Yr(n.Ga,n),Vb(n,n.A)),n.A++,0))}function Fm(n){null!=n.B&&(Ot.clearTimeout(n.B),n.B=null)}function c0(n){n.g=new oh(n,n.h,"rpc",n.Y),null===n.o&&(n.g.H=n.s),n.g.O=0;var e=Ka(n.oa);An(e,"RID","rpc"),An(e,"SID",n.J),An(e,"CI",n.N?"0":"1"),An(e,"AID",n.U),Ku(n,e),An(e,"TYPE","xmlhttp"),n.o&&n.s&&vc(e,n.o,n.s),n.K&&n.g.setTimeout(n.K);var t=n.g;n=n.la,t.K=1,t.v=Tm(Ka(e)),t.s=null,t.U=!0,_b(t,n)}function dh(n){null!=n.v&&(Ot.clearTimeout(n.v),n.v=null)}function d0(n,e){var t=null;if(n.g==e){dh(n),Fm(n),n.g=null;var r=2}else{if(!xm(n.i,e))return;t=e.D,yT(n.i,e),r=1}if(n.I=e.N,0!=n.G)if(e.i)if(1==r){t=e.s?e.s.length:0,e=Date.now()-e.F;var i=n.C;Xr(r=vm(),new gb(r,t,e,i)),Pm(n)}else Lb(n);else if(3==(i=e.o)||0==i&&0<n.I||!(1==r&&function wT(n,e){return!(mT(n.i)>=n.i.j-(n.m?1:0)||(n.m?(n.l=e.D.concat(n.l),0):1==n.G||2==n.G||n.C>=(n.Xa?0:n.Ya)||(n.m=gc(Yr(n.Ha,n,e),Vb(n,n.C)),n.C++,0)))}(n,e)||2==r&&l0(n)))switch(t&&0<t.length&&(e=n.i,e.i=e.i.concat(t)),i){case 1:wc(n,5);break;case 4:wc(n,10);break;case 3:wc(n,6);break;default:wc(n,2)}}function Vb(n,e){let t=n.Pa+Math.floor(Math.random()*n.$a);return n.j||(t*=2),t*e}function wc(n,e){if(n.h.info("Error code "+e),2==e){var t=null;n.j&&(t=null);var r=Yr(n.jb,n);t||(t=new _a("//www.google.com/images/cleardot.gif"),Ot.location&&"http"==Ot.location.protocol||Za(t,"https"),Tm(t)),function _T(n,e){const t=new ym;if(Ot.Image){const r=new Image;r.onload=am(ip,t,r,"TestLoadImage: loaded",!0,e),r.onerror=am(ip,t,r,"TestLoadImage: error",!1,e),r.onabort=am(ip,t,r,"TestLoadImage: abort",!1,e),r.ontimeout=am(ip,t,r,"TestLoadImage: timeout",!1,e),Ot.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=n}else e(!1)}(t.toString(),r)}else Gi(2);n.G=0,n.j&&n.j.va(e),bT(n),km(n)}function bT(n){n.G=0,n.I=-1,n.j&&((0!=r0(n.i).length||0!=n.l.length)&&(n.i.i.length=0,um(n.l),n.l.length=0),n.j.ua())}function Lm(n,e,t){let r=function dT(n){return n instanceof _a?Ka(n):new _a(n,void 0)}(t);if(""!=r.i)e&&zu(r,e+"."+r.i),Im(r,r.m);else{const i=Ot.location;r=function hT(n,e,t,r){var i=new _a(null,void 0);return n&&Za(i,n),e&&zu(i,e),t&&Im(i,t),r&&(i.l=r),i}(i.protocol,e?e+"."+i.hostname:i.hostname,+i.port,t)}return n.aa&&za(n.aa,function(i,u){An(r,u,i)}),t=n.sa,(e=n.D)&&t&&An(r,e,t),An(r,"VER",n.ma),Ku(n,r),r}function Vm(n,e,t){if(e&&!n.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new gr(t&&n.Ba&&!n.qa?new sp({ib:!0}):n.qa)).L=n.H,e}function h0(){}function hh(){if(cc&&!(10<=Number(YI)))throw Error("Environmental error: no available transport.")}function qi(n,e){Rr.call(this),this.g=new Nm(e),this.l=n,this.h=e&&e.messageUrlParams||null,n=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(n?n["X-WebChannel-Content-Type"]=e.messageContentType:n={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(n?n["X-WebChannel-Client-Profile"]=e.ya:n={"X-WebChannel-Client-Profile":e.ya}),this.g.P=n,(n=e&&e.httpHeadersOverwriteParam)&&!Zf(n)&&(this.g.o=n),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!Zf(e)&&(this.g.D=e,null!==(n=this.h)&&e in n&&e in(n=this.h)&&delete n[e]),this.j=new fh(this)}function Bb(n){zv.call(this);var e=n.__sm__;if(e){e:{for(const t in e){n=t;break e}n=void 0}(this.i=n)&&(n=this.i,e=null!==e&&n in e?e[n]:void 0),this.data=e}else this.data=n}function Ub(){Wv.call(this),this.status=1}function fh(n){this.g=n}(ot=gr.prototype).ea=function(n,e,t,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+n);e=e?e.toUpperCase():"GET",this.H=n,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():Kv.g(),this.C=function mb(n){return n.h||(n.h=n.i())}(this.u?this.u:Kv),this.g.onreadystatechange=Yr(this.Fa,this);try{this.F=!0,this.g.open(e,String(n),!0),this.F=!1}catch(u){return void a0(this,u)}n=t||"";const i=new mc(this.headers);r&&e0(r,function(u,c){i.set(c,u)}),r=function Jw(n){e:{var e=Nb;const t=n.length,r="string"==typeof n?n.split(""):n;for(let i=0;i<t;i++)if(i in r&&e.call(void 0,r[i],i,n)){e=i;break e}e=-1}return 0>e?null:"string"==typeof n?n.charAt(e):n[e]}(i.T()),t=Ot.FormData&&n instanceof Ot.FormData,!(0<=Qw(xb,e))||r||t||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach(function(u,c){this.g.setRequestHeader(c,u)},this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{kb(this),0<this.B&&((this.K=function Rb(n){return cc&&function Wn(){return function Sv(n){var e=dm;return Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=n(9)}(function(){let n=0;const e=Iv(String(cm)).split("."),t=Iv("9").split("."),r=Math.max(e.length,t.length);for(let c=0;0==n&&c<r;c++){var i=e[c]||"",u=t[c]||"";do{if(i=/(\d*)(\D*)(.*)/.exec(i)||["","","",""],u=/(\d*)(\D*)(.*)/.exec(u)||["","","",""],0==i[0].length&&0==u[0].length)break;n=lm(0==i[1].length?0:parseInt(i[1],10),0==u[1].length?0:parseInt(u[1],10))||lm(0==i[2].length,0==u[2].length)||lm(i[2],u[2]),i=i[3],u=u[3]}while(0==n)}return 0<=n})}()&&"number"==typeof n.timeout&&void 0!==n.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Yr(this.pa,this)):this.A=$v(this.pa,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(u){a0(this,u)}},ot.pa=function(){void 0!==Ev&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Xr(this,"timeout"),this.abort(8))},ot.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,Xr(this,"complete"),Xr(this,"abort"),up(this))},ot.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),up(this,!0)),gr.Z.M.call(this)},ot.Fa=function(){this.s||(this.F||this.v||this.l?Ob(this):this.cb())},ot.cb=function(){Ob(this)},ot.ba=function(){try{return 2<Ya(this)?this.g.status:-1}catch(n){return-1}},ot.ga=function(){try{return this.g?this.g.responseText:""}catch(n){return""}},ot.Qa=function(n){if(this.g){var e=this.g.responseText;return n&&0==e.indexOf(n)&&(e=e.substring(n.length)),vT(e)}},ot.Da=function(){return this.m},ot.La=function(){return"string"==typeof this.j?this.j:String(this.j)},(ot=Nm.prototype).ma=8,ot.G=1,ot.hb=function(n){try{this.h.info("Origin Trials invoked: "+n)}catch(e){}},ot.Ha=function(n){if(this.m)if(this.m=null,1==this.G){if(!n){this.V=Math.floor(1e5*Math.random()),n=this.V++;const i=new oh(this,this.h,n,void 0);let u=this.s;if(this.P&&(u?(u=Xw(u),lc(u,this.P)):u=this.P),null===this.o&&(i.H=u),this.ja)e:{for(var e=0,t=0;t<this.l.length;t++){var r=this.l[t];if(void 0===(r="__data__"in r.g&&"string"==typeof(r=r.g.__data__)?r.length:void 0))break;if(4096<(e+=r)){e=t;break e}if(4096===e||t===this.l.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=cp(this,i,e),An(t=Ka(this.F),"RID",n),An(t,"CVER",22),this.D&&An(t,"X-HTTP-Session-Id",this.D),Ku(this,t),this.o&&u&&vc(t,this.o,u),n0(this.i,i),this.Ra&&An(t,"TYPE","init"),this.ja?(An(t,"$req",e),An(t,"SID","null"),i.$=!0,Qv(i,t,null)):Qv(i,t,e),this.G=2}}else 3==this.G&&(n?Fb(this,n):0==this.l.length||_c(this.i)||Fb(this))},ot.Ga=function(){if(this.u=null,c0(this),this.$&&!(this.L||null==this.g||0>=this.O)){var n=2*this.O;this.h.info("BP detection timer enabled: "+n),this.B=gc(Yr(this.bb,this),n)}},ot.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,Gi(10),Om(this),c0(this))},ot.ab=function(){null!=this.v&&(this.v=null,Om(this),l0(this),Gi(19))},ot.jb=function(n){n?(this.h.info("Successfully pinged google.com"),Gi(2)):(this.h.info("Failed to ping google.com"),Gi(1))},(ot=h0.prototype).xa=function(){},ot.wa=function(){},ot.va=function(){},ot.ua=function(){},ot.Oa=function(){},hh.prototype.g=function(n,e){return new qi(n,e)},Qr(qi,Rr),qi.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var n=this.g,e=this.l,t=this.h||void 0;n.Wa&&(n.h.info("Origin Trials enabled."),gm(Yr(n.hb,n,e))),Gi(0),n.W=e,n.aa=t||{},n.N=n.X,n.F=Lm(n,null,n.W),Pm(n)},qi.prototype.close=function(){so(this.g)},qi.prototype.u=function(n){if("string"==typeof n){var e={};e.__data__=n,Ec(this.g,e)}else this.v?((e={}).__data__=Vv(n),Ec(this.g,e)):Ec(this.g,n)},qi.prototype.M=function(){this.g.j=null,delete this.j,so(this.g),delete this.g,qi.Z.M.call(this)},Qr(Bb,zv),Qr(Ub,Wv),Qr(fh,h0),fh.prototype.xa=function(){Xr(this.g,"a")},fh.prototype.wa=function(n){Xr(this.g,new Bb(n))},fh.prototype.va=function(n){Xr(this.g,new Ub(n))},fh.prototype.ua=function(){Xr(this.g,"b")},hh.prototype.createWebChannel=hh.prototype.g,qi.prototype.send=qi.prototype.u,qi.prototype.open=qi.prototype.m,qi.prototype.close=qi.prototype.close,Em.NO_ERROR=0,Em.TIMEOUT=8,Em.HTTP_ERROR=6,Gv.COMPLETE="complete",yb.EventType=Jf,Jf.OPEN="a",Jf.CLOSE="b",Jf.ERROR="c",Jf.MESSAGE="d",Rr.prototype.listen=Rr.prototype.N,gr.prototype.listenOnce=gr.prototype.O,gr.prototype.getLastError=gr.prototype.La,gr.prototype.getLastErrorCode=gr.prototype.Da,gr.prototype.getStatus=gr.prototype.ba,gr.prototype.getResponseJson=gr.prototype.Qa,gr.prototype.getResponseText=gr.prototype.ga,gr.prototype.send=gr.prototype.ea;var DT=ya.createWebChannelTransport=function(){return new hh},jb=ya.getStatEventTarget=function(){return vm()},dp=ya.ErrorCode=Em,$b=ya.EventType=Gv,CT=ya.Event=pc,f0=ya.Stat={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},Hb=ya.FetchXmlHttpFactory=sp,Bm=ya.WebChannel=yb,Gb=ya.XhrIo=gr;const p0="@firebase/firestore";class ei{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}ei.UNAUTHENTICATED=new ei(null),ei.GOOGLE_CREDENTIALS=new ei("google-credentials-uid"),ei.FIRST_PARTY=new ei("first-party-uid"),ei.MOCK_USER=new ei("mock-user");let bc="9.6.11";const Qa=new qa.Yd("@firebase/firestore");function ti(){return Qa.logLevel}function ke(n,...e){if(Qa.logLevel<=qa.in.DEBUG){const t=e.map(Dc);Qa.debug(`Firestore (${bc}): ${n}`,...t)}}function mr(n,...e){if(Qa.logLevel<=qa.in.ERROR){const t=e.map(Dc);Qa.error(`Firestore (${bc}): ${n}`,...t)}}function Um(n,...e){if(Qa.logLevel<=qa.in.WARN){const t=e.map(Dc);Qa.warn(`Firestore (${bc}): ${n}`,...t)}}function Dc(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch(t){return n}}function at(n="Unexpected state"){const e=`FIRESTORE (${bc}) INTERNAL ASSERTION FAILED: `+n;throw mr(e),new Error(e)}function Tt(n,e){n||at()}function ze(n,e){return n}const ue={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Re extends qt.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class yr{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class g0{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class qb{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(ei.UNAUTHENTICATED))}shutdown(){}}class jm{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class m0{constructor(e){this.t=e,this.currentUser=ei.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var r=this;let i=this.i;const u=b=>this.i!==i?(i=this.i,t(b)):Promise.resolve();let c=new yr;this.o=()=>{this.i++,this.currentUser=this.u(),c.resolve(),c=new yr,e.enqueueRetryable(()=>u(this.currentUser))};const p=()=>{const b=c;e.enqueueRetryable((0,_e.Z)(function*(){yield b.promise,yield u(r.currentUser)}))},y=b=>{ke("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=b,this.auth.addAuthTokenListener(this.o),p()};this.t.onInit(b=>y(b)),setTimeout(()=>{if(!this.auth){const b=this.t.getImmediate({optional:!0});b?y(b):(ke("FirebaseAuthCredentialsProvider","Auth not yet detected"),c.resolve(),c=new yr)}},0),p()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(ke("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Tt("string"==typeof r.accessToken),new g0(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return Tt(null===e||"string"==typeof e),new ei(e)}}class ox{constructor(e,t,r){this.type="FirstParty",this.user=ei.FIRST_PARTY,this.headers=new Map,this.headers.set("X-Goog-AuthUser",t);const i=e.auth.getAuthHeaderValueForFirstParty([]);i&&this.headers.set("Authorization",i),r&&this.headers.set("X-Goog-Iam-Authorization-Token",r)}}class zb{constructor(e,t,r){this.h=e,this.l=t,this.m=r}getToken(){return Promise.resolve(new ox(this.h,this.l,this.m))}start(e,t){e.enqueueRetryable(()=>t(ei.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Wb{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Kb{constructor(e){this.g=e,this.forceRefresh=!1,this.appCheck=null,this.p=null}start(e,t){const r=u=>{null!=u.error&&ke("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${u.error.message}`);const c=u.token!==this.p;return this.p=u.token,ke("FirebaseAppCheckTokenProvider",`Received ${c?"new":"existing"} token.`),c?t(u.token):Promise.resolve()};this.o=u=>{e.enqueueRetryable(()=>r(u))};const i=u=>{ke("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=u,this.appCheck.addTokenListener(this.o)};this.g.onInit(u=>i(u)),setTimeout(()=>{if(!this.appCheck){const u=this.g.getImmediate({optional:!0});u?i(u):ke("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(Tt("string"==typeof t.token),this.p=t.token,new Wb(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}class ss{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.I(r),this.T=r=>t.writeSequenceNumber(r))}I(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.T&&this.T(e),e}}function TT(n){const e="undefined"!=typeof self&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}ss.A=-1;class $m{static R(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const i=TT(40);for(let u=0;u<i.length;++u)r.length<20&&i[u]<t&&(r+=e.charAt(i[u]%e.length))}return r}}function Ft(n,e){return n<e?-1:n>e?1:0}function hp(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}function Zb(n){return n+"\0"}class ir{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Re(ue.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Re(ue.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new Re(ue.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Re(ue.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return ir.fromMillis(Date.now())}static fromDate(e){return ir.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new ir(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Ft(this.nanoseconds,e.nanoseconds):Ft(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class Dt{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Dt(e)}static min(){return new Dt(new ir(0,0))}static max(){return new Dt(new ir(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}function _0(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Cc(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function v0(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}class gh{constructor(e,t,r){void 0===t?t=0:t>e.length&&at(),void 0===r?r=e.length-t:r>e.length-t&&at(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return 0===gh.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof gh?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let i=0;i<r;i++){const u=e.get(i),c=t.get(i);if(u<c)return-1;if(u>c)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class tn extends gh{construct(e,t,r){return new tn(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new Re(ue.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new tn(t)}static emptyPath(){return new tn([])}}const AT=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Nr extends gh{construct(e,t,r){return new Nr(e,t,r)}static isValidIdentifier(e){return AT.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Nr.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new Nr(["__name__"])}static fromServerFormat(e){const t=[];let r="",i=0;const u=()=>{if(0===r.length)throw new Re(ue.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let c=!1;for(;i<e.length;){const p=e[i];if("\\"===p){if(i+1===e.length)throw new Re(ue.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const y=e[i+1];if("\\"!==y&&"."!==y&&"`"!==y)throw new Re(ue.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=y,i+=2}else"`"===p?(c=!c,i++):"."!==p||c?(r+=p,i++):(u(),i++)}if(u(),c)throw new Re(ue.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Nr(t)}static emptyPath(){return new Nr([])}}class mh{constructor(e){this.fields=e,e.sort(Nr.comparator)}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return hp(this.fields,e.fields,(t,r)=>t.isEqual(r))}}class _r{constructor(e){this.binaryString=e}static fromBase64String(e){const t=atob(e);return new _r(t)}static fromUint8Array(e){const t=function(r){let i="";for(let u=0;u<r.length;++u)i+=String.fromCharCode(r[u]);return i}(e);return new _r(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ft(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}_r.EMPTY_BYTE_STRING=new _r("");const Qb=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ja(n){if(Tt(!!n),"string"==typeof n){let e=0;const t=Qb.exec(n);if(Tt(!!t),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Kn(n.seconds),nanos:Kn(n.nanos)}}function Kn(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function Ic(n){return"string"==typeof n?_r.fromBase64String(n):_r.fromUint8Array(n)}function Jb(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=null==n?void 0:n.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function E0(n){const e=n.mapValue.fields.__previous_value__;return Jb(e)?E0(e):e}function Hm(n){const e=Ja(n.mapValue.fields.__local_write_time__.timestampValue);return new ir(e.seconds,e.nanos)}class ax{constructor(e,t,r,i,u,c,p,y){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=u,this.forceLongPolling=c,this.autoDetectLongPolling=p,this.useFetchStreams=y}}class Zu{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new Zu("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof Zu&&e.projectId===this.projectId&&e.database===this.database}}function yh(n){return null==n}function Gm(n){return 0===n&&1/n==-1/0}function ST(n){return"number"==typeof n&&Number.isInteger(n)&&!Gm(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}class Ge{constructor(e){this.path=e}static fromPath(e){return new Ge(tn.fromString(e))}static fromName(e){return new Ge(tn.fromString(e).popFirst(5))}static empty(){return new Ge(tn.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===tn.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return tn.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Ge(new tn(e.slice()))}}const MT={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},fp={nullValue:"NULL_VALUE"};function _h(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Jb(n)?4:eD(n)?9:10:at()}function Bo(n,e){if(n===e)return!0;const t=_h(n);if(t!==_h(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Hm(n).isEqual(Hm(e));case 3:return function(r,i){if("string"==typeof r.timestampValue&&"string"==typeof i.timestampValue&&r.timestampValue.length===i.timestampValue.length)return r.timestampValue===i.timestampValue;const u=Ja(r.timestampValue),c=Ja(i.timestampValue);return u.seconds===c.seconds&&u.nanos===c.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return i=e,Ic(n.bytesValue).isEqual(Ic(i.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(r,i){return Kn(r.geoPointValue.latitude)===Kn(i.geoPointValue.latitude)&&Kn(r.geoPointValue.longitude)===Kn(i.geoPointValue.longitude)}(n,e);case 2:return function(r,i){if("integerValue"in r&&"integerValue"in i)return Kn(r.integerValue)===Kn(i.integerValue);if("doubleValue"in r&&"doubleValue"in i){const u=Kn(r.doubleValue),c=Kn(i.doubleValue);return u===c?Gm(u)===Gm(c):isNaN(u)&&isNaN(c)}return!1}(n,e);case 9:return hp(n.arrayValue.values||[],e.arrayValue.values||[],Bo);case 10:return function(r,i){const u=r.mapValue.fields||{},c=i.mapValue.fields||{};if(_0(u)!==_0(c))return!1;for(const p in u)if(u.hasOwnProperty(p)&&(void 0===c[p]||!Bo(u[p],c[p])))return!1;return!0}(n,e);default:return at()}var i}function Tc(n,e){return void 0!==(n.values||[]).find(t=>Bo(t,e))}function Xa(n,e){if(n===e)return 0;const t=_h(n),r=_h(e);if(t!==r)return Ft(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return Ft(n.booleanValue,e.booleanValue);case 2:return function(i,u){const c=Kn(i.integerValue||i.doubleValue),p=Kn(u.integerValue||u.doubleValue);return c<p?-1:c>p?1:c===p?0:isNaN(c)?isNaN(p)?0:-1:1}(n,e);case 3:return w0(n.timestampValue,e.timestampValue);case 4:return w0(Hm(n),Hm(e));case 5:return Ft(n.stringValue,e.stringValue);case 6:return function(i,u){const c=Ic(i),p=Ic(u);return c.compareTo(p)}(n.bytesValue,e.bytesValue);case 7:return function(i,u){const c=i.split("/"),p=u.split("/");for(let y=0;y<c.length&&y<p.length;y++){const b=Ft(c[y],p[y]);if(0!==b)return b}return Ft(c.length,p.length)}(n.referenceValue,e.referenceValue);case 8:return function(i,u){const c=Ft(Kn(i.latitude),Kn(u.latitude));return 0!==c?c:Ft(Kn(i.longitude),Kn(u.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(i,u){const c=i.values||[],p=u.values||[];for(let y=0;y<c.length&&y<p.length;++y){const b=Xa(c[y],p[y]);if(b)return b}return Ft(c.length,p.length)}(n.arrayValue,e.arrayValue);case 10:return function(i,u){const c=i.fields||{},p=Object.keys(c),y=u.fields||{},b=Object.keys(y);p.sort(),b.sort();for(let S=0;S<p.length&&S<b.length;++S){const M=Ft(p[S],b[S]);if(0!==M)return M;const F=Xa(c[p[S]],y[b[S]]);if(0!==F)return F}return Ft(p.length,b.length)}(n.mapValue,e.mapValue);default:throw at()}}function w0(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return Ft(n,e);const t=Ja(n),r=Ja(e),i=Ft(t.seconds,r.seconds);return 0!==i?i:Ft(t.nanos,r.nanos)}function pp(n){return gp(n)}function gp(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(r){const i=Ja(r);return`time(${i.seconds},${i.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?Ic(n.bytesValue).toBase64():"referenceValue"in n?Ge.fromName(n.referenceValue).toString():"geoPointValue"in n?`geo(${(e=n.geoPointValue).latitude},${e.longitude})`:"arrayValue"in n?function(r){let i="[",u=!0;for(const c of r.values||[])u?u=!1:i+=",",i+=gp(c);return i+"]"}(n.arrayValue):"mapValue"in n?function(r){const i=Object.keys(r.fields||{}).sort();let u="{",c=!0;for(const p of i)c?c=!1:u+=",",u+=`${p}:${gp(r.fields[p])}`;return u+"}"}(n.mapValue):at();var e}function Yu(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function b0(n){return!!n&&"integerValue"in n}function vh(n){return!!n&&"arrayValue"in n}function xT(n){return!!n&&"nullValue"in n}function Xb(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function qm(n){return!!n&&"mapValue"in n}function Ac(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return Cc(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=Ac(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Ac(n.arrayValue.values[t]);return e}return Object.assign({},n)}function eD(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}function ux(n){return"nullValue"in n?fp:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?Yu(Zu.empty(),Ge.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?{mapValue:{}}:at()}function lx(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?Yu(Zu.empty(),Ge.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?{mapValue:{}}:"mapValue"in n?MT:at()}function RT(n,e){return void 0===n?e:void 0===e||Xa(n,e)>0?n:e}function tD(n,e){return void 0===n?e:void 0===e||Xa(n,e)<0?n:e}class Di{constructor(e){this.value=e}static empty(){return new Di({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!qm(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Ac(t)}setAll(e){let t=Nr.emptyPath(),r={},i=[];e.forEach((c,p)=>{if(!t.isImmediateParentOf(p)){const y=this.getFieldsMap(t);this.applyChanges(y,r,i),r={},i=[],t=p.popLast()}c?r[p.lastSegment()]=Ac(c):i.push(p.lastSegment())});const u=this.getFieldsMap(t);this.applyChanges(u,r,i)}delete(e){const t=this.field(e.popLast());qm(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Bo(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];qm(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){Cc(t,(i,u)=>e[i]=u);for(const i of r)delete e[i]}clone(){return new Di(Ac(this.value))}}function nD(n){const e=[];return Cc(n.fields,(t,r)=>{const i=new Nr([t]);if(qm(r)){const u=nD(r.mapValue).fields;if(0===u.length)e.push(i);else for(const c of u)e.push(i.child(c))}else e.push(i)}),new mh(e)}class kn{constructor(e,t,r,i,u,c){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.data=u,this.documentState=c}static newInvalidDocument(e){return new kn(e,0,Dt.min(),Dt.min(),Di.empty(),0)}static newFoundDocument(e,t,r){return new kn(e,1,t,Dt.min(),r,0)}static newNoDocument(e,t){return new kn(e,2,t,Dt.min(),Di.empty(),0)}static newUnknownDocument(e,t){return new kn(e,3,t,Dt.min(),Di.empty(),2)}convertToFoundDocument(e,t){return this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Di.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Di.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof kn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new kn(this.key,this.documentType,this.version,this.readTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class zm{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}}function mp(n){return n.fields.find(e=>2===e.kind)}function Sc(n){return n.fields.filter(e=>2!==e.kind)}zm.UNKNOWN_ID=-1;class os{constructor(e,t){this.fieldPath=e,this.kind=t}}class yp{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new yp(0,eu.min())}}function Wm(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=Dt.fromTimestamp(1e9===r?new ir(t+1,0):new ir(t,r));return new eu(i,Ge.empty(),e)}function NT(n){return new eu(n.readTime,n.key,-1)}class eu{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new eu(Dt.min(),Ge.empty(),-1)}static max(){return new eu(Dt.max(),Ge.empty(),-1)}}function D0(n,e){let t=n.readTime.compareTo(e.readTime);return 0!==t?t:(t=Ge.comparator(n.documentKey,e.documentKey),0!==t?t:Ft(n.largestBatchId,e.largestBatchId))}class rD{constructor(e,t=null,r=[],i=[],u=null,c=null,p=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=u,this.startAt=c,this.endAt=p,this.P=null}}function C0(n,e=null,t=[],r=[],i=null,u=null,c=null){return new rD(n,e,t,r,i,u,c)}function Mc(n){const e=ze(n);if(null===e.P){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>{return(i=r).field.canonicalString()+i.op.toString()+pp(i.value);var i}).join(","),t+="|ob:",t+=e.orderBy.map(r=>{return(i=r).field.canonicalString()+i.dir;var i}).join(","),yh(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>pp(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>pp(r)).join(",")),e.P=t}return e.P}function _p(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let i=0;i<n.orderBy.length;i++)if(!I0(n.orderBy[i],e.orderBy[i]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let i=0;i<n.filters.length;i++)if((t=n.filters[i]).op!==(r=e.filters[i]).op||!t.field.isEqual(r.field)||!Bo(t.value,r.value))return!1;var t,r;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!uD(n.startAt,e.startAt)&&uD(n.endAt,e.endAt)}function Km(n){return Ge.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}function Zm(n,e){return n.filters.filter(t=>t instanceof jr&&t.field.isEqual(e))}function Ym(n,e,t){let r,i=!0;for(const u of Zm(n,e)){let c,p=!0;switch(u.op){case"<":case"<=":c=ux(u.value);break;case"==":case"in":case">=":c=u.value;break;case">":c=u.value,p=!1;break;case"!=":case"not-in":c=fp}RT(r,c)===c&&(r=c,i=p)}if(null!==t)for(let u=0;u<n.orderBy.length;++u)if(n.orderBy[u].field.isEqual(e)){const c=t.position[u];RT(r,c)===c&&(r=c,i=t.inclusive);break}return{value:r,inclusive:i}}function Qu(n,e,t){let r,i=!0;for(const u of Zm(n,e)){let c,p=!0;switch(u.op){case">=":case">":c=lx(u.value),p=!1;break;case"==":case"in":case"<=":c=u.value;break;case"<":c=u.value,p=!1;break;case"!=":case"not-in":c=MT}tD(r,c)===c&&(r=c,i=p)}if(null!==t)for(let u=0;u<n.orderBy.length;++u)if(n.orderBy[u].field.isEqual(e)){const c=t.position[u];tD(r,c)===c&&(r=c,i=t.inclusive);break}return{value:r,inclusive:i}}class jr extends class{}{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.V(e,t,r):new sD(e,t,r):"array-contains"===t?new kT(e,r):"in"===t?new PT(e,r):"not-in"===t?new aD(e,r):"array-contains-any"===t?new FT(e,r):new jr(e,t,r)}static V(e,t,r){return"in"===t?new OT(e,r):new cx(e,r)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.v(Xa(t,this.value)):null!==t&&_h(this.value)===_h(t)&&this.v(Xa(t,this.value))}v(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return at()}}S(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}class sD extends jr{constructor(e,t,r){super(e,t,r),this.key=Ge.fromName(r.referenceValue)}matches(e){const t=Ge.comparator(e.key,this.key);return this.v(t)}}class OT extends jr{constructor(e,t){super(e,"in",t),this.keys=oD(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class cx extends jr{constructor(e,t){super(e,"not-in",t),this.keys=oD(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function oD(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(r=>Ge.fromName(r.referenceValue))}class kT extends jr{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return vh(t)&&Tc(t.arrayValue,this.value)}}class PT extends jr{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&Tc(this.value.arrayValue,t)}}class aD extends jr{constructor(e,t){super(e,"not-in",t)}matches(e){if(Tc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!Tc(this.value.arrayValue,t)}}class FT extends jr{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!vh(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>Tc(this.value.arrayValue,r))}}class Ju{constructor(e,t){this.position=e,this.inclusive=t}}class vp{constructor(e,t="asc"){this.field=e,this.dir=t}}function I0(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}function T0(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){const u=e[i],c=n.position[i];if(r=u.field.isKeyField()?Ge.comparator(Ge.fromName(c.referenceValue),t.key):Xa(c,t.data.field(u.field)),"desc"===u.dir&&(r*=-1),0!==r)break}return r}function uD(n,e){if(null===n)return null===e;if(null===e||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Bo(n.position[t],e.position[t]))return!1;return!0}class tu{constructor(e,t=null,r=[],i=[],u=null,c="F",p=null,y=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=u,this.limitType=c,this.startAt=p,this.endAt=y,this.D=null,this.C=null}}function A0(n,e,t,r,i,u,c,p){return new tu(n,e,t,r,i,u,c,p)}function Xu(n){return new tu(n)}function Eh(n){return!yh(n.limit)&&"F"===n.limitType}function Ep(n){return!yh(n.limit)&&"L"===n.limitType}function S0(n){return n.explicitOrderBy.length>0?n.explicitOrderBy[0].field:null}function Qm(n){for(const e of n.filters)if(e.S())return e.field;return null}function Jm(n){return null!==n.collectionGroup}function wh(n){const e=ze(n);if(null===e.D){e.D=[];const t=Qm(e),r=S0(e);if(null!==t&&null===r)t.isKeyField()||e.D.push(new vp(t)),e.D.push(new vp(Nr.keyField(),"asc"));else{let i=!1;for(const u of e.explicitOrderBy)e.D.push(u),u.field.isKeyField()&&(i=!0);if(!i){const u=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.D.push(new vp(Nr.keyField(),u))}}}return e.D}function oo(n){const e=ze(n);if(!e.C)if("F"===e.limitType)e.C=C0(e.path,e.collectionGroup,wh(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const u of wh(e))t.push(new vp(u.field,"desc"===u.dir?"asc":"desc"));const r=e.endAt?new Ju(e.endAt.position,!e.endAt.inclusive):null,i=e.startAt?new Ju(e.startAt.position,!e.startAt.inclusive):null;e.C=C0(e.path,e.collectionGroup,t,e.filters,e.limit,r,i)}return e.C}function LT(n,e,t){return new tu(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Xm(n,e){return _p(oo(n),oo(e))&&n.limitType===e.limitType}function M0(n){return`${Mc(oo(n))}|lt:${n.limitType}`}function x0(n){return`Query(target=${function iD(n){let e=n.path.canonicalString();return null!==n.collectionGroup&&(e+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(e+=`, filters: [${n.filters.map(t=>{return`${(r=t).field.canonicalString()} ${r.op} ${pp(r.value)}`;var r}).join(", ")}]`),yh(n.limit)||(e+=", limit: "+n.limit),n.orderBy.length>0&&(e+=`, orderBy: [${n.orderBy.map(t=>{return`${(r=t).field.canonicalString()} (${r.dir})`;var r}).join(", ")}]`),n.startAt&&(e+=", startAt: ",e+=n.startAt.inclusive?"b:":"a:",e+=n.startAt.position.map(t=>pp(t)).join(",")),n.endAt&&(e+=", endAt: ",e+=n.endAt.inclusive?"a:":"b:",e+=n.endAt.position.map(t=>pp(t)).join(",")),`Target(${e})`}(oo(n))}; limitType=${n.limitType})`}function R0(n,e){return e.isFoundDocument()&&function(t,r){const i=r.key.path;return null!==t.collectionGroup?r.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(i):Ge.isDocumentKey(t.path)?t.path.isEqual(i):t.path.isImmediateParentOf(i)}(n,e)&&function(t,r){for(const i of t.explicitOrderBy)if(!i.field.isKeyField()&&null===r.data.field(i.field))return!1;return!0}(n,e)&&function(t,r){for(const i of t.filters)if(!i.matches(r))return!1;return!0}(n,e)&&(r=e,!((t=n).startAt&&!function(i,u,c){const p=T0(i,u,c);return i.inclusive?p<=0:p<0}(t.startAt,wh(t),r)||t.endAt&&!function(i,u,c){const p=T0(i,u,c);return i.inclusive?p>=0:p>0}(t.endAt,wh(t),r)));var t,r}function lD(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function VT(n){return(e,t)=>{let r=!1;for(const i of wh(n)){const u=dx(i,e,t);if(0!==u)return u;r=r||i.field.isKeyField()}return 0}}function dx(n,e,t){const r=n.field.isKeyField()?Ge.comparator(e.key,t.key):function(i,u,c){const p=u.data.field(i),y=c.data.field(i);return null!==p&&null!==y?Xa(p,y):at()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return at()}}function BT(n,e){if(n.N){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Gm(e)?"-0":e}}function UT(n){return{integerValue:""+n}}function jT(n,e){return ST(e)?UT(e):BT(n,e)}class ey{constructor(){this._=void 0}}function ty(n,e,t){return n instanceof xc?function(r,i){const u={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return i&&(u.fields.__previous_value__=i),{mapValue:u}}(t,e):n instanceof Is?N0(n,e):n instanceof nu?ny(n,e):function(r,i){const u=cD(r,i),c=ry(u)+ry(r.k);return b0(u)&&b0(r.k)?UT(c):BT(r.M,c)}(n,e)}function $T(n,e,t){return n instanceof Is?N0(n,e):n instanceof nu?ny(n,e):t}function cD(n,e){return n instanceof bh?b0(t=e)||(r=t)&&"doubleValue"in r?e:{integerValue:0}:null;var r,t}class xc extends ey{}class Is extends ey{constructor(e){super(),this.elements=e}}function N0(n,e){const t=iy(e);for(const r of n.elements)t.some(i=>Bo(i,r))||t.push(r);return{arrayValue:{values:t}}}class nu extends ey{constructor(e){super(),this.elements=e}}function ny(n,e){let t=iy(e);for(const r of n.elements)t=t.filter(i=>!Bo(i,r));return{arrayValue:{values:t}}}class bh extends ey{constructor(e,t){super(),this.M=e,this.k=t}}function ry(n){return Kn(n.integerValue||n.doubleValue)}function iy(n){return vh(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class el{constructor(e,t){this.field=e,this.transform=t}}class fx{constructor(e,t){this.version=e,this.transformResults=t}}class Or{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Or}static exists(e){return new Or(void 0,e)}static updateTime(e){return new Or(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function O0(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class wp{}function HT(n,e,t){n instanceof Dh?function(r,i,u){const c=r.value.clone(),p=fD(r.fieldTransforms,i,u.transformResults);c.setAll(p),i.convertToFoundDocument(u.version,c).setHasCommittedMutations()}(n,e,t):n instanceof tl?function(r,i,u){if(!O0(r.precondition,i))return void i.convertToUnknownDocument(u.version);const c=fD(r.fieldTransforms,i,u.transformResults),p=i.data;p.setAll(hD(r)),p.setAll(c),i.convertToFoundDocument(u.version,p).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function k0(n,e,t){var i;n instanceof Dh?function(r,i,u){if(!O0(r.precondition,i))return;const c=r.value.clone(),p=F0(r.fieldTransforms,u,i);c.setAll(p),i.convertToFoundDocument(P0(i),c).setHasLocalMutations()}(n,e,t):n instanceof tl?function(r,i,u){if(!O0(r.precondition,i))return;const c=F0(r.fieldTransforms,u,i),p=i.data;p.setAll(hD(r)),p.setAll(c),i.convertToFoundDocument(P0(i),p).setHasLocalMutations()}(n,e,t):O0(n.precondition,i=e)&&i.convertToNoDocument(Dt.min())}function GT(n,e){let t=null;for(const r of n.fieldTransforms){const i=e.data.field(r.field),u=cD(r.transform,i||null);null!=u&&(null==t&&(t=Di.empty()),t.set(r.field,u))}return t||null}function dD(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(r=e.fieldTransforms,!!(void 0===(t=n.fieldTransforms)&&void 0===r||t&&r&&hp(t,r,(i,u)=>function hx(n,e){return n.field.isEqual(e.field)&&(r=e.transform,(t=n.transform)instanceof Is&&r instanceof Is||t instanceof nu&&r instanceof nu?hp(t.elements,r.elements,Bo):t instanceof bh&&r instanceof bh?Bo(t.k,r.k):t instanceof xc&&r instanceof xc);var t,r}(i,u))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var t,r}function P0(n){return n.isFoundDocument()?n.version:Dt.min()}class Dh extends wp{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}}class tl extends wp{constructor(e,t,r,i,u=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=u,this.type=1}}function hD(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function fD(n,e,t){const r=new Map;Tt(n.length===t.length);for(let i=0;i<t.length;i++){const u=n[i],c=u.transform,p=e.data.field(u.field);r.set(u.field,$T(c,p,t[i]))}return r}function F0(n,e,t){const r=new Map;for(const i of n){const u=i.transform,c=t.data.field(i.field);r.set(i.field,ty(u,c,e))}return r}class Rc extends wp{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}}class pD extends wp{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}}class gD{constructor(e){this.count=e}}var Zn,nn;function mD(n){switch(n){default:return at();case ue.CANCELLED:case ue.UNKNOWN:case ue.DEADLINE_EXCEEDED:case ue.RESOURCE_EXHAUSTED:case ue.INTERNAL:case ue.UNAVAILABLE:case ue.UNAUTHENTICATED:return!1;case ue.INVALID_ARGUMENT:case ue.NOT_FOUND:case ue.ALREADY_EXISTS:case ue.PERMISSION_DENIED:case ue.FAILED_PRECONDITION:case ue.ABORTED:case ue.OUT_OF_RANGE:case ue.UNIMPLEMENTED:case ue.DATA_LOSS:return!0}}function qT(n){if(void 0===n)return mr("GRPC error has no .code"),ue.UNKNOWN;switch(n){case Zn.OK:return ue.OK;case Zn.CANCELLED:return ue.CANCELLED;case Zn.UNKNOWN:return ue.UNKNOWN;case Zn.DEADLINE_EXCEEDED:return ue.DEADLINE_EXCEEDED;case Zn.RESOURCE_EXHAUSTED:return ue.RESOURCE_EXHAUSTED;case Zn.INTERNAL:return ue.INTERNAL;case Zn.UNAVAILABLE:return ue.UNAVAILABLE;case Zn.UNAUTHENTICATED:return ue.UNAUTHENTICATED;case Zn.INVALID_ARGUMENT:return ue.INVALID_ARGUMENT;case Zn.NOT_FOUND:return ue.NOT_FOUND;case Zn.ALREADY_EXISTS:return ue.ALREADY_EXISTS;case Zn.PERMISSION_DENIED:return ue.PERMISSION_DENIED;case Zn.FAILED_PRECONDITION:return ue.FAILED_PRECONDITION;case Zn.ABORTED:return ue.ABORTED;case Zn.OUT_OF_RANGE:return ue.OUT_OF_RANGE;case Zn.UNIMPLEMENTED:return ue.UNIMPLEMENTED;case Zn.DATA_LOSS:return ue.DATA_LOSS;default:return at()}}(nn=Zn||(Zn={}))[nn.OK=0]="OK",nn[nn.CANCELLED=1]="CANCELLED",nn[nn.UNKNOWN=2]="UNKNOWN",nn[nn.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",nn[nn.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",nn[nn.NOT_FOUND=5]="NOT_FOUND",nn[nn.ALREADY_EXISTS=6]="ALREADY_EXISTS",nn[nn.PERMISSION_DENIED=7]="PERMISSION_DENIED",nn[nn.UNAUTHENTICATED=16]="UNAUTHENTICATED",nn[nn.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",nn[nn.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",nn[nn.ABORTED=10]="ABORTED",nn[nn.OUT_OF_RANGE=11]="OUT_OF_RANGE",nn[nn.UNIMPLEMENTED=12]="UNIMPLEMENTED",nn[nn.INTERNAL=13]="INTERNAL",nn[nn.UNAVAILABLE=14]="UNAVAILABLE",nn[nn.DATA_LOSS=15]="DATA_LOSS";class Nc{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0!==r)for(const[i,u]of r)if(this.equalsFn(i,e))return u}has(e){return void 0!==this.get(e)}set(e,t){const r=this.mapKeyFn(e),i=this.inner[r];if(void 0===i)return this.inner[r]=[[e,t]],void this.innerSize++;for(let u=0;u<i.length;u++)if(this.equalsFn(i[u][0],e))return void(i[u]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0===r)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return 1===r.length?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Cc(this.inner,(t,r)=>{for(const[i,u]of r)e(i,u)})}isEmpty(){return v0(this.inner)}size(){return this.innerSize}}class sr{constructor(e,t){this.comparator=e,this.root=t||Ci.EMPTY}insert(e,t){return new sr(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Ci.BLACK,null,null))}remove(e){return new sr(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Ci.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(0===r)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(0===i)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new sy(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new sy(this.root,e,this.comparator,!1)}getReverseIterator(){return new sy(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new sy(this.root,e,this.comparator,!0)}}class sy{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let u=1;for(;!e.isEmpty();)if(u=t?r(e.key,t):1,t&&i&&(u*=-1),u<0)e=this.isReverse?e.left:e.right;else{if(0===u){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Ci{constructor(e,t,r,i,u){this.key=e,this.value=t,this.color=null!=r?r:Ci.RED,this.left=null!=i?i:Ci.EMPTY,this.right=null!=u?u:Ci.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,u){return new Ci(null!=e?e:this.key,null!=t?t:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=u?u:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this;const u=r(e,i.key);return i=u<0?i.copy(null,null,null,i.left.insert(e,t,r),null):0===u?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return Ci.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===t(e,i.key)){if(i.right.isEmpty())return Ci.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Ci.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Ci.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw at();const e=this.left.check();if(e!==this.right.check())throw at();return e+(this.isRed()?0:1)}}Ci.EMPTY=null,Ci.RED=!0,Ci.BLACK=!1,Ci.EMPTY=new class{constructor(){this.size=0}get key(){throw at()}get value(){throw at()}get color(){throw at()}get left(){throw at()}get right(){throw at()}copy(n,e,t,r,i){return this}insert(n,e,t){return new Ci(n,e)}remove(n,e){return this}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Pn{constructor(e){this.comparator=e,this.data=new sr(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new zT(this.data.getIterator())}getIteratorFrom(e){return new zT(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof Pn)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const i=t.getNext().key,u=r.getNext().key;if(0!==this.comparator(i,u))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new Pn(this.comparator);return t.data=e,t}}class zT{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function bp(n){return n.hasNext()?n.getNext():void 0}const px=new sr(Ge.comparator);function ao(){return px}const gx=new sr(Ge.comparator);function yD(){return gx}function oy(){return new Nc(n=>n.toString(),(n,e)=>n.isEqual(e))}const mx=new sr(Ge.comparator),s=new Pn(Ge.comparator);function o(...n){let e=s;for(const t of n)e=e.add(t);return e}const a=new Pn(Ft);function l(){return a}class d{constructor(e,t,r,i,u){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=u}static createSynthesizedRemoteEventForCurrentChange(e,t){const r=new Map;return r.set(e,g.createSynthesizedTargetChangeForCurrentChange(e,t)),new d(Dt.min(),r,l(),ao(),o())}}class g{constructor(e,t,r,i,u){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=u}static createSynthesizedTargetChangeForCurrentChange(e,t){return new g(_r.EMPTY_BYTE_STRING,t,o(),o(),o())}}class v{constructor(e,t,r,i){this.O=e,this.removedTargetIds=t,this.key=r,this.F=i}}class w{constructor(e,t){this.targetId=e,this.$=t}}class D{constructor(e,t,r=_r.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}}class A{constructor(){this.B=0,this.L=U(),this.U=_r.EMPTY_BYTE_STRING,this.q=!1,this.K=!0}get current(){return this.q}get resumeToken(){return this.U}get G(){return 0!==this.B}get j(){return this.K}W(e){e.approximateByteSize()>0&&(this.K=!0,this.U=e)}H(){let e=o(),t=o(),r=o();return this.L.forEach((i,u)=>{switch(u){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:at()}}),new g(this.U,this.q,e,t,r)}J(){this.K=!1,this.L=U()}Y(e,t){this.K=!0,this.L=this.L.insert(e,t)}X(e){this.K=!0,this.L=this.L.remove(e)}Z(){this.B+=1}tt(){this.B-=1}et(){this.K=!0,this.q=!0}}class x{constructor(e){this.nt=e,this.st=new Map,this.it=ao(),this.rt=P(),this.ot=new Pn(Ft)}ut(e){for(const t of e.O)e.F&&e.F.isFoundDocument()?this.at(t,e.F):this.ct(t,e.key,e.F);for(const t of e.removedTargetIds)this.ct(t,e.key,e.F)}ht(e){this.forEachTarget(e,t=>{const r=this.lt(t);switch(e.state){case 0:this.ft(t)&&r.W(e.resumeToken);break;case 1:r.tt(),r.G||r.J(),r.W(e.resumeToken);break;case 2:r.tt(),r.G||this.removeTarget(t);break;case 3:this.ft(t)&&(r.et(),r.W(e.resumeToken));break;case 4:this.ft(t)&&(this.dt(t),r.W(e.resumeToken));break;default:at()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.st.forEach((r,i)=>{this.ft(i)&&t(i)})}_t(e){const t=e.targetId,r=e.$.count,i=this.wt(t);if(i){const u=i.target;if(Km(u))if(0===r){const c=new Ge(u.path);this.ct(t,c,kn.newNoDocument(c,Dt.min()))}else Tt(1===r);else this.gt(t)!==r&&(this.dt(t),this.ot=this.ot.add(t))}}yt(e){const t=new Map;this.st.forEach((u,c)=>{const p=this.wt(c);if(p){if(u.current&&Km(p.target)){const y=new Ge(p.target.path);null!==this.it.get(y)||this.It(c,y)||this.ct(c,y,kn.newNoDocument(y,e))}u.j&&(t.set(c,u.H()),u.J())}});let r=o();this.rt.forEach((u,c)=>{let p=!0;c.forEachWhile(y=>{const b=this.wt(y);return!b||2===b.purpose||(p=!1,!1)}),p&&(r=r.add(u))}),this.it.forEach((u,c)=>c.setReadTime(e));const i=new d(e,t,this.ot,this.it,r);return this.it=ao(),this.rt=P(),this.ot=new Pn(Ft),i}at(e,t){if(!this.ft(e))return;const r=this.It(e,t.key)?2:0;this.lt(e).Y(t.key,r),this.it=this.it.insert(t.key,t),this.rt=this.rt.insert(t.key,this.Tt(t.key).add(e))}ct(e,t,r){if(!this.ft(e))return;const i=this.lt(e);this.It(e,t)?i.Y(t,1):i.X(t),this.rt=this.rt.insert(t,this.Tt(t).delete(e)),r&&(this.it=this.it.insert(t,r))}removeTarget(e){this.st.delete(e)}gt(e){const t=this.lt(e).H();return this.nt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Z(e){this.lt(e).Z()}lt(e){let t=this.st.get(e);return t||(t=new A,this.st.set(e,t)),t}Tt(e){let t=this.rt.get(e);return t||(t=new Pn(Ft),this.rt=this.rt.insert(e,t)),t}ft(e){const t=null!==this.wt(e);return t||ke("WatchChangeAggregator","Detected inactive target",e),t}wt(e){const t=this.st.get(e);return t&&t.G?null:this.nt.Et(e)}dt(e){this.st.set(e,new A),this.nt.getRemoteKeysForTarget(e).forEach(t=>{this.ct(e,t,null)})}It(e,t){return this.nt.getRemoteKeysForTarget(e).has(t)}}function P(){return new sr(Ge.comparator)}function U(){return new sr(Ge.comparator)}const K={asc:"ASCENDING",desc:"DESCENDING"},me={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"};class Pe{constructor(e,t){this.databaseId=e,this.N=t}}function Ve(n,e){return n.N?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function st(n,e){return n.N?e.toBase64():e.toUint8Array()}function Ce(n,e){return Ve(n,e.toTimestamp())}function Je(n){return Tt(!!n),Dt.fromTimestamp(function(e){const t=Ja(e);return new ir(t.seconds,t.nanos)}(n))}function zt(n,e){return(t=n,new tn(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function dn(n){const e=tn.fromString(n);return Tt(wx(e)),e}function ni(n,e){return zt(n.databaseId,e.path)}function Ii(n,e){const t=dn(e);if(t.get(1)!==n.databaseId.projectId)throw new Re(ue.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new Re(ue.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Ge(uy(t))}function Dp(n,e){return zt(n.databaseId,e)}function ay(n){const e=dn(n);return 4===e.length?tn.emptyPath():uy(e)}function Oc(n){return new tn(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function uy(n){return Tt(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function ly(n,e,t){return{name:ni(n,e),fields:t.value.mapValue.fields}}function cy(n,e,t){const r=Ii(n,e.name),i=Je(e.updateTime),u=new Di({mapValue:{fields:e.fields}}),c=kn.newFoundDocument(r,i,u);return t&&c.setHasCommittedMutations(),t?c.setHasCommittedMutations():c}function kc(n,e){let t;if(e instanceof Dh)t={update:ly(n,e.key,e.value)};else if(e instanceof Rc)t={delete:ni(n,e.key)};else if(e instanceof tl)t={update:ly(n,e.key,e.data),updateMask:_k(e.fieldMask)};else{if(!(e instanceof pD))return at();t={verify:ni(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(i,u){const c=u.transform;if(c instanceof xc)return{fieldPath:u.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(c instanceof Is)return{fieldPath:u.field.canonicalString(),appendMissingElements:{values:c.elements}};if(c instanceof nu)return{fieldPath:u.field.canonicalString(),removeAllFromArray:{values:c.elements}};if(c instanceof bh)return{fieldPath:u.field.canonicalString(),increment:c.k};throw at()}(0,r))),e.precondition.isNone||(t.currentDocument=void 0!==(i=e.precondition).updateTime?{updateTime:Ce(n,i.updateTime)}:void 0!==i.exists?{exists:i.exists}:at()),t;var i}function WT(n,e){const t=e.currentDocument?void 0!==(i=e.currentDocument).updateTime?Or.updateTime(Je(i.updateTime)):void 0!==i.exists?Or.exists(i.exists):Or.none():Or.none(),r=e.updateTransforms?e.updateTransforms.map(i=>function(u,c){let p=null;"setToServerValue"in c?(Tt("REQUEST_TIME"===c.setToServerValue),p=new xc):"appendMissingElements"in c?p=new Is(c.appendMissingElements.values||[]):"removeAllFromArray"in c?p=new nu(c.removeAllFromArray.values||[]):"increment"in c?p=new bh(u,c.increment):at();const y=Nr.fromServerFormat(c.fieldPath);return new el(y,p)}(n,i)):[];var i;if(e.update){const i=Ii(n,e.update.name),u=new Di({mapValue:{fields:e.update.fields}});if(e.updateMask){const c=new mh((e.updateMask.fieldPaths||[]).map(b=>Nr.fromServerFormat(b)));return new tl(i,u,c,t,r)}return new Dh(i,u,t,r)}if(e.delete){const i=Ii(n,e.delete);return new Rc(i,t)}if(e.verify){const i=Ii(n,e.verify);return new pD(i,t)}return at()}function yx(n,e){return{documents:[Dp(n,e.path)]}}function _x(n,e){const t={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(t.parent=Dp(n,r),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=Dp(n,r.popLast()),t.structuredQuery.from=[{collectionId:r.lastSegment()}]);const i=function(y){if(0===y.length)return;const b=y.map(S=>function(M){if("=="===M.op){if(Xb(M.value))return{unaryFilter:{field:dy(M.field),op:"IS_NAN"}};if(xT(M.value))return{unaryFilter:{field:dy(M.field),op:"IS_NULL"}}}else if("!="===M.op){if(Xb(M.value))return{unaryFilter:{field:dy(M.field),op:"IS_NOT_NAN"}};if(xT(M.value))return{unaryFilter:{field:dy(M.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:dy(M.field),op:gk(M.op),value:M.value}}}(S));return 1===b.length?b[0]:{compositeFilter:{op:"AND",filters:b}}}(e.filters);i&&(t.structuredQuery.where=i);const u=function(y){if(0!==y.length)return y.map(b=>{return{field:dy((S=b).field),direction:pk(S.dir)};var S})}(e.orderBy);u&&(t.structuredQuery.orderBy=u);const c=(b=e.limit,n.N||yh(b)?b:{value:b});var b,p,y;return null!==c&&(t.structuredQuery.limit=c),e.startAt&&(t.structuredQuery.startAt={before:(p=e.startAt).inclusive,values:p.position}),e.endAt&&(t.structuredQuery.endAt={before:!(y=e.endAt).inclusive,values:y.position}),t}function vx(n){let e=ay(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let i=null;if(r>0){Tt(1===r);const S=t.from[0];S.allDescendants?i=S.collectionId:e=e.child(S.collectionId)}let u=[];t.where&&(u=Ex(t.where));let c=[];t.orderBy&&(c=t.orderBy.map(S=>{return new vp(hy((M=S).field),function(F){switch(F){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(M.direction));var M}));let p=null;t.limit&&(p=function(S){let M;return M="object"==typeof S?S.value:S,yh(M)?null:M}(t.limit));let y=null;var S;t.startAt&&(y=new Ju((S=t.startAt).values||[],!!S.before));let b=null;return t.endAt&&(b=function(S){return new Ju(S.values||[],!S.before)}(t.endAt)),A0(e,i,c,u,p,"F",y,b)}function Ex(n){return n?void 0!==n.unaryFilter?[yk(n)]:void 0!==n.fieldFilter?[mk(n)]:void 0!==n.compositeFilter?n.compositeFilter.filters.map(e=>Ex(e)).reduce((e,t)=>e.concat(t)):at():[]}function pk(n){return K[n]}function gk(n){return me[n]}function dy(n){return{fieldPath:n.canonicalString()}}function hy(n){return Nr.fromServerFormat(n.fieldPath)}function mk(n){return jr.create(hy(n.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return at()}}(n.fieldFilter.op),n.fieldFilter.value)}function yk(n){switch(n.unaryFilter.op){case"IS_NAN":const e=hy(n.unaryFilter.field);return jr.create(e,"==",{doubleValue:NaN});case"IS_NULL":const t=hy(n.unaryFilter.field);return jr.create(t,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=hy(n.unaryFilter.field);return jr.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const i=hy(n.unaryFilter.field);return jr.create(i,"!=",{nullValue:"NULL_VALUE"});default:return at()}}function _k(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function wx(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}function Ts(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=bx(e)),e=vk(n.get(t),e);return bx(e)}function vk(n,e){let t=e;const r=n.length;for(let i=0;i<r;i++){const u=n.charAt(i);switch(u){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=u}}return t}function bx(n){return n+"\x01\x01"}function nl(n){const e=n.length;if(Tt(e>=2),2===e)return Tt("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),tn.emptyPath();const t=e-2,r=[];let i="";for(let u=0;u<e;){const c=n.indexOf("\x01",u);switch((c<0||c>t)&&at(),n.charAt(c+1)){case"\x01":const p=n.substring(u,c);let y;0===i.length?y=p:(i+=p,y=i,i=""),r.push(y);break;case"\x10":i+=n.substring(u,c),i+="\0";break;case"\x11":i+=n.substring(u,c+1);break;default:at()}u=c+2}return new tn(r)}const Dx=["userId","batchId"];function _D(n,e){return[n,Ts(e)]}function Cx(n,e,t){return[n,Ts(e),t]}const Ek={},wk=["prefixPath","collectionGroup","readTime","documentId"],bk=["prefixPath","collectionGroup","documentId"],Dk=["collectionGroup","readTime","prefixPath","documentId"],Ck=["canonicalId","targetId"],Ik=["targetId","path"],Tk=["path","targetId"],Ak=["collectionId","parent"],Sk=["indexId","uid"],Mk=["uid","sequenceNumber"],xk=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],Rk=["indexId","uid","orderedDocumentKey"],Nk=["userId","collectionPath","documentId"],Ok=["userId","collectionPath","largestBatchId"],kk=["userId","collectionGroup","largestBatchId"],Ix=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],Pk=[...Ix,"documentOverlays"],Tx=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],Fk=[...Tx,"indexConfiguration","indexState","indexEntries"],Ax="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Sx{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}class fe{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&at(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new fe((r,i)=>{this.nextCallback=u=>{this.wrapSuccess(e,u).next(r,i)},this.catchCallback=u=>{this.wrapFailure(t,u).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof fe?t:fe.resolve(t)}catch(t){return fe.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):fe.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):fe.reject(t)}static resolve(e){return new fe((t,r)=>{t(e)})}static reject(e){return new fe((t,r)=>{r(e)})}static waitFor(e){return new fe((t,r)=>{let i=0,u=0,c=!1;e.forEach(p=>{++i,p.next(()=>{++u,c&&u===i&&t()},y=>r(y))}),c=!0,u===i&&t()})}static or(e){let t=fe.resolve(!1);for(const r of e)t=t.next(i=>i?fe.resolve(i):r());return t}static forEach(e,t){const r=[];return e.forEach((i,u)=>{r.push(t.call(this,i,u))}),this.waitFor(r)}}class vD{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.At=new yr,this.transaction.oncomplete=()=>{this.At.resolve()},this.transaction.onabort=()=>{t.error?this.At.reject(new B0(e,t.error)):this.At.resolve()},this.transaction.onerror=r=>{const i=KT(r.target.error);this.At.reject(new B0(e,i))}}static open(e,t,r,i){try{return new vD(t,e.transaction(i,r))}catch(u){throw new B0(t,u)}}get Rt(){return this.At.promise}abort(e){e&&this.At.reject(e),this.aborted||(ke("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}Pt(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new Vk(t)}}class ru{constructor(e,t,r){this.name=e,this.version=t,this.bt=r,12.2===ru.Vt((0,qt.z$)())&&mr("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return ke("SimpleDb","Removing database:",e),Ip(window.indexedDB.deleteDatabase(e)).toPromise()}static vt(){if(!(0,qt.hl)())return!1;if(ru.St())return!0;const e=(0,qt.z$)(),t=ru.Vt(e),r=0<t&&t<10,i=ru.Dt(e),u=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||u)}static St(){var e;return"undefined"!=typeof process&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.Ct)}static xt(e,t){return e.store(t)}static Vt(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static Dt(e){const t=e.match(/Android ([\d.]+)/i),r=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(r)}Nt(e){var t=this;return(0,_e.Z)(function*(){return t.db||(ke("SimpleDb","Opening database:",t.name),t.db=yield new Promise((r,i)=>{const u=indexedDB.open(t.name,t.version);u.onsuccess=c=>{r(c.target.result)},u.onblocked=()=>{i(new B0(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},u.onerror=c=>{const p=c.target.error;i("VersionError"===p.name?new Re(ue.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===p.name?new Re(ue.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+p):new B0(e,p))},u.onupgradeneeded=c=>{ke("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',c.oldVersion),t.bt.kt(c.target.result,u.transaction,c.oldVersion,t.version).next(()=>{ke("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.Mt&&(t.db.onversionchange=r=>t.Mt(r)),t.db})()}Ot(e){this.Mt=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,r,i){var u=this;return(0,_e.Z)(function*(){const c="readonly"===t;let p=0;for(;;){++p;try{u.db=yield u.Nt(e);const y=vD.open(u.db,e,c?"readonly":"readwrite",r),b=i(y).next(S=>(y.Pt(),S)).catch(S=>(y.abort(S),fe.reject(S))).toPromise();return b.catch(()=>{}),yield y.Rt,b}catch(y){const b="FirebaseError"!==y.name&&p<3;if(ke("SimpleDb","Transaction failed with error:",y.message,"Retrying:",b),u.close(),!b)return Promise.reject(y)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class Lk{constructor(e){this.Ft=e,this.$t=!1,this.Bt=null}get isDone(){return this.$t}get Lt(){return this.Bt}set cursor(e){this.Ft=e}done(){this.$t=!0}Ut(e){this.Bt=e}delete(){return Ip(this.Ft.delete())}}class B0 extends Re{constructor(e,t){super(ue.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function Cp(n){return"IndexedDbTransactionError"===n.name}class Vk{constructor(e){this.store=e}put(e,t){let r;return void 0!==t?(ke("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(ke("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),Ip(r)}add(e){return ke("SimpleDb","ADD",this.store.name,e,e),Ip(this.store.add(e))}get(e){return Ip(this.store.get(e)).next(t=>(void 0===t&&(t=null),ke("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return ke("SimpleDb","DELETE",this.store.name,e),Ip(this.store.delete(e))}count(){return ke("SimpleDb","COUNT",this.store.name),Ip(this.store.count())}qt(e,t){const r=this.options(e,t);if(r.index||"function"!=typeof this.store.getAll){const i=this.cursor(r),u=[];return this.Kt(i,(c,p)=>{u.push(p)}).next(()=>u)}{const i=this.store.getAll(r.range);return new fe((u,c)=>{i.onerror=p=>{c(p.target.error)},i.onsuccess=p=>{u(p.target.result)}})}}Gt(e,t){const r=this.store.getAll(e,null===t?void 0:t);return new fe((i,u)=>{r.onerror=c=>{u(c.target.error)},r.onsuccess=c=>{i(c.target.result)}})}Qt(e,t){ke("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,t);r.jt=!1;const i=this.cursor(r);return this.Kt(i,(u,c,p)=>p.delete())}Wt(e,t){let r;t?r=e:(r={},t=e);const i=this.cursor(r);return this.Kt(i,t)}zt(e){const t=this.cursor({});return new fe((r,i)=>{t.onerror=u=>{const c=KT(u.target.error);i(c)},t.onsuccess=u=>{const c=u.target.result;c?e(c.primaryKey,c.value).next(p=>{p?c.continue():r()}):r()}})}Kt(e,t){const r=[];return new fe((i,u)=>{e.onerror=c=>{u(c.target.error)},e.onsuccess=c=>{const p=c.target.result;if(!p)return void i();const y=new Lk(p),b=t(p.primaryKey,p.value,y);if(b instanceof fe){const S=b.catch(M=>(y.done(),fe.reject(M)));r.push(S)}y.isDone?i():null===y.Lt?p.continue():p.continue(y.Lt)}}).next(()=>fe.waitFor(r))}options(e,t){let r;return void 0!==e&&("string"==typeof e?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.jt?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function Ip(n){return new fe((e,t)=>{n.onsuccess=r=>{e(r.target.result)},n.onerror=r=>{const i=KT(r.target.error);t(i)}})}let Mx=!1;function KT(n){const e=ru.Vt((0,qt.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new Re("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return Mx||(Mx=!0,setTimeout(()=>{throw r},0)),r}}return n}class xx extends Sx{constructor(e,t){super(),this.Ht=e,this.currentSequenceNumber=t}}function Ti(n,e){const t=ze(n);return ru.xt(t.Ht,e)}class ZT{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){const u=this.mutations[i];u.key.isEqual(e.key)&&HT(u,e,r[i])}}applyToLocalView(e){for(const t of this.baseMutations)t.key.isEqual(e.key)&&k0(t,e,this.localWriteTime);for(const t of this.mutations)t.key.isEqual(e.key)&&k0(t,e,this.localWriteTime)}applyToLocalDocumentSet(e){this.mutations.forEach(t=>{const r=e.get(t.key),i=r;this.applyToLocalView(i),r.isValidDocument()||i.convertToNoDocument(Dt.min())})}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),o())}isEqual(e){return this.batchId===e.batchId&&hp(this.mutations,e.mutations,(t,r)=>dD(t,r))&&hp(this.baseMutations,e.baseMutations,(t,r)=>dD(t,r))}}class YT{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){Tt(e.mutations.length===r.length);let i=mx;const u=e.mutations;for(let c=0;c<u.length;c++)i=i.insert(u[c].key,r[c].version);return new YT(e,t,r,i)}}class QT{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class Ch{constructor(e,t,r,i,u=Dt.min(),c=Dt.min(),p=_r.EMPTY_BYTE_STRING){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=u,this.lastLimboFreeSnapshotVersion=c,this.resumeToken=p}withSequenceNumber(e){return new Ch(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,t){return new Ch(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new Ch(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}class Rx{constructor(e){this.Jt=e}}function Nx(n,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:ED(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document={name:ni(i=n.Jt,(u=e).key),fields:u.data.value.mapValue.fields,updateTime:Ve(i,u.version.toTimestamp())};else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:Tp(e.version)};else{if(!e.isUnknownDocument())return at();r.unknownDocument={path:t.path.toArray(),version:Tp(e.version)}}var i,u;return r}function ED(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function Tp(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Ap(n){const e=new ir(n.seconds,n.nanoseconds);return Dt.fromTimestamp(e)}function fy(n,e){const t=(e.baseMutations||[]).map(u=>WT(n.Jt,u));for(let u=0;u<e.mutations.length-1;++u){const c=e.mutations[u];u+1<e.mutations.length&&void 0!==e.mutations[u+1].transform&&(c.updateTransforms=e.mutations[u+1].transform.fieldTransforms,e.mutations.splice(u+1,1),++u)}const r=e.mutations.map(u=>WT(n.Jt,u)),i=ir.fromMillis(e.localWriteTimeMs);return new ZT(e.batchId,i,t,r)}function U0(n){const e=Ap(n.readTime),t=void 0!==n.lastLimboFreeSnapshotVersion?Ap(n.lastLimboFreeSnapshotVersion):Dt.min();let r;var i;return void 0!==n.query.documents?(Tt(1===(i=n.query).documents.length),r=oo(Xu(ay(i.documents[0])))):r=oo(vx(n.query)),new Ch(r,n.targetId,0,n.lastListenSequenceNumber,e,t,_r.fromBase64String(n.resumeToken))}function Ox(n,e){const t=Tp(e.snapshotVersion),r=Tp(e.lastLimboFreeSnapshotVersion);let i;i=Km(e.target)?yx(n.Jt,e.target):_x(n.Jt,e.target);const u=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Mc(e.target),readTime:t,resumeToken:u,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function JT(n){const e=vx({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?LT(e,e.limit,"L"):e}function XT(n,e){return new QT(e.largestBatchId,WT(n.Jt,e.overlayMutation))}function kx(n,e){const t=e.path.lastSegment();return[n,Ts(e.path.popLast()),t]}class Uk{getBundleMetadata(e,t){return Px(e).get(t).next(r=>{if(r)return{id:(i=r).bundleId,createTime:Ap(i.createTime),version:i.version};var i})}saveBundleMetadata(e,t){return Px(e).put({bundleId:(r=t).id,createTime:Tp(Je(r.createTime)),version:r.version});var r}getNamedQuery(e,t){return Fx(e).get(t).next(r=>{if(r)return{name:(i=r).name,query:JT(i.bundledQuery),readTime:Ap(i.readTime)};var i})}saveNamedQuery(e,t){return Fx(e).put({name:(r=t).name,readTime:Tp(Je(r.readTime)),bundledQuery:r.bundledQuery});var r}}function Px(n){return Ti(n,"bundles")}function Fx(n){return Ti(n,"namedQueries")}class eA{constructor(e,t){this.M=e,this.userId=t}static Yt(e,t){return new eA(e,t.uid||"")}getOverlay(e,t){return j0(e).get(kx(this.userId,t)).next(r=>r?XT(this.M,r):null)}saveOverlays(e,t,r){const i=[];return r.forEach((u,c)=>{const p=new QT(t,c);i.push(this.Xt(e,p))}),fe.waitFor(i)}removeOverlaysForBatchId(e,t,r){const i=new Set;t.forEach(c=>i.add(Ts(c.getCollectionPath())));const u=[];return i.forEach(c=>{const p=IDBKeyRange.bound([this.userId,c,r],[this.userId,c,r+1],!1,!0);u.push(j0(e).Qt("collectionPathOverlayIndex",p))}),fe.waitFor(u)}getOverlaysForCollection(e,t,r){const i=oy(),u=Ts(t),c=IDBKeyRange.bound([this.userId,u,r],[this.userId,u,Number.POSITIVE_INFINITY],!0);return j0(e).qt("collectionPathOverlayIndex",c).next(p=>{for(const y of p){const b=XT(this.M,y);i.set(b.getKey(),b)}return i})}getOverlaysForCollectionGroup(e,t,r,i){const u=oy();let c;const p=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return j0(e).Wt({index:"collectionGroupOverlayIndex",range:p},(y,b,S)=>{const M=XT(this.M,b);u.size()<i||M.largestBatchId===c?(u.set(M.getKey(),M),c=M.largestBatchId):S.done()}).next(()=>u)}Xt(e,t){return j0(e).put(function(r,i,u){const[c,p,y]=kx(i,u.mutation.key);return{userId:i,collectionPath:p,documentId:y,collectionGroup:u.mutation.key.getCollectionGroup(),largestBatchId:u.largestBatchId,overlayMutation:kc(r.Jt,u.mutation)}}(this.M,this.userId,t))}}function j0(n){return Ti(n,"documentOverlays")}class Sp{constructor(){}Zt(e,t){this.te(e,t),t.ee()}te(e,t){if("nullValue"in e)this.ne(t,5);else if("booleanValue"in e)this.ne(t,10),t.se(e.booleanValue?1:0);else if("integerValue"in e)this.ne(t,15),t.se(Kn(e.integerValue));else if("doubleValue"in e){const r=Kn(e.doubleValue);isNaN(r)?this.ne(t,13):(this.ne(t,15),Gm(r)?t.se(0):t.se(r))}else if("timestampValue"in e){const r=e.timestampValue;this.ne(t,20),"string"==typeof r?t.ie(r):(t.ie(`${r.seconds||""}`),t.se(r.nanos||0))}else if("stringValue"in e)this.re(e.stringValue,t),this.oe(t);else if("bytesValue"in e)this.ne(t,30),t.ue(Ic(e.bytesValue)),this.oe(t);else if("referenceValue"in e)this.ae(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.ne(t,45),t.se(r.latitude||0),t.se(r.longitude||0)}else"mapValue"in e?eD(e)?this.ne(t,Number.MAX_SAFE_INTEGER):(this.ce(e.mapValue,t),this.oe(t)):"arrayValue"in e?(this.he(e.arrayValue,t),this.oe(t)):at()}re(e,t){this.ne(t,25),this.le(e,t)}le(e,t){t.ie(e)}ce(e,t){const r=e.fields||{};this.ne(t,55);for(const i of Object.keys(r))this.re(i,t),this.te(r[i],t)}he(e,t){const r=e.values||[];this.ne(t,50);for(const i of r)this.te(i,t)}ae(e,t){this.ne(t,37),Ge.fromName(e).path.forEach(r=>{this.ne(t,60),this.le(r,t)})}ne(e,t){e.se(t)}oe(e){e.se(2)}}function jk(n){if(0===n)return 8;let e=0;return n>>4==0&&(e+=4,n<<=4),n>>6==0&&(e+=2,n<<=2),n>>7==0&&(e+=1),e}function Lx(n){const e=64-function(t){let r=0;for(let i=0;i<8;++i){const u=jk(255&t[i]);if(r+=u,8!==u)break}return r}(n);return Math.ceil(e/8)}Sp.fe=new Sp;class $k{constructor(){this.buffer=new Uint8Array(1024),this.position=0}de(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this._e(r.value),r=t.next();this.we()}me(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.ge(r.value),r=t.next();this.ye()}pe(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this._e(r);else if(r<2048)this._e(960|r>>>6),this._e(128|63&r);else if(t<"\ud800"||"\udbff"<t)this._e(480|r>>>12),this._e(128|63&r>>>6),this._e(128|63&r);else{const i=t.codePointAt(0);this._e(240|i>>>18),this._e(128|63&i>>>12),this._e(128|63&i>>>6),this._e(128|63&i)}}this.we()}Ie(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.ge(r);else if(r<2048)this.ge(960|r>>>6),this.ge(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.ge(480|r>>>12),this.ge(128|63&r>>>6),this.ge(128|63&r);else{const i=t.codePointAt(0);this.ge(240|i>>>18),this.ge(128|63&i>>>12),this.ge(128|63&i>>>6),this.ge(128|63&i)}}this.ye()}Te(e){const t=this.Ee(e),r=Lx(t);this.Ae(1+r),this.buffer[this.position++]=255&r;for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=255&t[i]}Re(e){const t=this.Ee(e),r=Lx(t);this.Ae(1+r),this.buffer[this.position++]=~(255&r);for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=~(255&t[i])}Pe(){this.be(255),this.be(255)}Ve(){this.ve(255),this.ve(255)}reset(){this.position=0}seed(e){this.Ae(e.length),this.buffer.set(e,this.position),this.position+=e.length}Se(){return this.buffer.slice(0,this.position)}Ee(e){const t=function(i){const u=new DataView(new ArrayBuffer(8));return u.setFloat64(0,i,!1),new Uint8Array(u.buffer)}(e),r=0!=(128&t[0]);t[0]^=r?255:128;for(let i=1;i<t.length;++i)t[i]^=r?255:0;return t}_e(e){const t=255&e;0===t?(this.be(0),this.be(255)):255===t?(this.be(255),this.be(0)):this.be(t)}ge(e){const t=255&e;0===t?(this.ve(0),this.ve(255)):255===t?(this.ve(255),this.ve(0)):this.ve(e)}we(){this.be(0),this.be(1)}ye(){this.ve(0),this.ve(1)}be(e){this.Ae(1),this.buffer[this.position++]=e}ve(e){this.Ae(1),this.buffer[this.position++]=~e}Ae(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}}class Hk{constructor(e){this.De=e}ue(e){this.De.de(e)}ie(e){this.De.pe(e)}se(e){this.De.Te(e)}ee(){this.De.Pe()}}class Gk{constructor(e){this.De=e}ue(e){this.De.me(e)}ie(e){this.De.Ie(e)}se(e){this.De.Re(e)}ee(){this.De.Ve()}}class $0{constructor(){this.De=new $k,this.Ce=new Hk(this.De),this.xe=new Gk(this.De)}seed(e){this.De.seed(e)}Ne(e){return 0===e?this.Ce:this.xe}Se(){return this.De.Se()}reset(){this.De.reset()}}class Ih{constructor(e,t,r,i){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=i}ke(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new Ih(this.indexId,this.documentKey,this.arrayValue,r)}}function Mp(n,e){let t=n.indexId-e.indexId;return 0!==t?t:(t=Vx(n.arrayValue,e.arrayValue),0!==t?t:(t=Vx(n.directionalValue,e.directionalValue),0!==t?t:Ge.comparator(n.documentKey,e.documentKey)))}function Vx(n,e){for(let t=0;t<n.length&&t<e.length;++t){const r=n[t]-e[t];if(0!==r)return r}return n.length-e.length}class qk{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Me=e.orderBy,this.Oe=[];for(const t of e.filters){const r=t;r.S()?this.Fe=r:this.Oe.push(r)}}$e(e){const t=mp(e);if(void 0!==t&&!this.Be(t))return!1;const r=Sc(e);let i=0,u=0;for(;i<r.length&&this.Be(r[i]);++i);if(i===r.length)return!0;if(void 0!==this.Fe){const c=r[i];if(!this.Le(this.Fe,c)||!this.Ue(this.Me[u++],c))return!1;++i}for(;i<r.length;++i){const c=r[i];if(u>=this.Me.length||!this.Ue(this.Me[u++],c))return!1}return!0}Be(e){for(const t of this.Oe)if(this.Le(t,e))return!0;return!1}Le(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}Ue(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}class zk{constructor(){this.qe=new tA}addToCollectionParentIndex(e,t){return this.qe.add(t),fe.resolve()}getCollectionParents(e,t){return fe.resolve(this.qe.getEntries(t))}addFieldIndex(e,t){return fe.resolve()}deleteFieldIndex(e,t){return fe.resolve()}getDocumentsMatchingTarget(e,t){return fe.resolve(null)}getFieldIndex(e,t){return fe.resolve(null)}getFieldIndexes(e,t){return fe.resolve([])}getNextCollectionGroupToUpdate(e){return fe.resolve(null)}updateCollectionGroup(e,t,r){return fe.resolve()}updateIndexEntries(e,t){return fe.resolve()}}class tA{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new Pn(tn.comparator),u=!i.has(r);return this.index[t]=i.add(r),u}has(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Pn(tn.comparator)).toArray()}}const py=new Uint8Array(0);class Wk{constructor(e,t){this.user=e,this.databaseId=t,this.Ke=new tA,this.Ge=new Nc(r=>Mc(r),(r,i)=>_p(r,i)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.Ke.has(t)){const r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener(()=>{this.Ke.add(t)});const u={collectionId:r,parent:Ts(i)};return Bx(e).put(u)}return fe.resolve()}getCollectionParents(e,t){const r=[],i=IDBKeyRange.bound([t,""],[Zb(t),""],!1,!0);return Bx(e).qt(i).next(u=>{for(const c of u){if(c.collectionId!==t)break;r.push(nl(c.parent))}return r})}addFieldIndex(e,t){const r=wD(e),i={indexId:(u=t).indexId,collectionGroup:u.collectionGroup,fields:u.fields.map(c=>[c.fieldPath.canonicalString(),c.kind])};var u;return delete i.indexId,r.add(i).next()}deleteFieldIndex(e,t){const r=wD(e),i=bD(e),u=H0(e);return r.delete(t.indexId).next(()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>u.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,t){const r=H0(e);let i=!0;const u=new Map;return fe.forEach(this.Qe(t),c=>this.getFieldIndex(e,c).next(p=>{i&&(i=!!p),u.set(c,p)})).next(()=>{if(i){let c=o();const p=[];return fe.forEach(u,(y,b)=>{var S;ke("IndexedDbIndexManager",`Using index ${S=y,`id=${S.indexId}|cg=${S.collectionGroup}|f=${S.fields.map(je=>`${je.fieldPath}:${je.kind}`).join(",")}`} to execute ${Mc(t)}`);const M=function(je,et){const _t=mp(et);if(void 0===_t)return null;for(const Ct of Zm(je,_t.fieldPath))switch(Ct.op){case"array-contains-any":return Ct.value.arrayValue.values||[];case"array-contains":return[Ct.value]}return null}(b,y),F=function(je,et){const _t=new Map;for(const Ct of Sc(et))for(const $t of Zm(je,Ct.fieldPath))switch($t.op){case"==":case"in":_t.set(Ct.fieldPath.canonicalString(),$t.value);break;case"not-in":case"!=":return _t.set(Ct.fieldPath.canonicalString(),$t.value),Array.from(_t.values())}return null}(b,y),B=function(je,et){const _t=[];let Ct=!0;for(const $t of Sc(et)){const Qn=0===$t.kind?Ym(je,$t.fieldPath,je.startAt):Qu(je,$t.fieldPath,je.startAt);if(!Qn.value)return null;_t.push(Qn.value),Ct&&(Ct=Qn.inclusive)}return new Ju(_t,Ct)}(b,y),G=function(je,et){const _t=[];let Ct=!0;for(const $t of Sc(et)){const Qn=0===$t.kind?Qu(je,$t.fieldPath,je.endAt):Ym(je,$t.fieldPath,je.endAt);if(!Qn.value)return null;_t.push(Qn.value),Ct&&(Ct=Qn.inclusive)}return new Ju(_t,Ct)}(b,y),te=this.je(y,b,B),Ee=this.je(y,b,G),Ze=this.We(y,b,F),Ye=this.ze(y.indexId,M,te,!!B&&B.inclusive,Ee,!!G&&G.inclusive,Ze);return fe.forEach(Ye,je=>r.Gt(je,t.limit).next(et=>{et.forEach(_t=>{const Ct=Ge.fromSegments(_t.documentKey);c.has(Ct)||(c=c.add(Ct),p.push(Ct))})}))}).next(()=>p)}return fe.resolve(null)})}Qe(e){let t=this.Ge.get(e);return t||(t=[e],this.Ge.set(e,t),t)}ze(e,t,r,i,u,c,p){const y=(null!=t?t.length:1)*Math.max(null!=r?r.length:1,null!=u?u.length:1),b=y/(null!=t?t.length:1),S=[];for(let M=0;M<y;++M){const F=t?this.He(t[M/b]):py,B=r?this.Je(e,F,r[M%b],i):this.Ye(e),G=u?this.Xe(e,F,u[M%b],c):this.Ye(e+1);S.push(...this.createRange(B,G,p.map(te=>this.Je(e,F,te,!0))))}return S}Je(e,t,r,i){const u=new Ih(e,Ge.empty(),t,r);return i?u:u.ke()}Xe(e,t,r,i){const u=new Ih(e,Ge.empty(),t,r);return i?u.ke():u}Ye(e){return new Ih(e,Ge.empty(),py,py)}getFieldIndex(e,t){const r=new qk(t),i=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,i).next(u=>{const c=u.filter(p=>r.$e(p));return c.sort((p,y)=>y.fields.length-p.fields.length),c.length>0?c[0]:null})}Ze(e,t){const r=new $0;for(const i of Sc(e)){const u=t.data.field(i.fieldPath);if(null==u)return null;const c=r.Ne(i.kind);Sp.fe.Zt(u,c)}return r.Se()}He(e){const t=new $0;return Sp.fe.Zt(e,t.Ne(0)),t.Se()}tn(e,t){const r=new $0;return Sp.fe.Zt(Yu(this.databaseId,t),r.Ne(function(i){const u=Sc(i);return 0===u.length?0:u[u.length-1].kind}(e))),r.Se()}We(e,t,r){if(null===r)return[];let i=[];i.push(new $0);let u=0;for(const c of Sc(e)){const p=r[u++];for(const y of i)if(this.en(t,c.fieldPath)&&vh(p))i=this.nn(i,c,p);else{const b=y.Ne(c.kind);Sp.fe.Zt(p,b)}}return this.sn(i)}je(e,t,r){return null==r?null:this.We(e,t,r.position)}sn(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].Se();return t}nn(e,t,r){const i=[...e],u=[];for(const c of r.arrayValue.values||[])for(const p of i){const y=new $0;y.seed(p.Se()),Sp.fe.Zt(c,y.Ne(t.kind)),u.push(y)}return u}en(e,t){return!!e.filters.find(r=>r instanceof jr&&r.field.isEqual(t)&&("in"===r.op||"not-in"===r.op))}getFieldIndexes(e,t){const r=wD(e),i=bD(e);return(t?r.qt("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.qt()).next(u=>{const c=[];return fe.forEach(u,p=>i.get([p.indexId,this.uid]).next(y=>{c.push(function(b,S){const M=S?new yp(S.sequenceNumber,new eu(Ap(S.readTime),new Ge(nl(S.documentKey)),S.largestBatchId)):yp.empty(),F=b.fields.map(([B,G])=>new os(Nr.fromServerFormat(B),G));return new zm(b.indexId,b.collectionGroup,F,M)}(p,y))})).next(()=>c)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((r,i)=>{const u=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return 0!==u?u:Ft(r.collectionGroup,i.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){const i=wD(e),u=bD(e);return this.rn(e).next(c=>i.qt("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(p=>fe.forEach(p,y=>{return u.put({indexId:y.indexId,uid:this.user.uid||"",sequenceNumber:c,readTime:Tp((F=r).readTime),documentKey:Ts(F.documentKey.path),largestBatchId:F.largestBatchId});var F})))}updateIndexEntries(e,t){const r=new Map;return fe.forEach(t,(i,u)=>{const c=r.get(i.collectionGroup);return(c?fe.resolve(c):this.getFieldIndexes(e,i.collectionGroup)).next(p=>(r.set(i.collectionGroup,p),fe.forEach(p,y=>this.on(e,i,y).next(b=>{const S=this.un(u,y);return b.isEqual(S)?fe.resolve():this.an(e,u,y,b,S)}))))})}cn(e,t,r,i){return H0(e).put({indexId:i.indexId,uid:this.uid,arrayValue:i.arrayValue,directionalValue:i.directionalValue,orderedDocumentKey:this.tn(r,t.key),documentKey:t.key.path.toArray()})}hn(e,t,r,i){return H0(e).delete([i.indexId,this.uid,i.arrayValue,i.directionalValue,this.tn(r,t.key),t.key.path.toArray()])}on(e,t,r){const i=H0(e);let u=new Pn(Mp);return i.Wt({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.tn(r,t)])},(c,p)=>{u=u.add(new Ih(r.indexId,t,p.arrayValue,p.directionalValue))}).next(()=>u)}un(e,t){let r=new Pn(Mp);const i=this.Ze(t,e);if(null==i)return r;const u=mp(t);if(null!=u){const c=e.data.field(u.fieldPath);if(vh(c))for(const p of c.arrayValue.values||[])r=r.add(new Ih(t.indexId,e.key,this.He(p),i))}else r=r.add(new Ih(t.indexId,e.key,py,i));return r}an(e,t,r,i,u){ke("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const c=[];return function(p,y,b,S,M){const F=p.getIterator(),B=y.getIterator();let G=bp(F),te=bp(B);for(;G||te;){let Ee=!1,Ze=!1;if(G&&te){const Ye=b(G,te);Ye<0?Ze=!0:Ye>0&&(Ee=!0)}else null!=G?Ze=!0:Ee=!0;Ee?(S(te),te=bp(B)):Ze?(M(G),G=bp(F)):(G=bp(F),te=bp(B))}}(i,u,Mp,p=>{c.push(this.cn(e,t,r,p))},p=>{c.push(this.hn(e,t,r,p))}),fe.waitFor(c)}rn(e){let t=1;return bD(e).Wt({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,u)=>{u.done(),t=i.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((c,p)=>Mp(c,p)).filter((c,p,y)=>!p||0!==Mp(c,y[p-1]));const i=[];i.push(e);for(const c of r){const p=Mp(c,e),y=Mp(c,t);if(0===p)i[0]=e.ke();else if(p>0&&y<0)i.push(c),i.push(c.ke());else if(y>0)break}i.push(t);const u=[];for(let c=0;c<i.length;c+=2)u.push(IDBKeyRange.bound([i[c].indexId,this.uid,i[c].arrayValue,i[c].directionalValue,py,[]],[i[c+1].indexId,this.uid,i[c+1].arrayValue,i[c+1].directionalValue,py,[]]));return u}}function Bx(n){return Ti(n,"collectionParents")}function H0(n){return Ti(n,"indexEntries")}function wD(n){return Ti(n,"indexConfiguration")}function bD(n){return Ti(n,"indexState")}const Ux={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class uo{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new uo(e,uo.DEFAULT_COLLECTION_PERCENTILE,uo.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function jx(n,e,t){const r=n.store("mutations"),i=n.store("documentMutations"),u=[],c=IDBKeyRange.only(t.batchId);let p=0;const y=r.Wt({range:c},(S,M,F)=>(p++,F.delete()));u.push(y.next(()=>{Tt(1===p)}));const b=[];for(const S of t.mutations){const M=Cx(e,S.key.path,t.batchId);u.push(i.delete(M)),b.push(S.key)}return fe.waitFor(u).next(()=>b)}function DD(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw at();e=n.noDocument}return JSON.stringify(e).length}uo.DEFAULT_COLLECTION_PERCENTILE=10,uo.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,uo.DEFAULT=new uo(41943040,uo.DEFAULT_COLLECTION_PERCENTILE,uo.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),uo.DISABLED=new uo(-1,0,0);class nA{constructor(e,t,r,i){this.userId=e,this.M=t,this.indexManager=r,this.referenceDelegate=i,this.ln={}}static Yt(e,t,r,i){Tt(""!==e.uid);const u=e.isAuthenticated()?e.uid:"";return new nA(u,t,r,i)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Th(e).Wt({index:"userMutationsIndex",range:r},(i,u,c)=>{t=!1,c.done()}).next(()=>t)}addMutationBatch(e,t,r,i){const u=gy(e),c=Th(e);return c.add({}).next(p=>{Tt("number"==typeof p);const y=new ZT(p,t,r,i),b=function(F,B,G){const te=G.baseMutations.map(Ze=>kc(F.Jt,Ze)),Ee=G.mutations.map(Ze=>kc(F.Jt,Ze));return{userId:B,batchId:G.batchId,localWriteTimeMs:G.localWriteTime.toMillis(),baseMutations:te,mutations:Ee}}(this.M,this.userId,y),S=[];let M=new Pn((F,B)=>Ft(F.canonicalString(),B.canonicalString()));for(const F of i){const B=Cx(this.userId,F.key.path,p);M=M.add(F.key.path.popLast()),S.push(c.put(b)),S.push(u.put(B,Ek))}return M.forEach(F=>{S.push(this.indexManager.addToCollectionParentIndex(e,F))}),e.addOnCommittedListener(()=>{this.ln[p]=y.keys()}),fe.waitFor(S).next(()=>y)})}lookupMutationBatch(e,t){return Th(e).get(t).next(r=>r?(Tt(r.userId===this.userId),fy(this.M,r)):null)}fn(e,t){return this.ln[t]?fe.resolve(this.ln[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){const i=r.keys();return this.ln[t]=i,i}return null})}getNextMutationBatchAfterBatchId(e,t){const r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]);let u=null;return Th(e).Wt({index:"userMutationsIndex",range:i},(c,p,y)=>{p.userId===this.userId&&(Tt(p.batchId>=r),u=fy(this.M,p)),y.done()}).next(()=>u)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return Th(e).Wt({index:"userMutationsIndex",range:t,reverse:!0},(i,u,c)=>{r=u.batchId,c.done()}).next(()=>r)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Th(e).qt("userMutationsIndex",t).next(r=>r.map(i=>fy(this.M,i)))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=_D(this.userId,t.path),i=IDBKeyRange.lowerBound(r),u=[];return gy(e).Wt({range:i},(c,p,y)=>{const[b,S,M]=c,F=nl(S);if(b===this.userId&&t.path.isEqual(F))return Th(e).get(M).next(B=>{if(!B)throw at();Tt(B.userId===this.userId),u.push(fy(this.M,B))});y.done()}).next(()=>u)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Pn(Ft);const i=[];return t.forEach(u=>{const c=_D(this.userId,u.path),p=IDBKeyRange.lowerBound(c),y=gy(e).Wt({range:p},(b,S,M)=>{const[F,B,G]=b,te=nl(B);F===this.userId&&u.path.isEqual(te)?r=r.add(G):M.done()});i.push(y)}),fe.waitFor(i).next(()=>this.dn(e,r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1,u=_D(this.userId,r),c=IDBKeyRange.lowerBound(u);let p=new Pn(Ft);return gy(e).Wt({range:c},(y,b,S)=>{const[M,F,B]=y,G=nl(F);M===this.userId&&r.isPrefixOf(G)?G.length===i&&(p=p.add(B)):S.done()}).next(()=>this.dn(e,p))}dn(e,t){const r=[],i=[];return t.forEach(u=>{i.push(Th(e).get(u).next(c=>{if(null===c)throw at();Tt(c.userId===this.userId),r.push(fy(this.M,c))}))}),fe.waitFor(i).next(()=>r)}removeMutationBatch(e,t){return jx(e.Ht,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this._n(t.batchId)}),fe.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}_n(e){delete this.ln[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return fe.resolve();const r=IDBKeyRange.lowerBound([this.userId]),i=[];return gy(e).Wt({range:r},(u,c,p)=>{if(u[0]===this.userId){const y=nl(u[1]);i.push(y)}else p.done()}).next(()=>{Tt(0===i.length)})})}containsKey(e,t){return $x(e,this.userId,t)}wn(e){return Hx(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function $x(n,e,t){const r=_D(e,t.path),i=r[1],u=IDBKeyRange.lowerBound(r);let c=!1;return gy(n).Wt({range:u,jt:!0},(p,y,b)=>{const[S,M,F]=p;S===e&&M===i&&(c=!0),b.done()}).next(()=>c)}function Th(n){return Ti(n,"mutations")}function gy(n){return Ti(n,"documentMutations")}function Hx(n){return Ti(n,"mutationQueues")}class xp{constructor(e){this.mn=e}next(){return this.mn+=2,this.mn}static gn(){return new xp(0)}static yn(){return new xp(-1)}}class Kk{constructor(e,t){this.referenceDelegate=e,this.M=t}allocateTargetId(e){return this.pn(e).next(t=>{const r=new xp(t.highestTargetId);return t.highestTargetId=r.next(),this.In(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.pn(e).next(t=>Dt.fromTimestamp(new ir(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.pn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.pn(e).next(i=>(i.highestListenSequenceNumber=t,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),this.In(e,i)))}addTargetData(e,t){return this.Tn(e,t).next(()=>this.pn(e).next(r=>(r.targetCount+=1,this.En(t,r),this.In(e,r))))}updateTargetData(e,t){return this.Tn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>my(e).delete(t.targetId)).next(()=>this.pn(e)).next(r=>(Tt(r.targetCount>0),r.targetCount-=1,this.In(e,r)))}removeTargets(e,t,r){let i=0;const u=[];return my(e).Wt((c,p)=>{const y=U0(p);y.sequenceNumber<=t&&null===r.get(y.targetId)&&(i++,u.push(this.removeTargetData(e,y)))}).next(()=>fe.waitFor(u)).next(()=>i)}forEachTarget(e,t){return my(e).Wt((r,i)=>{const u=U0(i);t(u)})}pn(e){return Gx(e).get("targetGlobalKey").next(t=>(Tt(null!==t),t))}In(e,t){return Gx(e).put("targetGlobalKey",t)}Tn(e,t){return my(e).put(Ox(this.M,t))}En(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.pn(e).next(t=>t.targetCount)}getTargetData(e,t){const r=Mc(t),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let u=null;return my(e).Wt({range:i,index:"queryTargetsIndex"},(c,p,y)=>{const b=U0(p);_p(t,b.target)&&(u=b,y.done())}).next(()=>u)}addMatchingKeys(e,t,r){const i=[],u=Ah(e);return t.forEach(c=>{const p=Ts(c.path);i.push(u.put({targetId:r,path:p})),i.push(this.referenceDelegate.addReference(e,r,c))}),fe.waitFor(i)}removeMatchingKeys(e,t,r){const i=Ah(e);return fe.forEach(t,u=>{const c=Ts(u.path);return fe.waitFor([i.delete([r,c]),this.referenceDelegate.removeReference(e,r,u)])})}removeMatchingKeysForTargetId(e,t){const r=Ah(e),i=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),i=Ah(e);let u=o();return i.Wt({range:r,jt:!0},(c,p,y)=>{const b=nl(c[1]),S=new Ge(b);u=u.add(S)}).next(()=>u)}containsKey(e,t){const r=Ts(t.path),i=IDBKeyRange.bound([r],[Zb(r)],!1,!0);let u=0;return Ah(e).Wt({index:"documentTargetsIndex",jt:!0,range:i},([c,p],y,b)=>{0!==c&&(u++,b.done())}).next(()=>u>0)}Et(e,t){return my(e).get(t).next(r=>r?U0(r):null)}}function my(n){return Ti(n,"targets")}function Gx(n){return Ti(n,"targetGlobal")}function Ah(n){return Ti(n,"targetDocuments")}function Rp(n){return rA.apply(this,arguments)}function rA(){return rA=(0,_e.Z)(function*(n){if(n.code!==ue.FAILED_PRECONDITION||n.message!==Ax)throw n;ke("LocalStore","Unexpectedly lost primary lease")}),rA.apply(this,arguments)}function qx([n,e],[t,r]){const i=Ft(n,t);return 0===i?Ft(e,r):i}class Zk{constructor(e){this.An=e,this.buffer=new Pn(qx),this.Rn=0}Pn(){return++this.Rn}bn(e){const t=[e,this.Pn()];if(this.buffer.size<this.An)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();qx(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class Yk{constructor(e,t){this.garbageCollector=e,this.asyncQueue=t,this.Vn=!1,this.vn=null}start(e){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Sn(e)}stop(){this.vn&&(this.vn.cancel(),this.vn=null)}get started(){return null!==this.vn}Sn(e){var t=this;const r=this.Vn?3e5:6e4;ke("LruGarbageCollector",`Garbage collection scheduled in ${r}ms`),this.vn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",r,(0,_e.Z)(function*(){t.vn=null,t.Vn=!0;try{yield e.collectGarbage(t.garbageCollector)}catch(i){Cp(i)?ke("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",i):yield Rp(i)}yield t.Sn(e)}))}}class Qk{constructor(e,t){this.Dn=e,this.params=t}calculateTargetCount(e,t){return this.Dn.Cn(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(0===t)return fe.resolve(ss.A);const r=new Zk(t);return this.Dn.forEachTarget(e,i=>r.bn(i.sequenceNumber)).next(()=>this.Dn.xn(e,i=>r.bn(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.Dn.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.Dn.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(ke("LruGarbageCollector","Garbage collection skipped; disabled"),fe.resolve(Ux)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(ke("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Ux):this.Nn(e,t))}getCacheSize(e){return this.Dn.getCacheSize(e)}Nn(e,t){let r,i,u,c,p,y,b;const S=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(M=>(M>this.params.maximumSequenceNumbersToCollect?(ke("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${M}`),i=this.params.maximumSequenceNumbersToCollect):i=M,c=Date.now(),this.nthSequenceNumber(e,i))).next(M=>(r=M,p=Date.now(),this.removeTargets(e,r,t))).next(M=>(u=M,y=Date.now(),this.removeOrphanedDocuments(e,r))).next(M=>(b=Date.now(),ti()<=qa.in.DEBUG&&ke("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${c-S}ms\n\tDetermined least recently used ${i} in `+(p-c)+`ms\n\tRemoved ${u} targets in `+(y-p)+`ms\n\tRemoved ${M} documents in `+(b-y)+`ms\nTotal Duration: ${b-S}ms`),fe.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:u,documentsRemoved:M})))}}class Jk{constructor(e,t){this.db=e,this.garbageCollector=new Qk(this,t)}Cn(e){const t=this.kn(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}kn(e){let t=0;return this.xn(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}xn(e,t){return this.Mn(e,(r,i)=>t(i))}addReference(e,t,r){return CD(e,r)}removeReference(e,t,r){return CD(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return CD(e,t)}On(e,t){return function(r,i){let u=!1;return Hx(r).zt(c=>$x(r,c,i).next(p=>(p&&(u=!0),fe.resolve(!p)))).next(()=>u)}(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[];let u=0;return this.Mn(e,(c,p)=>{if(p<=t){const y=this.On(e,c).next(b=>{if(!b)return u++,r.getEntry(e,c).next(()=>(r.removeEntry(c,Dt.min()),Ah(e).delete([0,Ts(c.path)])))});i.push(y)}}).next(()=>fe.waitFor(i)).next(()=>r.apply(e)).next(()=>u)}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return CD(e,t)}Mn(e,t){const r=Ah(e);let i,u=ss.A;return r.Wt({index:"documentTargetsIndex"},([c,p],{path:y,sequenceNumber:b})=>{0===c?(u!==ss.A&&t(new Ge(nl(i)),u),u=b,i=y):u=ss.A}).next(()=>{u!==ss.A&&t(new Ge(nl(i)),u)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function CD(n,e){return Ah(n).put((r=n.currentSequenceNumber,{targetId:0,path:Ts(e.path),sequenceNumber:r}));var r}class zx{constructor(){this.changes=new Nc(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,kn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return void 0!==r?fe.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class Xk{constructor(e){this.M=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return Np(e).put(r)}removeEntry(e,t,r){return Np(e).delete(function(i,u){const c=i.path.toArray();return[c.slice(0,c.length-2),c[c.length-2],ED(u),c[c.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.Fn(e,r)))}getEntry(e,t){let r=kn.newInvalidDocument(t);return Np(e).Wt({index:"documentKeyIndex",range:IDBKeyRange.only(G0(t))},(i,u)=>{r=this.$n(t,u)}).next(()=>r)}Bn(e,t){let r={size:0,document:kn.newInvalidDocument(t)};return Np(e).Wt({index:"documentKeyIndex",range:IDBKeyRange.only(G0(t))},(i,u)=>{r={document:this.$n(t,u),size:DD(u)}}).next(()=>r)}getEntries(e,t){let r=ao();return this.Ln(e,t,(i,u)=>{const c=this.$n(i,u);r=r.insert(i,c)}).next(()=>r)}Un(e,t){let r=ao(),i=new sr(Ge.comparator);return this.Ln(e,t,(u,c)=>{const p=this.$n(u,c);r=r.insert(u,p),i=i.insert(u,DD(c))}).next(()=>({documents:r,qn:i}))}Ln(e,t,r){if(t.isEmpty())return fe.resolve();let i=new Pn(Zx);t.forEach(y=>i=i.add(y));const u=IDBKeyRange.bound(G0(i.first()),G0(i.last())),c=i.getIterator();let p=c.getNext();return Np(e).Wt({index:"documentKeyIndex",range:u},(y,b,S)=>{const M=Ge.fromSegments([...b.prefixPath,b.collectionGroup,b.documentId]);for(;p&&Zx(p,M)<0;)r(p,null),p=c.getNext();p&&p.isEqual(M)&&(r(p,b),p=c.hasNext()?c.getNext():null),p?S.Ut(G0(p)):S.done()}).next(()=>{for(;p;)r(p,null),p=c.hasNext()?c.getNext():null})}getAllFromCollection(e,t,r){const i=[t.popLast().toArray(),t.lastSegment(),ED(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],u=[t.popLast().toArray(),t.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Np(e).qt(IDBKeyRange.bound(i,u,!0)).next(c=>{let p=ao();for(const y of c){const b=this.$n(Ge.fromSegments(y.prefixPath.concat(y.collectionGroup,y.documentId)),y);p=p.insert(b.key,b)}return p})}getAllFromCollectionGroup(e,t,r,i){let u=ao();const c=Kx(t,r),p=Kx(t,eu.max());return Np(e).Wt({index:"collectionGroupIndex",range:IDBKeyRange.bound(c,p,!0)},(y,b,S)=>{const M=this.$n(Ge.fromSegments(b.prefixPath.concat(b.collectionGroup,b.documentId)),b);u=u.insert(M.key,M),u.size===i&&S.done()}).next(()=>u)}newChangeBuffer(e){return new eP(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return Wx(e).get("remoteDocumentGlobalKey").next(t=>(Tt(!!t),t))}Fn(e,t){return Wx(e).put("remoteDocumentGlobalKey",t)}$n(e,t){if(t){const r=function Bk(n,e){let t;if(e.document)t=cy(n.Jt,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=Ge.fromSegments(e.noDocument.path),i=Ap(e.noDocument.readTime);t=kn.newNoDocument(r,i),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return at();{const r=Ge.fromSegments(e.unknownDocument.path),i=Ap(e.unknownDocument.version);t=kn.newUnknownDocument(r,i)}}return e.readTime&&t.setReadTime(function(r){const i=new ir(r[0],r[1]);return Dt.fromTimestamp(i)}(e.readTime)),t}(this.M,t);if(!r.isNoDocument()||!r.version.isEqual(Dt.min()))return r}return kn.newInvalidDocument(e)}}class eP extends zx{constructor(e,t){super(),this.Kn=e,this.trackRemovals=t,this.Gn=new Nc(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){const t=[];let r=0,i=new Pn((u,c)=>Ft(u.canonicalString(),c.canonicalString()));return this.changes.forEach((u,c)=>{const p=this.Gn.get(u);if(t.push(this.Kn.removeEntry(e,u,p.readTime)),c.isValidDocument()){const y=Nx(this.Kn.M,c);i=i.add(u.path.popLast()),r+=DD(y)-p.size,t.push(this.Kn.addEntry(e,u,y))}else if(r-=p.size,this.trackRemovals){const y=Nx(this.Kn.M,c.convertToNoDocument(Dt.min()));t.push(this.Kn.addEntry(e,u,y))}}),i.forEach(u=>{t.push(this.Kn.indexManager.addToCollectionParentIndex(e,u))}),t.push(this.Kn.updateMetadata(e,r)),fe.waitFor(t)}getFromCache(e,t){return this.Kn.Bn(e,t).next(r=>(this.Gn.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.Kn.Un(e,t).next(({documents:r,qn:i})=>(i.forEach((u,c)=>{this.Gn.set(u,{size:c,readTime:r.get(u).readTime})}),r))}}function Wx(n){return Ti(n,"remoteDocumentGlobal")}function Np(n){return Ti(n,"remoteDocumentsV14")}function G0(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function Kx(n,e){const t=e.documentKey.path.toArray();return[n,ED(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function Zx(n,e){const t=n.path.toArray(),r=e.path.toArray();let i=0;for(let u=0;u<t.length-2&&u<r.length-2;++u)if(i=Ft(t[u],r[u]),i)return i;return i=Ft(t.length,r.length),i||(i=Ft(t[t.length-2],r[r.length-2]),i||Ft(t[t.length-1],r[r.length-1]))}class tP{constructor(e){this.M=e}kt(e,t,r,i){const u=new vD("createOrUpgrade",t);var p;r<1&&i>=1&&(e.createObjectStore("owner"),(p=e).createObjectStore("mutationQueues",{keyPath:"userId"}),p.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Dx,{unique:!0}),p.createObjectStore("documentMutations"),Yx(e),function(p){p.createObjectStore("remoteDocuments")}(e));let c=fe.resolve();return r<3&&i>=3&&(0!==r&&(function(p){p.deleteObjectStore("targetDocuments"),p.deleteObjectStore("targets"),p.deleteObjectStore("targetGlobal")}(e),Yx(e)),c=c.next(()=>function(p){const y=p.store("targetGlobal"),b={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Dt.min().toTimestamp(),targetCount:0};return y.put("targetGlobalKey",b)}(u))),r<4&&i>=4&&(0!==r&&(c=c.next(()=>function(p,y){return y.store("mutations").qt().next(b=>{p.deleteObjectStore("mutations"),p.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Dx,{unique:!0});const S=y.store("mutations"),M=b.map(F=>S.put(F));return fe.waitFor(M)})}(e,u))),c=c.next(()=>{!function(p){p.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),r<5&&i>=5&&(c=c.next(()=>this.Qn(u))),r<6&&i>=6&&(c=c.next(()=>(function(p){p.createObjectStore("remoteDocumentGlobal")}(e),this.jn(u)))),r<7&&i>=7&&(c=c.next(()=>this.Wn(u))),r<8&&i>=8&&(c=c.next(()=>this.zn(e,u))),r<9&&i>=9&&(c=c.next(()=>{!function(p){p.objectStoreNames.contains("remoteDocumentChanges")&&p.deleteObjectStore("remoteDocumentChanges")}(e)})),r<10&&i>=10&&(c=c.next(()=>this.Hn(u))),r<11&&i>=11&&(c=c.next(()=>{(function(p){p.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(p){p.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&i>=12&&(c=c.next(()=>{!function(p){const y=p.createObjectStore("documentOverlays",{keyPath:Nk});y.createIndex("collectionPathOverlayIndex",Ok,{unique:!1}),y.createIndex("collectionGroupOverlayIndex",kk,{unique:!1})}(e)})),r<13&&i>=13&&(c=c.next(()=>function(p){const y=p.createObjectStore("remoteDocumentsV14",{keyPath:wk});y.createIndex("documentKeyIndex",bk),y.createIndex("collectionGroupIndex",Dk)}(e)).next(()=>this.Jn(e,u)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&i>=14&&(c=c.next(()=>{!function(p){p.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),p.createObjectStore("indexState",{keyPath:Sk}).createIndex("sequenceNumberIndex",Mk,{unique:!1}),p.createObjectStore("indexEntries",{keyPath:xk}).createIndex("documentKeyIndex",Rk,{unique:!1})}(e)})),c}jn(e){let t=0;return e.store("remoteDocuments").Wt((r,i)=>{t+=DD(i)}).next(()=>{const r={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}Qn(e){const t=e.store("mutationQueues"),r=e.store("mutations");return t.qt().next(i=>fe.forEach(i,u=>{const c=IDBKeyRange.bound([u.userId,-1],[u.userId,u.lastAcknowledgedBatchId]);return r.qt("userMutationsIndex",c).next(p=>fe.forEach(p,y=>{Tt(y.userId===u.userId);const b=fy(this.M,y);return jx(e,u.userId,b).next(()=>{})}))}))}Wn(e){const t=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(i=>{const u=[];return r.Wt((c,p)=>{const y=new tn(c),b=[0,Ts(y)];u.push(t.get(b).next(S=>S?fe.resolve():t.put({targetId:0,path:Ts(y),sequenceNumber:i.highestListenSequenceNumber})))}).next(()=>fe.waitFor(u))})}zn(e,t){e.createObjectStore("collectionParents",{keyPath:Ak});const r=t.store("collectionParents"),i=new tA,u=c=>{if(i.add(c)){const p=c.lastSegment(),y=c.popLast();return r.put({collectionId:p,parent:Ts(y)})}};return t.store("remoteDocuments").Wt({jt:!0},(c,p)=>{const y=new tn(c);return u(y.popLast())}).next(()=>t.store("documentMutations").Wt({jt:!0},([c,p,y],b)=>{const S=nl(p);return u(S.popLast())}))}Hn(e){const t=e.store("targets");return t.Wt((r,i)=>{const u=U0(i),c=Ox(this.M,u);return t.put(c)})}Jn(e,t){const r=t.store("remoteDocuments"),i=[];return r.Wt((u,c)=>{const p=t.store("remoteDocumentsV14"),y=(b=c,b.document?new Ge(tn.fromString(b.document.name).popFirst(5)):b.noDocument?Ge.fromSegments(b.noDocument.path):b.unknownDocument?Ge.fromSegments(b.unknownDocument.path):at()).path.toArray();var b;const S={prefixPath:y.slice(0,y.length-2),collectionGroup:y[y.length-2],documentId:y[y.length-1],readTime:c.readTime||[0,0],unknownDocument:c.unknownDocument,noDocument:c.noDocument,document:c.document,hasCommittedMutations:!!c.hasCommittedMutations};i.push(p.put(S))}).next(()=>fe.waitFor(i))}}function Yx(n){n.createObjectStore("targetDocuments",{keyPath:Ik}).createIndex("documentTargetsIndex",Tk,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",Ck,{unique:!0}),n.createObjectStore("targetGlobal")}const iA="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class sA{constructor(e,t,r,i,u,c,p,y,b,S,M=13){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.Yn=u,this.window=c,this.document=p,this.Xn=b,this.Zn=S,this.ts=M,this.es=null,this.ns=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ss=null,this.inForeground=!1,this.rs=null,this.os=null,this.us=Number.NEGATIVE_INFINITY,this.cs=F=>Promise.resolve(),!sA.vt())throw new Re(ue.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new Jk(this,i),this.hs=t+"main",this.M=new Rx(y),this.ls=new ru(this.hs,this.ts,new tP(this.M)),this.fs=new Kk(this.referenceDelegate,this.M),this.ds=new Xk(this.M),this._s=new Uk,this.window&&this.window.localStorage?this.ws=this.window.localStorage:(this.ws=null,!1===S&&mr("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.gs().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Re(ue.FAILED_PRECONDITION,iA);return this.ys(),this.ps(),this.Is(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.fs.getHighestSequenceNumber(e))}).then(e=>{this.es=new ss(e,this.Xn)}).then(()=>{this.ns=!0}).catch(e=>(this.ls&&this.ls.close(),Promise.reject(e)))}Ts(e){var t=this;return this.cs=function(){var r=(0,_e.Z)(function*(i){if(t.started)return e(i)});return function(i){return r.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.ls.Ot(function(){var t=(0,_e.Z)(function*(r){null===r.newVersion&&(yield e())});return function(r){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Yn.enqueueAndForget((0,_e.Z)(function*(){t.started&&(yield t.gs())})))}gs(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>ID(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.Es(e).next(t=>{t||(this.isPrimary=!1,this.Yn.enqueueRetryable(()=>this.cs(!1)))})}).next(()=>this.As(e)).next(t=>this.isPrimary&&!t?this.Rs(e).next(()=>!1):!!t&&this.Ps(e).next(()=>!0))).catch(e=>{if(Cp(e))return ke("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return ke("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Yn.enqueueRetryable(()=>this.cs(e)),this.isPrimary=e})}Es(e){return q0(e).get("owner").next(t=>fe.resolve(this.bs(t)))}Vs(e){return ID(e).delete(this.clientId)}vs(){var e=this;return(0,_e.Z)(function*(){if(e.isPrimary&&!e.Ss(e.us,18e5)){e.us=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",r=>{const i=Ti(r,"clientMetadata");return i.qt().next(u=>{const c=e.Ds(u,18e5),p=u.filter(y=>-1===c.indexOf(y));return fe.forEach(p,y=>i.delete(y.clientId)).next(()=>p)})}).catch(()=>[]);if(e.ws)for(const r of t)e.ws.removeItem(e.Cs(r.clientId))}})()}Is(){this.os=this.Yn.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.gs().then(()=>this.vs()).then(()=>this.Is()))}bs(e){return!!e&&e.ownerId===this.clientId}As(e){return this.Zn?fe.resolve(!0):q0(e).get("owner").next(t=>{if(null!==t&&this.Ss(t.leaseTimestampMs,5e3)&&!this.xs(t.ownerId)){if(this.bs(t)&&this.networkEnabled)return!0;if(!this.bs(t)){if(!t.allowTabSynchronization)throw new Re(ue.FAILED_PRECONDITION,iA);return!1}}return!(!this.networkEnabled||!this.inForeground)||ID(e).qt().next(r=>void 0===this.Ds(r,5e3).find(i=>{if(this.clientId!==i.clientId){const c=!this.inForeground&&i.inForeground,p=this.networkEnabled===i.networkEnabled;if(!this.networkEnabled&&i.networkEnabled||c&&p)return!0}return!1}))}).next(t=>(this.isPrimary!==t&&ke("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,_e.Z)(function*(){e.ns=!1,e.Ns(),e.os&&(e.os.cancel(),e.os=null),e.ks(),e.Ms(),yield e.ls.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const r=new xx(t,ss.A);return e.Rs(r).next(()=>e.Vs(r))}),e.ls.close(),e.Os()})()}Ds(e,t){return e.filter(r=>this.Ss(r.updateTimeMs,t)&&!this.xs(r.clientId))}Fs(){return this.runTransaction("getActiveClients","readonly",e=>ID(e).qt().next(t=>this.Ds(t,18e5).map(r=>r.clientId)))}get started(){return this.ns}getMutationQueue(e,t){return nA.Yt(e,this.M,t,this.referenceDelegate)}getTargetCache(){return this.fs}getRemoteDocumentCache(){return this.ds}getIndexManager(e){return new Wk(e,this.M.Jt.databaseId)}getDocumentOverlayCache(e){return eA.Yt(this.M,e)}getBundleCache(){return this._s}runTransaction(e,t,r){ke("IndexedDbPersistence","Starting transaction:",e);const i="readonly"===t?"readonly":"readwrite",u=14===(c=this.ts)?Fk:13===c?Tx:12===c?Pk:11===c?Ix:void at();var c;let p;return this.ls.runTransaction(e,i,u,y=>(p=new xx(y,this.es?this.es.next():ss.A),"readwrite-primary"===t?this.Es(p).next(b=>!!b||this.As(p)).next(b=>{if(!b)throw mr(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Yn.enqueueRetryable(()=>this.cs(!1)),new Re(ue.FAILED_PRECONDITION,Ax);return r(p)}).next(b=>this.Ps(p).next(()=>b)):this.$s(p).next(()=>r(p)))).then(y=>(p.raiseOnCommittedEvent(),y))}$s(e){return q0(e).get("owner").next(t=>{if(null!==t&&this.Ss(t.leaseTimestampMs,5e3)&&!this.xs(t.ownerId)&&!this.bs(t)&&!(this.Zn||this.allowTabSynchronization&&t.allowTabSynchronization))throw new Re(ue.FAILED_PRECONDITION,iA)})}Ps(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return q0(e).put("owner",t)}static vt(){return ru.vt()}Rs(e){const t=q0(e);return t.get("owner").next(r=>this.bs(r)?(ke("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):fe.resolve())}Ss(e,t){const r=Date.now();return!(e<r-t||e>r&&(mr(`Detected an update time that is in the future: ${e} > ${r}`),1))}ys(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.rs=()=>{this.Yn.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.gs()))},this.document.addEventListener("visibilitychange",this.rs),this.inForeground="visible"===this.document.visibilityState)}ks(){this.rs&&(this.document.removeEventListener("visibilitychange",this.rs),this.rs=null)}ps(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ss=()=>{this.Ns(),(0,qt.G6)()&&navigator.appVersion.match(/Version\/1[45]/)&&this.Yn.enterRestrictedMode(!0),this.Yn.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.ss))}Ms(){this.ss&&(this.window.removeEventListener("pagehide",this.ss),this.ss=null)}xs(e){var t;try{const r=null!==(null===(t=this.ws)||void 0===t?void 0:t.getItem(this.Cs(e)));return ke("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return mr("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}Ns(){if(this.ws)try{this.ws.setItem(this.Cs(this.clientId),String(Date.now()))}catch(e){mr("Failed to set zombie client id.",e)}}Os(){if(this.ws)try{this.ws.removeItem(this.Cs(this.clientId))}catch(e){}}Cs(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function q0(n){return Ti(n,"owner")}function ID(n){return Ti(n,"clientMetadata")}function oA(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class nP{constructor(e,t,r){this.ds=e,this.Bs=t,this.indexManager=r}Ls(e,t){return this.Bs.getAllMutationBatchesAffectingDocumentKey(e,t).next(r=>this.Us(e,t,r))}Us(e,t,r){return this.ds.getEntry(e,t).next(i=>{for(const u of r)u.applyToLocalView(i);return i})}qs(e,t){e.forEach((r,i)=>{for(const u of t)u.applyToLocalView(i)})}Ks(e,t){return this.ds.getEntries(e,t).next(r=>this.Gs(e,r).next(()=>r))}Gs(e,t){return this.Bs.getAllMutationBatchesAffectingDocumentKeys(e,t).next(r=>this.qs(t,r))}Qs(e,t,r){return Ge.isDocumentKey((i=t).path)&&null===i.collectionGroup&&0===i.filters.length?this.js(e,t.path):Jm(t)?this.Ws(e,t,r):this.zs(e,t,r);var i}js(e,t){return this.Ls(e,new Ge(t)).next(r=>{let i=yD();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}Ws(e,t,r){const i=t.collectionGroup;let u=yD();return this.indexManager.getCollectionParents(e,i).next(c=>fe.forEach(c,p=>{const y=(b=t,S=p.child(i),new tu(S,null,b.explicitOrderBy.slice(),b.filters.slice(),b.limit,b.limitType,b.startAt,b.endAt));var b,S;return this.zs(e,y,r).next(b=>{b.forEach((S,M)=>{u=u.insert(S,M)})})}).next(()=>u))}zs(e,t,r){let i;return this.ds.getAllFromCollection(e,t.path,r).next(u=>(i=u,this.Bs.getAllMutationBatchesAffectingQuery(e,t))).next(u=>{for(const c of u)for(const p of c.mutations){const y=p.key;let b=i.get(y);null==b&&(b=kn.newInvalidDocument(y),i=i.insert(y,b)),k0(p,b,c.localWriteTime),b.isFoundDocument()||(i=i.remove(y))}}).next(()=>(i.forEach((u,c)=>{R0(t,c)||(i=i.remove(u))}),i))}}class aA{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.Hs=r,this.Js=i}static Ys(e,t){let r=o(),i=o();for(const u of t.docChanges)switch(u.type){case 0:r=r.add(u.doc.key);break;case 1:i=i.add(u.doc.key)}return new aA(e,t.fromCache,r,i)}}class Qx{Xs(e){this.Zs=e}Qs(e,t,r,i){return 0===(u=t).filters.length&&null===u.limit&&null==u.startAt&&null==u.endAt&&(0===u.explicitOrderBy.length||1===u.explicitOrderBy.length&&u.explicitOrderBy[0].field.isKeyField())||r.isEqual(Dt.min())?this.ti(e,t):this.Zs.Ks(e,i).next(u=>{const c=this.ei(t,u);return(Eh(t)||Ep(t))&&this.ni(t.limitType,c,i,r)?this.ti(e,t):(ti()<=qa.in.DEBUG&&ke("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),x0(t)),this.Zs.Qs(e,t,Wm(r,-1)).next(p=>(c.forEach(y=>{p=p.insert(y.key,y)}),p)))});var u}ei(e,t){let r=new Pn(VT(e));return t.forEach((i,u)=>{R0(e,u)&&(r=r.add(u))}),r}ni(e,t,r,i){if(r.size!==t.size)return!0;const u="F"===e?t.last():t.first();return!!u&&(u.hasPendingWrites||u.version.compareTo(i)>0)}ti(e,t){return ti()<=qa.in.DEBUG&&ke("QueryEngine","Using full collection scan to execute query:",x0(t)),this.Zs.Qs(e,t,eu.min())}}class rP{constructor(e,t,r,i){this.persistence=e,this.si=t,this.M=i,this.ii=new sr(Ft),this.ri=new Nc(u=>Mc(u),_p),this.oi=new Map,this.ui=e.getRemoteDocumentCache(),this.fs=e.getTargetCache(),this._s=e.getBundleCache(),this.ai(r)}ai(e){this.indexManager=this.persistence.getIndexManager(e),this.Bs=this.persistence.getMutationQueue(e,this.indexManager),this.ci=new nP(this.ui,this.Bs,this.indexManager),this.ui.setIndexManager(this.indexManager),this.si.Xs(this.ci)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.ii))}}function Jx(n,e,t,r){return new rP(n,e,t,r)}function Xx(n,e){return uA.apply(this,arguments)}function uA(){return uA=(0,_e.Z)(function*(n,e){const t=ze(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.Bs.getAllMutationBatches(r).next(u=>(i=u,t.ai(e),t.Bs.getAllMutationBatches(r))).next(u=>{const c=[],p=[];let y=o();for(const b of i){c.push(b.batchId);for(const S of b.mutations)y=y.add(S.key)}for(const b of u){p.push(b.batchId);for(const S of b.mutations)y=y.add(S.key)}return t.ci.Ks(r,y).next(b=>({hi:b,removedBatchIds:c,addedBatchIds:p}))})})}),uA.apply(this,arguments)}function iP(n,e){const t=ze(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),u=t.ui.newChangeBuffer({trackRemovals:!0});return function(c,p,y,b){const S=y.batch,M=S.keys();let F=fe.resolve();return M.forEach(B=>{F=F.next(()=>b.getEntry(p,B)).next(G=>{const te=y.docVersions.get(B);Tt(null!==te),G.version.compareTo(te)<0&&(S.applyToRemoteDocument(G,y),G.isValidDocument()&&(G.setReadTime(y.commitVersion),b.addEntry(G)))})}),F.next(()=>c.Bs.removeMutationBatch(p,S))}(t,r,e,u).next(()=>u.apply(r)).next(()=>t.Bs.performConsistencyCheck(r)).next(()=>t.ci.Ks(r,i))})}function eR(n){const e=ze(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.fs.getLastRemoteSnapshotVersion(t))}function sP(n,e){const t=ze(n),r=e.snapshotVersion;let i=t.ii;return t.persistence.runTransaction("Apply remote event","readwrite-primary",u=>{const c=t.ui.newChangeBuffer({trackRemovals:!0});i=t.ii;const p=[];e.targetChanges.forEach((b,S)=>{const M=i.get(S);if(!M)return;p.push(t.fs.removeMatchingKeys(u,b.removedDocuments,S).next(()=>t.fs.addMatchingKeys(u,b.addedDocuments,S)));let F=M.withSequenceNumber(u.currentSequenceNumber);var B,G,te;e.targetMismatches.has(S)?F=F.withResumeToken(_r.EMPTY_BYTE_STRING,Dt.min()).withLastLimboFreeSnapshotVersion(Dt.min()):b.resumeToken.approximateByteSize()>0&&(F=F.withResumeToken(b.resumeToken,r)),i=i.insert(S,F),G=F,te=b,(0===(B=M).resumeToken.approximateByteSize()||G.snapshotVersion.toMicroseconds()-B.snapshotVersion.toMicroseconds()>=3e8||te.addedDocuments.size+te.modifiedDocuments.size+te.removedDocuments.size>0)&&p.push(t.fs.updateTargetData(u,F))});let y=ao();if(e.documentUpdates.forEach(b=>{e.resolvedLimboDocuments.has(b)&&p.push(t.persistence.referenceDelegate.updateLimboDocument(u,b))}),p.push(tR(u,c,e.documentUpdates).next(b=>{y=b})),!r.isEqual(Dt.min())){const b=t.fs.getLastRemoteSnapshotVersion(u).next(S=>t.fs.setTargetsMetadata(u,u.currentSequenceNumber,r));p.push(b)}return fe.waitFor(p).next(()=>c.apply(u)).next(()=>t.ci.Gs(u,y)).next(()=>y)}).then(u=>(t.ii=i,u))}function tR(n,e,t){let r=o();return t.forEach(i=>r=r.add(i)),e.getEntries(n,r).next(i=>{let u=ao();return t.forEach((c,p)=>{const y=i.get(c);p.isNoDocument()&&p.version.isEqual(Dt.min())?(e.removeEntry(c,p.readTime),u=u.insert(c,p)):!y.isValidDocument()||p.version.compareTo(y.version)>0||0===p.version.compareTo(y.version)&&y.hasPendingWrites?(e.addEntry(p),u=u.insert(c,p)):ke("LocalStore","Ignoring outdated watch update for ",c,". Current version:",y.version," Watch version:",p.version)}),u})}function oP(n,e){const t=ze(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===e&&(e=-1),t.Bs.getNextMutationBatchAfterBatchId(r,e)))}function yy(n,e){const t=ze(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.fs.getTargetData(r,e).next(u=>u?(i=u,fe.resolve(i)):t.fs.allocateTargetId(r).next(c=>(i=new Ch(e,c,0,r.currentSequenceNumber),t.fs.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=t.ii.get(r.targetId);return(null===i||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.ii=t.ii.insert(r.targetId,r),t.ri.set(e,r.targetId)),r})}function _y(n,e,t){return lA.apply(this,arguments)}function lA(){return lA=(0,_e.Z)(function*(n,e,t){const r=ze(n),i=r.ii.get(e),u=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",u,c=>r.persistence.referenceDelegate.removeTarget(c,i)))}catch(c){if(!Cp(c))throw c;ke("LocalStore",`Failed to update sequence numbers for target ${e}: ${c}`)}r.ii=r.ii.remove(e),r.ri.delete(i.target)}),lA.apply(this,arguments)}function TD(n,e,t){const r=ze(n);let i=Dt.min(),u=o();return r.persistence.runTransaction("Execute query","readonly",c=>function(p,y,b){const S=ze(p),M=S.ri.get(b);return void 0!==M?fe.resolve(S.ii.get(M)):S.fs.getTargetData(y,b)}(r,c,oo(e)).next(p=>{if(p)return i=p.lastLimboFreeSnapshotVersion,r.fs.getMatchingKeysForTargetId(c,p.targetId).next(y=>{u=y})}).next(()=>r.si.Qs(c,e,t?i:Dt.min(),t?u:o())).next(p=>(iR(r,lD(e),p),{documents:p,li:u})))}function nR(n,e){const t=ze(n),r=ze(t.fs),i=t.ii.get(e);return i?Promise.resolve(i.target):t.persistence.runTransaction("Get target data","readonly",u=>r.Et(u,e).next(c=>c?c.target:null))}function rR(n,e){const t=ze(n),r=t.oi.get(e)||Dt.min();return t.persistence.runTransaction("Get new document changes","readonly",i=>t.ui.getAllFromCollectionGroup(i,e,Wm(r,-1),Number.MAX_SAFE_INTEGER)).then(i=>(iR(t,e,i),i))}function iR(n,e,t){let r=Dt.min();t.forEach((i,u)=>{u.readTime.compareTo(r)>0&&(r=u.readTime)}),n.oi.set(e,r)}function cA(){return cA=(0,_e.Z)(function*(n,e,t,r){const i=ze(n);let u=o(),c=ao();for(const b of t){const S=e.fi(b.metadata.name);b.document&&(u=u.add(S));const M=e.di(b);M.setReadTime(e._i(b.metadata.readTime)),c=c.insert(S,M)}const p=i.ui.newChangeBuffer({trackRemovals:!0}),y=yield yy(i,(b=r,oo(Xu(tn.fromString(`__bundle__/docs/${b}`)))));var b;return i.persistence.runTransaction("Apply bundle documents","readwrite",b=>tR(b,p,c).next(S=>(p.apply(b),S)).next(S=>i.fs.removeMatchingKeysForTargetId(b,y.targetId).next(()=>i.fs.addMatchingKeys(b,u,y.targetId)).next(()=>i.ci.Gs(b,S)).next(()=>S)))}),cA.apply(this,arguments)}function uP(n,e){return dA.apply(this,arguments)}function dA(){return dA=(0,_e.Z)(function*(n,e,t=o()){const r=yield yy(n,oo(JT(e.bundledQuery))),i=ze(n);return i.persistence.runTransaction("Save named query","readwrite",u=>{const c=Je(e.readTime);if(r.snapshotVersion.compareTo(c)>=0)return i._s.saveNamedQuery(u,e);const p=r.withResumeToken(_r.EMPTY_BYTE_STRING,c);return i.ii=i.ii.insert(p.targetId,p),i.fs.updateTargetData(u,p).next(()=>i.fs.removeMatchingKeysForTargetId(u,r.targetId)).next(()=>i.fs.addMatchingKeys(u,t,r.targetId)).next(()=>i._s.saveNamedQuery(u,e))})}),dA.apply(this,arguments)}class lP{constructor(e){this.M=e,this.wi=new Map,this.mi=new Map}getBundleMetadata(e,t){return fe.resolve(this.wi.get(t))}saveBundleMetadata(e,t){var r;return this.wi.set(t.id,{id:(r=t).id,version:r.version,createTime:Je(r.createTime)}),fe.resolve()}getNamedQuery(e,t){return fe.resolve(this.mi.get(t))}saveNamedQuery(e,t){return this.mi.set(t.name,{name:(r=t).name,query:JT(r.bundledQuery),readTime:Je(r.readTime)}),fe.resolve();var r}}class cP{constructor(){this.overlays=new sr(Ge.comparator),this.gi=new Map}getOverlay(e,t){return fe.resolve(this.overlays.get(t))}saveOverlays(e,t,r){return r.forEach((i,u)=>{this.Xt(e,t,u)}),fe.resolve()}removeOverlaysForBatchId(e,t,r){const i=this.gi.get(r);return void 0!==i&&(i.forEach(u=>this.overlays=this.overlays.remove(u)),this.gi.delete(r)),fe.resolve()}getOverlaysForCollection(e,t,r){const i=oy(),u=t.length+1,c=new Ge(t.child("")),p=this.overlays.getIteratorFrom(c);for(;p.hasNext();){const y=p.getNext().value,b=y.getKey();if(!t.isPrefixOf(b.path))break;b.path.length===u&&y.largestBatchId>r&&i.set(y.getKey(),y)}return fe.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let u=new sr((b,S)=>b-S);const c=this.overlays.getIterator();for(;c.hasNext();){const b=c.getNext().value;if(b.getKey().getCollectionGroup()===t&&b.largestBatchId>r){let S=u.get(b.largestBatchId);null===S&&(S=oy(),u=u.insert(b.largestBatchId,S)),S.set(b.getKey(),b)}}const p=oy(),y=u.getIterator();for(;y.hasNext()&&(y.getNext().value.forEach((b,S)=>p.set(b,S)),!(p.size()>=i)););return fe.resolve(p)}Xt(e,t,r){if(null===r)return;const i=this.overlays.get(r.key);if(null!==i){const c=this.gi.get(i.largestBatchId).delete(r.key);this.gi.set(i.largestBatchId,c)}this.overlays=this.overlays.insert(r.key,new QT(t,r));let u=this.gi.get(t);void 0===u&&(u=o(),this.gi.set(t,u)),this.gi.set(t,u.add(r.key))}}class hA{constructor(){this.yi=new Pn(Ai.pi),this.Ii=new Pn(Ai.Ti)}isEmpty(){return this.yi.isEmpty()}addReference(e,t){const r=new Ai(e,t);this.yi=this.yi.add(r),this.Ii=this.Ii.add(r)}Ei(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.Ai(new Ai(e,t))}Ri(e,t){e.forEach(r=>this.removeReference(r,t))}Pi(e){const t=new Ge(new tn([])),r=new Ai(t,e),i=new Ai(t,e+1),u=[];return this.Ii.forEachInRange([r,i],c=>{this.Ai(c),u.push(c.key)}),u}bi(){this.yi.forEach(e=>this.Ai(e))}Ai(e){this.yi=this.yi.delete(e),this.Ii=this.Ii.delete(e)}Vi(e){const t=new Ge(new tn([])),r=new Ai(t,e),i=new Ai(t,e+1);let u=o();return this.Ii.forEachInRange([r,i],c=>{u=u.add(c.key)}),u}containsKey(e){const t=new Ai(e,0),r=this.yi.firstAfterOrEqual(t);return null!==r&&e.isEqual(r.key)}}class Ai{constructor(e,t){this.key=e,this.vi=t}static pi(e,t){return Ge.comparator(e.key,t.key)||Ft(e.vi,t.vi)}static Ti(e,t){return Ft(e.vi,t.vi)||Ge.comparator(e.key,t.key)}}class dP{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.Bs=[],this.Si=1,this.Di=new Pn(Ai.pi)}checkEmpty(e){return fe.resolve(0===this.Bs.length)}addMutationBatch(e,t,r,i){const u=this.Si;this.Si++;const c=new ZT(u,t,r,i);this.Bs.push(c);for(const p of i)this.Di=this.Di.add(new Ai(p.key,u)),this.indexManager.addToCollectionParentIndex(e,p.key.path.popLast());return fe.resolve(c)}lookupMutationBatch(e,t){return fe.resolve(this.Ci(t))}getNextMutationBatchAfterBatchId(e,t){const i=this.xi(t+1),u=i<0?0:i;return fe.resolve(this.Bs.length>u?this.Bs[u]:null)}getHighestUnacknowledgedBatchId(){return fe.resolve(0===this.Bs.length?-1:this.Si-1)}getAllMutationBatches(e){return fe.resolve(this.Bs.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new Ai(t,0),i=new Ai(t,Number.POSITIVE_INFINITY),u=[];return this.Di.forEachInRange([r,i],c=>{const p=this.Ci(c.vi);u.push(p)}),fe.resolve(u)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Pn(Ft);return t.forEach(i=>{const u=new Ai(i,0),c=new Ai(i,Number.POSITIVE_INFINITY);this.Di.forEachInRange([u,c],p=>{r=r.add(p.vi)})}),fe.resolve(this.Ni(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1;let u=r;Ge.isDocumentKey(u)||(u=u.child(""));const c=new Ai(new Ge(u),0);let p=new Pn(Ft);return this.Di.forEachWhile(y=>{const b=y.key.path;return!!r.isPrefixOf(b)&&(b.length===i&&(p=p.add(y.vi)),!0)},c),fe.resolve(this.Ni(p))}Ni(e){const t=[];return e.forEach(r=>{const i=this.Ci(r);null!==i&&t.push(i)}),t}removeMutationBatch(e,t){Tt(0===this.ki(t.batchId,"removed")),this.Bs.shift();let r=this.Di;return fe.forEach(t.mutations,i=>{const u=new Ai(i.key,t.batchId);return r=r.delete(u),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Di=r})}_n(e){}containsKey(e,t){const r=new Ai(t,0),i=this.Di.firstAfterOrEqual(r);return fe.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return fe.resolve()}ki(e,t){return this.xi(e)}xi(e){return 0===this.Bs.length?0:e-this.Bs[0].batchId}Ci(e){const t=this.xi(e);return t<0||t>=this.Bs.length?null:this.Bs[t]}}class hP{constructor(e){this.Mi=e,this.docs=new sr(Ge.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,i=this.docs.get(r),u=i?i.size:0,c=this.Mi(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:c}),this.size+=c-u,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return fe.resolve(r?r.document.mutableCopy():kn.newInvalidDocument(t))}getEntries(e,t){let r=ao();return t.forEach(i=>{const u=this.docs.get(i);r=r.insert(i,u?u.document.mutableCopy():kn.newInvalidDocument(i))}),fe.resolve(r)}getAllFromCollection(e,t,r){let i=ao();const u=new Ge(t.child("")),c=this.docs.getIteratorFrom(u);for(;c.hasNext();){const{key:p,value:{document:y}}=c.getNext();if(!t.isPrefixOf(p.path))break;p.path.length>t.length+1||D0(NT(y),r)<=0||(i=i.insert(y.key,y.mutableCopy()))}return fe.resolve(i)}getAllFromCollectionGroup(e,t,r,i){at()}Oi(e,t){return fe.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new fP(this)}getSize(e){return fe.resolve(this.size)}}class fP extends zx{constructor(e){super(),this.Kn=e}applyChanges(e){const t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.Kn.addEntry(e,i)):this.Kn.removeEntry(r)}),fe.waitFor(t)}getFromCache(e,t){return this.Kn.getEntry(e,t)}getAllFromCache(e,t){return this.Kn.getEntries(e,t)}}class pP{constructor(e){this.persistence=e,this.Fi=new Nc(t=>Mc(t),_p),this.lastRemoteSnapshotVersion=Dt.min(),this.highestTargetId=0,this.$i=0,this.Bi=new hA,this.targetCount=0,this.Li=xp.gn()}forEachTarget(e,t){return this.Fi.forEach((r,i)=>t(i)),fe.resolve()}getLastRemoteSnapshotVersion(e){return fe.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return fe.resolve(this.$i)}allocateTargetId(e){return this.highestTargetId=this.Li.next(),fe.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.$i&&(this.$i=t),fe.resolve()}Tn(e){this.Fi.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Li=new xp(t),this.highestTargetId=t),e.sequenceNumber>this.$i&&(this.$i=e.sequenceNumber)}addTargetData(e,t){return this.Tn(t),this.targetCount+=1,fe.resolve()}updateTargetData(e,t){return this.Tn(t),fe.resolve()}removeTargetData(e,t){return this.Fi.delete(t.target),this.Bi.Pi(t.targetId),this.targetCount-=1,fe.resolve()}removeTargets(e,t,r){let i=0;const u=[];return this.Fi.forEach((c,p)=>{p.sequenceNumber<=t&&null===r.get(p.targetId)&&(this.Fi.delete(c),u.push(this.removeMatchingKeysForTargetId(e,p.targetId)),i++)}),fe.waitFor(u).next(()=>i)}getTargetCount(e){return fe.resolve(this.targetCount)}getTargetData(e,t){const r=this.Fi.get(t)||null;return fe.resolve(r)}addMatchingKeys(e,t,r){return this.Bi.Ei(t,r),fe.resolve()}removeMatchingKeys(e,t,r){this.Bi.Ri(t,r);const i=this.persistence.referenceDelegate,u=[];return i&&t.forEach(c=>{u.push(i.markPotentiallyOrphaned(e,c))}),fe.waitFor(u)}removeMatchingKeysForTargetId(e,t){return this.Bi.Pi(t),fe.resolve()}getMatchingKeysForTargetId(e,t){const r=this.Bi.Vi(t);return fe.resolve(r)}containsKey(e,t){return fe.resolve(this.Bi.containsKey(t))}}class gP{constructor(e,t){this.Ui={},this.overlays={},this.es=new ss(0),this.ns=!1,this.ns=!0,this.referenceDelegate=e(this),this.fs=new pP(this),this.indexManager=new zk,this.ds=new hP(r=>this.referenceDelegate.qi(r)),this.M=new Rx(t),this._s=new lP(this.M)}start(){return Promise.resolve()}shutdown(){return this.ns=!1,Promise.resolve()}get started(){return this.ns}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new cP,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.Ui[e.toKey()];return r||(r=new dP(t,this.referenceDelegate),this.Ui[e.toKey()]=r),r}getTargetCache(){return this.fs}getRemoteDocumentCache(){return this.ds}getBundleCache(){return this._s}runTransaction(e,t,r){ke("MemoryPersistence","Starting transaction:",e);const i=new mP(this.es.next());return this.referenceDelegate.Ki(),r(i).next(u=>this.referenceDelegate.Gi(i).next(()=>u)).toPromise().then(u=>(i.raiseOnCommittedEvent(),u))}Qi(e,t){return fe.or(Object.values(this.Ui).map(r=>()=>r.containsKey(e,t)))}}class mP extends Sx{constructor(e){super(),this.currentSequenceNumber=e}}class fA{constructor(e){this.persistence=e,this.ji=new hA,this.Wi=null}static zi(e){return new fA(e)}get Hi(){if(this.Wi)return this.Wi;throw at()}addReference(e,t,r){return this.ji.addReference(r,t),this.Hi.delete(r.toString()),fe.resolve()}removeReference(e,t,r){return this.ji.removeReference(r,t),this.Hi.add(r.toString()),fe.resolve()}markPotentiallyOrphaned(e,t){return this.Hi.add(t.toString()),fe.resolve()}removeTarget(e,t){this.ji.Pi(t.targetId).forEach(i=>this.Hi.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(u=>this.Hi.add(u.toString()))}).next(()=>r.removeTargetData(e,t))}Ki(){this.Wi=new Set}Gi(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return fe.forEach(this.Hi,r=>{const i=Ge.fromPath(r);return this.Ji(e,i).next(u=>{u||t.removeEntry(i,Dt.min())})}).next(()=>(this.Wi=null,t.apply(e)))}updateLimboDocument(e,t){return this.Ji(e,t).next(r=>{r?this.Hi.delete(t.toString()):this.Hi.add(t.toString())})}qi(e){return 0}Ji(e,t){return fe.or([()=>fe.resolve(this.ji.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Qi(e,t)])}}function sR(n,e){return`firestore_clients_${n}_${e}`}function oR(n,e,t){let r=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function pA(n,e){return`firestore_targets_${n}_${e}`}class AD{constructor(e,t,r,i){this.user=e,this.batchId=t,this.state=r,this.error=i}static Yi(e,t,r){const i=JSON.parse(r);let u,c="object"==typeof i&&-1!==["pending","acknowledged","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return c&&i.error&&(c="string"==typeof i.error.message&&"string"==typeof i.error.code,c&&(u=new Re(i.error.code,i.error.message))),c?new AD(e,t,i.state,u):(mr("SharedClientState",`Failed to parse mutation state for ID '${t}': ${r}`),null)}Xi(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class z0{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static Yi(e,t){const r=JSON.parse(t);let i,u="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return u&&r.error&&(u="string"==typeof r.error.message&&"string"==typeof r.error.code,u&&(i=new Re(r.error.code,r.error.message))),u?new z0(e,r.state,i):(mr("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}Xi(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class SD{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Yi(e,t){const r=JSON.parse(t);let i="object"==typeof r&&r.activeTargetIds instanceof Array,u=l();for(let c=0;i&&c<r.activeTargetIds.length;++c)i=ST(r.activeTargetIds[c]),u=u.add(r.activeTargetIds[c]);return i?new SD(e,u):(mr("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class gA{constructor(e,t){this.clientId=e,this.onlineState=t}static Yi(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new gA(t.clientId,t.onlineState):(mr("SharedClientState",`Failed to parse online state: ${e}`),null)}}class mA{constructor(){this.activeTargetIds=l()}Zi(e){this.activeTargetIds=this.activeTargetIds.add(e)}tr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Xi(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class yA{constructor(e,t,r,i,u){this.window=e,this.Yn=t,this.persistenceKey=r,this.er=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.nr=this.sr.bind(this),this.ir=new sr(Ft),this.started=!1,this.rr=[];const c=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=u,this.ur=sR(this.persistenceKey,this.er),this.ar=`firestore_sequence_number_${this.persistenceKey}`,this.ir=this.ir.insert(this.er,new mA),this.cr=new RegExp(`^firestore_clients_${c}_([^_]*)$`),this.hr=new RegExp(`^firestore_mutations_${c}_(\\d+)(?:_(.*))?$`),this.lr=new RegExp(`^firestore_targets_${c}_(\\d+)$`),this.dr=`firestore_online_state_${this.persistenceKey}`,this._r=function(p){return`firestore_bundle_loaded_v2_${p}`}(this.persistenceKey),this.window.addEventListener("storage",this.nr)}static vt(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,_e.Z)(function*(){const t=yield e.syncEngine.Fs();for(const i of t){if(i===e.er)continue;const u=e.getItem(sR(e.persistenceKey,i));if(u){const c=SD.Yi(i,u);c&&(e.ir=e.ir.insert(c.clientId,c))}}e.wr();const r=e.storage.getItem(e.dr);if(r){const i=e.mr(r);i&&e.gr(i)}for(const i of e.rr)e.sr(i);e.rr=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.ar,JSON.stringify(e))}getAllActiveQueryTargets(){return this.yr(this.ir)}isActiveQueryTarget(e){let t=!1;return this.ir.forEach((r,i)=>{i.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.pr(e,"pending")}updateMutationState(e,t,r){this.pr(e,t,r),this.Ir(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const r=this.storage.getItem(pA(this.persistenceKey,e));if(r){const i=z0.Yi(e,r);i&&(t=i.state)}}return this.Tr.Zi(e),this.wr(),t}removeLocalQueryTarget(e){this.Tr.tr(e),this.wr()}isLocalQueryTarget(e){return this.Tr.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(pA(this.persistenceKey,e))}updateQueryState(e,t,r){this.Er(e,t,r)}handleUserChange(e,t,r){t.forEach(i=>{this.Ir(i)}),this.currentUser=e,r.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(e){this.Ar(e)}notifyBundleLoaded(e){this.Rr(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.nr),this.removeItem(this.ur),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return ke("SharedClientState","READ",e,t),t}setItem(e,t){ke("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){ke("SharedClientState","REMOVE",e),this.storage.removeItem(e)}sr(e){var t=this;const r=e;if(r.storageArea===this.storage){if(ke("SharedClientState","EVENT",r.key,r.newValue),r.key===this.ur)return void mr("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Yn.enqueueRetryable((0,_e.Z)(function*(){if(t.started){if(null!==r.key)if(t.cr.test(r.key)){if(null==r.newValue){const i=t.Pr(r.key);return t.br(i,null)}{const i=t.Vr(r.key,r.newValue);if(i)return t.br(i.clientId,i)}}else if(t.hr.test(r.key)){if(null!==r.newValue){const i=t.vr(r.key,r.newValue);if(i)return t.Sr(i)}}else if(t.lr.test(r.key)){if(null!==r.newValue){const i=t.Dr(r.key,r.newValue);if(i)return t.Cr(i)}}else if(r.key===t.dr){if(null!==r.newValue){const i=t.mr(r.newValue);if(i)return t.gr(i)}}else if(r.key===t.ar){const i=function(u){let c=ss.A;if(null!=u)try{const p=JSON.parse(u);Tt("number"==typeof p),c=p}catch(p){mr("SharedClientState","Failed to read sequence number from WebStorage",p)}return c}(r.newValue);i!==ss.A&&t.sequenceNumberHandler(i)}else if(r.key===t._r){const i=t.Nr(r.newValue);yield Promise.all(i.map(u=>t.syncEngine.kr(u)))}}else t.rr.push(r)}))}}get Tr(){return this.ir.get(this.er)}wr(){this.setItem(this.ur,this.Tr.Xi())}pr(e,t,r){const i=new AD(this.currentUser,e,t,r),u=oR(this.persistenceKey,this.currentUser,e);this.setItem(u,i.Xi())}Ir(e){const t=oR(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Ar(e){this.storage.setItem(this.dr,JSON.stringify({clientId:this.er,onlineState:e}))}Er(e,t,r){const i=pA(this.persistenceKey,e),u=new z0(e,t,r);this.setItem(i,u.Xi())}Rr(e){const t=JSON.stringify(Array.from(e));this.setItem(this._r,t)}Pr(e){const t=this.cr.exec(e);return t?t[1]:null}Vr(e,t){const r=this.Pr(e);return SD.Yi(r,t)}vr(e,t){const r=this.hr.exec(e),i=Number(r[1]);return AD.Yi(new ei(void 0!==r[2]?r[2]:null),i,t)}Dr(e,t){const r=this.lr.exec(e),i=Number(r[1]);return z0.Yi(i,t)}mr(e){return gA.Yi(e)}Nr(e){return JSON.parse(e)}Sr(e){var t=this;return(0,_e.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.Mr(e.batchId,e.state,e.error);ke("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}Cr(e){return this.syncEngine.Or(e.targetId,e.state,e.error)}br(e,t){const r=t?this.ir.insert(e,t):this.ir.remove(e),i=this.yr(this.ir),u=this.yr(r),c=[],p=[];return u.forEach(y=>{i.has(y)||c.push(y)}),i.forEach(y=>{u.has(y)||p.push(y)}),this.syncEngine.Fr(c,p).then(()=>{this.ir=r})}gr(e){this.ir.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}yr(e){let t=l();return e.forEach((r,i)=>{t=t.unionWith(i.activeTargetIds)}),t}}class aR{constructor(){this.$r=new mA,this.Br={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e){return this.$r.Zi(e),this.Br[e]||"not-current"}updateQueryState(e,t,r){this.Br[e]=t}removeLocalQueryTarget(e){this.$r.tr(e)}isLocalQueryTarget(e){return this.$r.activeTargetIds.has(e)}clearQueryState(e){delete this.Br[e]}getAllActiveQueryTargets(){return this.$r.activeTargetIds}isActiveQueryTarget(e){return this.$r.activeTargetIds.has(e)}start(){return this.$r=new mA,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class yP{Lr(e){}shutdown(){}}class uR{constructor(){this.Ur=()=>this.qr(),this.Kr=()=>this.Gr(),this.Qr=[],this.jr()}Lr(e){this.Qr.push(e)}shutdown(){window.removeEventListener("online",this.Ur),window.removeEventListener("offline",this.Kr)}jr(){window.addEventListener("online",this.Ur),window.addEventListener("offline",this.Kr)}qr(){ke("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.Qr)e(0)}Gr(){ke("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.Qr)e(1)}static vt(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}const _P={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"};class vP{constructor(e){this.Wr=e.Wr,this.zr=e.zr}Hr(e){this.Jr=e}Yr(e){this.Xr=e}onMessage(e){this.Zr=e}close(){this.zr()}send(e){this.Wr(e)}eo(){this.Jr()}no(e){this.Xr(e)}so(e){this.Zr(e)}}class EP extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.io=(e.ssl?"https":"http")+"://"+e.host,this.ro="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}oo(e,t,r,i,u){const c=this.uo(e,t);ke("RestConnection","Sending: ",c,r);const p={};return this.ao(p,i,u),this.co(e,c,p,r).then(y=>(ke("RestConnection","Received: ",y),y),y=>{throw Um("RestConnection",`${e} failed with error: `,y,"url: ",c,"request:",r),y})}ho(e,t,r,i,u){return this.oo(e,t,r,i,u)}ao(e,t,r){e["X-Goog-Api-Client"]="gl-js/ fire/"+bc,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((i,u)=>e[u]=i),r&&r.headers.forEach((i,u)=>e[u]=i)}uo(e,t){return`${this.io}/v1/${t}:${_P[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}co(e,t,r,i){return new Promise((u,c)=>{const p=new Gb;p.listenOnce($b.COMPLETE,()=>{try{switch(p.getLastErrorCode()){case dp.NO_ERROR:const b=p.getResponseJson();ke("Connection","XHR received:",JSON.stringify(b)),u(b);break;case dp.TIMEOUT:ke("Connection",'RPC "'+e+'" timed out'),c(new Re(ue.DEADLINE_EXCEEDED,"Request time out"));break;case dp.HTTP_ERROR:const S=p.getStatus();if(ke("Connection",'RPC "'+e+'" failed with status:',S,"response text:",p.getResponseText()),S>0){const M=p.getResponseJson().error;if(M&&M.status&&M.message){const F=function(B){const G=B.toLowerCase().replace(/_/g,"-");return Object.values(ue).indexOf(G)>=0?G:ue.UNKNOWN}(M.status);c(new Re(F,M.message))}else c(new Re(ue.UNKNOWN,"Server responded with status "+p.getStatus()))}else c(new Re(ue.UNAVAILABLE,"Connection failed."));break;default:at()}}finally{ke("Connection",'RPC "'+e+'" completed.')}});const y=JSON.stringify(i);p.send(t,"POST",y,r,15)})}lo(e,t,r){const i=[this.io,"/","google.firestore.v1.Firestore","/",e,"/channel"],u=DT(),c=jb(),p={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(p.xmlHttpFactory=new Hb({})),this.ao(p.initMessageHeaders,t,r),(0,qt.uI)()||(0,qt.b$)()||(0,qt.d)()||(0,qt.w1)()||(0,qt.Mn)()||(0,qt.ru)()||(p.httpHeadersOverwriteParam="$httpHeaders");const y=i.join("");ke("Connection","Creating WebChannel: "+y,p);const b=u.createWebChannel(y,p);let S=!1,M=!1;const F=new vP({Wr:G=>{M?ke("Connection","Not sending because WebChannel is closed:",G):(S||(ke("Connection","Opening WebChannel transport."),b.open(),S=!0),ke("Connection","WebChannel sending:",G),b.send(G))},zr:()=>b.close()}),B=(G,te,Ee)=>{G.listen(te,Ze=>{try{Ee(Ze)}catch(Ye){setTimeout(()=>{throw Ye},0)}})};return B(b,Bm.EventType.OPEN,()=>{M||ke("Connection","WebChannel transport opened.")}),B(b,Bm.EventType.CLOSE,()=>{M||(M=!0,ke("Connection","WebChannel transport closed"),F.no())}),B(b,Bm.EventType.ERROR,G=>{M||(M=!0,Um("Connection","WebChannel transport errored:",G),F.no(new Re(ue.UNAVAILABLE,"The operation could not be completed")))}),B(b,Bm.EventType.MESSAGE,G=>{var te;if(!M){const Ee=G.data[0];Tt(!!Ee);const Ze=Ee,Ye=Ze.error||(null===(te=Ze[0])||void 0===te?void 0:te.error);if(Ye){ke("Connection","WebChannel received error:",Ye);const je=Ye.status;let et=function(Ct){const $t=Zn[Ct];if(void 0!==$t)return qT($t)}(je),_t=Ye.message;void 0===et&&(et=ue.INTERNAL,_t="Unknown error status: "+je+" with message "+Ye.message),M=!0,F.no(new Re(et,_t)),b.close()}else ke("Connection","WebChannel received:",Ee),F.so(Ee)}}),B(c,CT.STAT_EVENT,G=>{G.stat===f0.PROXY?ke("Connection","Detected buffering proxy"):G.stat===f0.NOPROXY&&ke("Connection","Detected no buffering proxy")}),setTimeout(()=>{F.eo()},0),F}}function lR(){return"undefined"!=typeof window?window:null}function MD(){return"undefined"!=typeof document?document:null}function W0(n){return new Pe(n,!0)}class _A{constructor(e,t,r=1e3,i=1.5,u=6e4){this.Yn=e,this.timerId=t,this.fo=r,this._o=i,this.wo=u,this.mo=0,this.yo=null,this.po=Date.now(),this.reset()}reset(){this.mo=0}Io(){this.mo=this.wo}To(e){this.cancel();const t=Math.floor(this.mo+this.Eo()),r=Math.max(0,Date.now()-this.po),i=Math.max(0,t-r);i>0&&ke("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.mo} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.yo=this.Yn.enqueueAfterDelay(this.timerId,i,()=>(this.po=Date.now(),e())),this.mo*=this._o,this.mo<this.fo&&(this.mo=this.fo),this.mo>this.wo&&(this.mo=this.wo)}Ao(){null!==this.yo&&(this.yo.skipDelay(),this.yo=null)}cancel(){null!==this.yo&&(this.yo.cancel(),this.yo=null)}Eo(){return(Math.random()-.5)*this.mo}}class cR{constructor(e,t,r,i,u,c,p,y){this.Yn=e,this.Ro=r,this.Po=i,this.bo=u,this.authCredentialsProvider=c,this.appCheckCredentialsProvider=p,this.listener=y,this.state=0,this.Vo=0,this.vo=null,this.So=null,this.stream=null,this.Do=new _A(e,t)}Co(){return 1===this.state||5===this.state||this.xo()}xo(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.No()}stop(){var e=this;return(0,_e.Z)(function*(){e.Co()&&(yield e.close(0))})()}ko(){this.state=0,this.Do.reset()}Mo(){this.xo()&&null===this.vo&&(this.vo=this.Yn.enqueueAfterDelay(this.Ro,6e4,()=>this.Oo()))}Fo(e){this.$o(),this.stream.send(e)}Oo(){var e=this;return(0,_e.Z)(function*(){if(e.xo())return e.close(0)})()}$o(){this.vo&&(this.vo.cancel(),this.vo=null)}Bo(){this.So&&(this.So.cancel(),this.So=null)}close(e,t){var r=this;return(0,_e.Z)(function*(){r.$o(),r.Bo(),r.Do.cancel(),r.Vo++,4!==e?r.Do.reset():t&&t.code===ue.RESOURCE_EXHAUSTED?(mr(t.toString()),mr("Using maximum backoff delay to prevent overloading the backend."),r.Do.Io()):t&&t.code===ue.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.Lo(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.Yr(t)})()}Lo(){}auth(){this.state=1;const e=this.Uo(this.Vo),t=this.Vo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Vo===t&&this.qo(r,i)},r=>{e(()=>{const i=new Re(ue.UNKNOWN,"Fetching auth token failed: "+r.message);return this.Ko(i)})})}qo(e,t){const r=this.Uo(this.Vo);this.stream=this.Go(e,t),this.stream.Hr(()=>{r(()=>(this.state=2,this.So=this.Yn.enqueueAfterDelay(this.Po,1e4,()=>(this.xo()&&(this.state=3),Promise.resolve())),this.listener.Hr()))}),this.stream.Yr(i=>{r(()=>this.Ko(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}No(){var e=this;this.state=5,this.Do.To((0,_e.Z)(function*(){e.state=0,e.start()}))}Ko(e){return ke("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Uo(e){return t=>{this.Yn.enqueueAndForget(()=>this.Vo===e?t():(ke("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class wP extends cR{constructor(e,t,r,i,u,c){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,c),this.M=u}Go(e,t){return this.bo.lo("Listen",e,t)}onMessage(e){this.Do.reset();const t=function V0(n,e){let t;if("targetChange"in e){const r="NO_CHANGE"===(y=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===y?1:"REMOVE"===y?2:"CURRENT"===y?3:"RESET"===y?4:at(),i=e.targetChange.targetIds||[],u=function(y,b){return y.N?(Tt(void 0===b||"string"==typeof b),_r.fromBase64String(b||"")):(Tt(void 0===b||b instanceof Uint8Array),_r.fromUint8Array(b||new Uint8Array))}(n,e.targetChange.resumeToken),c=e.targetChange.cause,p=c&&function(y){const b=void 0===y.code?ue.UNKNOWN:qT(y.code);return new Re(b,y.message||"")}(c);t=new D(r,i,u,p||null)}else if("documentChange"in e){const r=e.documentChange,i=Ii(n,r.document.name),u=Je(r.document.updateTime),c=new Di({mapValue:{fields:r.document.fields}}),p=kn.newFoundDocument(i,u,c);t=new v(r.targetIds||[],r.removedTargetIds||[],p.key,p)}else if("documentDelete"in e){const r=e.documentDelete,i=Ii(n,r.document),u=r.readTime?Je(r.readTime):Dt.min(),c=kn.newNoDocument(i,u);t=new v([],r.removedTargetIds||[],c.key,c)}else if("documentRemove"in e){const r=e.documentRemove,i=Ii(n,r.document);t=new v([],r.removedTargetIds||[],i,null)}else{if(!("filter"in e))return at();{const r=e.filter,u=new gD(r.count||0);t=new w(r.targetId,u)}}var y;return t}(this.M,e),r=function(i){if(!("targetChange"in i))return Dt.min();const u=i.targetChange;return u.targetIds&&u.targetIds.length?Dt.min():u.readTime?Je(u.readTime):Dt.min()}(e);return this.listener.Qo(t,r)}jo(e){const t={};t.database=Oc(this.M),t.addTarget=function(i,u){let c;const p=u.target;return c=Km(p)?{documents:yx(i,p)}:{query:_x(i,p)},c.targetId=u.targetId,u.resumeToken.approximateByteSize()>0?c.resumeToken=st(i,u.resumeToken):u.snapshotVersion.compareTo(Dt.min())>0&&(c.readTime=Ve(i,u.snapshotVersion.toTimestamp())),c}(this.M,e);const r=function fk(n,e){const t=function(r,i){switch(i){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return at()}}(0,e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);r&&(t.labels=r),this.Fo(t)}Wo(e){const t={};t.database=Oc(this.M),t.removeTarget=e,this.Fo(t)}}class bP extends cR{constructor(e,t,r,i,u,c){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,c),this.M=u,this.zo=!1}get Ho(){return this.zo}start(){this.zo=!1,this.lastStreamToken=void 0,super.start()}Lo(){this.zo&&this.Jo([])}Go(e,t){return this.bo.lo("Write",e,t)}onMessage(e){if(Tt(!!e.streamToken),this.lastStreamToken=e.streamToken,this.zo){this.Do.reset();const t=function hk(n,e){return n&&n.length>0?(Tt(void 0!==e),n.map(t=>function(r,i){let u=Je(r.updateTime?r.updateTime:i);return u.isEqual(Dt.min())&&(u=Je(i)),new fx(u,r.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),r=Je(e.commitTime);return this.listener.Yo(r,t)}return Tt(!e.writeResults||0===e.writeResults.length),this.zo=!0,this.listener.Xo()}Zo(){const e={};e.database=Oc(this.M),this.Fo(e)}Jo(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>kc(this.M,r))};this.Fo(t)}}class DP extends class{}{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.bo=r,this.M=i,this.tu=!1}eu(){if(this.tu)throw new Re(ue.FAILED_PRECONDITION,"The client has already been terminated.")}oo(e,t,r){return this.eu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,u])=>this.bo.oo(e,t,r,i,u)).catch(i=>{throw"FirebaseError"===i.name?(i.code===ue.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new Re(ue.UNKNOWN,i.toString())})}ho(e,t,r){return this.eu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,u])=>this.bo.ho(e,t,r,i,u)).catch(i=>{throw"FirebaseError"===i.name?(i.code===ue.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new Re(ue.UNKNOWN,i.toString())})}terminate(){this.tu=!0}}class CP{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.nu=0,this.su=null,this.iu=!0}ru(){0===this.nu&&(this.ou("Unknown"),this.su=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.su=null,this.uu("Backend didn't respond within 10 seconds."),this.ou("Offline"),Promise.resolve())))}au(e){"Online"===this.state?this.ou("Unknown"):(this.nu++,this.nu>=1&&(this.cu(),this.uu(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ou("Offline")))}set(e){this.cu(),this.nu=0,"Online"===e&&(this.iu=!1),this.ou(e)}ou(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}uu(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.iu?(mr(t),this.iu=!1):ke("OnlineStateTracker",t)}cu(){null!==this.su&&(this.su.cancel(),this.su=null)}}class IP{constructor(e,t,r,i,u){var c=this;this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.hu=[],this.lu=new Map,this.fu=new Set,this.du=[],this._u=u,this._u.Lr(p=>{r.enqueueAndForget((0,_e.Z)(function*(){var y;Sh(c)&&(ke("RemoteStore","Restarting streams for network reachability change."),yield(y=(0,_e.Z)(function*(b){const S=ze(b);S.fu.add(4),yield vy(S),S.wu.set("Unknown"),S.fu.delete(4),yield K0(S)}),function(b){return y.apply(this,arguments)})(c))}))}),this.wu=new CP(r,i)}}function K0(n){return vA.apply(this,arguments)}function vA(){return vA=(0,_e.Z)(function*(n){if(Sh(n))for(const e of n.du)yield e(!0)}),vA.apply(this,arguments)}function vy(n){return EA.apply(this,arguments)}function EA(){return EA=(0,_e.Z)(function*(n){for(const e of n.du)yield e(!1)}),EA.apply(this,arguments)}function xD(n,e){const t=ze(n);t.lu.has(e.targetId)||(t.lu.set(e.targetId,e),DA(t)?bA(t):wy(t).xo()&&wA(t,e))}function Z0(n,e){const t=ze(n),r=wy(t);t.lu.delete(e),r.xo()&&dR(t,e),0===t.lu.size&&(r.xo()?r.Mo():Sh(t)&&t.wu.set("Unknown"))}function wA(n,e){n.mu.Z(e.targetId),wy(n).jo(e)}function dR(n,e){n.mu.Z(e),wy(n).Wo(e)}function bA(n){n.mu=new x({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),Et:e=>n.lu.get(e)||null}),wy(n).start(),n.wu.ru()}function DA(n){return Sh(n)&&!wy(n).Co()&&n.lu.size>0}function Sh(n){return 0===ze(n).fu.size}function hR(n){n.mu=void 0}function TP(n){return CA.apply(this,arguments)}function CA(){return CA=(0,_e.Z)(function*(n){n.lu.forEach((e,t)=>{wA(n,e)})}),CA.apply(this,arguments)}function AP(n,e){return IA.apply(this,arguments)}function IA(){return IA=(0,_e.Z)(function*(n,e){hR(n),DA(n)?(n.wu.au(e),bA(n)):n.wu.set("Unknown")}),IA.apply(this,arguments)}function SP(n,e,t){return TA.apply(this,arguments)}function TA(){return TA=(0,_e.Z)(function*(n,e,t){if(n.wu.set("Online"),e instanceof D&&2===e.state&&e.cause)try{yield(r=(0,_e.Z)(function*(i,u){const c=u.cause;for(const p of u.targetIds)i.lu.has(p)&&(yield i.remoteSyncer.rejectListen(p,c),i.lu.delete(p),i.mu.removeTarget(p))}),function(i,u){return r.apply(this,arguments)})(n,e)}catch(r){ke("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield RD(n,r)}else if(e instanceof v?n.mu.ut(e):e instanceof w?n.mu._t(e):n.mu.ht(e),!t.isEqual(Dt.min()))try{const r=yield eR(n.localStore);t.compareTo(r)>=0&&(yield function(i,u){const c=i.mu.yt(u);return c.targetChanges.forEach((p,y)=>{if(p.resumeToken.approximateByteSize()>0){const b=i.lu.get(y);b&&i.lu.set(y,b.withResumeToken(p.resumeToken,u))}}),c.targetMismatches.forEach(p=>{const y=i.lu.get(p);if(!y)return;i.lu.set(p,y.withResumeToken(_r.EMPTY_BYTE_STRING,y.snapshotVersion)),dR(i,p);const b=new Ch(y.target,p,1,y.sequenceNumber);wA(i,b)}),i.remoteSyncer.applyRemoteEvent(c)}(n,t))}catch(r){ke("RemoteStore","Failed to raise snapshot:",r),yield RD(n,r)}var r}),TA.apply(this,arguments)}function RD(n,e,t){return AA.apply(this,arguments)}function AA(){return AA=(0,_e.Z)(function*(n,e,t){if(!Cp(e))throw e;n.fu.add(1),yield vy(n),n.wu.set("Offline"),t||(t=()=>eR(n.localStore)),n.asyncQueue.enqueueRetryable((0,_e.Z)(function*(){ke("RemoteStore","Retrying IndexedDB access"),yield t(),n.fu.delete(1),yield K0(n)}))}),AA.apply(this,arguments)}function fR(n,e){return e().catch(t=>RD(n,t,e))}function Ey(n){return SA.apply(this,arguments)}function SA(){return SA=(0,_e.Z)(function*(n){const e=ze(n),t=Mh(e);let r=e.hu.length>0?e.hu[e.hu.length-1].batchId:-1;for(;MP(e);)try{const i=yield oP(e.localStore,r);if(null===i){0===e.hu.length&&t.Mo();break}r=i.batchId,xP(e,i)}catch(i){yield RD(e,i)}pR(e)&&gR(e)}),SA.apply(this,arguments)}function MP(n){return Sh(n)&&n.hu.length<10}function xP(n,e){n.hu.push(e);const t=Mh(n);t.xo()&&t.Ho&&t.Jo(e.mutations)}function pR(n){return Sh(n)&&!Mh(n).Co()&&n.hu.length>0}function gR(n){Mh(n).start()}function RP(n){return MA.apply(this,arguments)}function MA(){return MA=(0,_e.Z)(function*(n){Mh(n).Zo()}),MA.apply(this,arguments)}function NP(n){return xA.apply(this,arguments)}function xA(){return xA=(0,_e.Z)(function*(n){const e=Mh(n);for(const t of n.hu)e.Jo(t.mutations)}),xA.apply(this,arguments)}function OP(n,e,t){return RA.apply(this,arguments)}function RA(){return RA=(0,_e.Z)(function*(n,e,t){const r=n.hu.shift(),i=YT.from(r,e,t);yield fR(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),yield Ey(n)}),RA.apply(this,arguments)}function kP(n,e){return NA.apply(this,arguments)}function NA(){return NA=(0,_e.Z)(function*(n,e){var t;e&&Mh(n).Ho&&(yield(t=(0,_e.Z)(function*(r,i){if(mD(u=i.code)&&u!==ue.ABORTED){const c=r.hu.shift();Mh(r).ko(),yield fR(r,()=>r.remoteSyncer.rejectFailedWrite(c.batchId,i)),yield Ey(r)}var u}),function(r,i){return t.apply(this,arguments)})(n,e)),pR(n)&&gR(n)}),NA.apply(this,arguments)}function mR(n,e){return OA.apply(this,arguments)}function OA(){return OA=(0,_e.Z)(function*(n,e){const t=ze(n);t.asyncQueue.verifyOperationInProgress(),ke("RemoteStore","RemoteStore received new credentials");const r=Sh(t);t.fu.add(3),yield vy(t),r&&t.wu.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.fu.delete(3),yield K0(t)}),OA.apply(this,arguments)}function kA(n,e){return PA.apply(this,arguments)}function PA(){return PA=(0,_e.Z)(function*(n,e){const t=ze(n);e?(t.fu.delete(2),yield K0(t)):e||(t.fu.add(2),yield vy(t),t.wu.set("Unknown"))}),PA.apply(this,arguments)}function wy(n){return n.gu||(n.gu=function(e,t,r){const i=ze(e);return i.eu(),new wP(t,i.bo,i.authCredentials,i.appCheckCredentials,i.M,r)}(n.datastore,n.asyncQueue,{Hr:TP.bind(null,n),Yr:AP.bind(null,n),Qo:SP.bind(null,n)}),n.du.push(function(){var e=(0,_e.Z)(function*(t){t?(n.gu.ko(),DA(n)?bA(n):n.wu.set("Unknown")):(yield n.gu.stop(),hR(n))});return function(t){return e.apply(this,arguments)}}())),n.gu}function Mh(n){return n.yu||(n.yu=function(e,t,r){const i=ze(e);return i.eu(),new bP(t,i.bo,i.authCredentials,i.appCheckCredentials,i.M,r)}(n.datastore,n.asyncQueue,{Hr:RP.bind(null,n),Yr:kP.bind(null,n),Xo:NP.bind(null,n),Yo:OP.bind(null,n)}),n.du.push(function(){var e=(0,_e.Z)(function*(t){t?(n.yu.ko(),yield Ey(n)):(yield n.yu.stop(),n.hu.length>0&&(ke("RemoteStore",`Stopping write stream with ${n.hu.length} pending writes`),n.hu=[]))});return function(t){return e.apply(this,arguments)}}())),n.yu}class FA{constructor(e,t,r,i,u){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=u,this.deferred=new yr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(c=>{})}static createAndSchedule(e,t,r,i,u){const c=Date.now()+r,p=new FA(e,t,c,i,u);return p.start(r),p}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Re(ue.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function by(n,e){if(mr("AsyncQueue",`${e}: ${n}`),Cp(n))return new Re(ue.UNAVAILABLE,`${e}: ${n}`);throw n}class Dy{constructor(e){this.comparator=e?(t,r)=>e(t,r)||Ge.comparator(t.key,r.key):(t,r)=>Ge.comparator(t.key,r.key),this.keyedMap=yD(),this.sortedSet=new sr(this.comparator)}static emptySet(e){return new Dy(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Dy)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const i=t.getNext().key,u=r.getNext().key;if(!i.isEqual(u))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const r=new Dy;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class yR{constructor(){this.pu=new sr(Ge.comparator)}track(e){const t=e.doc.key,r=this.pu.get(t);r?0!==e.type&&3===r.type?this.pu=this.pu.insert(t,e):3===e.type&&1!==r.type?this.pu=this.pu.insert(t,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.pu=this.pu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.pu=this.pu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.pu=this.pu.remove(t):1===e.type&&2===r.type?this.pu=this.pu.insert(t,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.pu=this.pu.insert(t,{type:2,doc:e.doc}):at():this.pu=this.pu.insert(t,e)}Iu(){const e=[];return this.pu.inorderTraversal((t,r)=>{e.push(r)}),e}}class Cy{constructor(e,t,r,i,u,c,p,y){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=u,this.fromCache=c,this.syncStateChanged=p,this.excludesMetadataChanges=y}static fromInitialDocuments(e,t,r,i){const u=[];return t.forEach(c=>{u.push({type:0,doc:c})}),new Cy(e,t,Dy.emptySet(t),u,r,i,!0,!1)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Xm(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}}class PP{constructor(){this.Tu=void 0,this.listeners=[]}}class FP{constructor(){this.queries=new Nc(e=>M0(e),Xm),this.onlineState="Unknown",this.Eu=new Set}}function LA(n,e){return VA.apply(this,arguments)}function VA(){return VA=(0,_e.Z)(function*(n,e){const t=ze(n),r=e.query;let i=!1,u=t.queries.get(r);if(u||(i=!0,u=new PP),i)try{u.Tu=yield t.onListen(r)}catch(c){const p=by(c,`Initialization of query '${x0(e.query)}' failed`);return void e.onError(p)}t.queries.set(r,u),u.listeners.push(e),e.Au(t.onlineState),u.Tu&&e.Ru(u.Tu)&&jA(t)}),VA.apply(this,arguments)}function BA(n,e){return UA.apply(this,arguments)}function UA(){return UA=(0,_e.Z)(function*(n,e){const t=ze(n),r=e.query;let i=!1;const u=t.queries.get(r);if(u){const c=u.listeners.indexOf(e);c>=0&&(u.listeners.splice(c,1),i=0===u.listeners.length)}if(i)return t.queries.delete(r),t.onUnlisten(r)}),UA.apply(this,arguments)}function LP(n,e){const t=ze(n);let r=!1;for(const i of e){const c=t.queries.get(i.query);if(c){for(const p of c.listeners)p.Ru(i)&&(r=!0);c.Tu=i}}r&&jA(t)}function VP(n,e,t){const r=ze(n),i=r.queries.get(e);if(i)for(const u of i.listeners)u.onError(t);r.queries.delete(e)}function jA(n){n.Eu.forEach(e=>{e.next()})}class $A{constructor(e,t,r){this.query=e,this.Pu=t,this.bu=!1,this.Vu=null,this.onlineState="Unknown",this.options=r||{}}Ru(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)3!==i.type&&r.push(i);e=new Cy(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0)}let t=!1;return this.bu?this.vu(e)&&(this.Pu.next(e),t=!0):this.Su(e,this.onlineState)&&(this.Du(e),t=!0),this.Vu=e,t}onError(e){this.Pu.error(e)}Au(e){this.onlineState=e;let t=!1;return this.Vu&&!this.bu&&this.Su(this.Vu,e)&&(this.Du(this.Vu),t=!0),t}Su(e,t){return!e.fromCache||!(this.options.Cu&&"Offline"!==t||e.docs.isEmpty()&&"Offline"!==t)}vu(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Vu&&this.Vu.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}Du(e){e=Cy.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache),this.bu=!0,this.Pu.next(e)}}class BP{constructor(e,t){this.payload=e,this.byteLength=t}xu(){return"metadata"in this.payload}}class _R{constructor(e){this.M=e}fi(e){return Ii(this.M,e)}di(e){return e.metadata.exists?cy(this.M,e.document,!1):kn.newNoDocument(this.fi(e.metadata.name),this._i(e.metadata.readTime))}_i(e){return Je(e)}}class UP{constructor(e,t,r){this.Nu=e,this.localStore=t,this.M=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=vR(e)}ku(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.payload.namedQuery)this.queries.push(e.payload.namedQuery);else if(e.payload.documentMetadata){this.documents.push({metadata:e.payload.documentMetadata}),e.payload.documentMetadata.exists||++t;const r=tn.fromString(e.payload.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.payload.document&&(this.documents[this.documents.length-1].document=e.payload.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}Mu(e){const t=new Map,r=new _R(this.M);for(const i of e)if(i.metadata.queries){const u=r.fi(i.metadata.name);for(const c of i.metadata.queries){const p=(t.get(c)||o()).add(u);t.set(c,p)}}return t}complete(){var e=this;return(0,_e.Z)(function*(){const t=yield function aP(n,e,t,r){return cA.apply(this,arguments)}(e.localStore,new _R(e.M),e.documents,e.Nu.id),r=e.Mu(e.documents);for(const i of e.queries)yield uP(e.localStore,i,r.get(i.name));return e.progress.taskState="Success",{progress:e.progress,Ou:e.collectionGroups,Fu:t}})()}}function vR(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class ER{constructor(e){this.key=e}}class wR{constructor(e){this.key=e}}class bR{constructor(e,t){this.query=e,this.$u=t,this.Bu=null,this.current=!1,this.Lu=o(),this.mutatedKeys=o(),this.Uu=VT(e),this.qu=new Dy(this.Uu)}get Ku(){return this.$u}Gu(e,t){const r=t?t.Qu:new yR,i=t?t.qu:this.qu;let u=t?t.mutatedKeys:this.mutatedKeys,c=i,p=!1;const y=Eh(this.query)&&i.size===this.query.limit?i.last():null,b=Ep(this.query)&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((S,M)=>{const F=i.get(S),B=R0(this.query,M)?M:null,G=!!F&&this.mutatedKeys.has(F.key),te=!!B&&(B.hasLocalMutations||this.mutatedKeys.has(B.key)&&B.hasCommittedMutations);let Ee=!1;F&&B?F.data.isEqual(B.data)?G!==te&&(r.track({type:3,doc:B}),Ee=!0):this.ju(F,B)||(r.track({type:2,doc:B}),Ee=!0,(y&&this.Uu(B,y)>0||b&&this.Uu(B,b)<0)&&(p=!0)):!F&&B?(r.track({type:0,doc:B}),Ee=!0):F&&!B&&(r.track({type:1,doc:F}),Ee=!0,(y||b)&&(p=!0)),Ee&&(B?(c=c.add(B),u=te?u.add(S):u.delete(S)):(c=c.delete(S),u=u.delete(S)))}),Eh(this.query)||Ep(this.query))for(;c.size>this.query.limit;){const S=Eh(this.query)?c.last():c.first();c=c.delete(S.key),u=u.delete(S.key),r.track({type:1,doc:S})}return{qu:c,Qu:r,ni:p,mutatedKeys:u}}ju(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r){const i=this.qu;this.qu=e.qu,this.mutatedKeys=e.mutatedKeys;const u=e.Qu.Iu();u.sort((b,S)=>function(M,F){const B=G=>{switch(G){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return at()}};return B(M)-B(F)}(b.type,S.type)||this.Uu(b.doc,S.doc)),this.Wu(r);const c=t?this.zu():[],p=0===this.Lu.size&&this.current?1:0,y=p!==this.Bu;return this.Bu=p,0!==u.length||y?{snapshot:new Cy(this.query,e.qu,i,u,e.mutatedKeys,0===p,y,!1),Hu:c}:{Hu:c}}Au(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({qu:this.qu,Qu:new yR,mutatedKeys:this.mutatedKeys,ni:!1},!1)):{Hu:[]}}Ju(e){return!this.$u.has(e)&&!!this.qu.has(e)&&!this.qu.get(e).hasLocalMutations}Wu(e){e&&(e.addedDocuments.forEach(t=>this.$u=this.$u.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.$u=this.$u.delete(t)),this.current=e.current)}zu(){if(!this.current)return[];const e=this.Lu;this.Lu=o(),this.qu.forEach(r=>{this.Ju(r.key)&&(this.Lu=this.Lu.add(r.key))});const t=[];return e.forEach(r=>{this.Lu.has(r)||t.push(new wR(r))}),this.Lu.forEach(r=>{e.has(r)||t.push(new ER(r))}),t}Yu(e){this.$u=e.li,this.Lu=o();const t=this.Gu(e.documents);return this.applyChanges(t,!0)}Xu(){return Cy.fromInitialDocuments(this.query,this.qu,this.mutatedKeys,0===this.Bu)}}class jP{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class $P{constructor(e){this.key=e,this.Zu=!1}}class HP{constructor(e,t,r,i,u,c){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=u,this.maxConcurrentLimboResolutions=c,this.ta={},this.ea=new Nc(p=>M0(p),Xm),this.na=new Map,this.sa=new Set,this.ia=new sr(Ge.comparator),this.ra=new Map,this.oa=new hA,this.ua={},this.aa=new Map,this.ca=xp.yn(),this.onlineState="Unknown",this.ha=void 0}get isPrimaryClient(){return!0===this.ha}}function GP(n,e){return HA.apply(this,arguments)}function HA(){return HA=(0,_e.Z)(function*(n,e){const t=hS(n);let r,i;const u=t.ea.get(e);if(u)r=u.targetId,t.sharedClientState.addLocalQueryTarget(r),i=u.view.Xu();else{const c=yield yy(t.localStore,oo(e));t.isPrimaryClient&&xD(t.remoteStore,c);const p=t.sharedClientState.addLocalQueryTarget(c.targetId);r=c.targetId,i=yield GA(t,e,r,"current"===p)}return i}),HA.apply(this,arguments)}function GA(n,e,t,r){return qA.apply(this,arguments)}function qA(){return qA=(0,_e.Z)(function*(n,e,t,r){n.la=(S,M,F)=>{return(B=(0,_e.Z)(function*(G,te,Ee,Ze){let Ye=te.view.Gu(Ee);Ye.ni&&(Ye=yield TD(G.localStore,te.query,!1).then(({documents:_t})=>te.view.Gu(_t,Ye)));const je=Ze&&Ze.targetChanges.get(te.targetId),et=te.view.applyChanges(Ye,G.isPrimaryClient,je);return tS(G,te.targetId,et.Hu),et.snapshot}),function(G,te,Ee,Ze){return B.apply(this,arguments)})(n,S,M,F);var B};const i=yield TD(n.localStore,e,!0),u=new bR(e,i.li),c=u.Gu(i.documents),p=g.createSynthesizedTargetChangeForCurrentChange(t,r&&"Offline"!==n.onlineState),y=u.applyChanges(c,n.isPrimaryClient,p);tS(n,t,y.Hu);const b=new jP(e,t,u);return n.ea.set(e,b),n.na.has(t)?n.na.get(t).push(e):n.na.set(t,[e]),y.snapshot}),qA.apply(this,arguments)}function qP(n,e){return zA.apply(this,arguments)}function zA(){return zA=(0,_e.Z)(function*(n,e){const t=ze(n),r=t.ea.get(e),i=t.na.get(r.targetId);if(i.length>1)return t.na.set(r.targetId,i.filter(u=>!Xm(u,e))),void t.ea.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(r.targetId),t.sharedClientState.isActiveQueryTarget(r.targetId)||(yield _y(t.localStore,r.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(r.targetId),Z0(t.remoteStore,r.targetId),Iy(t,r.targetId)}).catch(Rp))):(Iy(t,r.targetId),yield _y(t.localStore,r.targetId,!0))}),zA.apply(this,arguments)}function WA(){return WA=(0,_e.Z)(function*(n,e,t){const r=fS(n);try{const i=yield function(u,c){const p=ze(u),y=ir.now(),b=c.reduce((M,F)=>M.add(F.key),o());let S;return p.persistence.runTransaction("Locally write mutations","readwrite",M=>p.ci.Ks(M,b).next(F=>{S=F;const B=[];for(const G of c){const te=GT(G,S.get(G.key));null!=te&&B.push(new tl(G.key,te,nD(te.value.mapValue),Or.exists(!0)))}return p.Bs.addMutationBatch(M,y,B,c)})).then(M=>(M.applyToLocalDocumentSet(S),{batchId:M.batchId,changes:S}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(u,c,p){let y=u.ua[u.currentUser.toKey()];y||(y=new sr(Ft)),y=y.insert(c,p),u.ua[u.currentUser.toKey()]=y}(r,i.batchId,t),yield Pc(r,i.changes),yield Ey(r.remoteStore)}catch(i){const u=by(i,"Failed to persist write");t.reject(u)}}),WA.apply(this,arguments)}function DR(n,e){return KA.apply(this,arguments)}function KA(){return KA=(0,_e.Z)(function*(n,e){const t=ze(n);try{const r=yield sP(t.localStore,e);e.targetChanges.forEach((i,u)=>{const c=t.ra.get(u);c&&(Tt(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?c.Zu=!0:i.modifiedDocuments.size>0?Tt(c.Zu):i.removedDocuments.size>0&&(Tt(c.Zu),c.Zu=!1))}),yield Pc(t,r,e)}catch(r){yield Rp(r)}}),KA.apply(this,arguments)}function CR(n,e,t){const r=ze(n);if(r.isPrimaryClient&&0===t||!r.isPrimaryClient&&1===t){const i=[];r.ea.forEach((u,c)=>{const p=c.view.Au(e);p.snapshot&&i.push(p.snapshot)}),function(u,c){const p=ze(u);p.onlineState=c;let y=!1;p.queries.forEach((b,S)=>{for(const M of S.listeners)M.Au(c)&&(y=!0)}),y&&jA(p)}(r.eventManager,e),i.length&&r.ta.Qo(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function WP(n,e,t){return ZA.apply(this,arguments)}function ZA(){return ZA=(0,_e.Z)(function*(n,e,t){const r=ze(n);r.sharedClientState.updateQueryState(e,"rejected",t);const i=r.ra.get(e),u=i&&i.key;if(u){let c=new sr(Ge.comparator);c=c.insert(u,kn.newNoDocument(u,Dt.min()));const p=o().add(u),y=new d(Dt.min(),new Map,new Pn(Ft),c,p);yield DR(r,y),r.ia=r.ia.remove(u),r.ra.delete(e),nS(r)}else yield _y(r.localStore,e,!1).then(()=>Iy(r,e,t)).catch(Rp)}),ZA.apply(this,arguments)}function KP(n,e){return YA.apply(this,arguments)}function YA(){return YA=(0,_e.Z)(function*(n,e){const t=ze(n),r=e.batch.batchId;try{const i=yield iP(t.localStore,e);eS(t,r,null),XA(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield Pc(t,i)}catch(i){yield Rp(i)}}),YA.apply(this,arguments)}function ZP(n,e,t){return QA.apply(this,arguments)}function QA(){return QA=(0,_e.Z)(function*(n,e,t){const r=ze(n);try{const i=yield function(u,c){const p=ze(u);return p.persistence.runTransaction("Reject batch","readwrite-primary",y=>{let b;return p.Bs.lookupMutationBatch(y,c).next(S=>(Tt(null!==S),b=S.keys(),p.Bs.removeMutationBatch(y,S))).next(()=>p.Bs.performConsistencyCheck(y)).next(()=>p.ci.Ks(y,b))})}(r.localStore,e);eS(r,e,t),XA(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield Pc(r,i)}catch(i){yield Rp(i)}}),QA.apply(this,arguments)}function JA(){return JA=(0,_e.Z)(function*(n,e){const t=ze(n);Sh(t.remoteStore)||ke("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=yield function(u){const c=ze(u);return c.persistence.runTransaction("Get highest unacknowledged batch id","readonly",p=>c.Bs.getHighestUnacknowledgedBatchId(p))}(t.localStore);if(-1===r)return void e.resolve();const i=t.aa.get(r)||[];i.push(e),t.aa.set(r,i)}catch(r){const i=by(r,"Initialization of waitForPendingWrites() operation failed");e.reject(i)}}),JA.apply(this,arguments)}function XA(n,e){(n.aa.get(e)||[]).forEach(t=>{t.resolve()}),n.aa.delete(e)}function eS(n,e,t){const r=ze(n);let i=r.ua[r.currentUser.toKey()];if(i){const u=i.get(e);u&&(t?u.reject(t):u.resolve(),i=i.remove(e)),r.ua[r.currentUser.toKey()]=i}}function Iy(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.na.get(e))n.ea.delete(r),t&&n.ta.fa(r,t);n.na.delete(e),n.isPrimaryClient&&n.oa.Pi(e).forEach(r=>{n.oa.containsKey(r)||IR(n,r)})}function IR(n,e){n.sa.delete(e.path.canonicalString());const t=n.ia.get(e);null!==t&&(Z0(n.remoteStore,t),n.ia=n.ia.remove(e),n.ra.delete(t),nS(n))}function tS(n,e,t){for(const r of t)r instanceof ER?(n.oa.addReference(r.key,e),QP(n,r)):r instanceof wR?(ke("SyncEngine","Document no longer in limbo: "+r.key),n.oa.removeReference(r.key,e),n.oa.containsKey(r.key)||IR(n,r.key)):at()}function QP(n,e){const t=e.key,r=t.path.canonicalString();n.ia.get(t)||n.sa.has(r)||(ke("SyncEngine","New document in limbo: "+t),n.sa.add(r),nS(n))}function nS(n){for(;n.sa.size>0&&n.ia.size<n.maxConcurrentLimboResolutions;){const e=n.sa.values().next().value;n.sa.delete(e);const t=new Ge(tn.fromString(e)),r=n.ca.next();n.ra.set(r,new $P(t)),n.ia=n.ia.insert(t,r),xD(n.remoteStore,new Ch(oo(Xu(t.path)),r,2,ss.A))}}function Pc(n,e,t){return rS.apply(this,arguments)}function rS(){return rS=(0,_e.Z)(function*(n,e,t){const r=ze(n),i=[],u=[],c=[];var p;r.ea.isEmpty()||(r.ea.forEach((p,y)=>{c.push(r.la(y,e,t).then(b=>{if(b){r.isPrimaryClient&&r.sharedClientState.updateQueryState(y.targetId,b.fromCache?"not-current":"current"),i.push(b);const S=aA.Ys(y.targetId,b);u.push(S)}}))}),yield Promise.all(c),r.ta.Qo(i),yield(p=(0,_e.Z)(function*(y,b){const S=ze(y);try{yield S.persistence.runTransaction("notifyLocalViewChanges","readwrite",M=>fe.forEach(b,F=>fe.forEach(F.Hs,B=>S.persistence.referenceDelegate.addReference(M,F.targetId,B)).next(()=>fe.forEach(F.Js,B=>S.persistence.referenceDelegate.removeReference(M,F.targetId,B)))))}catch(M){if(!Cp(M))throw M;ke("LocalStore","Failed to update sequence numbers: "+M)}for(const M of b){const F=M.targetId;if(!M.fromCache){const B=S.ii.get(F),te=B.withLastLimboFreeSnapshotVersion(B.snapshotVersion);S.ii=S.ii.insert(F,te)}}}),function(y,b){return p.apply(this,arguments)})(r.localStore,u))}),rS.apply(this,arguments)}function JP(n,e){return iS.apply(this,arguments)}function iS(){return iS=(0,_e.Z)(function*(n,e){const t=ze(n);if(!t.currentUser.isEqual(e)){ke("SyncEngine","User change. New user:",e.toKey());const r=yield Xx(t.localStore,e);t.currentUser=e,(i=t).aa.forEach(c=>{c.forEach(p=>{p.reject(new Re(ue.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),i.aa.clear(),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield Pc(t,r.hi)}var i}),iS.apply(this,arguments)}function XP(n,e){const t=ze(n),r=t.ra.get(e);if(r&&r.Zu)return o().add(r.key);{let i=o();const u=t.na.get(e);if(!u)return i;for(const c of u){const p=t.ea.get(c);i=i.unionWith(p.view.Ku)}return i}}function e1(n,e){return sS.apply(this,arguments)}function sS(){return sS=(0,_e.Z)(function*(n,e){const t=ze(n),r=yield TD(t.localStore,e.query,!0),i=e.view.Yu(r);return t.isPrimaryClient&&tS(t,e.targetId,i.Hu),i}),sS.apply(this,arguments)}function t1(n,e){return oS.apply(this,arguments)}function oS(){return oS=(0,_e.Z)(function*(n,e){const t=ze(n);return rR(t.localStore,e).then(r=>Pc(t,r))}),oS.apply(this,arguments)}function n1(n,e,t,r){return aS.apply(this,arguments)}function aS(){return aS=(0,_e.Z)(function*(n,e,t,r){const i=ze(n),u=yield function(c,p){const y=ze(c),b=ze(y.Bs);return y.persistence.runTransaction("Lookup mutation documents","readonly",S=>b.fn(S,p).next(M=>M?y.ci.Ks(S,M):fe.resolve(null)))}(i.localStore,e);var p;null!==u?("pending"===t?yield Ey(i.remoteStore):"acknowledged"===t||"rejected"===t?(eS(i,e,r||null),XA(i,e),p=e,ze(ze(i.localStore).Bs)._n(p)):at(),yield Pc(i,u)):ke("SyncEngine","Cannot apply mutation batch with id: "+e)}),aS.apply(this,arguments)}function uS(){return uS=(0,_e.Z)(function*(n,e){const t=ze(n);if(hS(t),fS(t),!0===e&&!0!==t.ha){const r=t.sharedClientState.getAllActiveQueryTargets(),i=yield TR(t,r.toArray());t.ha=!0,yield kA(t.remoteStore,!0);for(const u of i)xD(t.remoteStore,u)}else if(!1===e&&!1!==t.ha){const r=[];let i=Promise.resolve();t.na.forEach((u,c)=>{t.sharedClientState.isLocalQueryTarget(c)?r.push(c):i=i.then(()=>(Iy(t,c),_y(t.localStore,c,!0))),Z0(t.remoteStore,c)}),yield i,yield TR(t,r),function(u){const c=ze(u);c.ra.forEach((p,y)=>{Z0(c.remoteStore,y)}),c.oa.bi(),c.ra=new Map,c.ia=new sr(Ge.comparator)}(t),t.ha=!1,yield kA(t.remoteStore,!1)}}),uS.apply(this,arguments)}function TR(n,e,t){return lS.apply(this,arguments)}function lS(){return lS=(0,_e.Z)(function*(n,e,t){const r=ze(n),i=[],u=[];for(const c of e){let p;const y=r.na.get(c);if(y&&0!==y.length){p=yield yy(r.localStore,oo(y[0]));for(const b of y){const S=r.ea.get(b),M=yield e1(r,S);M.snapshot&&u.push(M.snapshot)}}else{const b=yield nR(r.localStore,c);p=yield yy(r.localStore,b),yield GA(r,AR(b),c,!1)}i.push(p)}return r.ta.Qo(u),i}),lS.apply(this,arguments)}function AR(n){return A0(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function s1(n){const e=ze(n);return ze(ze(e.localStore).persistence).Fs()}function o1(n,e,t,r){return cS.apply(this,arguments)}function cS(){return cS=(0,_e.Z)(function*(n,e,t,r){const i=ze(n);if(i.ha)return void ke("SyncEngine","Ignoring unexpected query state notification.");const u=i.na.get(e);if(u&&u.length>0)switch(t){case"current":case"not-current":{const c=yield rR(i.localStore,lD(u[0])),p=d.createSynthesizedRemoteEventForCurrentChange(e,"current"===t);yield Pc(i,c,p);break}case"rejected":yield _y(i.localStore,e,!0),Iy(i,e,r);break;default:at()}}),cS.apply(this,arguments)}function a1(n,e,t){return dS.apply(this,arguments)}function dS(){return dS=(0,_e.Z)(function*(n,e,t){const r=hS(n);if(r.ha){for(const i of e){if(r.na.has(i)){ke("SyncEngine","Adding an already active target "+i);continue}const u=yield nR(r.localStore,i),c=yield yy(r.localStore,u);yield GA(r,AR(u),c.targetId,!1),xD(r.remoteStore,c)}for(const i of t)r.na.has(i)&&(yield _y(r.localStore,i,!1).then(()=>{Z0(r.remoteStore,i),Iy(r,i)}).catch(Rp))}}),dS.apply(this,arguments)}function hS(n){const e=ze(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=DR.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=XP.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=WP.bind(null,e),e.ta.Qo=LP.bind(null,e.eventManager),e.ta.fa=VP.bind(null,e.eventManager),e}function fS(n){const e=ze(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=KP.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=ZP.bind(null,e),e}class SR{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,_e.Z)(function*(){t.M=W0(e.databaseInfo.databaseId),t.sharedClientState=t._a(e),t.persistence=t.wa(e),yield t.persistence.start(),t.gcScheduler=t.ma(e),t.localStore=t.ga(e)})()}ma(e){return null}ga(e){return Jx(this.persistence,new Qx,e.initialUser,this.M)}wa(e){return new gP(fA.zi,this.M)}_a(e){return new aR}terminate(){var e=this;return(0,_e.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class MR extends SR{constructor(e,t,r){super(),this.ya=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,r=this;return(0,_e.Z)(function*(){yield t().call(r,e),yield r.ya.initialize(r,e),yield fS(r.ya.syncEngine),yield Ey(r.ya.remoteStore),yield r.persistence.Ts(()=>(r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(r.localStore),Promise.resolve()))})()}ga(e){return Jx(this.persistence,new Qx,e.initialUser,this.M)}ma(e){return new Yk(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue)}wa(e){const t=oA(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=void 0!==this.cacheSizeBytes?uo.withCacheSize(this.cacheSizeBytes):uo.DEFAULT;return new sA(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,lR(),MD(),this.M,this.sharedClientState,!!this.forceOwnership)}_a(e){return new aR}}class l1 extends MR{constructor(e,t){super(e,t,!1),this.ya=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,r=this;return(0,_e.Z)(function*(){yield t().call(r,e);const i=r.ya.syncEngine;r.sharedClientState instanceof yA&&(r.sharedClientState.syncEngine={Mr:n1.bind(null,i),Or:o1.bind(null,i),Fr:a1.bind(null,i),Fs:s1.bind(null,i),kr:t1.bind(null,i)},yield r.sharedClientState.start()),yield r.persistence.Ts(function(){var u=(0,_e.Z)(function*(c){yield function r1(n,e){return uS.apply(this,arguments)}(r.ya.syncEngine,c),r.gcScheduler&&(c&&!r.gcScheduler.started?r.gcScheduler.start(r.localStore):c||r.gcScheduler.stop())});return function(c){return u.apply(this,arguments)}}())})()}_a(e){const t=lR();if(!yA.vt(t))throw new Re(ue.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=oA(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new yA(t,e.asyncQueue,r,e.clientId,e.initialUser)}}class pS{initialize(e,t){var r=this;return(0,_e.Z)(function*(){r.localStore||(r.localStore=e.localStore,r.sharedClientState=e.sharedClientState,r.datastore=r.createDatastore(t),r.remoteStore=r.createRemoteStore(t),r.eventManager=r.createEventManager(t),r.syncEngine=r.createSyncEngine(t,!e.synchronizeTabs),r.sharedClientState.onlineStateHandler=i=>CR(r.syncEngine,i,1),r.remoteStore.remoteSyncer.handleCredentialChange=JP.bind(null,r.syncEngine),yield kA(r.remoteStore,r.syncEngine.isPrimaryClient))})()}createEventManager(e){return new FP}createDatastore(e){const t=W0(e.databaseInfo.databaseId),r=new EP(e.databaseInfo);return new DP(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return t=this.localStore,r=this.datastore,i=e.asyncQueue,u=p=>CR(this.syncEngine,p,0),c=uR.vt()?new uR:new yP,new IP(t,r,i,u,c);var t,r,i,u,c}createSyncEngine(e,t){return function(r,i,u,c,p,y,b){const S=new HP(r,i,u,c,p,y);return b&&(S.ha=!0),S}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,_e.Z)(function*(t){const r=ze(t);ke("RemoteStore","RemoteStore shutting down."),r.fu.add(5),yield vy(r),r._u.shutdown(),r.wu.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function xR(n,e=10240){let t=0;return{read:()=>(0,_e.Z)(function*(){if(t<n.byteLength){const r={value:n.slice(t,t+e),done:!1};return t+=e,r}return{done:!0}})(),cancel:()=>(0,_e.Z)(function*(){})(),releaseLock(){},closed:Promise.reject("unimplemented")}}class ND{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.pa(this.observer.next,e)}error(e){this.observer.error?this.pa(this.observer.error,e):console.error("Uncaught Error in snapshot listener:",e)}Ia(){this.muted=!0}pa(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class c1{constructor(e,t){this.Ta=e,this.M=t,this.metadata=new yr,this.buffer=new Uint8Array,this.Ea=new TextDecoder("utf-8"),this.Aa().then(r=>{r&&r.xu()?this.metadata.resolve(r.payload.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(null==r?void 0:r.payload)}`))},r=>this.metadata.reject(r))}close(){return this.Ta.cancel()}getMetadata(){var e=this;return(0,_e.Z)(function*(){return e.metadata.promise})()}da(){var e=this;return(0,_e.Z)(function*(){return yield e.getMetadata(),e.Aa()})()}Aa(){var e=this;return(0,_e.Z)(function*(){const t=yield e.Ra();if(null===t)return null;const r=e.Ea.decode(t),i=Number(r);isNaN(i)&&e.Pa(`length string (${r}) is not valid number`);const u=yield e.ba(i);return new BP(JSON.parse(u),t.length+i)})()}Va(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}Ra(){var e=this;return(0,_e.Z)(function*(){for(;e.Va()<0&&!(yield e.va()););if(0===e.buffer.length)return null;const t=e.Va();t<0&&e.Pa("Reached the end of bundle when a length string is expected.");const r=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),r})()}ba(e){var t=this;return(0,_e.Z)(function*(){for(;t.buffer.length<e;)(yield t.va())&&t.Pa("Reached the end of bundle when more is expected.");const r=t.Ea.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),r})()}Pa(e){throw this.Ta.cancel(),new Error(`Invalid bundle format: ${e}`)}va(){var e=this;return(0,_e.Z)(function*(){const t=yield e.Ta.read();if(!t.done){const r=new Uint8Array(e.buffer.length+t.value.length);r.set(e.buffer),r.set(t.value,e.buffer.length),e.buffer=r}return t.done})()}}class d1{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,_e.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new Re(ue.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const r=yield(i=(0,_e.Z)(function*(u,c){const p=ze(u),y=Oc(p.M)+"/documents",b={documents:c.map(B=>ni(p.M,B))},S=yield p.ho("BatchGetDocuments",y,b),M=new Map;S.forEach(B=>{const G=function L0(n,e){return"found"in e?function(t,r){Tt(!!r.found);const i=Ii(t,r.found.name),u=Je(r.found.updateTime),c=new Di({mapValue:{fields:r.found.fields}});return kn.newFoundDocument(i,u,c)}(n,e):"missing"in e?function(t,r){Tt(!!r.missing),Tt(!!r.readTime);const i=Ii(t,r.missing),u=Je(r.readTime);return kn.newNoDocument(i,u)}(n,e):at()}(p.M,B);M.set(G.key.toString(),G)});const F=[];return c.forEach(B=>{const G=M.get(B.toString());Tt(!!G),F.push(G)}),F}),function(u,c){return i.apply(this,arguments)})(t.datastore,e);var i;return r.forEach(i=>t.recordVersion(i)),r})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastWriteError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new Rc(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,_e.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var r;e.mutations.forEach(r=>{t.delete(r.key.toString())}),t.forEach((r,i)=>{const u=Ge.fromPath(i);e.mutations.push(new pD(u,e.precondition(u)))}),yield(r=(0,_e.Z)(function*(i,u){const c=ze(i),p=Oc(c.M)+"/documents",y={writes:u.map(b=>kc(c.M,b))};yield c.oo("Commit",p,y)}),function(i,u){return r.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw at();t=Dt.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new Re(ue.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?Or.updateTime(t):Or.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(Dt.min()))throw new Re(ue.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Or.updateTime(t)}return Or.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class h1{constructor(e,t,r,i){this.asyncQueue=e,this.datastore=t,this.updateFunction=r,this.deferred=i,this.Sa=5,this.Do=new _A(this.asyncQueue,"transaction_retry")}run(){this.Sa-=1,this.Da()}Da(){var e=this;this.Do.To((0,_e.Z)(function*(){const t=new d1(e.datastore),r=e.Ca(t);r&&r.then(i=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(i)}).catch(u=>{e.xa(u)}))}).catch(i=>{e.xa(i)})}))}Ca(e){try{const t=this.updateFunction(e);return!yh(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}xa(e){this.Sa>0&&this.Na(e)?(this.Sa-=1,this.asyncQueue.enqueueAndForget(()=>(this.Da(),Promise.resolve()))):this.deferred.reject(e)}Na(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||!mD(t)}return!1}}class f1{constructor(e,t,r,i){var u=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=ei.UNAUTHENTICATED,this.clientId=$m.R(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,function(){var c=(0,_e.Z)(function*(p){ke("FirestoreClient","Received user=",p.uid),yield u.authCredentialListener(p),u.user=p});return function(p){return c.apply(this,arguments)}}()),this.appCheckCredentials.start(r,c=>(ke("FirestoreClient","Received new app check token=",c),this.appCheckCredentialListener(c,this.user)))}getConfiguration(){var e=this;return(0,_e.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Re(ue.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new yr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,_e.Z)(function*(){try{e.onlineComponents&&(yield e.onlineComponents.terminate()),e.offlineComponents&&(yield e.offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(r){const i=by(r,"Failed to shutdown persistence");t.reject(i)}})),t.promise}}function RR(n,e){return gS.apply(this,arguments)}function gS(){return gS=(0,_e.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress(),ke("FirestoreClient","Initializing OfflineComponentProvider");const t=yield n.getConfiguration();yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(function(){var i=(0,_e.Z)(function*(u){r.isEqual(u)||(yield Xx(e.localStore,u),r=u)});return function(u){return i.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n.offlineComponents=e}),gS.apply(this,arguments)}function NR(n,e){return mS.apply(this,arguments)}function mS(){return mS=(0,_e.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield yS(n);ke("FirestoreClient","Initializing OnlineComponentProvider");const r=yield n.getConfiguration();yield e.initialize(t,r),n.setCredentialChangeListener(i=>mR(e.remoteStore,i)),n.setAppCheckTokenChangeListener((i,u)=>mR(e.remoteStore,u)),n.onlineComponents=e}),mS.apply(this,arguments)}function yS(n){return _S.apply(this,arguments)}function _S(){return _S=(0,_e.Z)(function*(n){return n.offlineComponents||(ke("FirestoreClient","Using default OfflineComponentProvider"),yield RR(n,new SR)),n.offlineComponents}),_S.apply(this,arguments)}function OD(n){return vS.apply(this,arguments)}function vS(){return vS=(0,_e.Z)(function*(n){return n.onlineComponents||(ke("FirestoreClient","Using default OnlineComponentProvider"),yield NR(n,new pS)),n.onlineComponents}),vS.apply(this,arguments)}function OR(n){return yS(n).then(e=>e.persistence)}function ES(n){return yS(n).then(e=>e.localStore)}function kR(n){return OD(n).then(e=>e.remoteStore)}function wS(n){return OD(n).then(e=>e.syncEngine)}function Ty(n){return bS.apply(this,arguments)}function bS(){return bS=(0,_e.Z)(function*(n){const e=yield OD(n),t=e.eventManager;return t.onListen=GP.bind(null,e.syncEngine),t.onUnlisten=qP.bind(null,e.syncEngine),t}),bS.apply(this,arguments)}function PR(n,e,t={}){const r=new yr;return n.asyncQueue.enqueueAndForget((0,_e.Z)(function*(){return function(i,u,c,p,y){const b=new ND({next:M=>{u.enqueueAndForget(()=>BA(i,S));const F=M.docs.has(c);!F&&M.fromCache?y.reject(new Re(ue.UNAVAILABLE,"Failed to get document because the client is offline.")):F&&M.fromCache&&p&&"server"===p.source?y.reject(new Re(ue.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):y.resolve(M)},error:M=>y.reject(M)}),S=new $A(Xu(c.path),b,{includeMetadataChanges:!0,Cu:!0});return LA(i,S)}(yield Ty(n),n.asyncQueue,e,t,r)})),r.promise}function FR(n,e,t={}){const r=new yr;return n.asyncQueue.enqueueAndForget((0,_e.Z)(function*(){return function(i,u,c,p,y){const b=new ND({next:M=>{u.enqueueAndForget(()=>BA(i,S)),M.fromCache&&"server"===p.source?y.reject(new Re(ue.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):y.resolve(M)},error:M=>y.reject(M)}),S=new $A(c,b,{includeMetadataChanges:!0,Cu:!0});return LA(i,S)}(yield Ty(n),n.asyncQueue,e,t,r)})),r.promise}const LR=new Map;function DS(n,e,t){if(!t)throw new Re(ue.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function VR(n,e,t,r){if(!0===e&&!0===r)throw new Re(ue.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function BR(n){if(!Ge.isDocumentKey(n))throw new Re(ue.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function UR(n){if(Ge.isDocumentKey(n))throw new Re(ue.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function kD(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(t=n).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof n?"a function":at()}function on(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new Re(ue.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=kD(n);throw new Re(ue.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function jR(n,e){if(e<=0)throw new Re(ue.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}class $R{constructor(e){var t;if(void 0===e.host){if(void 0!==e.ssl)throw new Re(ue.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new Re(ue.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,VR("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Y0{constructor(e,t,r){this._authCredentials=t,this._appCheckCredentials=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new $R({}),this._settingsFrozen=!1,e instanceof Zu?this._databaseId=e:(this._app=e,this._databaseId=function(i){if(!Object.prototype.hasOwnProperty.apply(i.options,["projectId"]))throw new Re(ue.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Zu(i.options.projectId)}(e))}get app(){if(!this._app)throw new Re(ue.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Re(ue.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new $R(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new qb;switch(t.type){case"gapi":const r=t.client;return Tt(!("object"!=typeof r||null===r||!r.auth||!r.auth.getAuthHeaderValueForFirstParty)),new zb(r,t.sessionIndex||"0",t.iamToken||null);case"provider":return t.client;default:throw new Re(ue.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=LR.get(e);t&&(ke("ComponentProvider","Removing Datastore"),LR.delete(e),t.terminate())}(this),Promise.resolve()}}class $n{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new rl(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new $n(this.firestore,e,this._key)}}class as{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new as(this.firestore,e,this._query)}}class rl extends as{constructor(e,t,r){super(e,t,Xu(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new $n(this.firestore,null,new Ge(e))}withConverter(e){return new rl(this.firestore,e,this._path)}}function HR(n,e,...t){if(n=(0,qt.m9)(n),DS("collection","path",e),n instanceof Y0){const r=tn.fromString(e,...t);return UR(r),new rl(n,null,r)}{if(!(n instanceof $n||n instanceof rl))throw new Re(ue.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(tn.fromString(e,...t));return UR(r),new rl(n.firestore,null,r)}}function PD(n,e,...t){if(n=(0,qt.m9)(n),1===arguments.length&&(e=$m.R()),DS("doc","path",e),n instanceof Y0){const r=tn.fromString(e,...t);return BR(r),new $n(n,null,new Ge(r))}{if(!(n instanceof $n||n instanceof rl))throw new Re(ue.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(tn.fromString(e,...t));return BR(r),new $n(n.firestore,n instanceof rl?n.converter:null,new Ge(r))}}function GR(n,e){return n=(0,qt.m9)(n),e=(0,qt.m9)(e),(n instanceof $n||n instanceof rl)&&(e instanceof $n||e instanceof rl)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function qR(n,e){return n=(0,qt.m9)(n),e=(0,qt.m9)(e),n instanceof as&&e instanceof as&&n.firestore===e.firestore&&Xm(n._query,e._query)&&n.converter===e.converter}class C1{constructor(){this.ka=Promise.resolve(),this.Ma=[],this.Oa=!1,this.Fa=[],this.$a=null,this.Ba=!1,this.La=!1,this.Ua=[],this.Do=new _A(this,"async_queue_retry"),this.qa=()=>{const t=MD();t&&ke("AsyncQueue","Visibility state changed to "+t.visibilityState),this.Do.Ao()};const e=MD();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.qa)}get isShuttingDown(){return this.Oa}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Ka(),this.Ga(e)}enterRestrictedMode(e){if(!this.Oa){this.Oa=!0,this.La=e||!1;const t=MD();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.qa)}}enqueue(e){if(this.Ka(),this.Oa)return new Promise(()=>{});const t=new yr;return this.Ga(()=>this.Oa&&this.La?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Ma.push(e),this.Qa()))}Qa(){var e=this;return(0,_e.Z)(function*(){if(0!==e.Ma.length){try{yield e.Ma[0](),e.Ma.shift(),e.Do.reset()}catch(t){if(!Cp(t))throw t;ke("AsyncQueue","Operation failed with retryable error: "+t)}e.Ma.length>0&&e.Do.To(()=>e.Qa())}})()}Ga(e){const t=this.ka.then(()=>(this.Ba=!0,e().catch(r=>{throw this.$a=r,this.Ba=!1,mr("INTERNAL UNHANDLED ERROR: ",function(u){let c=u.message||"";return u.stack&&(c=u.stack.includes(u.message)?u.stack:u.message+"\n"+u.stack),c}(r)),r}).then(r=>(this.Ba=!1,r))));return this.ka=t,t}enqueueAfterDelay(e,t,r){this.Ka(),this.Ua.indexOf(e)>-1&&(t=0);const i=FA.createAndSchedule(this,e,t,r,u=>this.ja(u));return this.Fa.push(i),i}Ka(){this.$a&&at()}verifyOperationInProgress(){}Wa(){var e=this;return(0,_e.Z)(function*(){let t;do{t=e.ka,yield t}while(t!==e.ka)})()}za(e){for(const t of this.Fa)if(t.timerId===e)return!0;return!1}Ha(e){return this.Wa().then(()=>{this.Fa.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.Fa)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.Wa()})}Ja(e){this.Ua.push(e)}ja(e){const t=this.Fa.indexOf(e);this.Fa.splice(t,1)}}function CS(n){return function(e,t){if("object"!=typeof e||null===e)return!1;const r=e;for(const i of["next","error","complete"])if(i in r&&"function"==typeof r[i])return!0;return!1}(n)}class I1{constructor(){this._progressObserver={},this._taskCompletionResolver=new yr,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class Yn extends Y0{constructor(e,t,r){super(e,t,r),this.type="firestore",this._queue=new C1,this._persistenceKey="name"in e?e.name:"[DEFAULT]"}_terminate(){return this._firestoreClient||zR(this),this._firestoreClient.terminate()}}function $r(n){return n._firestoreClient||zR(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function zR(n){var e;const t=n._freezeSettings(),r=(u=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new ax(n._databaseId,u,n._persistenceKey,(p=t).host,p.ssl,p.experimentalForceLongPolling,p.experimentalAutoDetectLongPolling,p.useFetchStreams));var u,p;n._firestoreClient=new f1(n._authCredentials,n._appCheckCredentials,n._queue,r)}function WR(n,e,t){const r=new yr;return n.asyncQueue.enqueue((0,_e.Z)(function*(){try{yield RR(n,t),yield NR(n,e),r.resolve()}catch(i){if(!("FirebaseError"===(u=i).name?u.code===ue.FAILED_PRECONDITION||u.code===ue.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&u instanceof DOMException)||22===u.code||20===u.code||11===u.code))throw i;console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+i),r.reject(i)}var u})).then(()=>r.promise)}function KR(n){if(n._initialized||n._terminated)throw new Re(ue.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class Fc{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new Re(ue.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Nr(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class il{constructor(e){this._byteString=e}static fromBase64String(e){try{return new il(_r.fromBase64String(e))}catch(t){throw new Re(ue.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new il(_r.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class Op{constructor(e){this._methodName=e}}class FD{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Re(ue.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Re(ue.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Ft(this._lat,e._lat)||Ft(this._long,e._long)}}const P1=/^__.*__$/;class F1{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return null!==this.fieldMask?new tl(e,this.data,this.fieldMask,t,this.fieldTransforms):new Dh(e,this.data,t,this.fieldTransforms)}}class ZR{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new tl(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function YR(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw at()}}class LD{constructor(e,t,r,i,u,c){this.settings=e,this.databaseId=t,this.M=r,this.ignoreUndefinedProperties=i,void 0===u&&this.Ya(),this.fieldTransforms=u||[],this.fieldMask=c||[]}get path(){return this.settings.path}get Xa(){return this.settings.Xa}Za(e){return new LD(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.M,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}tc(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.Za({path:r,ec:!1});return i.nc(e),i}sc(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.Za({path:r,ec:!1});return i.Ya(),i}ic(e){return this.Za({path:void 0,ec:!0})}rc(e){return UD(e,this.settings.methodName,this.settings.oc||!1,this.path,this.settings.uc)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}Ya(){if(this.path)for(let e=0;e<this.path.length;e++)this.nc(this.path.get(e))}nc(e){if(0===e.length)throw this.rc("Document fields must not be empty");if(YR(this.Xa)&&P1.test(e))throw this.rc('Document fields cannot begin and end with "__"')}}class L1{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.M=r||W0(e)}ac(e,t,r,i=!1){return new LD({Xa:e,methodName:t,uc:r,path:Nr.emptyPath(),ec:!1,oc:i},this.databaseId,this.M,this.ignoreUndefinedProperties)}}function kp(n){const e=n._freezeSettings(),t=W0(n._databaseId);return new L1(n._databaseId,!!e.ignoreUndefinedProperties,t)}function VD(n,e,t,r,i,u={}){const c=n.ac(u.merge||u.mergeFields?2:0,e,t,i);SS("Data must be an object, but it was:",c,r);const p=XR(r,c);let y,b;if(u.merge)y=new mh(c.fieldMask),b=c.fieldTransforms;else if(u.mergeFields){const S=[];for(const M of u.mergeFields){const F=MS(e,M,t);if(!c.contains(F))throw new Re(ue.INVALID_ARGUMENT,`Field '${F}' is specified in your field mask but missing from your input data.`);tN(S,F)||S.push(F)}y=new mh(S),b=c.fieldTransforms.filter(M=>y.covers(M.field))}else y=null,b=c.fieldTransforms;return new F1(new Di(p),y,b)}class Q0 extends Op{_toFieldTransform(e){if(2!==e.Xa)throw e.rc(1===e.Xa?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Q0}}function QR(n,e,t){return new LD({Xa:3,uc:e.settings.uc,methodName:n._methodName,ec:t},e.databaseId,e.M,e.ignoreUndefinedProperties)}class IS extends Op{_toFieldTransform(e){return new el(e.path,new xc)}isEqual(e){return e instanceof IS}}class V1 extends Op{constructor(e,t){super(e),this.cc=t}_toFieldTransform(e){const t=QR(this,e,!0),r=this.cc.map(u=>Pp(u,t)),i=new Is(r);return new el(e.path,i)}isEqual(e){return this===e}}class B1 extends Op{constructor(e,t){super(e),this.cc=t}_toFieldTransform(e){const t=QR(this,e,!0),r=this.cc.map(u=>Pp(u,t)),i=new nu(r);return new el(e.path,i)}isEqual(e){return this===e}}class U1 extends Op{constructor(e,t){super(e),this.hc=t}_toFieldTransform(e){const t=new bh(e.M,jT(e.M,this.hc));return new el(e.path,t)}isEqual(e){return this===e}}function TS(n,e,t,r){const i=n.ac(1,e,t);SS("Data must be an object, but it was:",i,r);const u=[],c=Di.empty();Cc(r,(y,b)=>{const S=BD(e,y,t);b=(0,qt.m9)(b);const M=i.sc(S);if(b instanceof Q0)u.push(S);else{const F=Pp(b,M);null!=F&&(u.push(S),c.set(S,F))}});const p=new mh(u);return new ZR(c,p,i.fieldTransforms)}function AS(n,e,t,r,i,u){const c=n.ac(1,e,t),p=[MS(e,r,t)],y=[i];if(u.length%2!=0)throw new Re(ue.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let F=0;F<u.length;F+=2)p.push(MS(e,u[F])),y.push(u[F+1]);const b=[],S=Di.empty();for(let F=p.length-1;F>=0;--F)if(!tN(b,p[F])){const B=p[F];let G=y[F];G=(0,qt.m9)(G);const te=c.sc(B);if(G instanceof Q0)b.push(B);else{const Ee=Pp(G,te);null!=Ee&&(b.push(B),S.set(B,Ee))}}const M=new mh(b);return new ZR(S,M,c.fieldTransforms)}function JR(n,e,t,r=!1){return Pp(t,n.ac(r?4:3,e))}function Pp(n,e){if(eN(n=(0,qt.m9)(n)))return SS("Unsupported field value:",e,n),XR(n,e);if(n instanceof Op)return function(t,r){if(!YR(r.Xa))throw r.rc(`${t._methodName}() can only be used with update() and set()`);if(!r.path)throw r.rc(`${t._methodName}() is not currently supported inside arrays`);const i=t._toFieldTransform(r);i&&r.fieldTransforms.push(i)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.ec&&4!==e.Xa)throw e.rc("Nested arrays are not supported");return function(t,r){const i=[];let u=0;for(const c of t){let p=Pp(c,r.ic(u));null==p&&(p={nullValue:"NULL_VALUE"}),i.push(p),u++}return{arrayValue:{values:i}}}(n,e)}return function(t,r){if(null===(t=(0,qt.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return jT(r.M,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const i=ir.fromDate(t);return{timestampValue:Ve(r.M,i)}}if(t instanceof ir){const i=new ir(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:Ve(r.M,i)}}if(t instanceof FD)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof il)return{bytesValue:st(r.M,t._byteString)};if(t instanceof $n){const i=r.databaseId,u=t.firestore._databaseId;if(!u.isEqual(i))throw r.rc(`Document reference is for database ${u.projectId}/${u.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:zt(t.firestore._databaseId||r.databaseId,t._key.path)}}throw r.rc(`Unsupported field value: ${kD(t)}`)}(n,e)}function XR(n,e){const t={};return v0(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Cc(n,(r,i)=>{const u=Pp(i,e.tc(r));null!=u&&(t[r]=u)}),{mapValue:{fields:t}}}function eN(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof ir||n instanceof FD||n instanceof il||n instanceof $n||n instanceof Op)}function SS(n,e,t){if(!eN(t)||"object"!=typeof(r=t)||null===r||Object.getPrototypeOf(r)!==Object.prototype&&null!==Object.getPrototypeOf(r)){const r=kD(t);throw e.rc("an object"===r?n+" a custom object":n+" "+r)}var r}function MS(n,e,t){if((e=(0,qt.m9)(e))instanceof Fc)return e._internalPath;if("string"==typeof e)return BD(n,e);throw UD("Field path arguments must be of type string or ",n,!1,void 0,t)}const j1=new RegExp("[~\\*/\\[\\]]");function BD(n,e,t){if(e.search(j1)>=0)throw UD(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Fc(...e.split("."))._internalPath}catch(r){throw UD(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function UD(n,e,t,r,i){const u=r&&!r.isEmpty(),c=void 0!==i;let p=`Function ${e}() called with invalid data`;t&&(p+=" (via `toFirestore()`)"),p+=". ";let y="";return(u||c)&&(y+=" (found",u&&(y+=` in field ${r}`),c&&(y+=` in document ${i}`),y+=")"),new Re(ue.INVALID_ARGUMENT,p+n+y)}function tN(n,e){return n.some(t=>t.isEqual(e))}class J0{constructor(e,t,r,i,u){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=u}get id(){return this._key.path.lastSegment()}get ref(){return new $n(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new $1(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(jD("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class $1 extends J0{data(){return super.data()}}function jD(n,e){return"string"==typeof e?BD(n,e):e instanceof Fc?e._internalPath:e._delegate._internalPath}class Fp{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Lc extends J0{constructor(e,t,r,i,u,c){super(e,t,r,i,c),this._firestore=e,this._firestoreImpl=e,this.metadata=u}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new X0(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(jD("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class X0 extends Lc{data(e={}){return super.data(e)}}class xh{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new Fp(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new X0(this._firestore,this._userDataWriter,r.key,r,new Fp(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Re(ue.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(r,i){if(r._snapshot.oldDocs.isEmpty()){let u=0;return r._snapshot.docChanges.map(c=>({type:"added",doc:new X0(r._firestore,r._userDataWriter,c.doc.key,c.doc,new Fp(r._snapshot.mutatedKeys.has(c.doc.key),r._snapshot.fromCache),r.query.converter),oldIndex:-1,newIndex:u++}))}{let u=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(c=>i||3!==c.type).map(c=>{const p=new X0(r._firestore,r._userDataWriter,c.doc.key,c.doc,new Fp(r._snapshot.mutatedKeys.has(c.doc.key),r._snapshot.fromCache),r.query.converter);let y=-1,b=-1;return 0!==c.type&&(y=u.indexOf(c.doc.key),u=u.delete(c.doc.key)),1!==c.type&&(u=u.add(c.doc),b=u.indexOf(c.doc.key)),{type:H1(c.type),doc:p,oldIndex:y,newIndex:b}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function H1(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return at()}}function nN(n,e){return n instanceof Lc&&e instanceof Lc?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(null===n._document?null===e._document:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof xh&&e instanceof xh&&n._firestore===e._firestore&&qR(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}function rN(n){if(Ep(n)&&0===n.explicitOrderBy.length)throw new Re(ue.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class eE{}function Rh(n,...e){for(const t of e)n=t._apply(n);return n}class G1 extends eE{constructor(e,t,r){super(),this.lc=e,this.fc=t,this.dc=r,this.type="where"}_apply(e){const t=kp(e.firestore),r=function(i,u,c,p,y,b,S){let M;if(y.isKeyField()){if("array-contains"===b||"array-contains-any"===b)throw new Re(ue.INVALID_ARGUMENT,`Invalid Query. You can't perform '${b}' queries on documentId().`);if("in"===b||"not-in"===b){lN(S,b);const B=[];for(const G of S)B.push(uN(p,i,G));M={arrayValue:{values:B}}}else M=uN(p,i,S)}else"in"!==b&&"not-in"!==b&&"array-contains-any"!==b||lN(S,b),M=JR(c,"where",S,"in"===b||"not-in"===b);const F=jr.create(y,b,M);return function(B,G){if(G.S()){const Ee=Qm(B);if(null!==Ee&&!Ee.isEqual(G.field))throw new Re(ue.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${Ee.toString()}' and '${G.field.toString()}'`);const Ze=S0(B);null!==Ze&&cN(0,G.field,Ze)}const te=function(Ee,Ze){for(const Ye of Ee.filters)if(Ze.indexOf(Ye.op)>=0)return Ye.op;return null}(B,function(Ee){switch(Ee){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(G.op));if(null!==te)throw new Re(ue.INVALID_ARGUMENT,te===G.op?`Invalid query. You cannot use more than one '${G.op.toString()}' filter.`:`Invalid query. You cannot use '${G.op.toString()}' filters with '${te.toString()}' filters.`)}(i,F),F}(e._query,0,t,e.firestore._databaseId,this.lc,this.fc,this.dc);return new as(e.firestore,e.converter,function(i,u){const c=i.filters.concat([u]);return new tu(i.path,i.collectionGroup,i.explicitOrderBy.slice(),c,i.limit,i.limitType,i.startAt,i.endAt)}(e._query,r))}}class z1 extends eE{constructor(e,t){super(),this.lc=e,this._c=t,this.type="orderBy"}_apply(e){const t=function(r,i,u){if(null!==r.startAt)throw new Re(ue.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==r.endAt)throw new Re(ue.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const c=new vp(i,u);return function(p,y){if(null===S0(p)){const b=Qm(p);null!==b&&cN(0,b,y.field)}}(r,c),c}(e._query,this.lc,this._c);return new as(e.firestore,e.converter,function(r,i){const u=r.explicitOrderBy.concat([i]);return new tu(r.path,r.collectionGroup,u,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,t))}}class iN extends eE{constructor(e,t,r){super(),this.type=e,this.wc=t,this.mc=r}_apply(e){return new as(e.firestore,e.converter,LT(e._query,this.wc,this.mc))}}class sN extends eE{constructor(e,t,r){super(),this.type=e,this.gc=t,this.yc=r}_apply(e){const t=aN(e,this.type,this.gc,this.yc);return new as(e.firestore,e.converter,(i=t,new tu((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,i,r.endAt)));var r,i}}class oN extends eE{constructor(e,t,r){super(),this.type=e,this.gc=t,this.yc=r}_apply(e){const t=aN(e,this.type,this.gc,this.yc);return new as(e.firestore,e.converter,(i=t,new tu((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,r.startAt,i)));var r,i}}function aN(n,e,t,r){if(t[0]=(0,qt.m9)(t[0]),t[0]instanceof J0)return function(i,u,c,p,y){if(!p)throw new Re(ue.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${c}().`);const b=[];for(const S of wh(i))if(S.field.isKeyField())b.push(Yu(u,p.key));else{const M=p.data.field(S.field);if(Jb(M))throw new Re(ue.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+S.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===M){const F=S.field.canonicalString();throw new Re(ue.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${F}' (used as the orderBy) does not exist.`)}b.push(M)}return new Ju(b,y)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{const i=kp(n.firestore);return function(u,c,p,y,b,S){const M=u.explicitOrderBy;if(b.length>M.length)throw new Re(ue.INVALID_ARGUMENT,`Too many arguments provided to ${y}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const F=[];for(let B=0;B<b.length;B++){const G=b[B];if(M[B].field.isKeyField()){if("string"!=typeof G)throw new Re(ue.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${y}(), but got a ${typeof G}`);if(!Jm(u)&&-1!==G.indexOf("/"))throw new Re(ue.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${y}() must be a plain document ID, but '${G}' contains a slash.`);const te=u.path.child(tn.fromString(G));if(!Ge.isDocumentKey(te))throw new Re(ue.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${y}() must result in a valid document path, but '${te}' is not because it contains an odd number of segments.`);const Ee=new Ge(te);F.push(Yu(c,Ee))}else{const te=JR(p,y,G);F.push(te)}}return new Ju(F,S)}(n._query,n.firestore._databaseId,i,e,t,r)}}function uN(n,e,t){if("string"==typeof(t=(0,qt.m9)(t))){if(""===t)throw new Re(ue.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Jm(e)&&-1!==t.indexOf("/"))throw new Re(ue.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(tn.fromString(t));if(!Ge.isDocumentKey(r))throw new Re(ue.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Yu(n,new Ge(r))}if(t instanceof $n)return Yu(n,t._key);throw new Re(ue.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${kD(t)}.`)}function lN(n,e){if(!Array.isArray(n)||0===n.length)throw new Re(ue.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`);if(n.length>10)throw new Re(ue.INVALID_ARGUMENT,`Invalid Query. '${e.toString()}' filters support a maximum of 10 elements in the value array.`)}function cN(n,e,t){if(!t.isEqual(e))throw new Re(ue.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}class xS{convertValue(e,t="none"){switch(_h(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Kn(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Ic(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw at()}}convertObject(e,t){const r={};return Cc(e.fields,(i,u)=>{r[i]=this.convertValue(u,t)}),r}convertGeoPoint(e){return new FD(Kn(e.latitude),Kn(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=E0(e);return null==r?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(Hm(e));default:return null}}convertTimestamp(e){const t=Ja(e);return new ir(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=tn.fromString(e);Tt(wx(r));const i=new Zu(r.get(1),r.get(3)),u=new Ge(r.popFirst(5));return i.isEqual(t)||mr(`Document ${u} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),u}}function $D(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class eF extends xS{constructor(e){super(),this.firestore=e}convertBytes(e){return new il(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new $n(this.firestore,null,t)}}class dN{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=kp(e)}set(e,t,r){this._verifyNotCommitted();const i=Nh(e,this._firestore),u=$D(i.converter,t,r),c=VD(this._dataReader,"WriteBatch.set",i._key,u,null!==i.converter,r);return this._mutations.push(c.toMutation(i._key,Or.none())),this}update(e,t,r,...i){this._verifyNotCommitted();const u=Nh(e,this._firestore);let c;return c="string"==typeof(t=(0,qt.m9)(t))||t instanceof Fc?AS(this._dataReader,"WriteBatch.update",u._key,t,r,i):TS(this._dataReader,"WriteBatch.update",u._key,t),this._mutations.push(c.toMutation(u._key,Or.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=Nh(e,this._firestore);return this._mutations=this._mutations.concat(new Rc(t._key,Or.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Re(ue.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Nh(n,e){if((n=(0,qt.m9)(n)).firestore!==e)throw new Re(ue.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class Lp extends xS{constructor(e){super(),this.firestore=e}convertBytes(e){return new il(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new $n(this.firestore,null,t)}}function hN(n,e,t){n=on(n,$n);const r=on(n.firestore,Yn),i=$D(n.converter,e,t);return Ay(r,[VD(kp(r),"setDoc",n._key,i,null!==n.converter,t).toMutation(n._key,Or.none())])}function fN(n,e,t,...r){n=on(n,$n);const i=on(n.firestore,Yn),u=kp(i);let c;return c="string"==typeof(e=(0,qt.m9)(e))||e instanceof Fc?AS(u,"updateDoc",n._key,e,t,r):TS(u,"updateDoc",n._key,e),Ay(i,[c.toMutation(n._key,Or.exists(!0))])}function pN(n,...e){var t,r,i;n=(0,qt.m9)(n);let u={includeMetadataChanges:!1},c=0;"object"!=typeof e[c]||CS(e[c])||(u=e[c],c++);const p={includeMetadataChanges:u.includeMetadataChanges};if(CS(e[c])){const M=e[c];e[c]=null===(t=M.next)||void 0===t?void 0:t.bind(M),e[c+1]=null===(r=M.error)||void 0===r?void 0:r.bind(M),e[c+2]=null===(i=M.complete)||void 0===i?void 0:i.bind(M)}let y,b,S;if(n instanceof $n)b=on(n.firestore,Yn),S=Xu(n._key.path),y={next:M=>{e[c]&&e[c](RS(b,n,M))},error:e[c+1],complete:e[c+2]};else{const M=on(n,as);b=on(M.firestore,Yn),S=M._query;const F=new Lp(b);y={next:B=>{e[c]&&e[c](new xh(b,F,M,B))},error:e[c+1],complete:e[c+2]},rN(n._query)}return function(M,F,B,G){const te=new ND(G),Ee=new $A(F,te,B);return M.asyncQueue.enqueueAndForget((0,_e.Z)(function*(){return LA(yield Ty(M),Ee)})),()=>{te.Ia(),M.asyncQueue.enqueueAndForget((0,_e.Z)(function*(){return BA(yield Ty(M),Ee)}))}}($r(b),S,p,y)}function Ay(n,e){return function(t,r){const i=new yr;return t.asyncQueue.enqueueAndForget((0,_e.Z)(function*(){return function zP(n,e,t){return WA.apply(this,arguments)}(yield wS(t),r,i)})),i.promise}($r(n),e)}function RS(n,e,t){const r=t.docs.get(e._key),i=new Lp(n);return new Lc(n,i,e._key,r,new Fp(t.hasPendingWrites,t.fromCache),e.converter)}class cF extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=kp(e)}get(e){const t=Nh(e,this._firestore),r=new eF(this._firestore);return this._transaction.lookup([t._key]).then(i=>{if(!i||1!==i.length)return at();const u=i[0];if(u.isFoundDocument())return new J0(this._firestore,r,u.key,u,t.converter);if(u.isNoDocument())return new J0(this._firestore,r,t._key,null,t.converter);throw at()})}set(e,t,r){const i=Nh(e,this._firestore),u=$D(i.converter,t,r),c=VD(this._dataReader,"Transaction.set",i._key,u,null!==i.converter,r);return this._transaction.set(i._key,c),this}update(e,t,r,...i){const u=Nh(e,this._firestore);let c;return c="string"==typeof(t=(0,qt.m9)(t))||t instanceof Fc?AS(this._dataReader,"Transaction.update",u._key,t,r,i):TS(this._dataReader,"Transaction.update",u._key,t),this._transaction.update(u._key,c),this}delete(e){const t=Nh(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=Nh(e,this._firestore),r=new Lp(this._firestore);return super.get(e).then(i=>new Lc(this._firestore,r,t._key,i._document,new Fp(!1,!1),t.converter))}}function NS(n,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new Re("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function mN(){if("undefined"==typeof Uint8Array)throw new Re("unimplemented","Uint8Arrays are not available in this environment.")}function yN(){if(!function Yb(){return"undefined"!=typeof atob}())throw new Re("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(n,e=!0){bc=$u.SDK_VERSION,(0,$u._registerComponent)(new Wf.wA("firestore",(t,{options:r})=>{const i=t.getProvider("app").getImmediate(),u=new Yn(i,new m0(t.getProvider("auth-internal")),new Kb(t.getProvider("app-check-internal")));return r=Object.assign({useFetchStreams:e},r),u._setSettings(r),u},"PUBLIC")),(0,$u.registerVersion)(p0,"3.4.8",n),(0,$u.registerVersion)(p0,"3.4.8","esm2017")}();class tE{constructor(e){this._delegate=e}static fromBase64String(e){return yN(),new tE(il.fromBase64String(e))}static fromUint8Array(e){return mN(),new tE(il.fromUint8Array(e))}toBase64(){return yN(),this._delegate.toBase64()}toUint8Array(){return mN(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function OS(n){return function vF(n,e){if("object"!=typeof n||null===n)return!1;const t=n;for(const r of e)if(r in t&&"function"==typeof t[r])return!0;return!1}(n,["next","error","complete"])}class EF{enableIndexedDbPersistence(e,t){return function A1(n,e){KR(n=on(n,Yn));const t=$r(n),r=n._freezeSettings(),i=new pS;return WR(t,i,new MR(i,r.cacheSizeBytes,null==e?void 0:e.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function S1(n){KR(n=on(n,Yn));const e=$r(n),t=n._freezeSettings(),r=new pS;return WR(e,r,new l1(r,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function M1(n){if(n._initialized&&!n._terminated)throw new Re(ue.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new yr;return n._queue.enqueueAndForgetEvenWhileRestricted((0,_e.Z)(function*(){try{yield(t=(0,_e.Z)(function*(r){if(!ru.vt())return Promise.resolve();const i=r+"main";yield ru.delete(i)}),function(r){return t.apply(this,arguments)})(oA(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class _N{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof Zu||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&Um("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,r={}){!function b1(n,e,t,r={}){var i;const u=(n=on(n,Y0))._getSettings();if("firestore.googleapis.com"!==u.host&&u.host!==e&&Um("Host has been set in both settings() and useEmulator(), emulator host will be used"),n._setSettings(Object.assign(Object.assign({},u),{host:`${e}:${t}`,ssl:!1})),r.mockUserToken){let c,p;if("string"==typeof r.mockUserToken)c=r.mockUserToken,p=ei.MOCK_USER;else{c=(0,qt.Sg)(r.mockUserToken,null===(i=n._app)||void 0===i?void 0:i.options.projectId);const y=r.mockUserToken.sub||r.mockUserToken.user_id;if(!y)throw new Re(ue.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");p=new ei(y)}n._authCredentials=new jm(new g0(c,p))}}(this._delegate,e,t,r)}enableNetwork(){return function R1(n){return function p1(n){return n.asyncQueue.enqueue((0,_e.Z)(function*(){const e=yield OR(n),t=yield kR(n);return e.setNetworkEnabled(!0),function(r){const i=ze(r);return i.fu.delete(0),K0(i)}(t)}))}($r(n=on(n,Yn)))}(this._delegate)}disableNetwork(){return function N1(n){return function g1(n){return n.asyncQueue.enqueue((0,_e.Z)(function*(){const e=yield OR(n),t=yield kR(n);return e.setNetworkEnabled(!1),(r=(0,_e.Z)(function*(i){const u=ze(i);u.fu.add(0),yield vy(u),u.wu.set("Offline")}),function(i){return r.apply(this,arguments)})(t);var r}))}($r(n=on(n,Yn)))}(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,VR("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function x1(n){return function(e){const t=new yr;return e.asyncQueue.enqueueAndForget((0,_e.Z)(function*(){return function YP(n,e){return JA.apply(this,arguments)}(yield wS(e),t)})),t.promise}($r(n=on(n,Yn)))}(this._delegate)}onSnapshotsInSync(e){return function lF(n,e){return function _1(n,e){const t=new ND(e);return n.asyncQueue.enqueueAndForget((0,_e.Z)(function*(){return r=yield Ty(n),i=t,ze(r).Eu.add(i),void i.next();var r,i})),()=>{t.Ia(),n.asyncQueue.enqueueAndForget((0,_e.Z)(function*(){return r=yield Ty(n),i=t,void ze(r).Eu.delete(i);var r,i}))}}($r(n=on(n,Yn)),CS(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new Re("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new Sy(this,HR(this._delegate,e))}catch(t){throw As(t,"collection()","Firestore.collection()")}}doc(e){try{return new va(this,PD(this._delegate,e))}catch(t){throw As(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new Ss(this,function D1(n,e){if(n=on(n,Y0),DS("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new Re(ue.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new as(n,null,(t=e,new tu(tn.emptyPath(),t)));var t}(this._delegate,e))}catch(t){throw As(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function dF(n,e){return function v1(n,e){const t=new yr;return n.asyncQueue.enqueueAndForget((0,_e.Z)(function*(){const r=yield(i=n,OD(i).then(u=>u.datastore));var i;new h1(n.asyncQueue,r,e,t).run()})),t.promise}($r(n=on(n,Yn)),t=>e(new cF(n,t)))}(this._delegate,t=>e(new vN(this,t)))}batch(){return $r(this._delegate),new EN(new dN(this._delegate,e=>Ay(this._delegate,e)))}loadBundle(e){return function O1(n,e){const t=$r(n=on(n,Yn)),r=new I1;return function E1(n,e,t,r){const i=function(u,c){let p;return p="string"==typeof u?(new TextEncoder).encode(u):u,y=function(y,b){if(y instanceof Uint8Array)return xR(y,b);if(y instanceof ArrayBuffer)return xR(new Uint8Array(y),b);if(y instanceof ReadableStream)return y.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(p),new c1(y,c);var y}(t,W0(e));n.asyncQueue.enqueueAndForget((0,_e.Z)(function*(){!function u1(n,e,t){const r=ze(n);var i;(i=(0,_e.Z)(function*(u,c,p){try{const y=yield c.getMetadata();if(yield function(F,B){const G=ze(F),te=Je(B.createTime);return G.persistence.runTransaction("hasNewerBundle","readonly",Ee=>G._s.getBundleMetadata(Ee,B.id)).then(Ee=>!!Ee&&Ee.createTime.compareTo(te)>=0)}(u.localStore,y))return yield c.close(),p._completeWith({taskState:"Success",documentsLoaded:(F=y).totalDocuments,bytesLoaded:F.totalBytes,totalDocuments:F.totalDocuments,totalBytes:F.totalBytes}),Promise.resolve(new Set);p._updateProgress(vR(y));const b=new UP(y,u.localStore,c.M);let S=yield c.da();for(;S;){const F=yield b.ku(S);F&&p._updateProgress(F),S=yield c.da()}const M=yield b.complete();return yield Pc(u,M.Fu,void 0),yield function(F,B){const G=ze(F);return G.persistence.runTransaction("Save bundle","readwrite",te=>G._s.saveBundleMetadata(te,B))}(u.localStore,y),p._completeWith(M.progress),Promise.resolve(M.Ou)}catch(y){return Um("SyncEngine",`Loading bundle failed with ${y}`),p._failWith(y),Promise.resolve(new Set)}var F}),function(u,c,p){return i.apply(this,arguments)})(r,e,t).then(i=>{r.sharedClientState.notifyBundleLoaded(i)})}(yield wS(n),i,r)}))}(t,n._databaseId,e,r),r}(this._delegate,e)}namedQuery(e){return function k1(n,e){return function w1(n,e){return n.asyncQueue.enqueue((0,_e.Z)(function*(){return function(t,r){const i=ze(t);return i.persistence.runTransaction("Get named query","readonly",u=>i._s.getNamedQuery(u,r))}(yield ES(n),e)}))}($r(n=on(n,Yn)),e).then(t=>t?new as(n,null,t.query):null)}(this._delegate,e).then(t=>t?new Ss(this,t):null)}}class HD extends xS{constructor(e){super(),this.firestore=e}convertBytes(e){return new tE(new il(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return va.forKey(t,this.firestore,null)}}class vN{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new HD(e)}get(e){const t=Bp(e);return this._delegate.get(t).then(r=>new nE(this._firestore,new Lc(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){const i=Bp(e);return r?(NS("Transaction.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const u=Bp(e);return 2===arguments.length?this._delegate.update(u,t):this._delegate.update(u,t,r,...i),this}delete(e){const t=Bp(e);return this._delegate.delete(t),this}}class EN{constructor(e){this._delegate=e}set(e,t,r){const i=Bp(e);return r?(NS("WriteBatch.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const u=Bp(e);return 2===arguments.length?this._delegate.update(u,t):this._delegate.update(u,t,r,...i),this}delete(e){const t=Bp(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class Vp{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){const r=new X0(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new rE(this._firestore,r),null!=t?t:{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const r=Vp.INSTANCES;let i=r.get(e);i||(i=new WeakMap,r.set(e,i));let u=i.get(t);return u||(u=new Vp(e,new HD(e),t),i.set(t,u)),u}}Vp.INSTANCES=new WeakMap;class va{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new HD(e)}static forPath(e,t,r){if(e.length%2!=0)throw new Re("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new va(t,new $n(t._delegate,r,new Ge(e)))}static forKey(e,t,r){return new va(t,new $n(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new Sy(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new Sy(this.firestore,HR(this._delegate,e))}catch(t){throw As(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,qt.m9)(e))instanceof $n&&GR(this._delegate,e)}set(e,t){t=NS("DocumentReference.set",t);try{return t?hN(this._delegate,e,t):hN(this._delegate,e)}catch(r){throw As(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return 1===arguments.length?fN(this._delegate,e):fN(this._delegate,e,t,...r)}catch(i){throw As(i,"updateDoc()","DocumentReference.update()")}}delete(){return function aF(n){return Ay(on(n.firestore,Yn),[new Rc(n._key,Or.none())])}(this._delegate)}onSnapshot(...e){const t=wN(e),r=bN(e,i=>new nE(this.firestore,new Lc(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)));return pN(this._delegate,t,r)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function nF(n){n=on(n,$n);const e=on(n.firestore,Yn),t=$r(e),r=new Lp(e);return function m1(n,e){const t=new yr;return n.asyncQueue.enqueueAndForget((0,_e.Z)(function*(){return(r=(0,_e.Z)(function*(i,u,c){try{const p=yield function(y,b){const S=ze(y);return S.persistence.runTransaction("read document","readonly",M=>S.ci.Ls(M,b))}(i,u);p.isFoundDocument()?c.resolve(p):p.isNoDocument()?c.resolve(null):c.reject(new Re(ue.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(p){const y=by(p,`Failed to get document '${u} from cache`);c.reject(y)}}),function(i,u,c){return r.apply(this,arguments)})(yield ES(n),e,t);var r})),t.promise}(t,n._key).then(i=>new Lc(e,r,n._key,i,new Fp(null!==i&&i.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===(null==e?void 0:e.source)?function rF(n){n=on(n,$n);const e=on(n.firestore,Yn);return PR($r(e),n._key,{source:"server"}).then(t=>RS(e,n,t))}(this._delegate):function tF(n){n=on(n,$n);const e=on(n.firestore,Yn);return PR($r(e),n._key).then(t=>RS(e,n,t))}(this._delegate),t.then(r=>new nE(this.firestore,new Lc(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new va(this.firestore,this._delegate.withConverter(e?Vp.getInstance(this.firestore,e):null))}}function As(n,e,t){return n.message=n.message.replace(e,t),n}function wN(n){for(const e of n)if("object"==typeof e&&!OS(e))return e;return{}}function bN(n,e){var t,r;let i;return i=OS(n[0])?n[0]:OS(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:u=>{i.next&&i.next(e(u))},error:null===(t=i.error)||void 0===t?void 0:t.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}class nE{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new va(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return nN(this._delegate,e._delegate)}}class rE extends nE{data(e){const t=this._delegate.data(e);return function IT(n,e){n||at()}(void 0!==t),t}}class Ss{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new HD(e)}where(e,t,r){try{return new Ss(this.firestore,Rh(this._delegate,function q1(n,e,t){const r=e,i=jD("where",n);return new G1(i,r,t)}(e,t,r)))}catch(i){throw As(i,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new Ss(this.firestore,Rh(this._delegate,function W1(n,e="asc"){const t=e,r=jD("orderBy",n);return new z1(r,t)}(e,t)))}catch(r){throw As(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new Ss(this.firestore,Rh(this._delegate,function K1(n){return jR("limit",n),new iN("limit",n,"F")}(e)))}catch(t){throw As(t,"limit()","Query.limit()")}}limitToLast(e){try{return new Ss(this.firestore,Rh(this._delegate,function Z1(n){return jR("limitToLast",n),new iN("limitToLast",n,"L")}(e)))}catch(t){throw As(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new Ss(this.firestore,Rh(this._delegate,function Y1(...n){return new sN("startAt",n,!0)}(...e)))}catch(t){throw As(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new Ss(this.firestore,Rh(this._delegate,function Q1(...n){return new sN("startAfter",n,!1)}(...e)))}catch(t){throw As(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new Ss(this.firestore,Rh(this._delegate,function J1(...n){return new oN("endBefore",n,!1)}(...e)))}catch(t){throw As(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new Ss(this.firestore,Rh(this._delegate,function X1(...n){return new oN("endAt",n,!0)}(...e)))}catch(t){throw As(t,"endAt()","Query.endAt()")}}isEqual(e){return qR(this._delegate,e._delegate)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function sF(n){n=on(n,as);const e=on(n.firestore,Yn),t=$r(e),r=new Lp(e);return function y1(n,e){const t=new yr;return n.asyncQueue.enqueueAndForget((0,_e.Z)(function*(){return(r=(0,_e.Z)(function*(i,u,c){try{const p=yield TD(i,u,!0),y=new bR(u,p.li),b=y.Gu(p.documents),S=y.applyChanges(b,!1);c.resolve(S.snapshot)}catch(p){const y=by(p,`Failed to execute query '${u} against cache`);c.reject(y)}}),function(i,u,c){return r.apply(this,arguments)})(yield ES(n),e,t);var r})),t.promise}(t,n._query).then(i=>new xh(e,r,n,i))}(this._delegate):"server"===(null==e?void 0:e.source)?function oF(n){n=on(n,as);const e=on(n.firestore,Yn),t=$r(e),r=new Lp(e);return FR(t,n._query,{source:"server"}).then(i=>new xh(e,r,n,i))}(this._delegate):function iF(n){n=on(n,as);const e=on(n.firestore,Yn),t=$r(e),r=new Lp(e);return rN(n._query),FR(t,n._query).then(i=>new xh(e,r,n,i))}(this._delegate),t.then(r=>new kS(this.firestore,new xh(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const t=wN(e),r=bN(e,i=>new kS(this.firestore,new xh(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)));return pN(this._delegate,t,r)}withConverter(e){return new Ss(this.firestore,this._delegate.withConverter(e?Vp.getInstance(this.firestore,e):null))}}class bF{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new rE(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class kS{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new Ss(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new rE(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new bF(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new rE(this._firestore,r))})}isEqual(e){return nN(this._delegate,e._delegate)}}class Sy extends Ss{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new va(this.firestore,e):null}doc(e){try{return new va(this.firestore,void 0===e?PD(this._delegate):PD(this._delegate,e))}catch(t){throw As(t,"doc()","CollectionReference.doc()")}}add(e){return function uF(n,e){const t=on(n.firestore,Yn),r=PD(n),i=$D(n.converter,e);return Ay(t,[VD(kp(n.firestore),"addDoc",r._key,i,null!==n.converter,{}).toMutation(r._key,Or.exists(!1))]).then(()=>r)}(this._delegate,e).then(t=>new va(this.firestore,t))}isEqual(e){return GR(this._delegate,e._delegate)}withConverter(e){return new Sy(this.firestore,this._delegate.withConverter(e?Vp.getInstance(this.firestore,e):null))}}function Bp(n){return on(n,$n)}class PS{constructor(...e){this._delegate=new Fc(...e)}static documentId(){return new PS(Nr.keyField().canonicalString())}isEqual(e){return(e=(0,qt.m9)(e))instanceof Fc&&this._delegate._internalPath.isEqual(e._internalPath)}}class Up{constructor(e){this._delegate=e}static serverTimestamp(){const e=function fF(){return new IS("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new Up(e)}static delete(){const e=function hF(){return new Q0("deleteField")}();return e._methodName="FieldValue.delete",new Up(e)}static arrayUnion(...e){const t=function pF(...n){return new V1("arrayUnion",n)}(...e);return t._methodName="FieldValue.arrayUnion",new Up(t)}static arrayRemove(...e){const t=function gF(...n){return new B1("arrayRemove",n)}(...e);return t._methodName="FieldValue.arrayRemove",new Up(t)}static increment(e){const t=function mF(n){return new U1("increment",n)}(e);return t._methodName="FieldValue.increment",new Up(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const DF={Firestore:_N,GeoPoint:FD,Timestamp:ir,Blob:tE,Transaction:vN,WriteBatch:EN,DocumentReference:va,DocumentSnapshot:nE,Query:Ss,QueryDocumentSnapshot:rE,QuerySnapshot:kS,CollectionReference:Sy,FieldPath:PS,FieldValue:Up,setLogLevel:function wF(n){!function ph(n){Qa.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};!function IF(n){(function CF(n,e){n.INTERNAL.registerComponent(new Wf.wA("firestore-compat",t=>{const r=t.getProvider("app-compat").getImmediate(),i=t.getProvider("firestore").getImmediate();return e(r,i)},"PUBLIC").setServiceProps(Object.assign({},DF)))})(n,(e,t)=>new _N(e,t,new EF)),n.registerVersion("@firebase/firestore-compat","0.1.17")}(Zw.Z);var GD=k(5363),TF=k(6063);class AF extends rr.x{constructor(e=1/0,t=1/0,r=TF.l){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){const{isStopped:t,_buffer:r,_infiniteTimeWindow:i,_timestampProvider:u,_windowTime:c}=this;t||(r.push(e),!i&&r.push(u.now()+c)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const t=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:i}=this,u=i.slice();for(let c=0;c<u.length&&!e.closed;c+=r?1:2)e.next(u[c]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){const{_bufferSize:e,_timestampProvider:t,_buffer:r,_infiniteTimeWindow:i}=this,u=(i?1:2)*e;if(e<1/0&&u<r.length&&r.splice(0,r.length-u),!i){const c=t.now();let p=0;for(let y=1;y<r.length&&r[y]<=c;y+=2)p=y;p&&r.splice(0,p+1)}}}var SF=k(3099);function DN(n,e,t){let r,i=!1;return n&&"object"==typeof n?({bufferSize:r=1/0,windowTime:e=1/0,refCount:i=!1,scheduler:t}=n):r=null!=n?n:1/0,(0,SF.B)({connector:()=>new AF(r,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:i})}function CN(n,e){return(0,fi.m)(e)?Nn(()=>n,e):Nn(()=>n)}var FS=k(9468);k(5867);const TN=new Map,OF={activated:!1,tokenObservers:[]},kF={initialized:!1,enabled:!1};function Si(n){return TN.get(n)||OF}function iu(n,e){TN.set(n,e)}function zD(){return kF}class BF{constructor(e,t,r,i,u){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=u,this.pending=null,this.nextErrorWaitInterval=i,i>u)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){var t=this;return(0,_e.Z)(function*(){t.stop();try{t.pending=new qt.BH,yield function UF(n){return new Promise(e=>{setTimeout(e,n)})}(t.getNextRun(e)),t.pending.resolve(),yield t.pending.promise,t.pending=new qt.BH,yield t.operation(),t.pending.resolve(),yield t.pending.promise,t.process(!0).catch(()=>{})}catch(r){t.retryPolicy(r)?t.process(!1).catch(()=>{}):t.stop()}})()}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}}const Ms=new qt.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function SN(n){if(!Si(n).activated)throw Ms.create("use-before-activation",{appName:n.name})}function US(n,e){return jS.apply(this,arguments)}function jS(){return jS=(0,_e.Z)(function*({url:n,body:e},t){const r={"Content-Type":"application/json"},i=t.getImmediate({optional:!0});if(i){const M=yield i.getHeartbeatsHeader();M&&(r["X-Firebase-Client"]=M)}const u={method:"POST",body:JSON.stringify(e),headers:r};let c,p;try{c=yield fetch(n,u)}catch(M){throw Ms.create("fetch-network-error",{originalErrorMessage:M.message})}if(200!==c.status)throw Ms.create("fetch-status-error",{httpStatus:c.status});try{p=yield c.json()}catch(M){throw Ms.create("fetch-parse-error",{originalErrorMessage:M.message})}const y=p.ttl.match(/^([\d.]+)(s)$/);if(!y||!y[2]||isNaN(Number(y[1])))throw Ms.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${p.ttl}`});const b=1e3*Number(y[1]),S=Date.now();return{token:p.attestationToken,expireTimeMillis:S+b,issuedAtTimeMillis:S}}),jS.apply(this,arguments)}function qF(n,e){const{projectId:t,appId:r,apiKey:i}=n.options;return{url:`https://content-firebaseappcheck.googleapis.com/v1beta/projects/${t}/apps/${r}:exchangeDebugToken?key=${i}`,body:{debug_token:e}}}const iE="firebase-app-check-store";let ZD=null;function xN(){return ZD||(ZD=new Promise((n,e)=>{try{const t=indexedDB.open("firebase-app-check-database",1);t.onsuccess=r=>{n(r.target.result)},t.onerror=r=>{var i;e(Ms.create("storage-open",{originalErrorMessage:null===(i=r.target.error)||void 0===i?void 0:i.message}))},t.onupgradeneeded=r=>{0===r.oldVersion&&r.target.result.createObjectStore(iE,{keyPath:"compositeKey"})}}catch(t){e(Ms.create("storage-open",{originalErrorMessage:t.message}))}}),ZD)}function $S(){return $S=(0,_e.Z)(function*(n,e){const r=(yield xN()).transaction(iE,"readwrite"),u=r.objectStore(iE).put({compositeKey:n,value:e});return new Promise((c,p)=>{u.onsuccess=y=>{c()},r.onerror=y=>{var b;p(Ms.create("storage-set",{originalErrorMessage:null===(b=y.target.error)||void 0===b?void 0:b.message}))}})}),$S.apply(this,arguments)}const sE=new qa.Yd("@firebase/app-check");function kN(n,e){return(0,qt.hl)()?function ZF(n,e){return function RN(n,e){return $S.apply(this,arguments)}(function ON(n){return`${n.options.appId}-${n.name}`}(n),e)}(n,e).catch(t=>{sE.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function PN(){return zD().enabled}function FN(){return zS.apply(this,arguments)}function zS(){return zS=(0,_e.Z)(function*(){const n=zD();if(n.enabled&&n.token)return n.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")}),zS.apply(this,arguments)}const tL={error:"UNKNOWN_ERROR"};function nL(n){return qt.US.encodeString(JSON.stringify(n),!1)}function YD(n){return WS.apply(this,arguments)}function WS(){return WS=(0,_e.Z)(function*(n,e=!1){const t=n.app;SN(t);const r=Si(t);let u,i=r.token;if(!i){const y=yield r.cachedTokenPromise;y&&QD(y)&&(i=y)}if(!e&&i&&QD(i))return{token:i.token};let p,c=!1;if(PN()){r.exchangeTokenPromise||(r.exchangeTokenPromise=US(qF(t,yield FN()),n.heartbeatServiceProvider).then(b=>(r.exchangeTokenPromise=void 0,b)),c=!0);const y=yield r.exchangeTokenPromise;return yield kN(t,y),iu(t,Object.assign(Object.assign({},r),{token:y})),{token:y.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().then(y=>(r.exchangeTokenPromise=void 0,y)),c=!0),i=yield r.exchangeTokenPromise}catch(y){"appCheck/throttled"===y.code?sE.warn(y.message):sE.error(y),u=y}return i?(p={token:i.token},iu(t,Object.assign(Object.assign({},r),{token:i})),yield kN(t,i)):p=iL(u),c&&VN(t,p),p}),WS.apply(this,arguments)}function ZS(n,e){const t=Si(n),r=t.tokenObservers.filter(i=>i.next!==e);0===r.length&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),iu(n,Object.assign(Object.assign({},t),{tokenObservers:r}))}function LN(n){const{app:e}=n,t=Si(e);let r=t.tokenRefresher;r||(r=function rL(n){const{app:e}=n;return new BF((0,_e.Z)(function*(){let r;if(r=Si(e).token?yield YD(n,!0):yield YD(n),r.error)throw r.error}),()=>!0,()=>{const t=Si(e);if(t.token){let r=t.token.issuedAtTimeMillis+.5*(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)+3e5;return r=Math.min(r,t.token.expireTimeMillis-3e5),Math.max(0,r-Date.now())}return 0},3e4,96e4)}(n),iu(e,Object.assign(Object.assign({},t),{tokenRefresher:r}))),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function VN(n,e){const t=Si(n).tokenObservers;for(const r of t)try{"EXTERNAL"===r.type&&null!=e.error?r.error(e.error):r.next(e)}catch(i){}}function QD(n){return n.expireTimeMillis-Date.now()>0}function iL(n){return{token:nL(tL),error:n}}class sL{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){const{tokenObservers:e}=Si(this.app);for(const t of e)ZS(this.app,t.next);return Promise.resolve()}}const zN="app-check-internal";!function vL(){(0,$u._registerComponent)(new Wf.wA("app-check",n=>function oL(n,e){return new sL(n,e)}(n.getProvider("app").getImmediate(),n.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(zN).initialize()})),(0,$u._registerComponent)(new Wf.wA(zN,n=>function aL(n){return{getToken:e=>YD(n,e),addTokenListener:e=>function KS(n,e,t,r){const{app:i}=n,u=Si(i),c={next:t,error:r,type:e};if(iu(i,Object.assign(Object.assign({},u),{tokenObservers:[...u.tokenObservers,c]})),u.token&&QD(u.token)){const p=u.token;Promise.resolve().then(()=>{t({token:p.token}),LN(n)}).catch(()=>{})}u.cachedTokenPromise.then(()=>LN(n))}(n,"INTERNAL",e),removeTokenListener:e=>ZS(n.app,e)}}(n.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,$u.registerVersion)("@firebase/app-check","0.5.6")}();class XS{constructor(){return(0,pr.vb)("app-check")}}"undefined"!=typeof window&&window;var CL=k(127);const KN=new f.OlP("angularfire2.auth.use-emulator"),ZN=new f.OlP("angularfire2.auth.settings"),YN=new f.OlP("angularfire2.auth.tenant-id"),QN=new f.OlP("angularfire2.auth.langugage-code"),JN=new f.OlP("angularfire2.auth.use-device-language"),XN=new f.OlP("angularfire.auth.persistence"),eO=(n,e,t,r,i,u,c,p)=>(0,Cs.cc)(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const y=e.runOutsideAngular(()=>n.auth());if(t&&y.useEmulator(...t),r&&(y.tenantId=r),y.languageCode=i,u&&y.useDeviceLanguage(),c)for(const[b,S]of Object.entries(c))y.settings[b]=S;return p&&y.setPersistence(p),y},[t,r,i,u,c,p]);let tO=(()=>{class n{constructor(t,r,i,u,c,p,y,b,S,M,F,B){const G=new rr.x,te=yt(void 0).pipe((0,GD.Q)(c.outsideAngular),Nn(()=>u.runOutsideAngular(()=>Promise.resolve().then(k.bind(k,820)))),(0,Rt.U)(()=>(0,Cs.on)(t,u,r)),(0,Rt.U)(Ee=>eO(Ee,u,p,b,S,M,y,F)),DN({bufferSize:1,refCount:!1}));if(hr(i))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=yt(null);else{te.pipe(Qs()).subscribe();const Ze=te.pipe(Nn(et=>et.getRedirectResult().then(_t=>_t,()=>null)),pr.iC,DN({bufferSize:1,refCount:!1})),Ye=te.pipe(Nn(et=>new Fr.y(_t=>({unsubscribe:u.runOutsideAngular(()=>et.onAuthStateChanged(Ct=>_t.next(Ct),Ct=>_t.error(Ct),()=>_t.complete()))})))),je=te.pipe(Nn(et=>new Fr.y(_t=>({unsubscribe:u.runOutsideAngular(()=>et.onIdTokenChanged(Ct=>_t.next(Ct),Ct=>_t.error(Ct),()=>_t.complete()))}))));this.authState=Ze.pipe(CN(Ye),(0,FS.R)(c.outsideAngular),(0,GD.Q)(c.insideAngular)),this.user=Ze.pipe(CN(je),(0,FS.R)(c.outsideAngular),(0,GD.Q)(c.insideAngular)),this.idToken=this.user.pipe(Nn(et=>et?(0,xn.D)(et.getIdToken()):yt(null))),this.idTokenResult=this.user.pipe(Nn(et=>et?(0,xn.D)(et.getIdTokenResult()):yt(null))),this.credential=(0,X_.T)(Ze,G,this.authState.pipe(Qi(et=>!et))).pipe((0,Rt.U)(et=>(null==et?void 0:et.user)?et:null),(0,FS.R)(c.outsideAngular),(0,GD.Q)(c.insideAngular))}return(0,Cs.pX)(this,te,u,{spy:{apply:(Ee,Ze,Ye)=>{(Ee.startsWith("signIn")||Ee.startsWith("createUser"))&&Ye.then(je=>G.next(je))}}})}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(Cs.Dh),f.LFG(Cs.xv,8),f.LFG(f.Lbi),f.LFG(f.R0b),f.LFG(pr.HU),f.LFG(KN,8),f.LFG(ZN,8),f.LFG(YN,8),f.LFG(QN,8),f.LFG(JN,8),f.LFG(XN,8),f.LFG(XS,8))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})();function nO(n,e){return function TL(n,e=zw.z){return new Fr.y(t=>{let r;return null!=e?e.schedule(()=>{r=n.onSnapshot({includeMetadataChanges:!0},t)}):r=n.onSnapshot({includeMetadataChanges:!0},t),()=>{null!=r&&r()}})}(n,e)}function tM(n,e){return nO(n,e).pipe((0,Rt.U)(t=>({payload:t,type:"query"})))}function XD(n,e){return tM(n,e).pipe(Li(void 0),_v(),(0,Rt.U)(([t,r])=>{const i=r.payload.docChanges(),u=i.map(c=>({type:c.type,payload:c}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(r.payload.metadata)&&r.payload.docs.forEach((c,p)=>{const y=i.find(S=>S.doc.ref.isEqual(c.ref)),b=null==t?void 0:t.payload.docs.find(S=>S.ref.isEqual(c.ref));y&&JSON.stringify(y.doc.metadata)===JSON.stringify(c.metadata)||!y&&b&&JSON.stringify(b.metadata)===JSON.stringify(c.metadata)||u.push({type:"modified",payload:{oldIndex:p,newIndex:p,type:"modified",doc:c}})}),u}))}function rO(n,e,t){return XD(n,t).pipe(Ar((r,i)=>function SL(n,e,t){return e.forEach(r=>{t.indexOf(r.type)>-1&&(n=function ML(n,e){switch(e.type){case"added":if(!n[e.newIndex]||!n[e.newIndex].doc.ref.isEqual(e.doc.ref))return nM(n,e.newIndex,0,e);break;case"modified":if(null==n[e.oldIndex]||n[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return nM(n,e.newIndex,1,e)}break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return nM(n,e.oldIndex,1)}return n}(n,r))}),n}(r,i.map(u=>u.payload),e),[]),function Ww(n,e=di.y){return n=null!=n?n:Kw,(0,Lr.e)((t,r)=>{let i,u=!0;t.subscribe((0,Bn.x)(r,c=>{const p=e(c);(u||!n(i,p))&&(u=!1,i=p,r.next(c))}))})}(),(0,Rt.U)(r=>r.map(i=>({type:i.type,payload:i}))))}function nM(n,e,t,...r){const i=n.slice();return i.splice(e,t,...r),i}function iO(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}class sO{constructor(e,t,r){this.ref=e,this.query=t,this.afs=r}stateChanges(e){let t=XD(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,Rt.U)(r=>r.filter(i=>e.indexOf(i.type)>-1)))),t.pipe(Li(void 0),_v(),Qi(([r,i])=>i.length>0||!r),(0,Rt.U)(([r,i])=>i),pr.iC)}auditTrail(e){return this.stateChanges(e).pipe(Ar((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=iO(e);return rO(this.query,t,this.afs.schedulers.outsideAngular).pipe(pr.iC)}valueChanges(e={}){return tM(this.query,this.afs.schedulers.outsideAngular).pipe((0,Rt.U)(t=>t.payload.docs.map(r=>e.idField?Object.assign(Object.assign({},r.data()),{[e.idField]:r.id}):r.data())),pr.iC)}get(e){return(0,xn.D)(this.query.get(e)).pipe(pr.iC)}add(e){return this.ref.add(e)}doc(e){return new oO(this.ref.doc(e),this.afs)}}class oO{constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const r=this.ref.collection(e),{ref:i,query:u}=lO(r,t);return new sO(i,u,this.afs)}snapshotChanges(){return function AL(n,e){return nO(n,e).pipe(Li(void 0),_v(),(0,Rt.U)(([t,r])=>r.exists?(null==t?void 0:t.exists)?{payload:r,type:"modified"}:{payload:r,type:"added"}:{payload:r,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(pr.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,Rt.U)(({payload:t})=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return(0,xn.D)(this.ref.get(e)).pipe(pr.iC)}}class xL{constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?XD(this.query,this.afs.schedulers.outsideAngular).pipe((0,Rt.U)(t=>t.filter(r=>e.indexOf(r.type)>-1)),Qi(t=>t.length>0),pr.iC):XD(this.query,this.afs.schedulers.outsideAngular).pipe(pr.iC)}auditTrail(e){return this.stateChanges(e).pipe(Ar((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=iO(e);return rO(this.query,t,this.afs.schedulers.outsideAngular).pipe(pr.iC)}valueChanges(e={}){return tM(this.query,this.afs.schedulers.outsideAngular).pipe((0,Rt.U)(r=>r.payload.docs.map(i=>e.idField?Object.assign({[e.idField]:i.id},i.data()):i.data())),pr.iC)}get(e){return(0,xn.D)(this.query.get(e)).pipe(pr.iC)}}const aO=new f.OlP("angularfire2.enableFirestorePersistence"),uO=new f.OlP("angularfire2.firestore.persistenceSettings"),RL=new f.OlP("angularfire2.firestore.settings"),NL=new f.OlP("angularfire2.firestore.use-emulator");function lO(n,e=(t=>t)){return{query:e(n),ref:n}}let rM=(()=>{class n{constructor(t,r,i,u,c,p,y,b,S,M,F,B,G,te,Ee,Ze,Ye){this.schedulers=y;const je=(0,Cs.on)(t,p,r),et=S;M&&eO(je,p,F,G,te,Ee,B,Ze),[this.firestore,this.persistenceEnabled$]=(0,Cs.cc)(`${je.name}.firestore`,"AngularFirestore",je.name,()=>{const _t=p.runOutsideAngular(()=>je.firestore());if(u&&_t.settings(u),et&&_t.useEmulator(...et),i&&!hr(c)){const Ct=()=>{try{return(0,xn.D)(_t.enablePersistence(b||void 0).then(()=>!0,()=>!1))}catch($t){return"undefined"!=typeof console&&console.warn($t),yt(!1)}};return[_t,p.runOutsideAngular(Ct)]}return[_t,yt(!1)]},[u,et,i])}collection(t,r){let i;i="string"==typeof t?this.firestore.collection(t):t;const{ref:u,query:c}=lO(i,r),p=this.schedulers.ngZone.run(()=>u);return new sO(p,c,this)}collectionGroup(t,r){const i=r||(c=>c),u=this.firestore.collectionGroup(t);return new xL(i(u),this)}doc(t){let r;r="string"==typeof t?this.firestore.doc(t):t;const i=this.schedulers.ngZone.run(()=>r);return new oO(i,this)}createId(){return this.firestore.collection("_").doc().id}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(Cs.Dh),f.LFG(Cs.xv,8),f.LFG(aO,8),f.LFG(RL,8),f.LFG(f.Lbi),f.LFG(f.R0b),f.LFG(pr.HU),f.LFG(uO,8),f.LFG(NL,8),f.LFG(tO,8),f.LFG(KN,8),f.LFG(ZN,8),f.LFG(YN,8),f.LFG(QN,8),f.LFG(JN,8),f.LFG(XN,8),f.LFG(XS,8))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),cO=(()=>{class n{constructor(){CL.Z.registerVersion("angularfire",pr.q4.full,"fst-compat")}static enablePersistence(t){return{ngModule:n,providers:[{provide:aO,useValue:!0},{provide:uO,useValue:t}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({providers:[rM]}),n})();const dO=(n,e)=>{if(void 0===e)return n;const t=Object.keys(e);return n.filter(i=>((i,u,c)=>void 0===i.find(p=>u[p]!==c[p]))(t,i,e))};let oE=(()=>{class n{constructor(t){this._client=t}add(t){this._client.collection("task").add(t)}getAll(t){return this._client.collection("task").valueChanges({idField:"id"}).pipe((0,Rt.U)(r=>dO(r,t)))}remove(t){this._client.doc("task/"+t).delete()}set(t){this._client.doc("task/"+t.id).update(t)}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(rM))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})(),OL=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({providers:[oE,{provide:Hw,useExisting:oE},{provide:y_,useExisting:oE},{provide:Ef,useExisting:oE},{provide:__,useExisting:oE}],imports:[[cO]]}),n})(),kL=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({providers:[],imports:[[br,Z_,Vo.forRoot(),fv.forRoot(),ca]]}),n})(),PL=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({providers:[],imports:[[br]]}),n})(),hO=(()=>{class n{constructor(t){this._client=t}getAll(t){return this._client.collection("photo").valueChanges({idField:"id"}).pipe((0,Rt.U)(r=>dO(r,t)))}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(rM))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();const fO=new f.OlP("GETS_ALL_PHOTO_DTO");let pO=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({providers:[hO,{provide:fO,useExisting:hO}],imports:[[cO]]}),n})(),FL=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({providers:[],imports:[[br,ca.forChild([{path:"",component:$I}]),qw,OL,kL,pO]]}),n})();const LL=[{path:"",loadChildren:()=>CC},{path:"add-task",loadChildren:()=>FL}];let VL=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({imports:[[ca.forRoot(LL)],ca]}),n})(),BL=(()=>{class n{constructor(){this.todayDate=(new Date).toDateString()}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=f.Xpm({type:n,selectors:[["lib-date"]],decls:7,vars:1,consts:[[1,"d-flex","align-items-start"],[1,"d-inline-flex","bd-highlight"],[1,"d-inline-flex","p-2","bd-highlight","align-self-center"]],template:function(t,r){1&t&&(f.TgZ(0,"div")(1,"div",0)(2,"div",1)(3,"h1"),f._uU(4,"TODAY"),f.qZA()(),f.TgZ(5,"div",2),f._uU(6),f.qZA()()()),2&t&&(f.xp6(6),f.hij(" ",r.todayDate," "))},encapsulation:2,changeDetection:0}),n})();function UL(n,e){if(1&n&&(f.TgZ(0,"div",3)(1,"div",4),f._UZ(2,"img",5),f.qZA()()),2&n){const t=e.$implicit;f.xp6(2),f.Q6J("src",t.imageUrl,f.LSH)}}let jL=(()=>{class n{constructor(t){this._getsAllPhotoDto=t,this.photo$=this._getsAllPhotoDto.getAll()}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(fO))},n.\u0275cmp=f.Xpm({type:n,selectors:[["lib-photo"]],decls:4,vars:3,consts:[[1,"container","mt-5"],[1,"row","d-flex","justify-content-center","pt-5"],["class","col-3",4,"ngFor","ngForOf"],[1,"col-3"],[1,"me-2"],[1,"img-fluid",3,"src"]],template:function(t,r){1&t&&(f.TgZ(0,"div",0)(1,"div",1),f.YNc(2,UL,3,1,"div",2),f.ALo(3,"async"),f.qZA()()),2&t&&(f.xp6(2),f.Q6J("ngForOf",f.lcZ(3,1,r.photo$)))},directives:[nr],pipes:[cu],encapsulation:2,changeDetection:0}),n})(),$L=(()=>{class n{constructor(){this.title="todo-app"}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=f.Xpm({type:n,selectors:[["app-root"]],decls:19,vars:0,consts:[[1,"header"],[1,"container","px-4","text-light"],[1,"row","gx-5"],[1,"col"],[1,"p-3"],["routerLink","/home-page",1,"mb-0"],[1,"container","px-4"],[1,"col","px-3","pt-3"],[1,"p-1"],[1,"container-flex"],[1,"my-4","container"]],template:function(t,r){1&t&&(f.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"h1",5),f._uU(6,"Awesome ToDo App"),f.qZA()()()()()(),f.TgZ(7,"div",6)(8,"div",2)(9,"div",3)(10,"div",6)(11,"div",2)(12,"div",7),f._UZ(13,"lib-date"),f.qZA()()(),f.TgZ(14,"div",8)(15,"div",9),f._UZ(16,"hr",10),f.qZA()()()()(),f._UZ(17,"router-outlet")(18,"lib-photo"))},directives:[vf,BL,ql,jL],styles:[""]}),n})();const gO_firebase={projectId:"todo-app-6c693",appId:"1:792930536963:web:949db58c1ee25b055e0836",storageBucket:"todo-app-6c693.appspot.com",locationId:"europe-west",apiKey:"AIzaSyBbx4rSnlOufistBLrXtV7-RQ1yb_Bm7ik",authDomain:"todo-app-6c693.firebaseapp.com",messagingSenderId:"792930536963"};let HL=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({providers:[],imports:[[br]]}),n})();const rn=!1;function mO(n){return new f.vHH(3e3,rn)}function DV(){return"undefined"!=typeof window&&void 0!==window.document}function iM(){return"undefined"!=typeof process&&"[object process]"==={}.toString.call(process)}function Oh(n){switch(n.length){case 0:return new qf;case 1:return n[0];default:return new Bw(n)}}function yO(n,e,t,r,i={},u={}){const c=[],p=[];let y=-1,b=null;if(r.forEach(S=>{const M=S.offset,F=M==y,B=F&&b||{};Object.keys(S).forEach(G=>{let te=G,Ee=S[G];if("offset"!==G)switch(te=e.normalizePropertyName(te,c),Ee){case"!":Ee=i[G];break;case pa:Ee=u[G];break;default:Ee=e.normalizeStyleValue(G,te,Ee,c)}B[te]=Ee}),F||p.push(B),b=B,y=M}),c.length)throw function hV(n){return new f.vHH(3502,rn)}();return p}function sM(n,e,t,r){switch(e){case"start":n.onStart(()=>r(t&&oM(t,"start",n)));break;case"done":n.onDone(()=>r(t&&oM(t,"done",n)));break;case"destroy":n.onDestroy(()=>r(t&&oM(t,"destroy",n)))}}function oM(n,e,t){const r=t.totalTime,u=aM(n.element,n.triggerName,n.fromState,n.toState,e||n.phaseName,null==r?n.totalTime:r,!!t.disabled),c=n._data;return null!=c&&(u._data=c),u}function aM(n,e,t,r,i="",u=0,c){return{element:n,triggerName:e,fromState:t,toState:r,phaseName:i,totalTime:u,disabled:!!c}}function Uo(n,e,t){let r;return n instanceof Map?(r=n.get(e),r||n.set(e,r=t)):(r=n[e],r||(r=n[e]=t)),r}function _O(n){const e=n.indexOf(":");return[n.substring(1,e),n.substr(e+1)]}let uM=(n,e)=>!1,vO=(n,e,t)=>[],EO=null;function lM(n){const e=n.parentNode||n.host;return e===EO?null:e}(iM()||"undefined"!=typeof Element)&&(DV()?(EO=(()=>document.documentElement)(),uM=(n,e)=>{for(;e;){if(e===n)return!0;e=lM(e)}return!1}):uM=(n,e)=>n.contains(e),vO=(n,e,t)=>{if(t)return Array.from(n.querySelectorAll(e));const r=n.querySelector(e);return r?[r]:[]});let jp=null,wO=!1;function bO(n){jp||(jp=function IV(){return"undefined"!=typeof document?document.body:null}()||{},wO=!!jp.style&&"WebkitAppearance"in jp.style);let e=!0;return jp.style&&!function CV(n){return"ebkit"==n.substring(1,6)}(n)&&(e=n in jp.style,!e&&wO&&(e="Webkit"+n.charAt(0).toUpperCase()+n.substr(1)in jp.style)),e}const DO=uM,CO=vO;let IO=(()=>{class n{validateStyleProperty(t){return bO(t)}matchesElement(t,r){return!1}containsElement(t,r){return DO(t,r)}getParentElement(t){return lM(t)}query(t,r,i){return CO(t,r,i)}computeStyle(t,r,i){return i||""}animate(t,r,i,u,c,p=[],y){return new qf(i,u)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})(),cM=(()=>{class n{}return n.NOOP=new IO,n})();const dM="ng-enter",tC="ng-leave",nC="ng-trigger",rC=".ng-trigger",AO="ng-animating",hM=".ng-animating";function $p(n){if("number"==typeof n)return n;const e=n.match(/^(-?[\.\d]+)(m?s)/);return!e||e.length<2?0:fM(parseFloat(e[1]),e[2])}function fM(n,e){return"s"===e?1e3*n:n}function iC(n,e,t){return n.hasOwnProperty("duration")?n:function SV(n,e,t){let i,u=0,c="";if("string"==typeof n){const p=n.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===p)return e.push(mO()),{duration:0,delay:0,easing:""};i=fM(parseFloat(p[1]),p[2]);const y=p[3];null!=y&&(u=fM(parseFloat(y),p[4]));const b=p[5];b&&(c=b)}else i=n;if(!t){let p=!1,y=e.length;i<0&&(e.push(function GL(){return new f.vHH(3100,rn)}()),p=!0),u<0&&(e.push(function qL(){return new f.vHH(3101,rn)}()),p=!0),p&&e.splice(y,0,mO())}return{duration:i,delay:u,easing:c}}(n,e,t)}function My(n,e={}){return Object.keys(n).forEach(t=>{e[t]=n[t]}),e}function kh(n,e,t={}){if(e)for(let r in n)t[r]=n[r];else My(n,t);return t}function MO(n,e,t){return t?e+":"+t+";":""}function xO(n){let e="";for(let t=0;t<n.style.length;t++){const r=n.style.item(t);e+=MO(0,r,n.style.getPropertyValue(r))}for(const t in n.style)n.style.hasOwnProperty(t)&&!t.startsWith("_")&&(e+=MO(0,RV(t),n.style[t]));n.setAttribute("style",e)}function sl(n,e,t){n.style&&(Object.keys(e).forEach(r=>{const i=gM(r);t&&!t.hasOwnProperty(r)&&(t[r]=n.style[i]),n.style[i]=e[r]}),iM()&&xO(n))}function Hp(n,e){n.style&&(Object.keys(e).forEach(t=>{const r=gM(t);n.style[r]=""}),iM()&&xO(n))}function aE(n){return Array.isArray(n)?1==n.length?n[0]:pv(n):n}const pM=new RegExp("{{\\s*(.+?)\\s*}}","g");function RO(n){let e=[];if("string"==typeof n){let t;for(;t=pM.exec(n);)e.push(t[1]);pM.lastIndex=0}return e}function sC(n,e,t){const r=n.toString(),i=r.replace(pM,(u,c)=>{let p=e[c];return e.hasOwnProperty(c)||(t.push(function WL(n){return new f.vHH(3003,rn)}()),p=""),p.toString()});return i==r?n:i}function oC(n){const e=[];let t=n.next();for(;!t.done;)e.push(t.value),t=n.next();return e}const xV=/-+([a-z0-9])/g;function gM(n){return n.replace(xV,(...e)=>e[1].toUpperCase())}function RV(n){return n.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function jo(n,e,t){switch(e.type){case 7:return n.visitTrigger(e,t);case 0:return n.visitState(e,t);case 1:return n.visitTransition(e,t);case 2:return n.visitSequence(e,t);case 3:return n.visitGroup(e,t);case 4:return n.visitAnimate(e,t);case 5:return n.visitKeyframes(e,t);case 6:return n.visitStyle(e,t);case 8:return n.visitReference(e,t);case 9:return n.visitAnimateChild(e,t);case 10:return n.visitAnimateRef(e,t);case 11:return n.visitQuery(e,t);case 12:return n.visitStagger(e,t);default:throw function KL(n){return new f.vHH(3004,rn)}()}}function NO(n,e){return window.getComputedStyle(n)[e]}function LV(n,e){const t=[];return"string"==typeof n?n.split(/\s*,\s*/).forEach(r=>function VV(n,e,t){if(":"==n[0]){const y=function BV(n,e){switch(n){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(t,r)=>parseFloat(r)>parseFloat(t);case":decrement":return(t,r)=>parseFloat(r)<parseFloat(t);default:return e.push(function uV(n){return new f.vHH(3016,rn)}()),"* => *"}}(n,t);if("function"==typeof y)return void e.push(y);n=y}const r=n.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==r||r.length<4)return t.push(function aV(n){return new f.vHH(3015,rn)}()),e;const i=r[1],u=r[2],c=r[3];e.push(OO(i,c));"<"==u[0]&&!("*"==i&&"*"==c)&&e.push(OO(c,i))}(r,t,e)):t.push(n),t}const cC=new Set(["true","1"]),dC=new Set(["false","0"]);function OO(n,e){const t=cC.has(n)||dC.has(n),r=cC.has(e)||dC.has(e);return(i,u)=>{let c="*"==n||n==i,p="*"==e||e==u;return!c&&t&&"boolean"==typeof i&&(c=i?cC.has(n):dC.has(n)),!p&&r&&"boolean"==typeof u&&(p=u?cC.has(e):dC.has(e)),c&&p}}const UV=new RegExp("s*:selfs*,?","g");function mM(n,e,t,r){return new jV(n).build(e,t,r)}class jV{constructor(e){this._driver=e}build(e,t,r){const i=new GV(t);this._resetContextStyleTimingState(i);const u=jo(this,aE(e),i);return i.unsupportedCSSPropertiesFound.size&&i.unsupportedCSSPropertiesFound.keys(),u}_resetContextStyleTimingState(e){e.currentQuerySelector="",e.collectedStyles={},e.collectedStyles[""]={},e.currentTime=0}visitTrigger(e,t){let r=t.queryCount=0,i=t.depCount=0;const u=[],c=[];return"@"==e.name.charAt(0)&&t.errors.push(function YL(){return new f.vHH(3006,rn)}()),e.definitions.forEach(p=>{if(this._resetContextStyleTimingState(t),0==p.type){const y=p,b=y.name;b.toString().split(/\s*,\s*/).forEach(S=>{y.name=S,u.push(this.visitState(y,t))}),y.name=b}else if(1==p.type){const y=this.visitTransition(p,t);r+=y.queryCount,i+=y.depCount,c.push(y)}else t.errors.push(function QL(){return new f.vHH(3007,rn)}())}),{type:7,name:e.name,states:u,transitions:c,queryCount:r,depCount:i,options:null}}visitState(e,t){const r=this.visitStyle(e.styles,t),i=e.options&&e.options.params||null;if(r.containsDynamicStyles){const u=new Set,c=i||{};r.styles.forEach(p=>{if(hC(p)){const y=p;Object.keys(y).forEach(b=>{RO(y[b]).forEach(S=>{c.hasOwnProperty(S)||u.add(S)})})}}),u.size&&(oC(u.values()),t.errors.push(function JL(n,e){return new f.vHH(3008,rn)}()))}return{type:0,name:e.name,style:r,options:i?{params:i}:null}}visitTransition(e,t){t.queryCount=0,t.depCount=0;const r=jo(this,aE(e.animation),t);return{type:1,matchers:LV(e.expr,t.errors),animation:r,queryCount:t.queryCount,depCount:t.depCount,options:Gp(e.options)}}visitSequence(e,t){return{type:2,steps:e.steps.map(r=>jo(this,r,t)),options:Gp(e.options)}}visitGroup(e,t){const r=t.currentTime;let i=0;const u=e.steps.map(c=>{t.currentTime=r;const p=jo(this,c,t);return i=Math.max(i,t.currentTime),p});return t.currentTime=i,{type:3,steps:u,options:Gp(e.options)}}visitAnimate(e,t){const r=function zV(n,e){if(n.hasOwnProperty("duration"))return n;if("number"==typeof n)return yM(iC(n,e).duration,0,"");const t=n;if(t.split(/\s+/).some(u=>"{"==u.charAt(0)&&"{"==u.charAt(1))){const u=yM(0,0,"");return u.dynamic=!0,u.strValue=t,u}const i=iC(t,e);return yM(i.duration,i.delay,i.easing)}(e.timings,t.errors);t.currentAnimateTimings=r;let i,u=e.styles?e.styles:im({});if(5==u.type)i=this.visitKeyframes(u,t);else{let c=e.styles,p=!1;if(!c){p=!0;const b={};r.easing&&(b.easing=r.easing),c=im(b)}t.currentTime+=r.duration+r.delay;const y=this.visitStyle(c,t);y.isEmptyStep=p,i=y}return t.currentAnimateTimings=null,{type:4,timings:r,style:i,options:null}}visitStyle(e,t){const r=this._makeStyleAst(e,t);return this._validateStyleAst(r,t),r}_makeStyleAst(e,t){const r=[];Array.isArray(e.styles)?e.styles.forEach(c=>{"string"==typeof c?c==pa?r.push(c):t.errors.push(function XL(n){return new f.vHH(3002,rn)}()):r.push(c)}):r.push(e.styles);let i=!1,u=null;return r.forEach(c=>{if(hC(c)){const p=c,y=p.easing;if(y&&(u=y,delete p.easing),!i)for(let b in p)if(p[b].toString().indexOf("{{")>=0){i=!0;break}}}),{type:6,styles:r,easing:u,offset:e.offset,containsDynamicStyles:i,options:null}}_validateStyleAst(e,t){const r=t.currentAnimateTimings;let i=t.currentTime,u=t.currentTime;r&&u>0&&(u-=r.duration+r.delay),e.styles.forEach(c=>{"string"!=typeof c&&Object.keys(c).forEach(p=>{if(!this._driver.validateStyleProperty(p))return delete c[p],void t.unsupportedCSSPropertiesFound.add(p);const y=t.collectedStyles[t.currentQuerySelector],b=y[p];let S=!0;b&&(u!=i&&u>=b.startTime&&i<=b.endTime&&(t.errors.push(function eV(n,e,t,r,i){return new f.vHH(3010,rn)}()),S=!1),u=b.startTime),S&&(y[p]={startTime:u,endTime:i}),t.options&&function MV(n,e,t){const r=e.params||{},i=RO(n);i.length&&i.forEach(u=>{r.hasOwnProperty(u)||t.push(function zL(n){return new f.vHH(3001,rn)}())})}(c[p],t.options,t.errors)})})}visitKeyframes(e,t){const r={type:5,styles:[],options:null};if(!t.currentAnimateTimings)return t.errors.push(function tV(){return new f.vHH(3011,rn)}()),r;let u=0;const c=[];let p=!1,y=!1,b=0;const S=e.steps.map(Ze=>{const Ye=this._makeStyleAst(Ze,t);let je=null!=Ye.offset?Ye.offset:function qV(n){if("string"==typeof n)return null;let e=null;if(Array.isArray(n))n.forEach(t=>{if(hC(t)&&t.hasOwnProperty("offset")){const r=t;e=parseFloat(r.offset),delete r.offset}});else if(hC(n)&&n.hasOwnProperty("offset")){const t=n;e=parseFloat(t.offset),delete t.offset}return e}(Ye.styles),et=0;return null!=je&&(u++,et=Ye.offset=je),y=y||et<0||et>1,p=p||et<b,b=et,c.push(et),Ye});y&&t.errors.push(function nV(){return new f.vHH(3012,rn)}()),p&&t.errors.push(function rV(){return new f.vHH(3200,rn)}());const M=e.steps.length;let F=0;u>0&&u<M?t.errors.push(function iV(){return new f.vHH(3202,rn)}()):0==u&&(F=1/(M-1));const B=M-1,G=t.currentTime,te=t.currentAnimateTimings,Ee=te.duration;return S.forEach((Ze,Ye)=>{const je=F>0?Ye==B?1:F*Ye:c[Ye],et=je*Ee;t.currentTime=G+te.delay+et,te.duration=et,this._validateStyleAst(Ze,t),Ze.offset=je,r.styles.push(Ze)}),r}visitReference(e,t){return{type:8,animation:jo(this,aE(e.animation),t),options:Gp(e.options)}}visitAnimateChild(e,t){return t.depCount++,{type:9,options:Gp(e.options)}}visitAnimateRef(e,t){return{type:10,animation:this.visitReference(e.animation,t),options:Gp(e.options)}}visitQuery(e,t){const r=t.currentQuerySelector,i=e.options||{};t.queryCount++,t.currentQuery=e;const[u,c]=function $V(n){const e=!!n.split(/\s*,\s*/).find(t=>":self"==t);return e&&(n=n.replace(UV,"")),n=n.replace(/@\*/g,rC).replace(/@\w+/g,t=>rC+"-"+t.substr(1)).replace(/:animating/g,hM),[n,e]}(e.selector);t.currentQuerySelector=r.length?r+" "+u:u,Uo(t.collectedStyles,t.currentQuerySelector,{});const p=jo(this,aE(e.animation),t);return t.currentQuery=null,t.currentQuerySelector=r,{type:11,selector:u,limit:i.limit||0,optional:!!i.optional,includeSelf:c,animation:p,originalSelector:e.selector,options:Gp(e.options)}}visitStagger(e,t){t.currentQuery||t.errors.push(function sV(){return new f.vHH(3013,rn)}());const r="full"===e.timings?{duration:0,delay:0,easing:"full"}:iC(e.timings,t.errors,!0);return{type:12,animation:jo(this,aE(e.animation),t),timings:r,options:null}}}class GV{constructor(e){this.errors=e,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles={},this.options=null,this.unsupportedCSSPropertiesFound=new Set}}function hC(n){return!Array.isArray(n)&&"object"==typeof n}function Gp(n){return n?(n=My(n)).params&&(n.params=function HV(n){return n?My(n):null}(n.params)):n={},n}function yM(n,e,t){return{duration:n,delay:e,easing:t}}function _M(n,e,t,r,i,u,c=null,p=!1){return{type:1,element:n,keyframes:e,preStyleProps:t,postStyleProps:r,duration:i,delay:u,totalTime:i+u,easing:c,subTimeline:p}}class fC{constructor(){this._map=new Map}get(e){return this._map.get(e)||[]}append(e,t){let r=this._map.get(e);r||this._map.set(e,r=[]),r.push(...t)}has(e){return this._map.has(e)}clear(){this._map.clear()}}const ZV=new RegExp(":enter","g"),QV=new RegExp(":leave","g");function vM(n,e,t,r,i,u={},c={},p,y,b=[]){return(new JV).buildKeyframes(n,e,t,r,i,u,c,p,y,b)}class JV{buildKeyframes(e,t,r,i,u,c,p,y,b,S=[]){b=b||new fC;const M=new EM(e,t,b,i,u,S,[]);M.options=y,M.currentTimeline.setStyles([c],null,M.errors,y),jo(this,r,M);const F=M.timelines.filter(B=>B.containsAnimation());if(Object.keys(p).length){let B;for(let G=F.length-1;G>=0;G--){const te=F[G];if(te.element===t){B=te;break}}B&&!B.allowOnlyTimelineStyles()&&B.setStyles([p],null,M.errors,y)}return F.length?F.map(B=>B.buildKeyframes()):[_M(t,[],[],[],0,0,"",!1)]}visitTrigger(e,t){}visitState(e,t){}visitTransition(e,t){}visitAnimateChild(e,t){const r=t.subInstructions.get(t.element);if(r){const i=t.createSubContext(e.options),u=t.currentTimeline.currentTime,c=this._visitSubInstructions(r,i,i.options);u!=c&&t.transformIntoNewTimeline(c)}t.previousNode=e}visitAnimateRef(e,t){const r=t.createSubContext(e.options);r.transformIntoNewTimeline(),this.visitReference(e.animation,r),t.transformIntoNewTimeline(r.currentTimeline.currentTime),t.previousNode=e}_visitSubInstructions(e,t,r){let u=t.currentTimeline.currentTime;const c=null!=r.duration?$p(r.duration):null,p=null!=r.delay?$p(r.delay):null;return 0!==c&&e.forEach(y=>{const b=t.appendInstructionToTimeline(y,c,p);u=Math.max(u,b.duration+b.delay)}),u}visitReference(e,t){t.updateOptions(e.options,!0),jo(this,e.animation,t),t.previousNode=e}visitSequence(e,t){const r=t.subContextCount;let i=t;const u=e.options;if(u&&(u.params||u.delay)&&(i=t.createSubContext(u),i.transformIntoNewTimeline(),null!=u.delay)){6==i.previousNode.type&&(i.currentTimeline.snapshotCurrentStyles(),i.previousNode=pC);const c=$p(u.delay);i.delayNextStep(c)}e.steps.length&&(e.steps.forEach(c=>jo(this,c,i)),i.currentTimeline.applyStylesToKeyframe(),i.subContextCount>r&&i.transformIntoNewTimeline()),t.previousNode=e}visitGroup(e,t){const r=[];let i=t.currentTimeline.currentTime;const u=e.options&&e.options.delay?$p(e.options.delay):0;e.steps.forEach(c=>{const p=t.createSubContext(e.options);u&&p.delayNextStep(u),jo(this,c,p),i=Math.max(i,p.currentTimeline.currentTime),r.push(p.currentTimeline)}),r.forEach(c=>t.currentTimeline.mergeTimelineCollectedStyles(c)),t.transformIntoNewTimeline(i),t.previousNode=e}_visitTiming(e,t){if(e.dynamic){const r=e.strValue;return iC(t.params?sC(r,t.params,t.errors):r,t.errors)}return{duration:e.duration,delay:e.delay,easing:e.easing}}visitAnimate(e,t){const r=t.currentAnimateTimings=this._visitTiming(e.timings,t),i=t.currentTimeline;r.delay&&(t.incrementTime(r.delay),i.snapshotCurrentStyles());const u=e.style;5==u.type?this.visitKeyframes(u,t):(t.incrementTime(r.duration),this.visitStyle(u,t),i.applyStylesToKeyframe()),t.currentAnimateTimings=null,t.previousNode=e}visitStyle(e,t){const r=t.currentTimeline,i=t.currentAnimateTimings;!i&&r.getCurrentStyleProperties().length&&r.forwardFrame();const u=i&&i.easing||e.easing;e.isEmptyStep?r.applyEmptyStep(u):r.setStyles(e.styles,u,t.errors,t.options),t.previousNode=e}visitKeyframes(e,t){const r=t.currentAnimateTimings,i=t.currentTimeline.duration,u=r.duration,p=t.createSubContext().currentTimeline;p.easing=r.easing,e.styles.forEach(y=>{p.forwardTime((y.offset||0)*u),p.setStyles(y.styles,y.easing,t.errors,t.options),p.applyStylesToKeyframe()}),t.currentTimeline.mergeTimelineCollectedStyles(p),t.transformIntoNewTimeline(i+u),t.previousNode=e}visitQuery(e,t){const r=t.currentTimeline.currentTime,i=e.options||{},u=i.delay?$p(i.delay):0;u&&(6===t.previousNode.type||0==r&&t.currentTimeline.getCurrentStyleProperties().length)&&(t.currentTimeline.snapshotCurrentStyles(),t.previousNode=pC);let c=r;const p=t.invokeQuery(e.selector,e.originalSelector,e.limit,e.includeSelf,!!i.optional,t.errors);t.currentQueryTotal=p.length;let y=null;p.forEach((b,S)=>{t.currentQueryIndex=S;const M=t.createSubContext(e.options,b);u&&M.delayNextStep(u),b===t.element&&(y=M.currentTimeline),jo(this,e.animation,M),M.currentTimeline.applyStylesToKeyframe(),c=Math.max(c,M.currentTimeline.currentTime)}),t.currentQueryIndex=0,t.currentQueryTotal=0,t.transformIntoNewTimeline(c),y&&(t.currentTimeline.mergeTimelineCollectedStyles(y),t.currentTimeline.snapshotCurrentStyles()),t.previousNode=e}visitStagger(e,t){const r=t.parentContext,i=t.currentTimeline,u=e.timings,c=Math.abs(u.duration),p=c*(t.currentQueryTotal-1);let y=c*t.currentQueryIndex;switch(u.duration<0?"reverse":u.easing){case"reverse":y=p-y;break;case"full":y=r.currentStaggerTime}const S=t.currentTimeline;y&&S.delayNextStep(y);const M=S.currentTime;jo(this,e.animation,t),t.previousNode=e,r.currentStaggerTime=i.currentTime-M+(i.startTime-r.currentTimeline.startTime)}}const pC={};class EM{constructor(e,t,r,i,u,c,p,y){this._driver=e,this.element=t,this.subInstructions=r,this._enterClassName=i,this._leaveClassName=u,this.errors=c,this.timelines=p,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=pC,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=y||new gC(this._driver,t,0),p.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(e,t){if(!e)return;const r=e;let i=this.options;null!=r.duration&&(i.duration=$p(r.duration)),null!=r.delay&&(i.delay=$p(r.delay));const u=r.params;if(u){let c=i.params;c||(c=this.options.params={}),Object.keys(u).forEach(p=>{(!t||!c.hasOwnProperty(p))&&(c[p]=sC(u[p],c,this.errors))})}}_copyOptions(){const e={};if(this.options){const t=this.options.params;if(t){const r=e.params={};Object.keys(t).forEach(i=>{r[i]=t[i]})}}return e}createSubContext(e=null,t,r){const i=t||this.element,u=new EM(this._driver,i,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(i,r||0));return u.previousNode=this.previousNode,u.currentAnimateTimings=this.currentAnimateTimings,u.options=this._copyOptions(),u.updateOptions(e),u.currentQueryIndex=this.currentQueryIndex,u.currentQueryTotal=this.currentQueryTotal,u.parentContext=this,this.subContextCount++,u}transformIntoNewTimeline(e){return this.previousNode=pC,this.currentTimeline=this.currentTimeline.fork(this.element,e),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(e,t,r){const i={duration:null!=t?t:e.duration,delay:this.currentTimeline.currentTime+(null!=r?r:0)+e.delay,easing:""},u=new XV(this._driver,e.element,e.keyframes,e.preStyleProps,e.postStyleProps,i,e.stretchStartingKeyframe);return this.timelines.push(u),i}incrementTime(e){this.currentTimeline.forwardTime(this.currentTimeline.duration+e)}delayNextStep(e){e>0&&this.currentTimeline.delayNextStep(e)}invokeQuery(e,t,r,i,u,c){let p=[];if(i&&p.push(this.element),e.length>0){e=(e=e.replace(ZV,"."+this._enterClassName)).replace(QV,"."+this._leaveClassName);let b=this._driver.query(this.element,e,1!=r);0!==r&&(b=r<0?b.slice(b.length+r,b.length):b.slice(0,r)),p.push(...b)}return!u&&0==p.length&&c.push(function oV(n){return new f.vHH(3014,rn)}()),p}}class gC{constructor(e,t,r,i){this._driver=e,this.element=t,this.startTime=r,this._elementTimelineStylesLookup=i,this.duration=0,this._previousKeyframe={},this._currentKeyframe={},this._keyframes=new Map,this._styleSummary={},this._pendingStyles={},this._backFill={},this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._localTimelineStyles=Object.create(this._backFill,{}),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(t),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(t,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.getCurrentStyleProperties().length>0;default:return!0}}getCurrentStyleProperties(){return Object.keys(this._currentKeyframe)}get currentTime(){return this.startTime+this.duration}delayNextStep(e){const t=1==this._keyframes.size&&Object.keys(this._pendingStyles).length;this.duration||t?(this.forwardTime(this.currentTime+e),t&&this.snapshotCurrentStyles()):this.startTime+=e}fork(e,t){return this.applyStylesToKeyframe(),new gC(this._driver,e,t||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=Object.create(this._backFill,{}),this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(e){this.applyStylesToKeyframe(),this.duration=e,this._loadKeyframe()}_updateStyle(e,t){this._localTimelineStyles[e]=t,this._globalTimelineStyles[e]=t,this._styleSummary[e]={time:this.currentTime,value:t}}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(e){e&&(this._previousKeyframe.easing=e),Object.keys(this._globalTimelineStyles).forEach(t=>{this._backFill[t]=this._globalTimelineStyles[t]||pa,this._currentKeyframe[t]=pa}),this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(e,t,r,i){t&&(this._previousKeyframe.easing=t);const u=i&&i.params||{},c=function eB(n,e){const t={};let r;return n.forEach(i=>{"*"===i?(r=r||Object.keys(e),r.forEach(u=>{t[u]=pa})):kh(i,!1,t)}),t}(e,this._globalTimelineStyles);Object.keys(c).forEach(p=>{const y=sC(c[p],u,r);this._pendingStyles[p]=y,this._localTimelineStyles.hasOwnProperty(p)||(this._backFill[p]=this._globalTimelineStyles.hasOwnProperty(p)?this._globalTimelineStyles[p]:pa),this._updateStyle(p,y)})}applyStylesToKeyframe(){const e=this._pendingStyles,t=Object.keys(e);0!=t.length&&(this._pendingStyles={},t.forEach(r=>{this._currentKeyframe[r]=e[r]}),Object.keys(this._localTimelineStyles).forEach(r=>{this._currentKeyframe.hasOwnProperty(r)||(this._currentKeyframe[r]=this._localTimelineStyles[r])}))}snapshotCurrentStyles(){Object.keys(this._localTimelineStyles).forEach(e=>{const t=this._localTimelineStyles[e];this._pendingStyles[e]=t,this._updateStyle(e,t)})}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const e=[];for(let t in this._currentKeyframe)e.push(t);return e}mergeTimelineCollectedStyles(e){Object.keys(e._styleSummary).forEach(t=>{const r=this._styleSummary[t],i=e._styleSummary[t];(!r||i.time>r.time)&&this._updateStyle(t,i.value)})}buildKeyframes(){this.applyStylesToKeyframe();const e=new Set,t=new Set,r=1===this._keyframes.size&&0===this.duration;let i=[];this._keyframes.forEach((p,y)=>{const b=kh(p,!0);Object.keys(b).forEach(S=>{const M=b[S];"!"==M?e.add(S):M==pa&&t.add(S)}),r||(b.offset=y/this.duration),i.push(b)});const u=e.size?oC(e.values()):[],c=t.size?oC(t.values()):[];if(r){const p=i[0],y=My(p);p.offset=0,y.offset=1,i=[p,y]}return _M(this.element,i,u,c,this.duration,this.startTime,this.easing,!1)}}class XV extends gC{constructor(e,t,r,i,u,c,p=!1){super(e,t,c.delay),this.keyframes=r,this.preStyleProps=i,this.postStyleProps=u,this._stretchStartingKeyframe=p,this.timings={duration:c.duration,delay:c.delay,easing:c.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let e=this.keyframes,{delay:t,duration:r,easing:i}=this.timings;if(this._stretchStartingKeyframe&&t){const u=[],c=r+t,p=t/c,y=kh(e[0],!1);y.offset=0,u.push(y);const b=kh(e[0],!1);b.offset=FO(p),u.push(b);const S=e.length-1;for(let M=1;M<=S;M++){let F=kh(e[M],!1);F.offset=FO((t+F.offset*r)/c),u.push(F)}r=c,t=0,i="",e=u}return _M(this.element,e,this.preStyleProps,this.postStyleProps,r,t,i,!0)}}function FO(n,e=3){const t=Math.pow(10,e-1);return Math.round(n*t)/t}class wM{}class tB extends wM{normalizePropertyName(e,t){return gM(e)}normalizeStyleValue(e,t,r,i){let u="";const c=r.toString().trim();if(nB[t]&&0!==r&&"0"!==r)if("number"==typeof r)u="px";else{const p=r.match(/^[+-]?[\d\.]+([a-z]*)$/);p&&0==p[1].length&&i.push(function ZL(n,e){return new f.vHH(3005,rn)}())}return c+u}}const nB=(()=>function rB(n){const e={};return n.forEach(t=>e[t]=!0),e}("width,height,minWidth,minHeight,maxWidth,maxHeight,left,top,bottom,right,fontSize,outlineWidth,outlineOffset,paddingTop,paddingLeft,paddingBottom,paddingRight,marginTop,marginLeft,marginBottom,marginRight,borderRadius,borderWidth,borderTopWidth,borderLeftWidth,borderRightWidth,borderBottomWidth,textIndent,perspective".split(",")))();function LO(n,e,t,r,i,u,c,p,y,b,S,M,F){return{type:0,element:n,triggerName:e,isRemovalTransition:i,fromState:t,fromStyles:u,toState:r,toStyles:c,timelines:p,queriedElements:y,preStyleProps:b,postStyleProps:S,totalTime:M,errors:F}}const bM={};class VO{constructor(e,t,r){this._triggerName=e,this.ast=t,this._stateStyles=r}match(e,t,r,i){return function iB(n,e,t,r,i){return n.some(u=>u(e,t,r,i))}(this.ast.matchers,e,t,r,i)}buildStyles(e,t,r){const i=this._stateStyles["*"],u=this._stateStyles[e],c=i?i.buildStyles(t,r):{};return u?u.buildStyles(t,r):c}build(e,t,r,i,u,c,p,y,b,S){const M=[],F=this.ast.options&&this.ast.options.params||bM,G=this.buildStyles(r,p&&p.params||bM,M),te=y&&y.params||bM,Ee=this.buildStyles(i,te,M),Ze=new Set,Ye=new Map,je=new Map,et="void"===i,_t={params:Object.assign(Object.assign({},F),te)},Ct=S?[]:vM(e,t,this.ast.animation,u,c,G,Ee,_t,b,M);let $t=0;if(Ct.forEach(or=>{$t=Math.max(or.duration+or.delay,$t)}),M.length)return LO(t,this._triggerName,r,i,et,G,Ee,[],[],Ye,je,$t,M);Ct.forEach(or=>{const ri=or.element,lE=Uo(Ye,ri,{});or.preStyleProps.forEach(ol=>lE[ol]=!0);const Ph=Uo(je,ri,{});or.postStyleProps.forEach(ol=>Ph[ol]=!0),ri!==t&&Ze.add(ri)});const Qn=oC(Ze.values());return LO(t,this._triggerName,r,i,et,G,Ee,Ct,Qn,Ye,je,$t)}}class sB{constructor(e,t,r){this.styles=e,this.defaultParams=t,this.normalizer=r}buildStyles(e,t){const r={},i=My(this.defaultParams);return Object.keys(e).forEach(u=>{const c=e[u];null!=c&&(i[u]=c)}),this.styles.styles.forEach(u=>{if("string"!=typeof u){const c=u;Object.keys(c).forEach(p=>{let y=c[p];y.length>1&&(y=sC(y,i,t));const b=this.normalizer.normalizePropertyName(p,t);y=this.normalizer.normalizeStyleValue(p,b,y,t),r[b]=y})}}),r}}class aB{constructor(e,t,r){this.name=e,this.ast=t,this._normalizer=r,this.transitionFactories=[],this.states={},t.states.forEach(i=>{this.states[i.name]=new sB(i.style,i.options&&i.options.params||{},r)}),BO(this.states,"true","1"),BO(this.states,"false","0"),t.transitions.forEach(i=>{this.transitionFactories.push(new VO(e,i,this.states))}),this.fallbackTransition=function uB(n,e,t){return new VO(n,{type:1,animation:{type:2,steps:[],options:null},matchers:[(c,p)=>!0],options:null,queryCount:0,depCount:0},e)}(e,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(e,t,r,i){return this.transitionFactories.find(c=>c.match(e,t,r,i))||null}matchStyles(e,t,r){return this.fallbackTransition.buildStyles(e,t,r)}}function BO(n,e,t){n.hasOwnProperty(e)?n.hasOwnProperty(t)||(n[t]=n[e]):n.hasOwnProperty(t)&&(n[e]=n[t])}const lB=new fC;class cB{constructor(e,t,r){this.bodyNode=e,this._driver=t,this._normalizer=r,this._animations={},this._playersById={},this.players=[]}register(e,t){const r=[],u=mM(this._driver,t,r,[]);if(r.length)throw function fV(n){return new f.vHH(3503,rn)}();this._animations[e]=u}_buildPlayer(e,t,r){const i=e.element,u=yO(0,this._normalizer,0,e.keyframes,t,r);return this._driver.animate(i,u,e.duration,e.delay,e.easing,[],!0)}create(e,t,r={}){const i=[],u=this._animations[e];let c;const p=new Map;if(u?(c=vM(this._driver,t,u,dM,tC,{},{},r,lB,i),c.forEach(S=>{const M=Uo(p,S.element,{});S.postStyleProps.forEach(F=>M[F]=null)})):(i.push(function pV(){return new f.vHH(3300,rn)}()),c=[]),i.length)throw function gV(n){return new f.vHH(3504,rn)}();p.forEach((S,M)=>{Object.keys(S).forEach(F=>{S[F]=this._driver.computeStyle(M,F,pa)})});const b=Oh(c.map(S=>{const M=p.get(S.element);return this._buildPlayer(S,{},M)}));return this._playersById[e]=b,b.onDestroy(()=>this.destroy(e)),this.players.push(b),b}destroy(e){const t=this._getPlayer(e);t.destroy(),delete this._playersById[e];const r=this.players.indexOf(t);r>=0&&this.players.splice(r,1)}_getPlayer(e){const t=this._playersById[e];if(!t)throw function mV(n){return new f.vHH(3301,rn)}();return t}listen(e,t,r,i){const u=aM(t,"","","");return sM(this._getPlayer(e),r,u,i),()=>{}}command(e,t,r,i){if("register"==r)return void this.register(e,i[0]);if("create"==r)return void this.create(e,t,i[0]||{});const u=this._getPlayer(e);switch(r){case"play":u.play();break;case"pause":u.pause();break;case"reset":u.reset();break;case"restart":u.restart();break;case"finish":u.finish();break;case"init":u.init();break;case"setPosition":u.setPosition(parseFloat(i[0]));break;case"destroy":this.destroy(e)}}}const UO="ng-animate-queued",DM="ng-animate-disabled",gB=[],jO={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},mB={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},Ea="__ng_removed";class CM{constructor(e,t=""){this.namespaceId=t;const r=e&&e.hasOwnProperty("value");if(this.value=function EB(n){return null!=n?n:null}(r?e.value:e),r){const u=My(e);delete u.value,this.options=u}else this.options={};this.options.params||(this.options.params={})}get params(){return this.options.params}absorbOptions(e){const t=e.params;if(t){const r=this.options.params;Object.keys(t).forEach(i=>{null==r[i]&&(r[i]=t[i])})}}}const uE="void",IM=new CM(uE);class yB{constructor(e,t,r){this.id=e,this.hostElement=t,this._engine=r,this.players=[],this._triggers={},this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+e,wa(t,this._hostClassName)}listen(e,t,r,i){if(!this._triggers.hasOwnProperty(t))throw function yV(n,e){return new f.vHH(3302,rn)}();if(null==r||0==r.length)throw function _V(n){return new f.vHH(3303,rn)}();if(!function wB(n){return"start"==n||"done"==n}(r))throw function vV(n,e){return new f.vHH(3400,rn)}();const u=Uo(this._elementListeners,e,[]),c={name:t,phase:r,callback:i};u.push(c);const p=Uo(this._engine.statesByElement,e,{});return p.hasOwnProperty(t)||(wa(e,nC),wa(e,nC+"-"+t),p[t]=IM),()=>{this._engine.afterFlush(()=>{const y=u.indexOf(c);y>=0&&u.splice(y,1),this._triggers[t]||delete p[t]})}}register(e,t){return!this._triggers[e]&&(this._triggers[e]=t,!0)}_getTrigger(e){const t=this._triggers[e];if(!t)throw function EV(n){return new f.vHH(3401,rn)}();return t}trigger(e,t,r,i=!0){const u=this._getTrigger(t),c=new TM(this.id,t,e);let p=this._engine.statesByElement.get(e);p||(wa(e,nC),wa(e,nC+"-"+t),this._engine.statesByElement.set(e,p={}));let y=p[t];const b=new CM(r,this.id);if(!(r&&r.hasOwnProperty("value"))&&y&&b.absorbOptions(y.options),p[t]=b,y||(y=IM),b.value!==uE&&y.value===b.value){if(!function CB(n,e){const t=Object.keys(n),r=Object.keys(e);if(t.length!=r.length)return!1;for(let i=0;i<t.length;i++){const u=t[i];if(!e.hasOwnProperty(u)||n[u]!==e[u])return!1}return!0}(y.params,b.params)){const te=[],Ee=u.matchStyles(y.value,y.params,te),Ze=u.matchStyles(b.value,b.params,te);te.length?this._engine.reportError(te):this._engine.afterFlush(()=>{Hp(e,Ee),sl(e,Ze)})}return}const F=Uo(this._engine.playersByElement,e,[]);F.forEach(te=>{te.namespaceId==this.id&&te.triggerName==t&&te.queued&&te.destroy()});let B=u.matchTransition(y.value,b.value,e,b.params),G=!1;if(!B){if(!i)return;B=u.fallbackTransition,G=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:t,transition:B,fromState:y,toState:b,player:c,isFallbackTransition:G}),G||(wa(e,UO),c.onStart(()=>{xy(e,UO)})),c.onDone(()=>{let te=this.players.indexOf(c);te>=0&&this.players.splice(te,1);const Ee=this._engine.playersByElement.get(e);if(Ee){let Ze=Ee.indexOf(c);Ze>=0&&Ee.splice(Ze,1)}}),this.players.push(c),F.push(c),c}deregister(e){delete this._triggers[e],this._engine.statesByElement.forEach((t,r)=>{delete t[e]}),this._elementListeners.forEach((t,r)=>{this._elementListeners.set(r,t.filter(i=>i.name!=e))})}clearElementCache(e){this._engine.statesByElement.delete(e),this._elementListeners.delete(e);const t=this._engine.playersByElement.get(e);t&&(t.forEach(r=>r.destroy()),this._engine.playersByElement.delete(e))}_signalRemovalForInnerTriggers(e,t){const r=this._engine.driver.query(e,rC,!0);r.forEach(i=>{if(i[Ea])return;const u=this._engine.fetchNamespacesByElement(i);u.size?u.forEach(c=>c.triggerLeaveAnimation(i,t,!1,!0)):this.clearElementCache(i)}),this._engine.afterFlushAnimationsDone(()=>r.forEach(i=>this.clearElementCache(i)))}triggerLeaveAnimation(e,t,r,i){const u=this._engine.statesByElement.get(e),c=new Map;if(u){const p=[];if(Object.keys(u).forEach(y=>{if(c.set(y,u[y].value),this._triggers[y]){const b=this.trigger(e,y,uE,i);b&&p.push(b)}}),p.length)return this._engine.markElementAsRemoved(this.id,e,!0,t,c),r&&Oh(p).onDone(()=>this._engine.processLeaveNode(e)),!0}return!1}prepareLeaveAnimationListeners(e){const t=this._elementListeners.get(e),r=this._engine.statesByElement.get(e);if(t&&r){const i=new Set;t.forEach(u=>{const c=u.name;if(i.has(c))return;i.add(c);const y=this._triggers[c].fallbackTransition,b=r[c]||IM,S=new CM(uE),M=new TM(this.id,c,e);this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:c,transition:y,fromState:b,toState:S,player:M,isFallbackTransition:!0})})}}removeNode(e,t){const r=this._engine;if(e.childElementCount&&this._signalRemovalForInnerTriggers(e,t),this.triggerLeaveAnimation(e,t,!0))return;let i=!1;if(r.totalAnimations){const u=r.players.length?r.playersByQueriedElement.get(e):[];if(u&&u.length)i=!0;else{let c=e;for(;c=c.parentNode;)if(r.statesByElement.get(c)){i=!0;break}}}if(this.prepareLeaveAnimationListeners(e),i)r.markElementAsRemoved(this.id,e,!1,t);else{const u=e[Ea];(!u||u===jO)&&(r.afterFlush(()=>this.clearElementCache(e)),r.destroyInnerAnimations(e),r._onRemovalComplete(e,t))}}insertNode(e,t){wa(e,this._hostClassName)}drainQueuedTransitions(e){const t=[];return this._queue.forEach(r=>{const i=r.player;if(i.destroyed)return;const u=r.element,c=this._elementListeners.get(u);c&&c.forEach(p=>{if(p.name==r.triggerName){const y=aM(u,r.triggerName,r.fromState.value,r.toState.value);y._data=e,sM(r.player,p.phase,y,p.callback)}}),i.markedForDestroy?this._engine.afterFlush(()=>{i.destroy()}):t.push(r)}),this._queue=[],t.sort((r,i)=>{const u=r.transition.ast.depCount,c=i.transition.ast.depCount;return 0==u||0==c?u-c:this._engine.driver.containsElement(r.element,i.element)?1:-1})}destroy(e){this.players.forEach(t=>t.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,e)}elementContainsData(e){let t=!1;return this._elementListeners.has(e)&&(t=!0),t=!!this._queue.find(r=>r.element===e)||t,t}}class _B{constructor(e,t,r){this.bodyNode=e,this.driver=t,this._normalizer=r,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(i,u)=>{}}_onRemovalComplete(e,t){this.onRemovalComplete(e,t)}get queuedPlayers(){const e=[];return this._namespaceList.forEach(t=>{t.players.forEach(r=>{r.queued&&e.push(r)})}),e}createNamespace(e,t){const r=new yB(e,t,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,t)?this._balanceNamespaceList(r,t):(this.newHostElements.set(t,r),this.collectEnterElement(t)),this._namespaceLookup[e]=r}_balanceNamespaceList(e,t){const r=this._namespaceList,i=this.namespacesByHostElement,u=r.length-1;if(u>=0){let c=!1;if(void 0!==this.driver.getParentElement){let p=this.driver.getParentElement(t);for(;p;){const y=i.get(p);if(y){const b=r.indexOf(y);r.splice(b+1,0,e),c=!0;break}p=this.driver.getParentElement(p)}}else for(let p=u;p>=0;p--)if(this.driver.containsElement(r[p].hostElement,t)){r.splice(p+1,0,e),c=!0;break}c||r.unshift(e)}else r.push(e);return i.set(t,e),e}register(e,t){let r=this._namespaceLookup[e];return r||(r=this.createNamespace(e,t)),r}registerTrigger(e,t,r){let i=this._namespaceLookup[e];i&&i.register(t,r)&&this.totalAnimations++}destroy(e,t){if(!e)return;const r=this._fetchNamespace(e);this.afterFlush(()=>{this.namespacesByHostElement.delete(r.hostElement),delete this._namespaceLookup[e];const i=this._namespaceList.indexOf(r);i>=0&&this._namespaceList.splice(i,1)}),this.afterFlushAnimationsDone(()=>r.destroy(t))}_fetchNamespace(e){return this._namespaceLookup[e]}fetchNamespacesByElement(e){const t=new Set,r=this.statesByElement.get(e);if(r){const i=Object.keys(r);for(let u=0;u<i.length;u++){const c=r[i[u]].namespaceId;if(c){const p=this._fetchNamespace(c);p&&t.add(p)}}}return t}trigger(e,t,r,i){if(mC(t)){const u=this._fetchNamespace(e);if(u)return u.trigger(t,r,i),!0}return!1}insertNode(e,t,r,i){if(!mC(t))return;const u=t[Ea];if(u&&u.setForRemoval){u.setForRemoval=!1,u.setForMove=!0;const c=this.collectedLeaveElements.indexOf(t);c>=0&&this.collectedLeaveElements.splice(c,1)}if(e){const c=this._fetchNamespace(e);c&&c.insertNode(t,r)}i&&this.collectEnterElement(t)}collectEnterElement(e){this.collectedEnterElements.push(e)}markElementAsDisabled(e,t){t?this.disabledNodes.has(e)||(this.disabledNodes.add(e),wa(e,DM)):this.disabledNodes.has(e)&&(this.disabledNodes.delete(e),xy(e,DM))}removeNode(e,t,r,i){if(mC(t)){const u=e?this._fetchNamespace(e):null;if(u?u.removeNode(t,i):this.markElementAsRemoved(e,t,!1,i),r){const c=this.namespacesByHostElement.get(t);c&&c.id!==e&&c.removeNode(t,i)}}else this._onRemovalComplete(t,i)}markElementAsRemoved(e,t,r,i,u){this.collectedLeaveElements.push(t),t[Ea]={namespaceId:e,setForRemoval:i,hasAnimation:r,removedBeforeQueried:!1,previousTriggersValues:u}}listen(e,t,r,i,u){return mC(t)?this._fetchNamespace(e).listen(t,r,i,u):()=>{}}_buildInstruction(e,t,r,i,u){return e.transition.build(this.driver,e.element,e.fromState.value,e.toState.value,r,i,e.fromState.options,e.toState.options,t,u)}destroyInnerAnimations(e){let t=this.driver.query(e,rC,!0);t.forEach(r=>this.destroyActiveAnimationsForElement(r)),0!=this.playersByQueriedElement.size&&(t=this.driver.query(e,hM,!0),t.forEach(r=>this.finishActiveQueriedAnimationOnElement(r)))}destroyActiveAnimationsForElement(e){const t=this.playersByElement.get(e);t&&t.forEach(r=>{r.queued?r.markedForDestroy=!0:r.destroy()})}finishActiveQueriedAnimationOnElement(e){const t=this.playersByQueriedElement.get(e);t&&t.forEach(r=>r.finish())}whenRenderingDone(){return new Promise(e=>{if(this.players.length)return Oh(this.players).onDone(()=>e());e()})}processLeaveNode(e){var t;const r=e[Ea];if(r&&r.setForRemoval){if(e[Ea]=jO,r.namespaceId){this.destroyInnerAnimations(e);const i=this._fetchNamespace(r.namespaceId);i&&i.clearElementCache(e)}this._onRemovalComplete(e,r.setForRemoval)}(null===(t=e.classList)||void 0===t?void 0:t.contains(DM))&&this.markElementAsDisabled(e,!1),this.driver.query(e,".ng-animate-disabled",!0).forEach(i=>{this.markElementAsDisabled(i,!1)})}flush(e=-1){let t=[];if(this.newHostElements.size&&(this.newHostElements.forEach((r,i)=>this._balanceNamespaceList(r,i)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let r=0;r<this.collectedEnterElements.length;r++)wa(this.collectedEnterElements[r],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const r=[];try{t=this._flushAnimations(r,e)}finally{for(let i=0;i<r.length;i++)r[i]()}}else for(let r=0;r<this.collectedLeaveElements.length;r++)this.processLeaveNode(this.collectedLeaveElements[r]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(r=>r()),this._flushFns=[],this._whenQuietFns.length){const r=this._whenQuietFns;this._whenQuietFns=[],t.length?Oh(t).onDone(()=>{r.forEach(i=>i())}):r.forEach(i=>i())}}reportError(e){throw function wV(n){return new f.vHH(3402,rn)}()}_flushAnimations(e,t){const r=new fC,i=[],u=new Map,c=[],p=new Map,y=new Map,b=new Map,S=new Set;this.disabledNodes.forEach(ut=>{S.add(ut);const mt=this.driver.query(ut,".ng-animate-queued",!0);for(let At=0;At<mt.length;At++)S.add(mt[At])});const M=this.bodyNode,F=Array.from(this.statesByElement.keys()),B=GO(F,this.collectedEnterElements),G=new Map;let te=0;B.forEach((ut,mt)=>{const At=dM+te++;G.set(mt,At),ut.forEach(hn=>wa(hn,At))});const Ee=[],Ze=new Set,Ye=new Set;for(let ut=0;ut<this.collectedLeaveElements.length;ut++){const mt=this.collectedLeaveElements[ut],At=mt[Ea];At&&At.setForRemoval&&(Ee.push(mt),Ze.add(mt),At.hasAnimation?this.driver.query(mt,".ng-star-inserted",!0).forEach(hn=>Ze.add(hn)):Ye.add(mt))}const je=new Map,et=GO(F,Array.from(Ze));et.forEach((ut,mt)=>{const At=tC+te++;je.set(mt,At),ut.forEach(hn=>wa(hn,At))}),e.push(()=>{B.forEach((ut,mt)=>{const At=G.get(mt);ut.forEach(hn=>xy(hn,At))}),et.forEach((ut,mt)=>{const At=je.get(mt);ut.forEach(hn=>xy(hn,At))}),Ee.forEach(ut=>{this.processLeaveNode(ut)})});const _t=[],Ct=[];for(let ut=this._namespaceList.length-1;ut>=0;ut--)this._namespaceList[ut].drainQueuedTransitions(t).forEach(At=>{const hn=At.player,Mi=At.element;if(_t.push(hn),this.collectedEnterElements.length){const xs=Mi[Ea];if(xs&&xs.setForMove){if(xs.previousTriggersValues&&xs.previousTriggersValues.has(At.triggerName)){const qp=xs.previousTriggersValues.get(At.triggerName),Lh=this.statesByElement.get(At.element);Lh&&Lh[At.triggerName]&&(Lh[At.triggerName].value=qp)}return void hn.destroy()}}const al=!M||!this.driver.containsElement(M,Mi),$o=je.get(Mi),Fh=G.get(Mi),ar=this._buildInstruction(At,r,Fh,$o,al);if(ar.errors&&ar.errors.length)return void Ct.push(ar);if(al)return hn.onStart(()=>Hp(Mi,ar.fromStyles)),hn.onDestroy(()=>sl(Mi,ar.toStyles)),void i.push(hn);if(At.isFallbackTransition)return hn.onStart(()=>Hp(Mi,ar.fromStyles)),hn.onDestroy(()=>sl(Mi,ar.toStyles)),void i.push(hn);const ek=[];ar.timelines.forEach(xs=>{xs.stretchStartingKeyframe=!0,this.disabledNodes.has(xs.element)||ek.push(xs)}),ar.timelines=ek,r.append(Mi,ar.timelines),c.push({instruction:ar,player:hn,element:Mi}),ar.queriedElements.forEach(xs=>Uo(p,xs,[]).push(hn)),ar.preStyleProps.forEach((xs,qp)=>{const Lh=Object.keys(xs);if(Lh.length){let zp=y.get(qp);zp||y.set(qp,zp=new Set),Lh.forEach(SM=>zp.add(SM))}}),ar.postStyleProps.forEach((xs,qp)=>{const Lh=Object.keys(xs);let zp=b.get(qp);zp||b.set(qp,zp=new Set),Lh.forEach(SM=>zp.add(SM))})});if(Ct.length){const ut=[];Ct.forEach(mt=>{ut.push(function bV(n,e){return new f.vHH(3505,rn)}())}),_t.forEach(mt=>mt.destroy()),this.reportError(ut)}const $t=new Map,Qn=new Map;c.forEach(ut=>{const mt=ut.element;r.has(mt)&&(Qn.set(mt,mt),this._beforeAnimationBuild(ut.player.namespaceId,ut.instruction,$t))}),i.forEach(ut=>{const mt=ut.element;this._getPreviousPlayers(mt,!1,ut.namespaceId,ut.triggerName,null).forEach(hn=>{Uo($t,mt,[]).push(hn),hn.destroy()})});const or=Ee.filter(ut=>zO(ut,y,b)),ri=new Map;HO(ri,this.driver,Ye,b,pa).forEach(ut=>{zO(ut,y,b)&&or.push(ut)});const Ph=new Map;B.forEach((ut,mt)=>{HO(Ph,this.driver,new Set(ut),y,"!")}),or.forEach(ut=>{const mt=ri.get(ut),At=Ph.get(ut);ri.set(ut,Object.assign(Object.assign({},mt),At))});const ol=[],cE=[],dE={};c.forEach(ut=>{const{element:mt,player:At,instruction:hn}=ut;if(r.has(mt)){if(S.has(mt))return At.onDestroy(()=>sl(mt,hn.toStyles)),At.disabled=!0,At.overrideTotalTime(hn.totalTime),void i.push(At);let Mi=dE;if(Qn.size>1){let $o=mt;const Fh=[];for(;$o=$o.parentNode;){const ar=Qn.get($o);if(ar){Mi=ar;break}Fh.push($o)}Fh.forEach(ar=>Qn.set(ar,Mi))}const al=this._buildAnimation(At.namespaceId,hn,$t,u,Ph,ri);if(At.setRealPlayer(al),Mi===dE)ol.push(At);else{const $o=this.playersByElement.get(Mi);$o&&$o.length&&(At.parentPlayer=Oh($o)),i.push(At)}}else Hp(mt,hn.fromStyles),At.onDestroy(()=>sl(mt,hn.toStyles)),cE.push(At),S.has(mt)&&i.push(At)}),cE.forEach(ut=>{const mt=u.get(ut.element);if(mt&&mt.length){const At=Oh(mt);ut.setRealPlayer(At)}}),i.forEach(ut=>{ut.parentPlayer?ut.syncPlayerEvents(ut.parentPlayer):ut.destroy()});for(let ut=0;ut<Ee.length;ut++){const mt=Ee[ut],At=mt[Ea];if(xy(mt,tC),At&&At.hasAnimation)continue;let hn=[];if(p.size){let al=p.get(mt);al&&al.length&&hn.push(...al);let $o=this.driver.query(mt,hM,!0);for(let Fh=0;Fh<$o.length;Fh++){let ar=p.get($o[Fh]);ar&&ar.length&&hn.push(...ar)}}const Mi=hn.filter(al=>!al.destroyed);Mi.length?bB(this,mt,Mi):this.processLeaveNode(mt)}return Ee.length=0,ol.forEach(ut=>{this.players.push(ut),ut.onDone(()=>{ut.destroy();const mt=this.players.indexOf(ut);this.players.splice(mt,1)}),ut.play()}),ol}elementContainsData(e,t){let r=!1;const i=t[Ea];return i&&i.setForRemoval&&(r=!0),this.playersByElement.has(t)&&(r=!0),this.playersByQueriedElement.has(t)&&(r=!0),this.statesByElement.has(t)&&(r=!0),this._fetchNamespace(e).elementContainsData(t)||r}afterFlush(e){this._flushFns.push(e)}afterFlushAnimationsDone(e){this._whenQuietFns.push(e)}_getPreviousPlayers(e,t,r,i,u){let c=[];if(t){const p=this.playersByQueriedElement.get(e);p&&(c=p)}else{const p=this.playersByElement.get(e);if(p){const y=!u||u==uE;p.forEach(b=>{b.queued||!y&&b.triggerName!=i||c.push(b)})}}return(r||i)&&(c=c.filter(p=>!(r&&r!=p.namespaceId||i&&i!=p.triggerName))),c}_beforeAnimationBuild(e,t,r){const u=t.element,c=t.isRemovalTransition?void 0:e,p=t.isRemovalTransition?void 0:t.triggerName;for(const y of t.timelines){const b=y.element,S=b!==u,M=Uo(r,b,[]);this._getPreviousPlayers(b,S,c,p,t.toState).forEach(B=>{const G=B.getRealPlayer();G.beforeDestroy&&G.beforeDestroy(),B.destroy(),M.push(B)})}Hp(u,t.fromStyles)}_buildAnimation(e,t,r,i,u,c){const p=t.triggerName,y=t.element,b=[],S=new Set,M=new Set,F=t.timelines.map(G=>{const te=G.element;S.add(te);const Ee=te[Ea];if(Ee&&Ee.removedBeforeQueried)return new qf(G.duration,G.delay);const Ze=te!==y,Ye=function DB(n){const e=[];return qO(n,e),e}((r.get(te)||gB).map($t=>$t.getRealPlayer())).filter($t=>!!$t.element&&$t.element===te),je=u.get(te),et=c.get(te),_t=yO(0,this._normalizer,0,G.keyframes,je,et),Ct=this._buildPlayer(G,_t,Ye);if(G.subTimeline&&i&&M.add(te),Ze){const $t=new TM(e,p,te);$t.setRealPlayer(Ct),b.push($t)}return Ct});b.forEach(G=>{Uo(this.playersByQueriedElement,G.element,[]).push(G),G.onDone(()=>function vB(n,e,t){let r;if(n instanceof Map){if(r=n.get(e),r){if(r.length){const i=r.indexOf(t);r.splice(i,1)}0==r.length&&n.delete(e)}}else if(r=n[e],r){if(r.length){const i=r.indexOf(t);r.splice(i,1)}0==r.length&&delete n[e]}return r}(this.playersByQueriedElement,G.element,G))}),S.forEach(G=>wa(G,AO));const B=Oh(F);return B.onDestroy(()=>{S.forEach(G=>xy(G,AO)),sl(y,t.toStyles)}),M.forEach(G=>{Uo(i,G,[]).push(B)}),B}_buildPlayer(e,t,r){return t.length>0?this.driver.animate(e.element,t,e.duration,e.delay,e.easing,r):new qf(e.duration,e.delay)}}class TM{constructor(e,t,r){this.namespaceId=e,this.triggerName=t,this.element=r,this._player=new qf,this._containsRealPlayer=!1,this._queuedCallbacks={},this.destroyed=!1,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(e){this._containsRealPlayer||(this._player=e,Object.keys(this._queuedCallbacks).forEach(t=>{this._queuedCallbacks[t].forEach(r=>sM(e,t,void 0,r))}),this._queuedCallbacks={},this._containsRealPlayer=!0,this.overrideTotalTime(e.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(e){this.totalTime=e}syncPlayerEvents(e){const t=this._player;t.triggerCallback&&e.onStart(()=>t.triggerCallback("start")),e.onDone(()=>this.finish()),e.onDestroy(()=>this.destroy())}_queueEvent(e,t){Uo(this._queuedCallbacks,e,[]).push(t)}onDone(e){this.queued&&this._queueEvent("done",e),this._player.onDone(e)}onStart(e){this.queued&&this._queueEvent("start",e),this._player.onStart(e)}onDestroy(e){this.queued&&this._queueEvent("destroy",e),this._player.onDestroy(e)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(e){this.queued||this._player.setPosition(e)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(e){const t=this._player;t.triggerCallback&&t.triggerCallback(e)}}function mC(n){return n&&1===n.nodeType}function $O(n,e){const t=n.style.display;return n.style.display=null!=e?e:"none",t}function HO(n,e,t,r,i){const u=[];t.forEach(y=>u.push($O(y)));const c=[];r.forEach((y,b)=>{const S={};y.forEach(M=>{const F=S[M]=e.computeStyle(b,M,i);(!F||0==F.length)&&(b[Ea]=mB,c.push(b))}),n.set(b,S)});let p=0;return t.forEach(y=>$O(y,u[p++])),c}function GO(n,e){const t=new Map;if(n.forEach(p=>t.set(p,[])),0==e.length)return t;const i=new Set(e),u=new Map;function c(p){if(!p)return 1;let y=u.get(p);if(y)return y;const b=p.parentNode;return y=t.has(b)?b:i.has(b)?1:c(b),u.set(p,y),y}return e.forEach(p=>{const y=c(p);1!==y&&t.get(y).push(p)}),t}function wa(n,e){var t;null===(t=n.classList)||void 0===t||t.add(e)}function xy(n,e){var t;null===(t=n.classList)||void 0===t||t.remove(e)}function bB(n,e,t){Oh(t).onDone(()=>n.processLeaveNode(e))}function qO(n,e){for(let t=0;t<n.length;t++){const r=n[t];r instanceof Bw?qO(r.players,e):e.push(r)}}function zO(n,e,t){const r=t.get(n);if(!r)return!1;let i=e.get(n);return i?r.forEach(u=>i.add(u)):e.set(n,r),t.delete(n),!0}class yC{constructor(e,t,r){this.bodyNode=e,this._driver=t,this._normalizer=r,this._triggerCache={},this.onRemovalComplete=(i,u)=>{},this._transitionEngine=new _B(e,t,r),this._timelineEngine=new cB(e,t,r),this._transitionEngine.onRemovalComplete=(i,u)=>this.onRemovalComplete(i,u)}registerTrigger(e,t,r,i,u){const c=e+"-"+i;let p=this._triggerCache[c];if(!p){const y=[],S=mM(this._driver,u,y,[]);if(y.length)throw function dV(n,e){return new f.vHH(3404,rn)}();p=function oB(n,e,t){return new aB(n,e,t)}(i,S,this._normalizer),this._triggerCache[c]=p}this._transitionEngine.registerTrigger(t,i,p)}register(e,t){this._transitionEngine.register(e,t)}destroy(e,t){this._transitionEngine.destroy(e,t)}onInsert(e,t,r,i){this._transitionEngine.insertNode(e,t,r,i)}onRemove(e,t,r,i){this._transitionEngine.removeNode(e,t,i||!1,r)}disableAnimations(e,t){this._transitionEngine.markElementAsDisabled(e,t)}process(e,t,r,i){if("@"==r.charAt(0)){const[u,c]=_O(r);this._timelineEngine.command(u,t,c,i)}else this._transitionEngine.trigger(e,t,r,i)}listen(e,t,r,i,u){if("@"==r.charAt(0)){const[c,p]=_O(r);return this._timelineEngine.listen(c,t,p,u)}return this._transitionEngine.listen(e,t,r,i,u)}flush(e=-1){this._transitionEngine.flush(e)}get players(){return this._transitionEngine.players.concat(this._timelineEngine.players)}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}}let TB=(()=>{class n{constructor(t,r,i){this._element=t,this._startStyles=r,this._endStyles=i,this._state=0;let u=n.initialStylesByElement.get(t);u||n.initialStylesByElement.set(t,u={}),this._initialStyles=u}start(){this._state<1&&(this._startStyles&&sl(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(sl(this._element,this._initialStyles),this._endStyles&&(sl(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(n.initialStylesByElement.delete(this._element),this._startStyles&&(Hp(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(Hp(this._element,this._endStyles),this._endStyles=null),sl(this._element,this._initialStyles),this._state=3)}}return n.initialStylesByElement=new WeakMap,n})();function AM(n){let e=null;const t=Object.keys(n);for(let r=0;r<t.length;r++){const i=t[r];AB(i)&&(e=e||{},e[i]=n[i])}return e}function AB(n){return"display"===n||"position"===n}class WO{constructor(e,t,r,i){this.element=e,this.keyframes=t,this.options=r,this._specialStyles=i,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this.time=0,this.parentPlayer=null,this.currentSnapshot={},this._duration=r.duration,this._delay=r.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const e=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,e,this.options),this._finalKeyframe=e.length?e[e.length-1]:{},this.domPlayer.addEventListener("finish",()=>this._onFinish())}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_triggerWebAnimation(e,t,r){return e.animate(t,r)}onStart(e){this._onStartFns.push(e)}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(e=>e()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}setPosition(e){void 0===this.domPlayer&&this.init(),this.domPlayer.currentTime=e*this.time}getPosition(){return this.domPlayer.currentTime/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const e={};if(this.hasStarted()){const t=this._finalKeyframe;Object.keys(t).forEach(r=>{"offset"!=r&&(e[r]=this._finished?t[r]:NO(this.element,r))})}this.currentSnapshot=e}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}}class SB{validateStyleProperty(e){return bO(e)}matchesElement(e,t){return!1}containsElement(e,t){return DO(e,t)}getParentElement(e){return lM(e)}query(e,t,r){return CO(e,t,r)}computeStyle(e,t,r){return window.getComputedStyle(e)[t]}animate(e,t,r,i,u,c=[]){const y={duration:r,delay:i,fill:0==i?"both":"forwards"};u&&(y.easing=u);const b={},S=c.filter(F=>F instanceof WO);(function NV(n,e){return 0===n||0===e})(r,i)&&S.forEach(F=>{let B=F.currentSnapshot;Object.keys(B).forEach(G=>b[G]=B[G])}),t=function OV(n,e,t){const r=Object.keys(t);if(r.length&&e.length){let u=e[0],c=[];if(r.forEach(p=>{u.hasOwnProperty(p)||c.push(p),u[p]=t[p]}),c.length)for(var i=1;i<e.length;i++){let p=e[i];c.forEach(function(y){p[y]=NO(n,y)})}}return e}(e,t=t.map(F=>kh(F,!1)),b);const M=function IB(n,e){let t=null,r=null;return Array.isArray(e)&&e.length?(t=AM(e[0]),e.length>1&&(r=AM(e[e.length-1]))):e&&(t=AM(e)),t||r?new TB(n,t,r):null}(e,t);return new WO(e,t,y,M)}}let MB=(()=>{class n extends Gf{constructor(t,r){super(),this._nextAnimationId=0,this._renderer=t.createRenderer(r.body,{id:"0",encapsulation:f.ifc.None,styles:[],data:{animation:[]}})}build(t){const r=this._nextAnimationId.toString();this._nextAnimationId++;const i=Array.isArray(t)?pv(t):t;return KO(this._renderer,null,r,"register",[i]),new xB(r,this._renderer)}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(f.FYo),f.LFG(ie))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();class xB extends class Vw{}{constructor(e,t){super(),this._id=e,this._renderer=t}create(e,t){return new RB(this._id,e,t||{},this._renderer)}}class RB{constructor(e,t,r,i){this.id=e,this.element=t,this._renderer=i,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",r)}_listen(e,t){return this._renderer.listen(this.element,`@@${this.id}:${e}`,t)}_command(e,...t){return KO(this._renderer,this.element,this.id,e,t)}onDone(e){this._listen("done",e)}onStart(e){this._listen("start",e)}onDestroy(e){this._listen("destroy",e)}init(){this._command("init")}hasStarted(){return this._started}play(){this._command("play"),this._started=!0}pause(){this._command("pause")}restart(){this._command("restart")}finish(){this._command("finish")}destroy(){this._command("destroy")}reset(){this._command("reset"),this._started=!1}setPosition(e){this._command("setPosition",e)}getPosition(){var e,t;return null!==(t=null===(e=this._renderer.engine.players[+this.id])||void 0===e?void 0:e.getPosition())&&void 0!==t?t:0}}function KO(n,e,t,r,i){return n.setProperty(e,`@@${t}:${r}`,i)}const ZO="@.disabled";let NB=(()=>{class n{constructor(t,r,i){this.delegate=t,this.engine=r,this._zone=i,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,this.promise=Promise.resolve(0),r.onRemovalComplete=(u,c)=>{const p=null==c?void 0:c.parentNode(u);p&&c.removeChild(p,u)}}createRenderer(t,r){const u=this.delegate.createRenderer(t,r);if(!(t&&r&&r.data&&r.data.animation)){let S=this._rendererCache.get(u);return S||(S=new YO("",u,this.engine),this._rendererCache.set(u,S)),S}const c=r.id,p=r.id+"-"+this._currentId;this._currentId++,this.engine.register(p,t);const y=S=>{Array.isArray(S)?S.forEach(y):this.engine.registerTrigger(c,p,t,S.name,S)};return r.data.animation.forEach(y),new OB(this,p,u,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){this.promise.then(()=>{this._microtaskId++})}scheduleListenerCallback(t,r,i){t>=0&&t<this._microtaskId?this._zone.run(()=>r(i)):(0==this._animationCallbacksBuffer.length&&Promise.resolve(null).then(()=>{this._zone.run(()=>{this._animationCallbacksBuffer.forEach(u=>{const[c,p]=u;c(p)}),this._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([r,i]))}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(f.FYo),f.LFG(yC),f.LFG(f.R0b))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();class YO{constructor(e,t,r){this.namespaceId=e,this.delegate=t,this.engine=r,this.destroyNode=this.delegate.destroyNode?i=>t.destroyNode(i):null}get data(){return this.delegate.data}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.delegate.destroy()}createElement(e,t){return this.delegate.createElement(e,t)}createComment(e){return this.delegate.createComment(e)}createText(e){return this.delegate.createText(e)}appendChild(e,t){this.delegate.appendChild(e,t),this.engine.onInsert(this.namespaceId,t,e,!1)}insertBefore(e,t,r,i=!0){this.delegate.insertBefore(e,t,r),this.engine.onInsert(this.namespaceId,t,e,i)}removeChild(e,t,r){this.engine.onRemove(this.namespaceId,t,this.delegate,r)}selectRootElement(e,t){return this.delegate.selectRootElement(e,t)}parentNode(e){return this.delegate.parentNode(e)}nextSibling(e){return this.delegate.nextSibling(e)}setAttribute(e,t,r,i){this.delegate.setAttribute(e,t,r,i)}removeAttribute(e,t,r){this.delegate.removeAttribute(e,t,r)}addClass(e,t){this.delegate.addClass(e,t)}removeClass(e,t){this.delegate.removeClass(e,t)}setStyle(e,t,r,i){this.delegate.setStyle(e,t,r,i)}removeStyle(e,t,r){this.delegate.removeStyle(e,t,r)}setProperty(e,t,r){"@"==t.charAt(0)&&t==ZO?this.disableAnimations(e,!!r):this.delegate.setProperty(e,t,r)}setValue(e,t){this.delegate.setValue(e,t)}listen(e,t,r){return this.delegate.listen(e,t,r)}disableAnimations(e,t){this.engine.disableAnimations(e,t)}}class OB extends YO{constructor(e,t,r,i){super(t,r,i),this.factory=e,this.namespaceId=t}setProperty(e,t,r){"@"==t.charAt(0)?"."==t.charAt(1)&&t==ZO?this.disableAnimations(e,r=void 0===r||!!r):this.engine.process(this.namespaceId,e,t.substr(1),r):this.delegate.setProperty(e,t,r)}listen(e,t,r){if("@"==t.charAt(0)){const i=function kB(n){switch(n){case"body":return document.body;case"document":return document;case"window":return window;default:return n}}(e);let u=t.substr(1),c="";return"@"!=u.charAt(0)&&([u,c]=function PB(n){const e=n.indexOf(".");return[n.substring(0,e),n.substr(e+1)]}(u)),this.engine.listen(this.namespaceId,i,u,c,p=>{this.factory.scheduleListenerCallback(p._data||-1,r,p)})}return this.delegate.listen(e,t,r)}}let FB=(()=>{class n extends yC{constructor(t,r,i){super(t.body,r,i)}ngOnDestroy(){this.flush()}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(ie),f.LFG(cM),f.LFG(wM))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();const QO=new f.OlP("AnimationModuleType"),JO=[{provide:Gf,useClass:MB},{provide:wM,useFactory:function LB(){return new tB}},{provide:yC,useClass:FB},{provide:f.FYo,useFactory:function VB(n,e,t){return new NB(n,e,t)},deps:[_n,yC,f.R0b]}],XO=[{provide:cM,useFactory:()=>new SB},{provide:QO,useValue:"BrowserAnimations"},...JO],BB=[{provide:cM,useClass:IO},{provide:QO,useValue:"NoopAnimations"},...JO];let UB=(()=>{class n{static withConfig(t){return{ngModule:n,providers:t.disableAnimations?BB:XO}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({providers:XO,imports:[Zo]}),n})(),jB=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n,bootstrap:[$L]}),n.\u0275inj=f.cJS({providers:[],imports:[[Zo,VL,HL,Cs.hO.initializeApp(gO_firebase),PL,pO,UB,fv.forRoot()]]}),n})();(0,f.G48)(),_l().bootstrapModule(jB).catch(n=>console.error(n))},5867:(dt,Ae,k)=>{k.d(Ae,{C6:()=>f.getApps,Mq:()=>f.getApp});var f=k(9681);(0,f.registerVersion)("firebase","9.6.11","app")},127:(dt,Ae,k)=>{k.d(Ae,{Z:()=>f.Z});var f=k(3942);f.Z.registerVersion("firebase","9.6.11","app-compat")},820:(dt,Ae,k)=>{k.r(Ae);var f=k(5861),Z=k(3942),O=k(2090),ae=k(9681),X=k(655),pe=k(1877),ie=k(4859);const Ne=function We(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}},Le=function Se(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},he=new O.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),it=new pe.Yd("@firebase/auth");function Qe(_,...h){it.logLevel<=pe.in.ERROR&&it.error(`Auth (${ae.SDK_VERSION}): ${_}`,...h)}function Ie(_,...h){throw $e(_,...h)}function ye(_,...h){return $e(_,...h)}function ve(_,h,m){const E=Object.assign(Object.assign({},Le()),{[h]:m});return new O.LL("auth","Firebase",E).create(h,{appName:_.name})}function He(_,h,m){if(!(h instanceof m))throw m.name!==h.constructor.name&&Ie(_,"argument-error"),ve(_,"argument-error",`Type of ${h.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function $e(_,...h){if("string"!=typeof _){const m=h[0],E=[...h.slice(1)];return E[0]&&(E[0].appName=_.name),_._errorFactory.create(m,...E)}return he.create(_,...h)}function re(_,h,...m){if(!_)throw $e(h,...m)}function Ke(_){const h="INTERNAL ASSERTION FAILED: "+_;throw Qe(h),new Error(h)}function J(_,h){_||Ke(h)}const oe=new Map;function ne(_){J(_ instanceof Function,"Expected a class definition");let h=oe.get(_);return h?(J(h instanceof _,"Instance stored in cache mismatched with class"),h):(h=new _,oe.set(_,h),h)}function Fe(){var _;return"undefined"!=typeof self&&(null===(_=self.location)||void 0===_?void 0:_.href)||""}function St(){return"http:"===Qt()||"https:"===Qt()}function Qt(){var _;return"undefined"!=typeof self&&(null===(_=self.location)||void 0===_?void 0:_.protocol)||null}class Wt{constructor(h,m){this.shortDelay=h,this.longDelay=m,J(m>h,"Short delay should be less than long delay!"),this.isMobile=(0,O.uI)()||(0,O.b$)()}get(){return function an(){return!("undefined"!=typeof navigator&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(St()||(0,O.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function Jn(_,h){J(_.emulator,"Emulator should always be set here");const{url:m}=_.emulator;return h?`${m}${h.startsWith("/")?h.slice(1):h}`:m}class bn{static initialize(h,m,E){this.fetchImpl=h,m&&(this.headersImpl=m),E&&(this.responseImpl=E)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!=typeof self&&"fetch"in self?self.fetch:void Ke("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!=typeof self&&"Headers"in self?self.Headers:void Ke("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!=typeof self&&"Response"in self?self.Response:void Ke("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const en={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},xi=new Wt(3e4,6e4);function Jt(_,h){return _.tenantId&&!h.tenantId?Object.assign(Object.assign({},h),{tenantId:_.tenantId}):h}function Kt(_,h,m,E){return ur.apply(this,arguments)}function ur(){return(ur=(0,f.Z)(function*(_,h,m,E,T={}){return ii(_,T,(0,f.Z)(function*(){let N={},z={};E&&("GET"===h?z=E:N={body:JSON.stringify(E)});const se=(0,O.xO)(Object.assign({key:_.config.apiKey},z)).slice(1),Ue=yield _._getAdditionalHeaders();return Ue["Content-Type"]="application/json",_.languageCode&&(Ue["X-Firebase-Locale"]=_.languageCode),bn.fetch()(Pr(_,_.config.apiHost,m,se),Object.assign({method:h,headers:Ue,referrerPolicy:"no-referrer"},N))}))})).apply(this,arguments)}function ii(_,h,m){return Rs.apply(this,arguments)}function Rs(){return(Rs=(0,f.Z)(function*(_,h,m){_._canInitEmulator=!1;const E=Object.assign(Object.assign({},en),h);try{const T=new us(_),N=yield Promise.race([m(),T.promise]);T.clearNetworkTimeout();const z=yield N.json();if("needConfirmation"in z)throw ls(_,"account-exists-with-different-credential",z);if(N.ok&&!("errorMessage"in z))return z;{const se=N.ok?z.errorMessage:z.error.message,[Ue,rt]=se.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===Ue)throw ls(_,"credential-already-in-use",z);if("EMAIL_EXISTS"===Ue)throw ls(_,"email-already-in-use",z);const Et=E[Ue]||Ue.toLowerCase().replace(/[_\s]+/g,"-");if(rt)throw ve(_,Et,rt);Ie(_,Et)}}catch(T){if(T instanceof O.ZR)throw T;Ie(_,"network-request-failed")}})).apply(this,arguments)}function kr(_,h,m,E){return zi.apply(this,arguments)}function zi(){return(zi=(0,f.Z)(function*(_,h,m,E,T={}){const N=yield Kt(_,h,m,E,T);return"mfaPendingCredential"in N&&Ie(_,"multi-factor-auth-required",{_serverResponse:N}),N})).apply(this,arguments)}function Pr(_,h,m,E){const T=`${h}${m}?${E}`;return _.config.emulator?Jn(_.config,T):`${_.config.apiScheme}://${T}`}class us{constructor(h){this.auth=h,this.timer=null,this.promise=new Promise((m,E)=>{this.timer=setTimeout(()=>E(ye(this.auth,"network-request-failed")),xi.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function ls(_,h,m){const E={appName:_.name};m.email&&(E.email=m.email),m.phoneNumber&&(E.phoneNumber=m.phoneNumber);const T=ye(_,h,E);return T.customData._tokenResponse=m,T}function Hr(){return(Hr=(0,f.Z)(function*(_,h){return Kt(_,"POST","/v1/accounts:delete",h)})).apply(this,arguments)}function Xn(_,h){return Hn.apply(this,arguments)}function Hn(){return(Hn=(0,f.Z)(function*(_,h){return Kt(_,"POST","/v1/accounts:update",h)})).apply(this,arguments)}function si(_,h){return lo.apply(this,arguments)}function lo(){return(lo=(0,f.Z)(function*(_,h){return Kt(_,"POST","/v1/accounts:lookup",h)})).apply(this,arguments)}function yn(_){if(_)try{const h=new Date(Number(_));if(!isNaN(h.getTime()))return h.toUTCString()}catch(h){}}function ba(){return(ba=(0,f.Z)(function*(_,h=!1){const m=(0,O.m9)(_),E=yield m.getIdToken(h),T=lt(E);re(T&&T.exp&&T.auth_time&&T.iat,m.auth,"internal-error");const N="object"==typeof T.firebase?T.firebase:void 0,z=null==N?void 0:N.sign_in_provider;return{claims:T,token:E,authTime:yn(Zt(T.auth_time)),issuedAtTime:yn(Zt(T.iat)),expirationTime:yn(Zt(T.exp)),signInProvider:z||null,signInSecondFactor:(null==N?void 0:N.sign_in_second_factor)||null}})).apply(this,arguments)}function Zt(_){return 1e3*Number(_)}function lt(_){const[h,m,E]=_.split(".");if(void 0===h||void 0===m||void 0===E)return Qe("JWT malformed, contained fewer than 3 sections"),null;try{const T=(0,O.tV)(m);return T?JSON.parse(T):(Qe("Failed to decode base64 JWT payload"),null)}catch(T){return Qe("Caught error parsing JWT payload as JSON",T),null}}function lr(_,h){return Wi.apply(this,arguments)}function Wi(){return(Wi=(0,f.Z)(function*(_,h,m=!1){if(m)return h;try{return yield h}catch(E){throw E instanceof O.ZR&&Gt(E)&&_.auth.currentUser===_&&(yield _.auth.signOut()),E}})).apply(this,arguments)}function Gt({code:_}){return"auth/user-disabled"===_||"auth/user-token-expired"===_}class co{constructor(h){this.user=h,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(h){var m;if(h){const E=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),E}{this.errorBackoff=3e4;const T=(null!==(m=this.user.stsTokenManager.expirationTime)&&void 0!==m?m:0)-Date.now()-3e5;return Math.max(0,T)}}schedule(h=!1){var m=this;if(!this.isRunning)return;const E=this.getInterval(h);this.timerId=setTimeout((0,f.Z)(function*(){yield m.iteration()}),E)}iteration(){var h=this;return(0,f.Z)(function*(){try{yield h.user.getIdToken(!0)}catch(m){return void("auth/network-request-failed"===m.code&&h.schedule(!0))}h.schedule()})()}}class vr{constructor(h,m){this.createdAt=h,this.lastLoginAt=m,this._initializeTime()}_initializeTime(){this.lastSignInTime=yn(this.lastLoginAt),this.creationTime=yn(this.createdAt)}_copy(h){this.createdAt=h.createdAt,this.lastLoginAt=h.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function cr(_){return ft.apply(this,arguments)}function ft(){return(ft=(0,f.Z)(function*(_){var h;const m=_.auth,E=yield _.getIdToken(),T=yield lr(_,si(m,{idToken:E}));re(null==T?void 0:T.users.length,m,"internal-error");const N=T.users[0];_._notifyReloadListener(N);const z=(null===(h=N.providerUserInfo)||void 0===h?void 0:h.length)?Te(N.providerUserInfo):[],se=Xe(_.providerData,z),Et=!!_.isAnonymous&&!(_.email&&N.passwordHash||(null==se?void 0:se.length)),ct={uid:N.localId,displayName:N.displayName||null,photoURL:N.photoUrl||null,email:N.email||null,emailVerified:N.emailVerified||!1,phoneNumber:N.phoneNumber||null,tenantId:N.tenantId||null,providerData:se,metadata:new vr(N.createdAt,N.lastLoginAt),isAnonymous:Et};Object.assign(_,ct)})).apply(this,arguments)}function jt(){return(jt=(0,f.Z)(function*(_){const h=(0,O.m9)(_);yield cr(h),yield h.auth._persistUserIfCurrent(h),h.auth._notifyListenersIfCurrent(h)})).apply(this,arguments)}function Xe(_,h){return[..._.filter(E=>!h.some(T=>T.providerId===E.providerId)),...h]}function Te(_){return _.map(h=>{var{providerId:m}=h,E=(0,X._T)(h,["providerId"]);return{providerId:m,uid:E.rawId||"",displayName:E.displayName||null,email:E.email||null,phoneNumber:E.phoneNumber||null,photoURL:E.photoUrl||null}})}function pt(){return(pt=(0,f.Z)(function*(_,h){const m=yield ii(_,{},(0,f.Z)(function*(){const E=(0,O.xO)({grant_type:"refresh_token",refresh_token:h}).slice(1),{tokenApiHost:T,apiKey:N}=_.config,z=Pr(_,T,"/v1/token",`key=${N}`),se=yield _._getAdditionalHeaders();return se["Content-Type"]="application/x-www-form-urlencoded",bn.fetch()(z,{method:"POST",headers:se,body:E})}));return{accessToken:m.access_token,expiresIn:m.expires_in,refreshToken:m.refresh_token}})).apply(this,arguments)}class Ht{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(h){re(h.idToken,"internal-error"),re(void 0!==h.idToken,"internal-error"),re(void 0!==h.refreshToken,"internal-error");const m="expiresIn"in h&&void 0!==h.expiresIn?Number(h.expiresIn):function bt(_){const h=lt(_);return re(h,"internal-error"),re(void 0!==h.exp,"internal-error"),re(void 0!==h.iat,"internal-error"),Number(h.exp)-Number(h.iat)}(h.idToken);this.updateTokensAndExpiration(h.idToken,h.refreshToken,m)}getToken(h,m=!1){var E=this;return(0,f.Z)(function*(){return re(!E.accessToken||E.refreshToken,h,"user-token-expired"),m||!E.accessToken||E.isExpired?E.refreshToken?(yield E.refresh(h,E.refreshToken),E.accessToken):null:E.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(h,m){var E=this;return(0,f.Z)(function*(){const{accessToken:T,refreshToken:N,expiresIn:z}=yield function tt(_,h){return pt.apply(this,arguments)}(h,m);E.updateTokensAndExpiration(T,N,Number(z))})()}updateTokensAndExpiration(h,m,E){this.refreshToken=m||null,this.accessToken=h||null,this.expirationTime=Date.now()+1e3*E}static fromJSON(h,m){const{refreshToken:E,accessToken:T,expirationTime:N}=m,z=new Ht;return E&&(re("string"==typeof E,"internal-error",{appName:h}),z.refreshToken=E),T&&(re("string"==typeof T,"internal-error",{appName:h}),z.accessToken=T),N&&(re("number"==typeof N,"internal-error",{appName:h}),z.expirationTime=N),z}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(h){this.accessToken=h.accessToken,this.refreshToken=h.refreshToken,this.expirationTime=h.expirationTime}_clone(){return Object.assign(new Ht,this.toJSON())}_performRefresh(){return Ke("not implemented")}}function Bt(_,h){re("string"==typeof _||void 0===_,"internal-error",{appName:h})}class j{constructor(h){var{uid:m,auth:E,stsTokenManager:T}=h,N=(0,X._T)(h,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new co(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=m,this.auth=E,this.stsTokenManager=T,this.accessToken=T.accessToken,this.displayName=N.displayName||null,this.email=N.email||null,this.emailVerified=N.emailVerified||!1,this.phoneNumber=N.phoneNumber||null,this.photoURL=N.photoURL||null,this.isAnonymous=N.isAnonymous||!1,this.tenantId=N.tenantId||null,this.providerData=N.providerData?[...N.providerData]:[],this.metadata=new vr(N.createdAt||void 0,N.lastLoginAt||void 0)}getIdToken(h){var m=this;return(0,f.Z)(function*(){const E=yield lr(m,m.stsTokenManager.getToken(m.auth,h));return re(E,m.auth,"internal-error"),m.accessToken!==E&&(m.accessToken=E,yield m.auth._persistUserIfCurrent(m),m.auth._notifyListenersIfCurrent(m)),E})()}getIdTokenResult(h){return function Ns(_){return ba.apply(this,arguments)}(this,h)}reload(){return function Er(_){return jt.apply(this,arguments)}(this)}_assign(h){this!==h&&(re(this.uid===h.uid,this.auth,"internal-error"),this.displayName=h.displayName,this.photoURL=h.photoURL,this.email=h.email,this.emailVerified=h.emailVerified,this.phoneNumber=h.phoneNumber,this.isAnonymous=h.isAnonymous,this.tenantId=h.tenantId,this.providerData=h.providerData.map(m=>Object.assign({},m)),this.metadata._copy(h.metadata),this.stsTokenManager._assign(h.stsTokenManager))}_clone(h){return new j(Object.assign(Object.assign({},this),{auth:h,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(h){re(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=h,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(h){this.reloadListener?this.reloadListener(h):this.reloadUserInfo=h}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(h,m=!1){var E=this;return(0,f.Z)(function*(){let T=!1;h.idToken&&h.idToken!==E.stsTokenManager.accessToken&&(E.stsTokenManager.updateFromServerResponse(h),T=!0),m&&(yield cr(E)),yield E.auth._persistUserIfCurrent(E),T&&E.auth._notifyListenersIfCurrent(E)})()}delete(){var h=this;return(0,f.Z)(function*(){const m=yield h.getIdToken();return yield lr(h,function ht(_,h){return Hr.apply(this,arguments)}(h.auth,{idToken:m})),h.stsTokenManager.clearRefreshToken(),h.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(h=>Object.assign({},h)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(h,m){var E,T,N,z,se,Ue,rt,Et;const ct=null!==(E=m.displayName)&&void 0!==E?E:void 0,Tn=null!==(T=m.email)&&void 0!==T?T:void 0,rs=null!==(N=m.phoneNumber)&&void 0!==N?N:void 0,Ql=null!==(z=m.photoURL)&&void 0!==z?z:void 0,Lu=null!==(se=m.tenantId)&&void 0!==se?se:void 0,Vu=null!==(Ue=m._redirectEventId)&&void 0!==Ue?Ue:void 0,mf=null!==(rt=m.createdAt)&&void 0!==rt?rt:void 0,o_=null!==(Et=m.lastLoginAt)&&void 0!==Et?Et:void 0,{uid:la,emailVerified:Ed,isAnonymous:wd,providerData:yf,stsTokenManager:bd}=m;re(la&&bd,h,"internal-error");const $i=Ht.fromJSON(this.name,bd);re("string"==typeof la,h,"internal-error"),Bt(ct,h.name),Bt(Tn,h.name),re("boolean"==typeof Ed,h,"internal-error"),re("boolean"==typeof wd,h,"internal-error"),Bt(rs,h.name),Bt(Ql,h.name),Bt(Lu,h.name),Bt(Vu,h.name),Bt(mf,h.name),Bt(o_,h.name);const _f=new j({uid:la,auth:h,email:Tn,emailVerified:Ed,displayName:ct,isAnonymous:wd,photoURL:Ql,phoneNumber:rs,tenantId:Lu,stsTokenManager:$i,createdAt:mf,lastLoginAt:o_});return yf&&Array.isArray(yf)&&(_f.providerData=yf.map(Eg=>Object.assign({},Eg))),Vu&&(_f._redirectEventId=Vu),_f}static _fromIdTokenResponse(h,m,E=!1){return(0,f.Z)(function*(){const T=new Ht;T.updateFromServerResponse(m);const N=new j({uid:m.localId,auth:h,stsTokenManager:T,isAnonymous:E});return yield cr(N),N})()}}const q=(()=>{class _{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,f.Z)(function*(){return!0})()}_set(m,E){var T=this;return(0,f.Z)(function*(){T.storage[m]=E})()}_get(m){var E=this;return(0,f.Z)(function*(){const T=E.storage[m];return void 0===T?null:T})()}_remove(m){var E=this;return(0,f.Z)(function*(){delete E.storage[m]})()}_addListener(m,E){}_removeListener(m,E){}}return _.type="NONE",_})();function ce(_,h,m){return`firebase:${_}:${h}:${m}`}class Y{constructor(h,m,E){this.persistence=h,this.auth=m,this.userKey=E;const{config:T,name:N}=this.auth;this.fullUserKey=ce(this.userKey,T.apiKey,N),this.fullPersistenceKey=ce("persistence",T.apiKey,N),this.boundEventHandler=m._onStorageEvent.bind(m),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(h){return this.persistence._set(this.fullUserKey,h.toJSON())}getCurrentUser(){var h=this;return(0,f.Z)(function*(){const m=yield h.persistence._get(h.fullUserKey);return m?j._fromJSON(h.auth,m):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(h){var m=this;return(0,f.Z)(function*(){if(m.persistence===h)return;const E=yield m.getCurrentUser();return yield m.removeCurrentUser(),m.persistence=h,E?m.setCurrentUser(E):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(h,m,E="authUser"){return(0,f.Z)(function*(){if(!m.length)return new Y(ne(q),h,E);const T=(yield Promise.all(m.map(function(){var rt=(0,f.Z)(function*(Et){if(yield Et._isAvailable())return Et});return function(Et){return rt.apply(this,arguments)}}()))).filter(rt=>rt);let N=T[0]||ne(q);const z=ce(E,h.config.apiKey,h.name);let se=null;for(const rt of m)try{const Et=yield rt._get(z);if(Et){const ct=j._fromJSON(h,Et);rt!==N&&(se=ct),N=rt;break}}catch(Et){}const Ue=T.filter(rt=>rt._shouldAllowMigration);return N._shouldAllowMigration&&Ue.length?(N=Ue[0],se&&(yield N._set(z,se.toJSON())),yield Promise.all(m.map(function(){var rt=(0,f.Z)(function*(Et){if(Et!==N)try{yield Et._remove(z)}catch(ct){}});return function(Et){return rt.apply(this,arguments)}}())),new Y(N,h,E)):new Y(N,h,E)})()}}function Be(_){const h=_.toLowerCase();if(h.includes("opera/")||h.includes("opr/")||h.includes("opios/"))return"Opera";if(Yt(h))return"IEMobile";if(h.includes("msie")||h.includes("trident/"))return"IE";if(h.includes("edge/"))return"Edge";if(vt(h))return"Firefox";if(h.includes("silk/"))return"Silk";if(kt(h))return"Blackberry";if(fn(h))return"Webos";if(Xt(h))return"Safari";if((h.includes("chrome/")||wr(h))&&!h.includes("edge/"))return"Chrome";if(Dn(h))return"Android";{const E=_.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===(null==E?void 0:E.length))return E[1]}return"Other"}function vt(_=(0,O.z$)()){return/firefox\//i.test(_)}function Xt(_=(0,O.z$)()){const h=_.toLowerCase();return h.includes("safari/")&&!h.includes("chrome/")&&!h.includes("crios/")&&!h.includes("android")}function wr(_=(0,O.z$)()){return/crios\//i.test(_)}function Yt(_=(0,O.z$)()){return/iemobile/i.test(_)}function Dn(_=(0,O.z$)()){return/android/i.test(_)}function kt(_=(0,O.z$)()){return/blackberry/i.test(_)}function fn(_=(0,O.z$)()){return/webos/i.test(_)}function tr(_=(0,O.z$)()){return/iphone|ipad|ipod/i.test(_)}function cs(_=(0,O.z$)()){return tr(_)||Dn(_)||fn(_)||kt(_)||/windows phone/i.test(_)||Yt(_)}function Ca(_,h=[]){let m;switch(_){case"Browser":m=Be((0,O.z$)());break;case"Worker":m=`${Be((0,O.z$)())}-${_}`;break;default:m=_}const E=h.length?h.join(","):"FirebaseCore-web";return`${m}/JsCore/${ae.SDK_VERSION}/${E}`}class oi{constructor(h,m,E){this.app=h,this.heartbeatServiceProvider=m,this.config=E,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Lt(this),this.idTokenSubscription=new Lt(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=he,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=h.name,this.clientVersion=E.sdkClientVersion}_initializeWithPersistence(h,m){var E=this;return m&&(this._popupRedirectResolver=ne(m)),this._initializationPromise=this.queue((0,f.Z)(function*(){var T,N;if(!E._deleted&&(E.persistenceManager=yield Y.create(E,h),!E._deleted)){if(null===(T=E._popupRedirectResolver)||void 0===T?void 0:T._shouldInitProactively)try{yield E._popupRedirectResolver._initialize(E)}catch(z){}yield E.initializeCurrentUser(m),E.lastNotifiedUid=(null===(N=E.currentUser)||void 0===N?void 0:N.uid)||null,!E._deleted&&(E._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var h=this;return(0,f.Z)(function*(){if(h._deleted)return;const m=yield h.assertedPersistence.getCurrentUser();if(h.currentUser||m){if(h.currentUser&&m&&h.currentUser.uid===m.uid)return h._currentUser._assign(m),void(yield h.currentUser.getIdToken());yield h._updateCurrentUser(m)}})()}initializeCurrentUser(h){var m=this;return(0,f.Z)(function*(){var E;let T=yield m.assertedPersistence.getCurrentUser();if(h&&m.config.authDomain){yield m.getOrInitRedirectPersistenceManager();const N=null===(E=m.redirectUser)||void 0===E?void 0:E._redirectEventId,z=null==T?void 0:T._redirectEventId,se=yield m.tryRedirectSignIn(h);(!N||N===z)&&(null==se?void 0:se.user)&&(T=se.user)}return T?T._redirectEventId?(re(m._popupRedirectResolver,m,"argument-error"),yield m.getOrInitRedirectPersistenceManager(),m.redirectUser&&m.redirectUser._redirectEventId===T._redirectEventId?m.directlySetCurrentUser(T):m.reloadAndSetCurrentUserOrClear(T)):m.reloadAndSetCurrentUserOrClear(T):m.directlySetCurrentUser(null)})()}tryRedirectSignIn(h){var m=this;return(0,f.Z)(function*(){let E=null;try{E=yield m._popupRedirectResolver._completeRedirectFn(m,h,!0)}catch(T){yield m._setRedirectUser(null)}return E})()}reloadAndSetCurrentUserOrClear(h){var m=this;return(0,f.Z)(function*(){try{yield cr(h)}catch(E){if("auth/network-request-failed"!==E.code)return m.directlySetCurrentUser(null)}return m.directlySetCurrentUser(h)})()}useDeviceLanguage(){this.languageCode=function qe(){if("undefined"==typeof navigator)return null;const _=navigator;return _.languages&&_.languages[0]||_.language||null}()}_delete(){var h=this;return(0,f.Z)(function*(){h._deleted=!0})()}updateCurrentUser(h){var m=this;return(0,f.Z)(function*(){const E=h?(0,O.m9)(h):null;return E&&re(E.auth.config.apiKey===m.config.apiKey,m,"invalid-user-token"),m._updateCurrentUser(E&&E._clone(m))})()}_updateCurrentUser(h){var m=this;return(0,f.Z)(function*(){if(!m._deleted)return h&&re(m.tenantId===h.tenantId,m,"tenant-id-mismatch"),m.queue((0,f.Z)(function*(){yield m.directlySetCurrentUser(h),m.notifyAuthListeners()}))})()}signOut(){var h=this;return(0,f.Z)(function*(){return(h.redirectPersistenceManager||h._popupRedirectResolver)&&(yield h._setRedirectUser(null)),h._updateCurrentUser(null)})()}setPersistence(h){var m=this;return this.queue((0,f.Z)(function*(){yield m.assertedPersistence.setPersistence(ne(h))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(h){this._errorFactory=new O.LL("auth","Firebase",h())}onAuthStateChanged(h,m,E){return this.registerStateListener(this.authStateSubscription,h,m,E)}onIdTokenChanged(h,m,E){return this.registerStateListener(this.idTokenSubscription,h,m,E)}toJSON(){var h;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(h=this._currentUser)||void 0===h?void 0:h.toJSON()}}_setRedirectUser(h,m){var E=this;return(0,f.Z)(function*(){const T=yield E.getOrInitRedirectPersistenceManager(m);return null===h?T.removeCurrentUser():T.setCurrentUser(h)})()}getOrInitRedirectPersistenceManager(h){var m=this;return(0,f.Z)(function*(){if(!m.redirectPersistenceManager){const E=h&&ne(h)||m._popupRedirectResolver;re(E,m,"argument-error"),m.redirectPersistenceManager=yield Y.create(m,[ne(E._redirectPersistence)],"redirectUser"),m.redirectUser=yield m.redirectPersistenceManager.getCurrentUser()}return m.redirectPersistenceManager})()}_redirectUserForId(h){var m=this;return(0,f.Z)(function*(){var E,T;return m._isInitialized&&(yield m.queue((0,f.Z)(function*(){}))),(null===(E=m._currentUser)||void 0===E?void 0:E._redirectEventId)===h?m._currentUser:(null===(T=m.redirectUser)||void 0===T?void 0:T._redirectEventId)===h?m.redirectUser:null})()}_persistUserIfCurrent(h){var m=this;return(0,f.Z)(function*(){if(h===m.currentUser)return m.queue((0,f.Z)(function*(){return m.directlySetCurrentUser(h)}))})()}_notifyListenersIfCurrent(h){h===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var h,m;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const E=null!==(m=null===(h=this.currentUser)||void 0===h?void 0:h.uid)&&void 0!==m?m:null;this.lastNotifiedUid!==E&&(this.lastNotifiedUid=E,this.authStateSubscription.next(this.currentUser))}registerStateListener(h,m,E,T){if(this._deleted)return()=>{};const N="function"==typeof m?m:m.next.bind(m),z=this._isInitialized?Promise.resolve():this._initializationPromise;return re(z,this,"internal-error"),z.then(()=>N(this.currentUser)),"function"==typeof m?h.addObserver(m,E,T):h.addObserver(m)}directlySetCurrentUser(h){var m=this;return(0,f.Z)(function*(){m.currentUser&&m.currentUser!==h&&(m._currentUser._stopProactiveRefresh(),h&&m.isProactiveRefreshEnabled&&h._startProactiveRefresh()),m.currentUser=h,h?yield m.assertedPersistence.setCurrentUser(h):yield m.assertedPersistence.removeCurrentUser()})()}queue(h){return this.operations=this.operations.then(h,h),this.operations}get assertedPersistence(){return re(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(h){!h||this.frameworks.includes(h)||(this.frameworks.push(h),this.frameworks.sort(),this.clientVersion=Ca(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var h=this;return(0,f.Z)(function*(){var m;const E={"X-Client-Version":h.clientVersion};h.app.options.appId&&(E["X-Firebase-gmpid"]=h.app.options.appId);const T=yield null===(m=h.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===m?void 0:m.getHeartbeatsHeader();return T&&(E["X-Firebase-Client"]=T),E})()}}function Oe(_){return(0,O.m9)(_)}class Lt{constructor(h){this.auth=h,this.observer=null,this.addObserver=(0,O.ne)(m=>this.observer=m)}get next(){return re(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function dr(_){const h=_.indexOf(":");return h<0?"":_.substr(0,h+1)}function Fn(_){if(!_)return null;const h=Number(_);return isNaN(h)?null:h}class un{constructor(h,m){this.providerId=h,this.signInMethod=m}toJSON(){return Ke("not implemented")}_getIdTokenResponse(h){return Ke("not implemented")}_linkToIdToken(h,m){return Ke("not implemented")}_getReauthenticationResolver(h){return Ke("not implemented")}}function Sn(_,h){return ks.apply(this,arguments)}function ks(){return(ks=(0,f.Z)(function*(_,h){return Kt(_,"POST","/v1/accounts:resetPassword",Jt(_,h))})).apply(this,arguments)}function xt(_,h){return Ho.apply(this,arguments)}function Ho(){return(Ho=(0,f.Z)(function*(_,h){return Kt(_,"POST","/v1/accounts:update",h)})).apply(this,arguments)}function ds(_,h){return Ia.apply(this,arguments)}function Ia(){return(Ia=(0,f.Z)(function*(_,h){return Kt(_,"POST","/v1/accounts:update",Jt(_,h))})).apply(this,arguments)}function nr(){return(nr=(0,f.Z)(function*(_,h){return kr(_,"POST","/v1/accounts:signInWithPassword",Jt(_,h))})).apply(this,arguments)}function hs(_,h){return fs.apply(this,arguments)}function fs(){return(fs=(0,f.Z)(function*(_,h){return Kt(_,"POST","/v1/accounts:sendOobCode",Jt(_,h))})).apply(this,arguments)}function ai(_,h){return ln.apply(this,arguments)}function ln(){return(ln=(0,f.Z)(function*(_,h){return hs(_,h)})).apply(this,arguments)}function ou(_,h){return au.apply(this,arguments)}function au(){return(au=(0,f.Z)(function*(_,h){return hs(_,h)})).apply(this,arguments)}function Ri(_,h){return ui.apply(this,arguments)}function ui(){return(ui=(0,f.Z)(function*(_,h){return hs(_,h)})).apply(this,arguments)}function Vc(_,h){return Fs.apply(this,arguments)}function Fs(){return(Fs=(0,f.Z)(function*(_,h){return hs(_,h)})).apply(this,arguments)}function Gr(){return(Gr=(0,f.Z)(function*(_,h){return kr(_,"POST","/v1/accounts:signInWithEmailLink",Jt(_,h))})).apply(this,arguments)}function Bc(){return(Bc=(0,f.Z)(function*(_,h){return kr(_,"POST","/v1/accounts:signInWithEmailLink",Jt(_,h))})).apply(this,arguments)}class lu extends un{constructor(h,m,E,T=null){super("password",E),this._email=h,this._password=m,this._tenantId=T}static _fromEmailAndPassword(h,m){return new lu(h,m,"password")}static _fromEmailAndCode(h,m,E=null){return new lu(h,m,"emailLink",E)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(h){const m="string"==typeof h?JSON.parse(h):h;if((null==m?void 0:m.email)&&(null==m?void 0:m.password)){if("password"===m.signInMethod)return this._fromEmailAndPassword(m.email,m.password);if("emailLink"===m.signInMethod)return this._fromEmailAndCode(m.email,m.password,m.tenantId)}return null}_getIdTokenResponse(h){var m=this;return(0,f.Z)(function*(){switch(m.signInMethod){case"password":return function Ps(_,h){return nr.apply(this,arguments)}(h,{returnSecureToken:!0,email:m._email,password:m._password});case"emailLink":return function uu(_,h){return Gr.apply(this,arguments)}(h,{email:m._email,oobCode:m._password});default:Ie(h,"internal-error")}})()}_linkToIdToken(h,m){var E=this;return(0,f.Z)(function*(){switch(E.signInMethod){case"password":return xt(h,{idToken:m,returnSecureToken:!0,email:E._email,password:E._password});case"emailLink":return function Vh(_,h){return Bc.apply(this,arguments)}(h,{idToken:m,email:E._email,oobCode:E._password});default:Ie(h,"internal-error")}})()}_getReauthenticationResolver(h){return this._getIdTokenResponse(h)}}function Ln(_,h){return Uc.apply(this,arguments)}function Uc(){return(Uc=(0,f.Z)(function*(_,h){return kr(_,"POST","/v1/accounts:signInWithIdp",Jt(_,h))})).apply(this,arguments)}class ps extends un{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(h){const m=new ps(h.providerId,h.signInMethod);return h.idToken||h.accessToken?(h.idToken&&(m.idToken=h.idToken),h.accessToken&&(m.accessToken=h.accessToken),h.nonce&&!h.pendingToken&&(m.nonce=h.nonce),h.pendingToken&&(m.pendingToken=h.pendingToken)):h.oauthToken&&h.oauthTokenSecret?(m.accessToken=h.oauthToken,m.secret=h.oauthTokenSecret):Ie("argument-error"),m}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(h){const m="string"==typeof h?JSON.parse(h):h,{providerId:E,signInMethod:T}=m,N=(0,X._T)(m,["providerId","signInMethod"]);if(!E||!T)return null;const z=new ps(E,T);return z.idToken=N.idToken||void 0,z.accessToken=N.accessToken||void 0,z.secret=N.secret,z.nonce=N.nonce,z.pendingToken=N.pendingToken||null,z}_getIdTokenResponse(h){return Ln(h,this.buildRequest())}_linkToIdToken(h,m){const E=this.buildRequest();return E.idToken=m,Ln(h,E)}_getReauthenticationResolver(h){const m=this.buildRequest();return m.autoCreate=!1,Ln(h,m)}buildRequest(){const h={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)h.pendingToken=this.pendingToken;else{const m={};this.idToken&&(m.id_token=this.idToken),this.accessToken&&(m.access_token=this.accessToken),this.secret&&(m.oauth_token_secret=this.secret),m.providerId=this.providerId,this.nonce&&!this.pendingToken&&(m.nonce=this.nonce),h.postBody=(0,O.xO)(m)}return h}}function Kp(_,h){return cu.apply(this,arguments)}function cu(){return(cu=(0,f.Z)(function*(_,h){return Kt(_,"POST","/v1/accounts:sendVerificationCode",Jt(_,h))})).apply(this,arguments)}function Ls(){return(Ls=(0,f.Z)(function*(_,h){return kr(_,"POST","/v1/accounts:signInWithPhoneNumber",Jt(_,h))})).apply(this,arguments)}function jc(){return(jc=(0,f.Z)(function*(_,h){const m=yield kr(_,"POST","/v1/accounts:signInWithPhoneNumber",Jt(_,h));if(m.temporaryProof)throw ls(_,"account-exists-with-different-credential",m);return m})).apply(this,arguments)}const Yp={USER_NOT_FOUND:"user-not-found"};function $c(){return($c=(0,f.Z)(function*(_,h){return kr(_,"POST","/v1/accounts:signInWithPhoneNumber",Jt(_,Object.assign(Object.assign({},h),{operation:"REAUTH"})),Yp)})).apply(this,arguments)}class Go extends un{constructor(h){super("phone","phone"),this.params=h}static _fromVerification(h,m){return new Go({verificationId:h,verificationCode:m})}static _fromTokenResponse(h,m){return new Go({phoneNumber:h,temporaryProof:m})}_getIdTokenResponse(h){return function ul(_,h){return Ls.apply(this,arguments)}(h,this._makeVerificationRequest())}_linkToIdToken(h,m){return function Zp(_,h){return jc.apply(this,arguments)}(h,Object.assign({idToken:m},this._makeVerificationRequest()))}_getReauthenticationResolver(h){return function Qp(_,h){return $c.apply(this,arguments)}(h,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:h,phoneNumber:m,verificationId:E,verificationCode:T}=this.params;return h&&m?{temporaryProof:h,phoneNumber:m}:{sessionInfo:E,code:T}}toJSON(){const h={providerId:this.providerId};return this.params.phoneNumber&&(h.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(h.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(h.verificationCode=this.params.verificationCode),this.params.verificationId&&(h.verificationId=this.params.verificationId),h}static fromJSON(h){"string"==typeof h&&(h=JSON.parse(h));const{verificationId:m,verificationCode:E,phoneNumber:T,temporaryProof:N}=h;return E||m||T||N?new Go({verificationId:m,verificationCode:E,phoneNumber:T,temporaryProof:N}):null}}class fo{constructor(h){var m,E,T,N,z,se;const Ue=(0,O.zd)((0,O.pd)(h)),rt=null!==(m=Ue.apiKey)&&void 0!==m?m:null,Et=null!==(E=Ue.oobCode)&&void 0!==E?E:null,ct=function Ry(_){switch(_){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(T=Ue.mode)&&void 0!==T?T:null);re(rt&&Et&&ct,"argument-error"),this.apiKey=rt,this.operation=ct,this.code=Et,this.continueUrl=null!==(N=Ue.continueUrl)&&void 0!==N?N:null,this.languageCode=null!==(z=Ue.languageCode)&&void 0!==z?z:null,this.tenantId=null!==(se=Ue.tenantId)&&void 0!==se?se:null}static parseLink(h){const m=function du(_){const h=(0,O.zd)((0,O.pd)(_)).link,m=h?(0,O.zd)((0,O.pd)(h)).deep_link_id:null,E=(0,O.zd)((0,O.pd)(_)).deep_link_id;return(E?(0,O.zd)((0,O.pd)(E)).link:null)||E||m||h||_}(h);try{return new fo(m)}catch(E){return null}}}let ll=(()=>{class _{constructor(){this.providerId=_.PROVIDER_ID}static credential(m,E){return lu._fromEmailAndPassword(m,E)}static credentialWithLink(m,E){const T=fo.parseLink(E);return re(T,"argument-error"),lu._fromEmailAndCode(m,T.code,T.tenantId)}}return _.PROVIDER_ID="password",_.EMAIL_PASSWORD_SIGN_IN_METHOD="password",_.EMAIL_LINK_SIGN_IN_METHOD="emailLink",_})();class Vs{constructor(h){this.providerId=h,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(h){this.defaultLanguageCode=h}setCustomParameters(h){return this.customParameters=h,this}getCustomParameters(){return this.customParameters}}class qr extends Vs{constructor(){super(...arguments),this.scopes=[]}addScope(h){return this.scopes.includes(h)||this.scopes.push(h),this}getScopes(){return[...this.scopes]}}class qo extends qr{static credentialFromJSON(h){const m="string"==typeof h?JSON.parse(h):h;return re("providerId"in m&&"signInMethod"in m,"argument-error"),ps._fromParams(m)}credential(h){return this._credential(Object.assign(Object.assign({},h),{nonce:h.rawNonce}))}_credential(h){return re(h.idToken||h.accessToken,"argument-error"),ps._fromParams(Object.assign(Object.assign({},h),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(h){return qo.oauthCredentialFromTaggedObject(h)}static credentialFromError(h){return qo.oauthCredentialFromTaggedObject(h.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:h}){if(!h)return null;const{oauthIdToken:m,oauthAccessToken:E,oauthTokenSecret:T,pendingToken:N,nonce:z,providerId:se}=h;if(!E&&!T&&!m&&!N||!se)return null;try{return new qo(se)._credential({idToken:m,accessToken:E,nonce:z,pendingToken:N})}catch(Ue){return null}}}let po=(()=>{class _ extends qr{constructor(){super("facebook.com")}static credential(m){return ps._fromParams({providerId:_.PROVIDER_ID,signInMethod:_.FACEBOOK_SIGN_IN_METHOD,accessToken:m})}static credentialFromResult(m){return _.credentialFromTaggedObject(m)}static credentialFromError(m){return _.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m||!("oauthAccessToken"in m)||!m.oauthAccessToken)return null;try{return _.credential(m.oauthAccessToken)}catch(E){return null}}}return _.FACEBOOK_SIGN_IN_METHOD="facebook.com",_.PROVIDER_ID="facebook.com",_})(),Ta=(()=>{class _ extends qr{constructor(){super("google.com"),this.addScope("profile")}static credential(m,E){return ps._fromParams({providerId:_.PROVIDER_ID,signInMethod:_.GOOGLE_SIGN_IN_METHOD,idToken:m,accessToken:E})}static credentialFromResult(m){return _.credentialFromTaggedObject(m)}static credentialFromError(m){return _.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m)return null;const{oauthIdToken:E,oauthAccessToken:T}=m;if(!E&&!T)return null;try{return _.credential(E,T)}catch(N){return null}}}return _.GOOGLE_SIGN_IN_METHOD="google.com",_.PROVIDER_ID="google.com",_})(),Hc=(()=>{class _ extends qr{constructor(){super("github.com")}static credential(m){return ps._fromParams({providerId:_.PROVIDER_ID,signInMethod:_.GITHUB_SIGN_IN_METHOD,accessToken:m})}static credentialFromResult(m){return _.credentialFromTaggedObject(m)}static credentialFromError(m){return _.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m||!("oauthAccessToken"in m)||!m.oauthAccessToken)return null;try{return _.credential(m.oauthAccessToken)}catch(E){return null}}}return _.GITHUB_SIGN_IN_METHOD="github.com",_.PROVIDER_ID="github.com",_})();class br extends un{constructor(h,m){super(h,h),this.pendingToken=m}_getIdTokenResponse(h){return Ln(h,this.buildRequest())}_linkToIdToken(h,m){const E=this.buildRequest();return E.idToken=m,Ln(h,E)}_getReauthenticationResolver(h){const m=this.buildRequest();return m.autoCreate=!1,Ln(h,m)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(h){const m="string"==typeof h?JSON.parse(h):h,{providerId:E,signInMethod:T,pendingToken:N}=m;return E&&T&&N&&E===T?new br(E,N):null}static _create(h,m){return new br(h,m)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class li extends Vs{constructor(h){re(h.startsWith("saml."),"argument-error"),super(h)}static credentialFromResult(h){return li.samlCredentialFromTaggedObject(h)}static credentialFromError(h){return li.samlCredentialFromTaggedObject(h.customData||{})}static credentialFromJSON(h){const m=br.fromJSON(h);return re(m,"argument-error"),m}static samlCredentialFromTaggedObject({_tokenResponse:h}){if(!h)return null;const{pendingToken:m,providerId:E}=h;if(!m||!E)return null;try{return br._create(E,m)}catch(T){return null}}}let hu=(()=>{class _ extends qr{constructor(){super("twitter.com")}static credential(m,E){return ps._fromParams({providerId:_.PROVIDER_ID,signInMethod:_.TWITTER_SIGN_IN_METHOD,oauthToken:m,oauthTokenSecret:E})}static credentialFromResult(m){return _.credentialFromTaggedObject(m)}static credentialFromError(m){return _.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m)return null;const{oauthAccessToken:E,oauthTokenSecret:T}=m;if(!E||!T)return null;try{return _.credential(E,T)}catch(N){return null}}}return _.TWITTER_SIGN_IN_METHOD="twitter.com",_.PROVIDER_ID="twitter.com",_})();function fu(_,h){return Dr.apply(this,arguments)}function Dr(){return(Dr=(0,f.Z)(function*(_,h){return kr(_,"POST","/v1/accounts:signUp",Jt(_,h))})).apply(this,arguments)}class hr{constructor(h){this.user=h.user,this.providerId=h.providerId,this._tokenResponse=h._tokenResponse,this.operationType=h.operationType}static _fromIdTokenResponse(h,m,E,T=!1){return(0,f.Z)(function*(){const N=yield j._fromIdTokenResponse(h,E,T),z=Uh(E);return new hr({user:N,providerId:z,_tokenResponse:E,operationType:m})})()}static _forOperation(h,m,E){return(0,f.Z)(function*(){yield h._updateTokensIfNecessary(E,!0);const T=Uh(E);return new hr({user:h,providerId:T,_tokenResponse:E,operationType:m})})()}}function Uh(_){return _.providerId?_.providerId:"phoneNumber"in _?"phone":null}function Gc(){return(Gc=(0,f.Z)(function*(_){var h;const m=Oe(_);if(yield m._initializationPromise,null===(h=m.currentUser)||void 0===h?void 0:h.isAnonymous)return new hr({user:m.currentUser,providerId:null,operationType:"signIn"});const E=yield fu(m,{returnSecureToken:!0}),T=yield hr._fromIdTokenResponse(m,"signIn",E,!0);return yield m._updateCurrentUser(T.user),T})).apply(this,arguments)}class gu extends O.ZR{constructor(h,m,E,T){var N;super(m.code,m.message),this.operationType=E,this.user=T,Object.setPrototypeOf(this,gu.prototype),this.customData={appName:h.name,tenantId:null!==(N=h.tenantId)&&void 0!==N?N:void 0,_serverResponse:m.customData._serverResponse,operationType:E}}static _fromErrorAndOperation(h,m,E,T){return new gu(h,m,E,T)}}function mu(_,h,m,E){return("reauthenticate"===h?m._getReauthenticationResolver(_):m._getIdTokenResponse(_)).catch(N=>{throw"auth/multi-factor-auth-required"===N.code?gu._fromErrorAndOperation(_,N,h,E):N})}function gs(_){return new Set(_.map(({providerId:h})=>h).filter(h=>!!h))}function cl(){return(cl=(0,f.Z)(function*(_,h){const m=(0,O.m9)(_);yield Us(!0,m,h);const{providerUserInfo:E}=yield Xn(m.auth,{idToken:yield m.getIdToken(),deleteProvider:[h]}),T=gs(E||[]);return m.providerData=m.providerData.filter(N=>T.has(N.providerId)),T.has("phone")||(m.phoneNumber=null),yield m.auth._persistUserIfCurrent(m),m})).apply(this,arguments)}function mn(_,h){return zo.apply(this,arguments)}function zo(){return(zo=(0,f.Z)(function*(_,h,m=!1){const E=yield lr(_,h._linkToIdToken(_.auth,yield _.getIdToken()),m);return hr._forOperation(_,"link",E)})).apply(this,arguments)}function Us(_,h,m){return cn.apply(this,arguments)}function cn(){return(cn=(0,f.Z)(function*(_,h,m){yield cr(h);const T=!1===_?"provider-already-linked":"no-such-provider";re(gs(h.providerData).has(m)===_,h.auth,T)})).apply(this,arguments)}function qc(_,h){return go.apply(this,arguments)}function go(){return(go=(0,f.Z)(function*(_,h,m=!1){const{auth:E}=_,T="reauthenticate";try{const N=yield lr(_,mu(E,T,h,_),m);re(N.idToken,E,"internal-error");const z=lt(N.idToken);re(z,E,"internal-error");const{sub:se}=z;return re(_.uid===se,E,"user-mismatch"),hr._forOperation(_,T,N)}catch(N){throw"auth/user-not-found"===(null==N?void 0:N.code)&&Ie(E,"user-mismatch"),N}})).apply(this,arguments)}function mo(_,h){return Cr.apply(this,arguments)}function Cr(){return(Cr=(0,f.Z)(function*(_,h,m=!1){const E="signIn",T=yield mu(_,E,h),N=yield hr._fromIdTokenResponse(_,E,T);return m||(yield _._updateCurrentUser(N.user)),N})).apply(this,arguments)}function Mn(_,h){return Sa.apply(this,arguments)}function Sa(){return(Sa=(0,f.Z)(function*(_,h){return mo(Oe(_),h)})).apply(this,arguments)}function Ni(_,h){return Ir.apply(this,arguments)}function Ir(){return(Ir=(0,f.Z)(function*(_,h){const m=(0,O.m9)(_);return yield Us(!1,m,h.providerId),mn(m,h)})).apply(this,arguments)}function js(_,h){return ms.apply(this,arguments)}function ms(){return(ms=(0,f.Z)(function*(_,h){return qc((0,O.m9)(_),h)})).apply(this,arguments)}function yu(_,h){return zr.apply(this,arguments)}function zr(){return(zr=(0,f.Z)(function*(_,h){return kr(_,"POST","/v1/accounts:signInWithCustomToken",Jt(_,h))})).apply(this,arguments)}function Hs(){return(Hs=(0,f.Z)(function*(_,h){const m=Oe(_),E=yield yu(m,{token:h,returnSecureToken:!0}),T=yield hr._fromIdTokenResponse(m,"signIn",E);return yield m._updateCurrentUser(T.user),T})).apply(this,arguments)}class gt{constructor(h,m){this.factorId=h,this.uid=m.mfaEnrollmentId,this.enrollmentTime=new Date(m.enrolledAt).toUTCString(),this.displayName=m.displayName}static _fromServerResponse(h,m){return"phoneInfo"in m?_u._fromServerResponse(h,m):Ie(h,"internal-error")}}class _u extends gt{constructor(h){super("phone",h),this.phoneNumber=h.phoneInfo}static _fromServerResponse(h,m){return new _u(m)}}function Ma(_,h,m){var E;re((null===(E=m.url)||void 0===E?void 0:E.length)>0,_,"invalid-continue-uri"),re(void 0===m.dynamicLinkDomain||m.dynamicLinkDomain.length>0,_,"invalid-dynamic-link-domain"),h.continueUrl=m.url,h.dynamicLinkDomain=m.dynamicLinkDomain,h.canHandleCodeInApp=m.handleCodeInApp,m.iOS&&(re(m.iOS.bundleId.length>0,_,"missing-ios-bundle-id"),h.iOSBundleId=m.iOS.bundleId),m.android&&(re(m.android.packageName.length>0,_,"missing-android-pkg-name"),h.androidInstallApp=m.android.installApp,h.androidMinimumVersionCode=m.android.minimumVersion,h.androidPackageName=m.android.packageName)}function Eu(){return(Eu=(0,f.Z)(function*(_,h,m){const E=(0,O.m9)(_),T={requestType:"PASSWORD_RESET",email:h};m&&Ma(E,T,m),yield ou(E,T)})).apply(this,arguments)}function dl(){return(dl=(0,f.Z)(function*(_,h,m){yield Sn((0,O.m9)(_),{oobCode:h,newPassword:m})})).apply(this,arguments)}function De(){return(De=(0,f.Z)(function*(_,h){yield ds((0,O.m9)(_),{oobCode:h})})).apply(this,arguments)}function Ut(_,h){return fl.apply(this,arguments)}function fl(){return(fl=(0,f.Z)(function*(_,h){const m=(0,O.m9)(_),E=yield Sn(m,{oobCode:h}),T=E.requestType;switch(re(T,m,"internal-error"),T){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":re(E.newEmail,m,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":re(E.mfaInfo,m,"internal-error");default:re(E.email,m,"internal-error")}let N=null;return E.mfaInfo&&(N=gt._fromServerResponse(Oe(m),E.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===E.requestType?E.newEmail:E.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===E.requestType?E.email:E.newEmail)||null,multiFactorInfo:N},operation:T}})).apply(this,arguments)}function Wo(){return(Wo=(0,f.Z)(function*(_,h){const{data:m}=yield Ut((0,O.m9)(_),h);return m.email})).apply(this,arguments)}function Wr(){return(Wr=(0,f.Z)(function*(_,h,m){const E=Oe(_),T=yield fu(E,{returnSecureToken:!0,email:h,password:m}),N=yield hr._fromIdTokenResponse(E,"signIn",T);return yield E._updateCurrentUser(N.user),N})).apply(this,arguments)}function zc(){return(zc=(0,f.Z)(function*(_,h,m){const E=(0,O.m9)(_),T={requestType:"EMAIL_SIGNIN",email:h};re(m.handleCodeInApp,E,"argument-error"),m&&Ma(E,T,m),yield Ri(E,T)})).apply(this,arguments)}function Gs(){return(Gs=(0,f.Z)(function*(_,h,m){const E=(0,O.m9)(_),T=ll.credentialWithLink(h,m||Fe());return re(T._tenantId===(E.tenantId||null),E,"tenant-id-mismatch"),Mn(E,T)})).apply(this,arguments)}function fr(_,h){return ci.apply(this,arguments)}function ci(){return(ci=(0,f.Z)(function*(_,h){return Kt(_,"POST","/v1/accounts:createAuthUri",Jt(_,h))})).apply(this,arguments)}function qs(){return(qs=(0,f.Z)(function*(_,h){const E={identifier:h,continueUri:St()?Fe():"http://localhost"},{signinMethods:T}=yield fr((0,O.m9)(_),E);return T||[]})).apply(this,arguments)}function yl(){return(yl=(0,f.Z)(function*(_,h){const m=(0,O.m9)(_),T={requestType:"VERIFY_EMAIL",idToken:yield _.getIdToken()};h&&Ma(m.auth,T,h);const{email:N}=yield ai(m.auth,T);N!==_.email&&(yield _.reload())})).apply(this,arguments)}function Iu(){return(Iu=(0,f.Z)(function*(_,h,m){const E=(0,O.m9)(_),N={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield _.getIdToken(),newEmail:h};m&&Ma(E.auth,N,m);const{email:z}=yield Vc(E.auth,N);z!==_.email&&(yield _.reload())})).apply(this,arguments)}function _l(_,h){return xa.apply(this,arguments)}function xa(){return(xa=(0,f.Z)(function*(_,h){return Kt(_,"POST","/v1/accounts:update",h)})).apply(this,arguments)}function vl(){return(vl=(0,f.Z)(function*(_,{displayName:h,photoURL:m}){if(void 0===h&&void 0===m)return;const E=(0,O.m9)(_),N={idToken:yield E.getIdToken(),displayName:h,photoUrl:m,returnSecureToken:!0},z=yield lr(E,_l(E.auth,N));E.displayName=z.displayName||null,E.photoURL=z.photoUrl||null;const se=E.providerData.find(({providerId:Ue})=>"password"===Ue);se&&(se.displayName=E.displayName,se.photoURL=E.photoURL),yield E._updateTokensIfNecessary(z)})).apply(this,arguments)}function wl(_,h,m){return yo.apply(this,arguments)}function yo(){return(yo=(0,f.Z)(function*(_,h,m){const{auth:E}=_,N={idToken:yield _.getIdToken(),returnSecureToken:!0};h&&(N.email=h),m&&(N.password=m);const z=yield lr(_,xt(E,N));yield _._updateTokensIfNecessary(z,!0)})).apply(this,arguments)}class _o{constructor(h,m,E={}){this.isNewUser=h,this.providerId=m,this.profile=E}}class Zc extends _o{constructor(h,m,E,T){super(h,m,E),this.username=T}}class Yc extends _o{constructor(h,m){super(h,"facebook.com",m)}}class vo extends Zc{constructor(h,m){super(h,"github.com",m,"string"==typeof(null==m?void 0:m.login)?null==m?void 0:m.login:null)}}class zs extends _o{constructor(h,m){super(h,"google.com",m)}}class bl extends Zc{constructor(h,m,E){super(h,"twitter.com",m,E)}}function Tr(_){const{user:h,_tokenResponse:m}=_;return h.isAnonymous&&!m?{providerId:null,isNewUser:!1,profile:null}:function Kc(_){var h,m;if(!_)return null;const{providerId:E}=_,T=_.rawUserInfo?JSON.parse(_.rawUserInfo):{},N=_.isNewUser||"identitytoolkit#SignupNewUserResponse"===_.kind;if(!E&&(null==_?void 0:_.idToken)){const z=null===(m=null===(h=lt(_.idToken))||void 0===h?void 0:h.firebase)||void 0===m?void 0:m.sign_in_provider;if(z)return new _o(N,"anonymous"!==z&&"custom"!==z?z:null)}if(!E)return null;switch(E){case"facebook.com":return new Yc(N,T);case"github.com":return new vo(N,T);case"google.com":return new zs(N,T);case"twitter.com":return new bl(N,T,_.screenName||null);case"custom":case"anonymous":return new _o(N,null);default:return new _o(N,E,T)}}(m)}class ys{constructor(h,m){this.type=h,this.credential=m}static _fromIdtoken(h){return new ys("enroll",h)}static _fromMfaPendingCredential(h){return new ys("signin",h)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(h){var m,E;if(null==h?void 0:h.multiFactorSession){if(null===(m=h.multiFactorSession)||void 0===m?void 0:m.pendingCredential)return ys._fromMfaPendingCredential(h.multiFactorSession.pendingCredential);if(null===(E=h.multiFactorSession)||void 0===E?void 0:E.idToken)return ys._fromIdtoken(h.multiFactorSession.idToken)}return null}}class Ra{constructor(h,m,E){this.session=h,this.hints=m,this.signInResolver=E}static _fromError(h,m){const E=Oe(h),T=m.customData._serverResponse,N=(T.mfaInfo||[]).map(se=>gt._fromServerResponse(E,se));re(T.mfaPendingCredential,E,"internal-error");const z=ys._fromMfaPendingCredential(T.mfaPendingCredential);return new Ra(z,N,function(){var se=(0,f.Z)(function*(Ue){const rt=yield Ue._process(E,z);delete T.mfaInfo,delete T.mfaPendingCredential;const Et=Object.assign(Object.assign({},T),{idToken:rt.idToken,refreshToken:rt.refreshToken});switch(m.operationType){case"signIn":const ct=yield hr._fromIdTokenResponse(E,m.operationType,Et);return yield E._updateCurrentUser(ct.user),ct;case"reauthenticate":return re(m.user,E,"internal-error"),hr._forOperation(m.user,m.operationType,Et);default:Ie(E,"internal-error")}});return function(Ue){return se.apply(this,arguments)}}())}resolveSignIn(h){var m=this;return(0,f.Z)(function*(){return m.signInResolver(h)})()}}function Vn(_,h){return Kt(_,"POST","/v2/accounts/mfaEnrollment:start",Jt(_,h))}class _s{constructor(h){this.user=h,this.enrolledFactors=[],h._onReload(m=>{m.mfaInfo&&(this.enrolledFactors=m.mfaInfo.map(E=>gt._fromServerResponse(h.auth,E)))})}static _fromUser(h){return new _s(h)}getSession(){var h=this;return(0,f.Z)(function*(){return ys._fromIdtoken(yield h.user.getIdToken())})()}enroll(h,m){var E=this;return(0,f.Z)(function*(){const T=h,N=yield E.getSession(),z=yield lr(E.user,T._process(E.user.auth,N,m));return yield E.user._updateTokensIfNecessary(z),E.user.reload()})()}unenroll(h){var m=this;return(0,f.Z)(function*(){const E="string"==typeof h?h:h.uid,T=yield m.user.getIdToken(),N=yield lr(m.user,function Xp(_,h){return Kt(_,"POST","/v2/accounts/mfaEnrollment:withdraw",Jt(_,h))}(m.user.auth,{idToken:T,mfaEnrollmentId:E}));m.enrolledFactors=m.enrolledFactors.filter(({uid:z})=>z!==E),yield m.user._updateTokensIfNecessary(N);try{yield m.user.reload()}catch(z){if("auth/user-token-expired"!==z.code)throw z}})()}}const Yo=new WeakMap,Il="__sak";class Eo{constructor(h,m){this.storageRetriever=h,this.type=m}_isAvailable(){try{return this.storage?(this.storage.setItem(Il,"1"),this.storage.removeItem(Il),Promise.resolve(!0)):Promise.resolve(!1)}catch(h){return Promise.resolve(!1)}}_set(h,m){return this.storage.setItem(h,JSON.stringify(m)),Promise.resolve()}_get(h){const m=this.storage.getItem(h);return Promise.resolve(m?JSON.parse(m):null)}_remove(h){return this.storage.removeItem(h),Promise.resolve()}get storage(){return this.storageRetriever()}}const Rn=(()=>{class _ extends Eo{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(m,E)=>this.onStorageEvent(m,E),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function ed(){const _=(0,O.z$)();return Xt(_)||tr(_)}()&&function Gn(){try{return!(!window||window===window.top)}catch(_){return!1}}(),this.fallbackToPolling=cs(),this._shouldAllowMigration=!0}forAllChangedKeys(m){for(const E of Object.keys(this.listeners)){const T=this.storage.getItem(E),N=this.localCache[E];T!==N&&m(E,N,T)}}onStorageEvent(m,E=!1){if(!m.key)return void this.forAllChangedKeys((se,Ue,rt)=>{this.notifyListeners(se,rt)});const T=m.key;if(E?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const se=this.storage.getItem(T);if(m.newValue!==se)null!==m.newValue?this.storage.setItem(T,m.newValue):this.storage.removeItem(T);else if(this.localCache[T]===m.newValue&&!E)return}const N=()=>{const se=this.storage.getItem(T);!E&&this.localCache[T]===se||this.notifyListeners(T,se)},z=this.storage.getItem(T);!function Da(){return(0,O.w1)()&&10===document.documentMode}()||z===m.newValue||m.newValue===m.oldValue?N():setTimeout(N,10)}notifyListeners(m,E){this.localCache[m]=E;const T=this.listeners[m];if(T)for(const N of Array.from(T))N(E&&JSON.parse(E))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((m,E,T)=>{this.onStorageEvent(new StorageEvent("storage",{key:m,oldValue:E,newValue:T}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(m,E){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[m]||(this.listeners[m]=new Set,this.localCache[m]=this.storage.getItem(m)),this.listeners[m].add(E)}_removeListener(m,E){this.listeners[m]&&(this.listeners[m].delete(E),0===this.listeners[m].size&&delete this.listeners[m]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(m,E){var T=()=>super._set,N=this;return(0,f.Z)(function*(){yield T().call(N,m,E),N.localCache[m]=JSON.stringify(E)})()}_get(m){var E=()=>super._get,T=this;return(0,f.Z)(function*(){const N=yield E().call(T,m);return T.localCache[m]=JSON.stringify(N),N})()}_remove(m){var E=()=>super._remove,T=this;return(0,f.Z)(function*(){yield E().call(T,m),delete T.localCache[m]})()}}return _.type="LOCAL",_})(),rr=(()=>{class _ extends Eo{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(m,E){}_removeListener(m,E){}}return _.type="SESSION",_})();let Fr=(()=>{class _{constructor(m){this.eventTarget=m,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(m){const E=this.receivers.find(N=>N.isListeningto(m));if(E)return E;const T=new _(m);return this.receivers.push(T),T}isListeningto(m){return this.eventTarget===m}handleEvent(m){var E=this;return(0,f.Z)(function*(){const T=m,{eventId:N,eventType:z,data:se}=T.data,Ue=E.handlersMap[z];if(!(null==Ue?void 0:Ue.size))return;T.ports[0].postMessage({status:"ack",eventId:N,eventType:z});const rt=Array.from(Ue).map(function(){var ct=(0,f.Z)(function*(Tn){return Tn(T.origin,se)});return function(Tn){return ct.apply(this,arguments)}}()),Et=yield function Kr(_){return Promise.all(_.map(function(){var h=(0,f.Z)(function*(m){try{return{fulfilled:!0,value:yield m}}catch(E){return{fulfilled:!1,reason:E}}});return function(m){return h.apply(this,arguments)}}()))}(rt);T.ports[0].postMessage({status:"done",eventId:N,eventType:z,response:Et})})()}_subscribe(m,E){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[m]||(this.handlersMap[m]=new Set),this.handlersMap[m].add(E)}_unsubscribe(m,E){this.handlersMap[m]&&E&&this.handlersMap[m].delete(E),(!E||0===this.handlersMap[m].size)&&delete this.handlersMap[m],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return _.receivers=[],_})();function Qo(_="",h=10){let m="";for(let E=0;E<h;E++)m+=Math.floor(10*Math.random());return _+m}class td{constructor(h){this.target=h,this.handlers=new Set}removeMessageHandler(h){h.messageChannel&&(h.messageChannel.port1.removeEventListener("message",h.onMessage),h.messageChannel.port1.close()),this.handlers.delete(h)}_send(h,m,E=50){var T=this;return(0,f.Z)(function*(){const N="undefined"!=typeof MessageChannel?new MessageChannel:null;if(!N)throw new Error("connection_unavailable");let z,se;return new Promise((Ue,rt)=>{const Et=Qo("",20);N.port1.start();const ct=setTimeout(()=>{rt(new Error("unsupported_event"))},E);se={messageChannel:N,onMessage(Tn){const rs=Tn;if(rs.data.eventId===Et)switch(rs.data.status){case"ack":clearTimeout(ct),z=setTimeout(()=>{rt(new Error("timeout"))},3e3);break;case"done":clearTimeout(z),Ue(rs.data.response);break;default:clearTimeout(ct),clearTimeout(z),rt(new Error("invalid_response"))}}},T.handlers.add(se),N.port1.addEventListener("message",se.onMessage),T.target.postMessage({eventType:h,eventId:Et,data:m},[N.port2])}).finally(()=>{se&&T.removeMessageHandler(se)})})()}}function gn(){return window}function ki(){return void 0!==gn().WorkerGlobalScope&&"function"==typeof gn().importScripts}function di(){return(di=(0,f.Z)(function*(){if(!(null==navigator?void 0:navigator.serviceWorker))return null;try{return(yield navigator.serviceWorker.ready).active}catch(_){return null}})).apply(this,arguments)}const Tl="firebaseLocalStorageDb",wo="firebaseLocalStorage",Bn="fbase_key";class vs{constructor(h){this.request=h}toPromise(){return new Promise((h,m)=>{this.request.addEventListener("success",()=>{h(this.request.result)}),this.request.addEventListener("error",()=>{m(this.request.error)})})}}function Jo(_,h){return _.transaction([wo],h?"readwrite":"readonly").objectStore(wo)}function Ks(){const _=indexedDB.open(Tl,1);return new Promise((h,m)=>{_.addEventListener("error",()=>{m(_.error)}),_.addEventListener("upgradeneeded",()=>{const E=_.result;try{E.createObjectStore(wo,{keyPath:Bn})}catch(T){m(T)}}),_.addEventListener("success",(0,f.Z)(function*(){const E=_.result;E.objectStoreNames.contains(wo)?h(E):(E.close(),yield function hi(){const _=indexedDB.deleteDatabase(Tl);return new vs(_).toPromise()}(),h(yield Ks()))}))})}function fi(_,h,m){return Zi.apply(this,arguments)}function Zi(){return(Zi=(0,f.Z)(function*(_,h,m){const E=Jo(_,!0).put({[Bn]:h,value:m});return new vs(E).toPromise()})).apply(this,arguments)}function Zs(){return(Zs=(0,f.Z)(function*(_,h){const m=Jo(_,!1).get(h),E=yield new vs(m).toPromise();return void 0===E?null:E.value})).apply(this,arguments)}function Yi(_,h){const m=Jo(_,!0).delete(h);return new vs(m).toPromise()}const Pi=(()=>{class _{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var m=this;return(0,f.Z)(function*(){return m.db||(m.db=yield Ks()),m.db})()}_withRetries(m){var E=this;return(0,f.Z)(function*(){let T=0;for(;;)try{const N=yield E._openDb();return yield m(N)}catch(N){if(T++>3)throw N;E.db&&(E.db.close(),E.db=void 0)}})()}initializeServiceWorkerMessaging(){var m=this;return(0,f.Z)(function*(){return ki()?m.initializeReceiver():m.initializeSender()})()}initializeReceiver(){var m=this;return(0,f.Z)(function*(){m.receiver=Fr._getInstance(function nd(){return ki()?self:null}()),m.receiver._subscribe("keyChanged",function(){var E=(0,f.Z)(function*(T,N){return{keyProcessed:(yield m._poll()).includes(N.key)}});return function(T,N){return E.apply(this,arguments)}}()),m.receiver._subscribe("ping",function(){var E=(0,f.Z)(function*(T,N){return["keyChanged"]});return function(T,N){return E.apply(this,arguments)}}())})()}initializeSender(){var m=this;return(0,f.Z)(function*(){var E,T;if(m.activeServiceWorker=yield function Au(){return di.apply(this,arguments)}(),!m.activeServiceWorker)return;m.sender=new td(m.activeServiceWorker);const N=yield m.sender._send("ping",{},800);!N||(null===(E=N[0])||void 0===E?void 0:E.fulfilled)&&(null===(T=N[0])||void 0===T?void 0:T.value.includes("keyChanged"))&&(m.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(m){var E=this;return(0,f.Z)(function*(){if(E.sender&&E.activeServiceWorker&&function Rt(){var _;return(null===(_=null==navigator?void 0:navigator.serviceWorker)||void 0===_?void 0:_.controller)||null}()===E.activeServiceWorker)try{yield E.sender._send("keyChanged",{key:m},E.serviceWorkerReceiverAvailable?800:50)}catch(T){}})()}_isAvailable(){return(0,f.Z)(function*(){try{if(!indexedDB)return!1;const m=yield Ks();return yield fi(m,Il,"1"),yield Yi(m,Il),!0}catch(m){}return!1})()}_withPendingWrite(m){var E=this;return(0,f.Z)(function*(){E.pendingWrites++;try{yield m()}finally{E.pendingWrites--}})()}_set(m,E){var T=this;return(0,f.Z)(function*(){return T._withPendingWrite((0,f.Z)(function*(){return yield T._withRetries(N=>fi(N,m,E)),T.localCache[m]=E,T.notifyServiceWorker(m)}))})()}_get(m){var E=this;return(0,f.Z)(function*(){const T=yield E._withRetries(N=>function Sl(_,h){return Zs.apply(this,arguments)}(N,m));return E.localCache[m]=T,T})()}_remove(m){var E=this;return(0,f.Z)(function*(){return E._withPendingWrite((0,f.Z)(function*(){return yield E._withRetries(T=>Yi(T,m)),delete E.localCache[m],E.notifyServiceWorker(m)}))})()}_poll(){var m=this;return(0,f.Z)(function*(){const E=yield m._withRetries(z=>{const se=Jo(z,!1).getAll();return new vs(se).toPromise()});if(!E)return[];if(0!==m.pendingWrites)return[];const T=[],N=new Set;for(const{fbase_key:z,value:se}of E)N.add(z),JSON.stringify(m.localCache[z])!==JSON.stringify(se)&&(m.notifyListeners(z,se),T.push(z));for(const z of Object.keys(m.localCache))m.localCache[z]&&!N.has(z)&&(m.notifyListeners(z,null),T.push(z));return T})()}notifyListeners(m,E){this.localCache[m]=E;const T=this.listeners[m];if(T)for(const N of Array.from(T))N(E)}startPolling(){var m=this;this.stopPolling(),this.pollTimer=setInterval((0,f.Z)(function*(){return m._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(m,E){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[m]||(this.listeners[m]=new Set,this._get(m)),this.listeners[m].add(E)}_removeListener(m,E){this.listeners[m]&&(this.listeners[m].delete(E),0===this.listeners[m].size&&delete this.listeners[m]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return _.type="LOCAL",_})();function Xo(_,h){return Kt(_,"POST","/v2/accounts/mfaSignIn:start",Jt(_,h))}function Fi(){return(Fi=(0,f.Z)(function*(_){return(yield Kt(_,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function Nn(_){return new Promise((h,m)=>{const E=document.createElement("script");E.setAttribute("src",_),E.onload=h,E.onerror=T=>{const N=ye("internal-error");N.customData=T,m(N)},E.type="text/javascript",E.charset="UTF-8",function id(){var _,h;return null!==(h=null===(_=document.getElementsByTagName("head"))||void 0===_?void 0:_[0])&&void 0!==h?h:document}().appendChild(E)})}function Do(_){return`__${_}${Math.floor(1e6*Math.random())}`}const Ar=1e12;class Qi{constructor(h){this.auth=h,this.counter=Ar,this._widgets=new Map}render(h,m){const E=this.counter;return this._widgets.set(E,new Ji(h,this.auth.name,m||{})),this.counter++,E}reset(h){var m;const E=h||Ar;null===(m=this._widgets.get(E))||void 0===m||m.delete(),this._widgets.delete(E)}getResponse(h){var m;return(null===(m=this._widgets.get(h||Ar))||void 0===m?void 0:m.getResponse())||""}execute(h){var m=this;return(0,f.Z)(function*(){var E;return null===(E=m._widgets.get(h||Ar))||void 0===E||E.execute(),""})()}}class Ji{constructor(h,m,E){this.params=E,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const T="string"==typeof h?document.getElementById(h):h;re(T,"argument-error",{appName:m}),this.container=T,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function vn(_){const h=[],m="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let E=0;E<_;E++)h.push(m.charAt(Math.floor(Math.random()*m.length)));return h.join("")}(50);const{callback:h,"expired-callback":m}=this.params;if(h)try{h(this.responseToken)}catch(E){}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,m)try{m()}catch(E){}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const Ys=Do("rcb"),sd=new Wt(3e4,6e4);class tg{constructor(){this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!gn().grecaptcha}load(h,m=""){return re(function ng(_){return _.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(_)}(m),h,"argument-error"),this.shouldResolveImmediately(m)?Promise.resolve(gn().grecaptcha):new Promise((E,T)=>{const N=gn().setTimeout(()=>{T(ye(h,"network-request-failed"))},sd.get());gn()[Ys]=()=>{gn().clearTimeout(N),delete gn()[Ys];const se=gn().grecaptcha;if(!se)return void T(ye(h,"internal-error"));const Ue=se.render;se.render=(rt,Et)=>{const ct=Ue(rt,Et);return this.counter++,ct},this.hostLanguage=m,E(se)},Nn(`https://www.google.com/recaptcha/api.js??${(0,O.xO)({onload:Ys,render:"explicit",hl:m})}`).catch(()=>{clearTimeout(N),T(ye(h,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(h){return!!gn().grecaptcha&&(h===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class rg{load(h){return(0,f.Z)(function*(){return new Qi(h)})()}clearedOneInstance(){}}const Qs="recaptcha",Zr={theme:"light",type:"image"};class ig{constructor(h,m=Object.assign({},Zr),E){this.parameters=m,this.type=Qs,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=Oe(E),this.isInvisible="invisible"===this.parameters.size,re("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment");const T="string"==typeof h?document.getElementById(h):h;re(T,this.auth,"argument-error"),this.container=T,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new rg:new tg,this.validateStartingState()}verify(){var h=this;return(0,f.Z)(function*(){h.assertNotDestroyed();const m=yield h.render(),E=h.getAssertedRecaptcha();return E.getResponse(m)||new Promise(N=>{const z=se=>{!se||(h.tokenChangeListeners.delete(z),N(se))};h.tokenChangeListeners.add(z),h.isInvisible&&E.execute(m)})})()}render(){try{this.assertNotDestroyed()}catch(h){return Promise.reject(h)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(h=>{throw this.renderPromise=null,h})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(h=>{this.container.removeChild(h)})}validateStartingState(){re(!this.parameters.sitekey,this.auth,"argument-error"),re(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),re("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(h){return m=>{if(this.tokenChangeListeners.forEach(E=>E(m)),"function"==typeof h)h(m);else if("string"==typeof h){const E=gn()[h];"function"==typeof E&&E(m)}}}assertNotDestroyed(){re(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var h=this;return(0,f.Z)(function*(){if(yield h.init(),!h.widgetId){let m=h.container;if(!h.isInvisible){const E=document.createElement("div");m.appendChild(E),m=E}h.widgetId=h.getAssertedRecaptcha().render(m,h.parameters)}return h.widgetId})()}init(){var h=this;return(0,f.Z)(function*(){re(St()&&!ki(),h.auth,"internal-error"),yield function Js(){let _=null;return new Promise(h=>{"complete"!==document.readyState?(_=()=>h(),window.addEventListener("load",_)):h()}).catch(h=>{throw _&&window.removeEventListener("load",_),h})}(),h.recaptcha=yield h._recaptchaLoader.load(h.auth,h.auth.languageCode||void 0);const m=yield function Lr(_){return Fi.apply(this,arguments)}(h.auth);re(m,h.auth,"internal-error"),h.parameters.sitekey=m})()}getAssertedRecaptcha(){return re(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class Es{constructor(h,m){this.verificationId=h,this.onConfirmation=m}confirm(h){const m=Go._fromVerification(this.verificationId,h);return this.onConfirmation(m)}}function wn(){return(wn=(0,f.Z)(function*(_,h,m){const E=Oe(_),T=yield Sr(E,h,(0,O.m9)(m));return new Es(T,N=>Mn(E,N))})).apply(this,arguments)}function na(){return(na=(0,f.Z)(function*(_,h,m){const E=(0,O.m9)(_);yield Us(!1,E,"phone");const T=yield Sr(E.auth,h,(0,O.m9)(m));return new Es(T,N=>Ni(E,N))})).apply(this,arguments)}function Rl(){return(Rl=(0,f.Z)(function*(_,h,m){const E=(0,O.m9)(_),T=yield Sr(E.auth,h,(0,O.m9)(m));return new Es(T,N=>js(E,N))})).apply(this,arguments)}function Sr(_,h,m){return pi.apply(this,arguments)}function pi(){return(pi=(0,f.Z)(function*(_,h,m){var E;const T=yield m.verify();try{let N;if(re("string"==typeof T,_,"argument-error"),re(m.type===Qs,_,"argument-error"),N="string"==typeof h?{phoneNumber:h}:h,"session"in N){const z=N.session;if("phoneNumber"in N)return re("enroll"===z.type,_,"internal-error"),(yield Vn(_,{idToken:z.credential,phoneEnrollmentInfo:{phoneNumber:N.phoneNumber,recaptchaToken:T}})).phoneSessionInfo.sessionInfo;{re("signin"===z.type,_,"internal-error");const se=(null===(E=N.multiFactorHint)||void 0===E?void 0:E.uid)||N.multiFactorUid;return re(se,_,"missing-multi-factor-info"),(yield Xo(_,{mfaPendingCredential:z.credential,mfaEnrollmentId:se,phoneSignInInfo:{recaptchaToken:T}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:z}=yield Kp(_,{phoneNumber:N.phoneNumber,recaptchaToken:T});return z}}finally{m._reset()}})).apply(this,arguments)}function ws(){return(ws=(0,f.Z)(function*(_,h){yield mn((0,O.m9)(_),h)})).apply(this,arguments)}let Vi=(()=>{class _{constructor(m){this.providerId=_.PROVIDER_ID,this.auth=Oe(m)}verifyPhoneNumber(m,E){return Sr(this.auth,m,(0,O.m9)(E))}static credential(m,E){return Go._fromVerification(m,E)}static credentialFromResult(m){return _.credentialFromTaggedObject(m)}static credentialFromError(m){return _.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m)return null;const{phoneNumber:E,temporaryProof:T}=m;return E&&T?Go._fromTokenResponse(E,T):null}}return _.PROVIDER_ID="phone",_.PHONE_SIGN_IN_METHOD="phone",_})();function Xi(_,h){return h?ne(h):(re(_._popupRedirectResolver,_,"argument-error"),_._popupRedirectResolver)}class Na extends un{constructor(h){super("custom","custom"),this.params=h}_getIdTokenResponse(h){return Ln(h,this._buildIdpRequest())}_linkToIdToken(h,m){return Ln(h,this._buildIdpRequest(m))}_getReauthenticationResolver(h){return Ln(h,this._buildIdpRequest())}_buildIdpRequest(h){const m={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return h&&(m.idToken=h),m}}function Ol(_){return mo(_.auth,new Na(_),_.bypassAuthState)}function kl(_){const{auth:h,user:m}=_;return re(m,h,"internal-error"),qc(m,new Na(_),_.bypassAuthState)}function Vt(_){return Pl.apply(this,arguments)}function Pl(){return(Pl=(0,f.Z)(function*(_){const{auth:h,user:m}=_;return re(m,h,"internal-error"),mn(m,new Na(_),_.bypassAuthState)})).apply(this,arguments)}class qn{constructor(h,m,E,T,N=!1){this.auth=h,this.resolver=E,this.user=T,this.bypassAuthState=N,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(m)?m:[m]}execute(){var h=this;return new Promise(function(){var m=(0,f.Z)(function*(E,T){h.pendingPromise={resolve:E,reject:T};try{h.eventManager=yield h.resolver._initialize(h.auth),yield h.onExecution(),h.eventManager.registerConsumer(h)}catch(N){h.reject(N)}});return function(E,T){return m.apply(this,arguments)}}())}onAuthEvent(h){var m=this;return(0,f.Z)(function*(){const{urlResponse:E,sessionId:T,postBody:N,tenantId:z,error:se,type:Ue}=h;if(se)return void m.reject(se);const rt={auth:m.auth,requestUri:E,sessionId:T,tenantId:z||void 0,postBody:N||void 0,user:m.user,bypassAuthState:m.bypassAuthState};try{m.resolve(yield m.getIdpTask(Ue)(rt))}catch(Et){m.reject(Et)}})()}onError(h){this.reject(h)}getIdpTask(h){switch(h){case"signInViaPopup":case"signInViaRedirect":return Ol;case"linkViaPopup":case"linkViaRedirect":return Vt;case"reauthViaPopup":case"reauthViaRedirect":return kl;default:Ie(this.auth,"internal-error")}}resolve(h){J(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(h),this.unregisterAndCleanUp()}reject(h){J(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(h),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const Fl=new Wt(2e3,1e4);function od(){return(od=(0,f.Z)(function*(_,h,m){const E=Oe(_);He(_,h,Vs);const T=Xi(E,m);return new ts(E,"signInViaPopup",h,T).executeNotNull()})).apply(this,arguments)}function Mu(){return(Mu=(0,f.Z)(function*(_,h,m){const E=(0,O.m9)(_);He(E.auth,h,Vs);const T=Xi(E.auth,m);return new ts(E.auth,"reauthViaPopup",h,T,E).executeNotNull()})).apply(this,arguments)}function xu(){return(xu=(0,f.Z)(function*(_,h,m){const E=(0,O.m9)(_);He(E.auth,h,Vs);const T=Xi(E.auth,m);return new ts(E.auth,"linkViaPopup",h,T,E).executeNotNull()})).apply(this,arguments)}let ts=(()=>{class _ extends qn{constructor(m,E,T,N,z){super(m,E,N,z),this.provider=T,this.authWindow=null,this.pollId=null,_.currentPopupAction&&_.currentPopupAction.cancel(),_.currentPopupAction=this}executeNotNull(){var m=this;return(0,f.Z)(function*(){const E=yield m.execute();return re(E,m.auth,"internal-error"),E})()}onExecution(){var m=this;return(0,f.Z)(function*(){J(1===m.filter.length,"Popup operations only handle one event");const E=Qo();m.authWindow=yield m.resolver._openPopup(m.auth,m.provider,m.filter[0],E),m.authWindow.associatedEvent=E,m.resolver._originValidation(m.auth).catch(T=>{m.reject(T)}),m.resolver._isIframeWebStorageSupported(m.auth,T=>{T||m.reject(ye(m.auth,"web-storage-unsupported"))}),m.pollUserCancellation()})()}get eventId(){var m;return(null===(m=this.authWindow)||void 0===m?void 0:m.associatedEvent)||null}cancel(){this.reject(ye(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,_.currentPopupAction=null}pollUserCancellation(){const m=()=>{var E,T;this.pollId=(null===(T=null===(E=this.authWindow)||void 0===E?void 0:E.window)||void 0===T?void 0:T.closed)?window.setTimeout(()=>{this.pollId=null,this.reject(ye(this.auth,"popup-closed-by-user"))},2e3):window.setTimeout(m,Fl.get())};m()}}return _.currentPopupAction=null,_})();const ns=new Map;class zn extends qn{constructor(h,m,E=!1){super(h,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],m,void 0,E),this.eventId=null}execute(){var h=()=>super.execute,m=this;return(0,f.Z)(function*(){let E=ns.get(m.auth._key());if(!E){try{const N=(yield function gi(_,h){return Ll.apply(this,arguments)}(m.resolver,m.auth))?yield h().call(m):null;E=()=>Promise.resolve(N)}catch(T){E=()=>Promise.reject(T)}ns.set(m.auth._key(),E)}return m.bypassAuthState||ns.set(m.auth._key(),()=>Promise.resolve(null)),E()})()}onAuthEvent(h){var m=()=>super.onAuthEvent,E=this;return(0,f.Z)(function*(){if("signInViaRedirect"===h.type)return m().call(E,h);if("unknown"!==h.type){if(h.eventId){const T=yield E.auth._redirectUserForId(h.eventId);if(T)return E.user=T,m().call(E,h);E.resolve(null)}}else E.resolve(null)})()}onExecution(){return(0,f.Z)(function*(){})()}cleanUp(){}}function Ll(){return(Ll=(0,f.Z)(function*(_,h){const m=I(h),E=C(_);if(!(yield E._isAvailable()))return!1;const T="true"===(yield E._get(m));return yield E._remove(m),T})).apply(this,arguments)}function Io(_,h){return ra.apply(this,arguments)}function ra(){return(ra=(0,f.Z)(function*(_,h){return C(_)._set(I(h),"true")})).apply(this,arguments)}function C(_){return ne(_._redirectPersistence)}function I(_){return ce("pendingRedirect",_.config.apiKey,_.name)}function W(){return(W=(0,f.Z)(function*(_,h,m){const E=Oe(_);He(_,h,Vs);const T=Xi(E,m);return yield Io(T,E),T._openRedirect(E,h,"signInViaRedirect")})).apply(this,arguments)}function xe(){return(xe=(0,f.Z)(function*(_,h,m){const E=(0,O.m9)(_);He(E.auth,h,Vs);const T=Xi(E.auth,m);yield Io(T,E.auth);const N=yield To(E);return T._openRedirect(E.auth,h,"reauthViaRedirect",N)})).apply(this,arguments)}function Pt(){return(Pt=(0,f.Z)(function*(_,h,m){const E=(0,O.m9)(_);He(E.auth,h,Vs);const T=Xi(E.auth,m);yield Us(!1,E,h.providerId),yield Io(T,E.auth);const N=yield To(E);return T._openRedirect(E.auth,h,"linkViaRedirect",N)})).apply(this,arguments)}function Un(){return(Un=(0,f.Z)(function*(_,h){return yield Oe(_)._initializationPromise,In(_,h,!1)})).apply(this,arguments)}function In(_,h){return ia.apply(this,arguments)}function ia(){return(ia=(0,f.Z)(function*(_,h,m=!1){const E=Oe(_),T=Xi(E,h),z=yield new zn(E,T,m).execute();return z&&!m&&(delete z.user._redirectEventId,yield E._persistUserIfCurrent(z.user),yield E._setRedirectUser(null,h)),z})).apply(this,arguments)}function To(_){return Vr.apply(this,arguments)}function Vr(){return(Vr=(0,f.Z)(function*(_){const h=Qo(`${_.uid}:::`);return _._redirectEventId=h,yield _.auth._setRedirectUser(_),yield _.auth._persistUserIfCurrent(_),h})).apply(this,arguments)}class Bi{constructor(h){this.auth=h,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(h){this.consumers.add(h),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,h)&&(this.sendToConsumer(this.queuedRedirectEvent,h),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(h){this.consumers.delete(h)}onEvent(h){if(this.hasEventBeenHandled(h))return!1;let m=!1;return this.consumers.forEach(E=>{this.isEventForConsumer(h,E)&&(m=!0,this.sendToConsumer(h,E),this.saveEventToCache(h))}),this.hasHandledPotentialRedirect||!function Vl(_){switch(_.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return ud(_);default:return!1}}(h)||(this.hasHandledPotentialRedirect=!0,m||(this.queuedRedirectEvent=h,m=!0)),m}sendToConsumer(h,m){var E;if(h.error&&!ud(h)){const T=(null===(E=h.error.code)||void 0===E?void 0:E.split("auth/")[1])||"internal-error";m.onError(ye(this.auth,T))}else m.onAuthEvent(h)}isEventForConsumer(h,m){const E=null===m.eventId||!!h.eventId&&h.eventId===m.eventId;return m.filter.includes(h.type)&&E}hasEventBeenHandled(h){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Ao(h))}saveEventToCache(h){this.cachedEventUids.add(Ao(h)),this.lastProcessedEventTime=Date.now()}}function Ao(_){return[_.type,_.eventId,_.sessionId,_.tenantId].filter(h=>h).join("-")}function ud({type:_,error:h}){return"unknown"===_&&"auth/no-auth-event"===(null==h?void 0:h.code)}function Bl(_){return Oa.apply(this,arguments)}function Oa(){return(Oa=(0,f.Z)(function*(_,h={}){return Kt(_,"GET","/v1/projects",h)})).apply(this,arguments)}const og=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,ky=/^https?/;function bs(){return(bs=(0,f.Z)(function*(_){if(_.config.emulator)return;const{authorizedDomains:h}=yield Bl(_);for(const m of h)try{if(Ul(m))return}catch(E){}Ie(_,"unauthorized-domain")})).apply(this,arguments)}function Ul(_){const h=Fe(),{protocol:m,hostname:E}=new URL(h);if(_.startsWith("chrome-extension://")){const z=new URL(_);return""===z.hostname&&""===E?"chrome-extension:"===m&&_.replace("chrome-extension://","")===h.replace("chrome-extension://",""):"chrome-extension:"===m&&z.hostname===E}if(!ky.test(m))return!1;if(og.test(_))return E===_;const T=_.replace(/\./g,"\\.");return new RegExp("^(.+\\."+T+"|"+T+")$","i").test(E)}const Fy=new Wt(3e4,6e4);function Ly(){const _=gn().___jsl;if(null==_?void 0:_.H)for(const h of Object.keys(_.H))if(_.H[h].r=_.H[h].r||[],_.H[h].L=_.H[h].L||[],_.H[h].r=[..._.H[h].L],_.CP)for(let m=0;m<_.CP.length;m++)_.CP[m]=null}let ld=null;function Vy(_){return ld=ld||function ag(_){return new Promise((h,m)=>{var E,T,N;function z(){Ly(),gapi.load("gapi.iframes",{callback:()=>{h(gapi.iframes.getContext())},ontimeout:()=>{Ly(),m(ye(_,"network-request-failed"))},timeout:Fy.get()})}if(null===(T=null===(E=gn().gapi)||void 0===E?void 0:E.iframes)||void 0===T?void 0:T.Iframe)h(gapi.iframes.getContext());else{if(!(null===(N=gn().gapi)||void 0===N?void 0:N.load)){const se=Do("iframefcb");return gn()[se]=()=>{gapi.load?z():m(ye(_,"network-request-failed"))},Nn(`https://apis.google.com/js/api.js?onload=${se}`).catch(Ue=>m(Ue))}z()}}).catch(h=>{throw ld=null,h})}(_),ld}const Hh=new Wt(5e3,15e3),Mo={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},cd=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function ka(_){const h=_.config;re(h.authDomain,_,"auth-domain-config-required");const m=h.emulator?Jn(h,"emulator/auth/iframe"):`https://${_.config.authDomain}/__/auth/iframe`,E={apiKey:h.apiKey,appName:_.name,v:ae.SDK_VERSION},T=cd.get(_.config.apiHost);T&&(E.eid=T);const N=_._getFrameworks();return N.length&&(E.fw=N.join(",")),`${m}?${(0,O.xO)(E).slice(1)}`}function sa(){return sa=(0,f.Z)(function*(_){const h=yield Vy(_),m=gn().gapi;return re(m,_,"internal-error"),h.open({where:document.body,url:ka(_),messageHandlersFilter:m.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Mo,dontclear:!0},E=>new Promise(function(){var T=(0,f.Z)(function*(N,z){yield E.restyle({setHideOnLeave:!1});const se=ye(_,"network-request-failed"),Ue=gn().setTimeout(()=>{z(se)},Hh.get());function rt(){gn().clearTimeout(Ue),N(E)}E.ping(rt).then(rt,()=>{z(se)})});return function(N,z){return T.apply(this,arguments)}}()))}),sa.apply(this,arguments)}const Uy={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class fd{constructor(h){this.window=h,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(h){}}}function Wh(_,h,m,E,T,N){re(_.config.authDomain,_,"auth-domain-config-required"),re(_.config.apiKey,_,"invalid-api-key");const z={apiKey:_.config.apiKey,appName:_.name,authType:m,redirectUrl:E,v:ae.SDK_VERSION,eventId:T};if(h instanceof Vs){h.setDefaultLanguage(_.languageCode),z.providerId=h.providerId||"",(0,O.xb)(h.getCustomParameters())||(z.customParameters=JSON.stringify(h.getCustomParameters()));for(const[Ue,rt]of Object.entries(N||{}))z[Ue]=rt}if(h instanceof qr){const Ue=h.getScopes().filter(rt=>""!==rt);Ue.length>0&&(z.scopes=Ue.join(","))}_.tenantId&&(z.tid=_.tenantId);const se=z;for(const Ue of Object.keys(se))void 0===se[Ue]&&delete se[Ue];return`${function $y({config:_}){return _.emulator?Jn(_,"emulator/auth/handler"):`https://${_.authDomain}/__/auth/handler`}(_)}?${(0,O.xO)(se).slice(1)}`}const eo="webStorageSupport";class Kh extends class ug{constructor(h){this.factorId=h}_process(h,m,E){switch(m.type){case"enroll":return this._finalizeEnroll(h,m.credential,E);case"signin":return this._finalizeSignIn(h,m.credential);default:return Ke("unexpected MultiFactorSessionType")}}}{constructor(h){super("phone"),this.credential=h}static _fromCredential(h){return new Kh(h)}_finalizeEnroll(h,m,E){return function Jc(_,h){return Kt(_,"POST","/v2/accounts/mfaEnrollment:finalize",Jt(_,h))}(h,{idToken:m,displayName:E,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(h,m){return function ea(_,h){return Kt(_,"POST","/v2/accounts/mfaSignIn:finalize",Jt(_,h))}(h,{mfaPendingCredential:m,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let Hy=(()=>{class _{constructor(){}static assertion(m){return Kh._fromCredential(m)}}return _.FACTOR_ID="phone",_})();var Gy="@firebase/auth",Zh="0.19.12";class lg{constructor(h){this.auth=h,this.internalListeners=new Map}getUid(){var h;return this.assertAuthConfigured(),(null===(h=this.auth.currentUser)||void 0===h?void 0:h.uid)||null}getToken(h){var m=this;return(0,f.Z)(function*(){return m.assertAuthConfigured(),yield m.auth._initializationPromise,m.auth.currentUser?{accessToken:yield m.auth.currentUser.getIdToken(h)}:null})()}addAuthTokenListener(h){if(this.assertAuthConfigured(),this.internalListeners.has(h))return;const m=this.auth.onIdTokenChanged(E=>{var T;h((null===(T=E)||void 0===T?void 0:T.stsTokenManager.accessToken)||null)});this.internalListeners.set(h,m),this.updateProactiveRefresh()}removeAuthTokenListener(h){this.assertAuthConfigured();const m=this.internalListeners.get(h);!m||(this.internalListeners.delete(h),m(),this.updateProactiveRefresh())}assertAuthConfigured(){re(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function to(){return window}function ku(){return(ku=(0,f.Z)(function*(_,h,m){var E;const{BuildInfo:T}=to();J(h.sessionId,"AuthEvent did not contain a session ID");const N=yield Pa(h.sessionId),z={};return tr()?z.ibi=T.packageName:Dn()?z.apn=T.packageName:Ie(_,"operation-not-supported-in-this-environment"),T.displayName&&(z.appDisplayName=T.displayName),z.sessionId=N,Wh(_,m,h.type,void 0,null!==(E=h.eventId)&&void 0!==E?E:void 0,z)})).apply(this,arguments)}function Ui(){return(Ui=(0,f.Z)(function*(_){const{BuildInfo:h}=to(),m={};tr()?m.iosBundleId=h.packageName:Dn()?m.androidPackageName=h.packageName:Ie(_,"operation-not-supported-in-this-environment"),yield Bl(_,m)})).apply(this,arguments)}function gd(){return(gd=(0,f.Z)(function*(_,h,m){const{cordova:E}=to();let T=()=>{};try{yield new Promise((N,z)=>{let se=null;function Ue(){var ct;N();const Tn=null===(ct=E.plugins.browsertab)||void 0===ct?void 0:ct.close;"function"==typeof Tn&&Tn(),"function"==typeof(null==m?void 0:m.close)&&m.close()}function rt(){se||(se=window.setTimeout(()=>{z(ye(_,"redirect-cancelled-by-user"))},2e3))}function Et(){"visible"===(null==document?void 0:document.visibilityState)&&rt()}h.addPassiveListener(Ue),document.addEventListener("resume",rt,!1),Dn()&&document.addEventListener("visibilitychange",Et,!1),T=()=>{h.removePassiveListener(Ue),document.removeEventListener("resume",rt,!1),document.removeEventListener("visibilitychange",Et,!1),se&&window.clearTimeout(se)}})}finally{T()}})).apply(this,arguments)}function Pa(_){return dg.apply(this,arguments)}function dg(){return(dg=(0,f.Z)(function*(_){const h=Pu(_),m=yield crypto.subtle.digest("SHA-256",h);return Array.from(new Uint8Array(m)).map(T=>T.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}function Pu(_){if(J(/[0-9a-zA-Z]+/.test(_),"Can only convert alpha-numeric strings"),"undefined"!=typeof TextEncoder)return(new TextEncoder).encode(_);const h=new ArrayBuffer(_.length),m=new Uint8Array(h);for(let E=0;E<_.length;E++)m[E]=_.charCodeAt(E);return m}!function zy(_){(0,ae._registerComponent)(new ie.wA("auth",(h,{options:m})=>{const E=h.getProvider("app").getImmediate(),T=h.getProvider("heartbeat"),{apiKey:N,authDomain:z}=E.options;return((se,Ue)=>{re(N&&!N.includes(":"),"invalid-api-key",{appName:se.name}),re(!(null==z?void 0:z.includes(":")),"argument-error",{appName:se.name});const rt={apiKey:N,authDomain:z,clientPlatform:_,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Ca(_)},Et=new oi(se,Ue,rt);return function ge(_,h){const m=(null==h?void 0:h.persistence)||[],E=(Array.isArray(m)?m:[m]).map(ne);(null==h?void 0:h.errorMap)&&_._updateErrorMap(h.errorMap),_._initializeWithPersistence(E,null==h?void 0:h.popupRedirectResolver)}(Et,m),Et})(E,T)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((h,m,E)=>{h.getProvider("auth-internal").initialize()})),(0,ae._registerComponent)(new ie.wA("auth-internal",h=>{const m=Oe(h.getProvider("auth").getImmediate());return new lg(m)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,ae.registerVersion)(Gy,Zh,function qy(_){switch(_){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(_)),(0,ae.registerVersion)(Gy,Zh,"esm2017")}("Browser");class Xh extends Bi{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(h=>{this.resolveInialized=h})}addPassiveListener(h){this.passiveListeners.add(h)}removePassiveListener(h){this.passiveListeners.delete(h)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(h){return this.resolveInialized(),this.passiveListeners.forEach(m=>m(h)),super.onEvent(h)}initialized(){var h=this;return(0,f.Z)(function*(){yield h.initPromise})()}}function Hl(_){return aa.apply(this,arguments)}function aa(){return(aa=(0,f.Z)(function*(_){const h=yield ql()._get(tf(_));return h&&(yield ql()._remove(tf(_))),h})).apply(this,arguments)}function Gl(){const _=[],h="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let m=0;m<20;m++){const E=Math.floor(Math.random()*h.length);_.push(h.charAt(E))}return _.join("")}function ql(){return ne(Rn)}function tf(_){return ce("authEvent",_.config.apiKey,_.name)}function yd(_){if(!(null==_?void 0:_.includes("?")))return{};const[h,...m]=_.split("?");return(0,O.zd)(m.join("?"))}function of(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:ye("no-auth-event")}}function _d(){var _;return(null===(_=null==self?void 0:self.location)||void 0===_?void 0:_.protocol)||null}function fg(_=(0,O.z$)()){return!("file:"!==_d()&&"ionic:"!==_d()||!_.toLowerCase().match(/iphone|ipad|ipod|android/))}function Mr(){try{const _=self.localStorage,h=Qo();if(_)return _.setItem(h,"1"),_.removeItem(h),!function ua(_=(0,O.z$)()){return function Qy(){return(0,O.w1)()&&11===(null==document?void 0:document.documentMode)}()||function Jy(_=(0,O.z$)()){return/Edge\/\d+/.test(_)}(_)}()||(0,O.hl)()}catch(_){return xo()&&(0,O.hl)()}return!1}function xo(){return"undefined"!=typeof global&&"WorkerGlobalScope"in global&&"importScripts"in global}function Kl(){return(function Yy(){return"http:"===_d()||"https:"===_d()}()||(0,O.ru)()||fg())&&!function vd(){return(0,O.b$)()||(0,O.UG)()}()&&Mr()&&!xo()}function af(){return fg()&&"undefined"!=typeof document}function Fa(){return(Fa=(0,f.Z)(function*(){return!!af()&&new Promise(_=>{const h=setTimeout(()=>{_(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(h),_(!0)})})})).apply(this,arguments)}const ji={LOCAL:"local",NONE:"none",SESSION:"session"},La=re,lf="persistence";function Va(_){return cf.apply(this,arguments)}function cf(){return(cf=(0,f.Z)(function*(_){yield _._initializationPromise;const h=Zl(),m=ce(lf,_.config.apiKey,_.name);h&&h.setItem(m,_._getPersistence())})).apply(this,arguments)}function Zl(){var _;try{return(null===(_=function uf(){return"undefined"!=typeof window?window:null}())||void 0===_?void 0:_.sessionStorage)||null}catch(h){return null}}const Xy=re;class yi{constructor(){this.browserResolver=ne(class oa{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=rr,this._completeRedirectFn=In}_openPopup(h,m,E,T){var N=this;return(0,f.Z)(function*(){var z;J(null===(z=N.eventManagers[h._key()])||void 0===z?void 0:z.manager,"_initialize() not called before _openPopup()");const se=Wh(h,m,E,Fe(),T);return function pd(_,h,m,E=500,T=600){const N=Math.max((window.screen.availHeight-T)/2,0).toString(),z=Math.max((window.screen.availWidth-E)/2,0).toString();let se="";const Ue=Object.assign(Object.assign({},Uy),{width:E.toString(),height:T.toString(),top:N,left:z}),rt=(0,O.z$)().toLowerCase();m&&(se=wr(rt)?"_blank":m),vt(rt)&&(h=h||"http://localhost",Ue.scrollbars="yes");const Et=Object.entries(Ue).reduce((Tn,[rs,Ql])=>`${Tn}${rs}=${Ql},`,"");if(function su(_=(0,O.z$)()){var h;return tr(_)&&!!(null===(h=window.navigator)||void 0===h?void 0:h.standalone)}(rt)&&"_self"!==se)return function zh(_,h){const m=document.createElement("a");m.href=_,m.target=h;const E=document.createEvent("MouseEvent");E.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),m.dispatchEvent(E)}(h||"",se),new fd(null);const ct=window.open(h||"",se,Et);re(ct,_,"popup-blocked");try{ct.focus()}catch(Tn){}return new fd(ct)}(h,se,Qo())})()}_openRedirect(h,m,E,T){var N=this;return(0,f.Z)(function*(){return yield N._originValidation(h),function $h(_){gn().location.href=_}(Wh(h,m,E,Fe(),T)),new Promise(()=>{})})()}_initialize(h){const m=h._key();if(this.eventManagers[m]){const{manager:T,promise:N}=this.eventManagers[m];return T?Promise.resolve(T):(J(N,"If manager is not set, promise should be"),N)}const E=this.initAndGetManager(h);return this.eventManagers[m]={promise:E},E.catch(()=>{delete this.eventManagers[m]}),E}initAndGetManager(h){var m=this;return(0,f.Z)(function*(){const E=yield function By(_){return sa.apply(this,arguments)}(h),T=new Bi(h);return E.register("authEvent",N=>(re(null==N?void 0:N.authEvent,h,"invalid-auth-event"),{status:T.onEvent(N.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),m.eventManagers[h._key()]={manager:T},m.iframes[h._key()]=E,T})()}_isIframeWebStorageSupported(h,m){this.iframes[h._key()].send(eo,{type:eo},T=>{var N;const z=null===(N=null==T?void 0:T[0])||void 0===N?void 0:N[eo];void 0!==z&&m(!!z),Ie(h,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(h){const m=h._key();return this.originValidationPromises[m]||(this.originValidationPromises[m]=function Py(_){return bs.apply(this,arguments)}(h)),this.originValidationPromises[m]}get _shouldInitProactively(){return cs()||Xt()||tr()}}),this.cordovaResolver=ne(class sf{constructor(){this._redirectPersistence=rr,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=In}_initialize(h){var m=this;return(0,f.Z)(function*(){const E=h._key();let T=m.eventManagers.get(E);return T||(T=new Xh(h),m.eventManagers.set(E,T),m.attachCallbackListeners(h,T)),T})()}_openPopup(h){Ie(h,"operation-not-supported-in-this-environment")}_openRedirect(h,m,E,T){var N=this;return(0,f.Z)(function*(){!function md(_){var h,m,E,T,N,z,se,Ue,rt,Et;const ct=to();re("function"==typeof(null===(h=null==ct?void 0:ct.universalLinks)||void 0===h?void 0:h.subscribe),_,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),re(void 0!==(null===(m=null==ct?void 0:ct.BuildInfo)||void 0===m?void 0:m.packageName),_,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),re("function"==typeof(null===(N=null===(T=null===(E=null==ct?void 0:ct.cordova)||void 0===E?void 0:E.plugins)||void 0===T?void 0:T.browsertab)||void 0===N?void 0:N.openUrl),_,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),re("function"==typeof(null===(Ue=null===(se=null===(z=null==ct?void 0:ct.cordova)||void 0===z?void 0:z.plugins)||void 0===se?void 0:se.browsertab)||void 0===Ue?void 0:Ue.isAvailable),_,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),re("function"==typeof(null===(Et=null===(rt=null==ct?void 0:ct.cordova)||void 0===rt?void 0:rt.InAppBrowser)||void 0===Et?void 0:Et.open),_,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(h);const z=yield N._initialize(h);yield z.initialized(),z.resetRedirect(),function Ru(){ns.clear()}(),yield N._originValidation(h);const se=function ef(_,h,m=null){return{type:h,eventId:m,urlResponse:null,sessionId:Gl(),postBody:null,tenantId:_.tenantId,error:ye(_,"no-auth-event")}}(h,E,T);yield function pE(_,h){return ql()._set(tf(_),h)}(h,se);const Ue=yield function Yh(_,h,m){return ku.apply(this,arguments)}(h,se,m),rt=yield function $l(_){const{cordova:h}=to();return new Promise(m=>{h.plugins.browsertab.isAvailable(E=>{let T=null;E?h.plugins.browsertab.openUrl(_):T=h.InAppBrowser.open(_,function ho(_=(0,O.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(_)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(_)}()?"_blank":"_system","location=yes"),m(T)})})}(Ue);return function cg(_,h,m){return gd.apply(this,arguments)}(h,z,rt)})()}_isIframeWebStorageSupported(h,m){throw new Error("Method not implemented.")}_originValidation(h){const m=h._key();return this.originValidationPromises[m]||(this.originValidationPromises[m]=function Qh(_){return Ui.apply(this,arguments)}(h)),this.originValidationPromises[m]}attachCallbackListeners(h,m){const{universalLinks:E,handleOpenURL:T,BuildInfo:N}=to(),z=setTimeout((0,f.Z)(function*(){yield Hl(h),m.onEvent(of())}),500),se=function(){var Et=(0,f.Z)(function*(ct){clearTimeout(z);const Tn=yield Hl(h);let rs=null;Tn&&(null==ct?void 0:ct.url)&&(rs=function Ky(_,h){var m,E;const T=function zl(_){const h=yd(_),m=h.link?decodeURIComponent(h.link):void 0,E=yd(m).link,T=h.deep_link_id?decodeURIComponent(h.deep_link_id):void 0;return yd(T).link||T||E||m||_}(h);if(T.includes("/__/auth/callback")){const N=yd(T),z=N.firebaseError?function nf(_){try{return JSON.parse(_)}catch(h){return null}}(decodeURIComponent(N.firebaseError)):null,se=null===(E=null===(m=null==z?void 0:z.code)||void 0===m?void 0:m.split("auth/"))||void 0===E?void 0:E[1],Ue=se?ye(se):null;return Ue?{type:_.type,eventId:_.eventId,tenantId:_.tenantId,error:Ue,urlResponse:null,sessionId:null,postBody:null}:{type:_.type,eventId:_.eventId,tenantId:_.tenantId,sessionId:_.sessionId,urlResponse:T,postBody:null}}return null}(Tn,ct.url)),m.onEvent(rs||of())});return function(Tn){return Et.apply(this,arguments)}}();void 0!==E&&"function"==typeof E.subscribe&&E.subscribe(null,se);const Ue=T,rt=`${N.packageName.toLowerCase()}://`;to().handleOpenURL=function(){var Et=(0,f.Z)(function*(ct){if(ct.toLowerCase().startsWith(rt)&&se({url:ct}),"function"==typeof Ue)try{Ue(ct)}catch(Tn){console.error(Tn)}});return function(ct){return Et.apply(this,arguments)}}()}}),this.underlyingResolver=null,this._redirectPersistence=rr,this._completeRedirectFn=In}_initialize(h){var m=this;return(0,f.Z)(function*(){return yield m.selectUnderlyingResolver(),m.assertedUnderlyingResolver._initialize(h)})()}_openPopup(h,m,E,T){var N=this;return(0,f.Z)(function*(){return yield N.selectUnderlyingResolver(),N.assertedUnderlyingResolver._openPopup(h,m,E,T)})()}_openRedirect(h,m,E,T){var N=this;return(0,f.Z)(function*(){return yield N.selectUnderlyingResolver(),N.assertedUnderlyingResolver._openRedirect(h,m,E,T)})()}_isIframeWebStorageSupported(h,m){this.assertedUnderlyingResolver._isIframeWebStorageSupported(h,m)}_originValidation(h){return this.assertedUnderlyingResolver._originValidation(h)}get _shouldInitProactively(){return af()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return Xy(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var h=this;return(0,f.Z)(function*(){if(h.underlyingResolver)return;const m=yield function Br(){return Fa.apply(this,arguments)}();h.underlyingResolver=m?h.cordovaResolver:h.browserResolver})()}}function mg(_){return _.unwrap()}function Ba(_){return yg(_)}function yg(_){const{_tokenResponse:h}=_ instanceof O.ZR?_.customData:_;if(!h)return null;if(!(_ instanceof O.ZR)&&"temporaryProof"in h&&"phoneNumber"in h)return Vi.credentialFromResult(_);const m=h.providerId;if(!m||"password"===m)return null;let E;switch(m){case"google.com":E=Ta;break;case"facebook.com":E=po;break;case"github.com":E=Hc;break;case"twitter.com":E=hu;break;default:const{oauthIdToken:T,oauthAccessToken:N,oauthTokenSecret:z,pendingToken:se,nonce:Ue}=h;return N||z||T||se?se?m.startsWith("saml.")?br._create(m,se):ps._fromParams({providerId:m,signInMethod:m,pendingToken:se,idToken:T,accessToken:N}):new qo(m).credential({idToken:T,accessToken:N,rawNonce:Ue}):null}return _ instanceof O.ZR?E.credentialFromError(_):E.credentialFromResult(_)}function xr(_,h){return h.catch(m=>{throw m instanceof O.ZR&&function t_(_,h){var m;const E=null===(m=h.customData)||void 0===m?void 0:m._tokenResponse;if("auth/multi-factor-auth-required"===h.code)h.resolver=new n_(_,function Tu(_,h){var m;const E=(0,O.m9)(_),T=h;return re(h.customData.operationType,E,"argument-error"),re(null===(m=T.customData._serverResponse)||void 0===m?void 0:m.mfaPendingCredential,E,"argument-error"),Ra._fromError(E,T)}(_,h));else if(E){const T=yg(h),N=h;T&&(N.credential=T,N.tenantId=E.tenantId||void 0,N.email=E.email||void 0,N.phoneNumber=E.phoneNumber||void 0)}}(_,m),m}).then(m=>{const T=m.user;return{operationType:m.operationType,credential:Ba(m),additionalUserInfo:Tr(m),user:Ro.getOrCreate(T)}})}function df(_,h){return hf.apply(this,arguments)}function hf(){return(hf=(0,f.Z)(function*(_,h){const m=yield h;return{verificationId:m.verificationId,confirm:E=>xr(_,m.confirm(E))}})).apply(this,arguments)}class n_{constructor(h,m){this.resolver=m,this.auth=function e_(_){return _.wrapped()}(h)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(h){return xr(mg(this.auth),this.resolver.resolveSignIn(h))}}class Ro{constructor(h){this._delegate=h,this.multiFactor=function Xc(_){const h=(0,O.m9)(_);return Yo.has(h)||Yo.set(h,_s._fromUser(h)),Yo.get(h)}(h)}static getOrCreate(h){return Ro.USER_MAP.has(h)||Ro.USER_MAP.set(h,new Ro(h)),Ro.USER_MAP.get(h)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(h){return this._delegate.getIdTokenResult(h)}getIdToken(h){return this._delegate.getIdToken(h)}linkAndRetrieveDataWithCredential(h){return this.linkWithCredential(h)}linkWithCredential(h){var m=this;return(0,f.Z)(function*(){return xr(m.auth,Ni(m._delegate,h))})()}linkWithPhoneNumber(h,m){var E=this;return(0,f.Z)(function*(){return df(E.auth,function xl(_,h,m){return na.apply(this,arguments)}(E._delegate,h,m))})()}linkWithPopup(h){var m=this;return(0,f.Z)(function*(){return xr(m.auth,function es(_,h,m){return xu.apply(this,arguments)}(m._delegate,h,yi))})()}linkWithRedirect(h){var m=this;return(0,f.Z)(function*(){return yield Va(Oe(m.auth)),function nt(_,h,m){return function It(_,h,m){return Pt.apply(this,arguments)}(_,h,m)}(m._delegate,h,yi)})()}reauthenticateAndRetrieveDataWithCredential(h){return this.reauthenticateWithCredential(h)}reauthenticateWithCredential(h){var m=this;return(0,f.Z)(function*(){return xr(m.auth,js(m._delegate,h))})()}reauthenticateWithPhoneNumber(h,m){return df(this.auth,function sg(_,h,m){return Rl.apply(this,arguments)}(this._delegate,h,m))}reauthenticateWithPopup(h){return xr(this.auth,function Co(_,h,m){return Mu.apply(this,arguments)}(this._delegate,h,yi))}reauthenticateWithRedirect(h){var m=this;return(0,f.Z)(function*(){return yield Va(Oe(m.auth)),function ee(_,h,m){return function Me(_,h,m){return xe.apply(this,arguments)}(_,h,m)}(m._delegate,h,yi)})()}sendEmailVerification(h){return function Oi(_,h){return yl.apply(this,arguments)}(this._delegate,h)}unlink(h){var m=this;return(0,f.Z)(function*(){return yield function Aa(_,h){return cl.apply(this,arguments)}(m._delegate,h),m})()}updateEmail(h){return function El(_,h){return wl((0,O.m9)(_),h,null)}(this._delegate,h)}updatePassword(h){return function Wc(_,h){return wl((0,O.m9)(_),null,h)}(this._delegate,h)}updatePhoneNumber(h){return function Nl(_,h){return ws.apply(this,arguments)}(this._delegate,h)}updateProfile(h){return function Zo(_,h){return vl.apply(this,arguments)}(this._delegate,h)}verifyBeforeUpdateEmail(h,m){return function Cu(_,h,m){return Iu.apply(this,arguments)}(this._delegate,h,m)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}Ro.USER_MAP=new WeakMap;const Yl=re;let ff=(()=>{class _{constructor(m,E){if(this.app=m,E.isInitialized())return this._delegate=E.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:T}=m.options;Yl(T,"invalid-api-key",{appName:m.name}),Yl(T,"invalid-api-key",{appName:m.name});const N="undefined"!=typeof window?yi:void 0;this._delegate=E.initialize({options:{persistence:r_(T,m.name),popupRedirectResolver:N}}),this._delegate._updateErrorMap(Ne),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?Ro.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(m){this._delegate.languageCode=m}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(m){this._delegate.tenantId=m}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(m,E){!function pn(_,h,m){const E=Oe(_);re(E._canInitEmulator,E,"emulator-config-failed"),re(/^https?:\/\//.test(h),E,"invalid-emulator-scheme");const T=!!(null==m?void 0:m.disableWarnings),N=dr(h),{host:z,port:se}=function Os(_){const h=dr(_),m=/(\/\/)?([^?#/]+)/.exec(_.substr(h.length));if(!m)return{host:"",port:null};const E=m[2].split("@").pop()||"",T=/^(\[[^\]]+\])(:|$)/.exec(E);if(T){const N=T[1];return{host:N,port:Fn(E.substr(N.length+1))}}{const[N,z]=E.split(":");return{host:N,port:Fn(z)}}}(h);E.config.emulator={url:`${N}//${z}${null===se?"":`:${se}`}/`},E.settings.appVerificationDisabledForTesting=!0,E.emulatorConfig=Object.freeze({host:z,port:se,protocol:N.replace(":",""),options:Object.freeze({disableWarnings:T})}),T||function Ki(){function _(){const h=document.createElement("p"),m=h.style;h.innerText="Running in emulator mode. Do not use with production credentials.",m.position="fixed",m.width="100%",m.backgroundColor="#ffffff",m.border=".1em solid #000000",m.color="#b50000",m.bottom="0px",m.left="0px",m.margin="0px",m.zIndex="10000",m.textAlign="center",h.classList.add("firebase-emulator-warning"),document.body.appendChild(h)}"undefined"!=typeof console&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),"undefined"!=typeof window&&"undefined"!=typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",_):_())}()}(this._delegate,m,E)}applyActionCode(m){return function hl(_,h){return De.apply(this,arguments)}(this._delegate,m)}checkActionCode(m){return Ut(this._delegate,m)}confirmPasswordReset(m,E){return function wu(_,h,m){return dl.apply(this,arguments)}(this._delegate,m,E)}createUserWithEmailAndPassword(m,E){var T=this;return(0,f.Z)(function*(){return xr(T._delegate,function Ko(_,h,m){return Wr.apply(this,arguments)}(T._delegate,m,E))})()}fetchProvidersForEmail(m){return this.fetchSignInMethodsForEmail(m)}fetchSignInMethodsForEmail(m){return function Du(_,h){return qs.apply(this,arguments)}(this._delegate,m)}isSignInWithEmailLink(m){return function ml(_,h){const m=fo.parseLink(h);return"EMAIL_SIGNIN"===(null==m?void 0:m.operation)}(0,m)}getRedirectResult(){var m=this;return(0,f.Z)(function*(){Yl(Kl(),m._delegate,"operation-not-supported-in-this-environment");const E=yield function Mt(_,h){return Un.apply(this,arguments)}(m._delegate,yi);return E?xr(m._delegate,Promise.resolve(E)):{credential:null,user:null}})()}addFrameworkForLogging(m){!function hg(_,h){Oe(_)._logFramework(h)}(this._delegate,m)}onAuthStateChanged(m,E,T){const{next:N,error:z,complete:se}=pf(m,E,T);return this._delegate.onAuthStateChanged(N,z,se)}onIdTokenChanged(m,E,T){const{next:N,error:z,complete:se}=pf(m,E,T);return this._delegate.onIdTokenChanged(N,z,se)}sendSignInLinkToEmail(m,E){return function gl(_,h,m){return zc.apply(this,arguments)}(this._delegate,m,E)}sendPasswordResetEmail(m,E){return function vu(_,h,m){return Eu.apply(this,arguments)}(this._delegate,m,E||void 0)}setPersistence(m){var E=this;return(0,f.Z)(function*(){let T;switch(function pg(_,h){La(Object.values(ji).includes(h),_,"invalid-persistence-type"),(0,O.b$)()?La(h!==ji.SESSION,_,"unsupported-persistence-type"):(0,O.UG)()?La(h===ji.NONE,_,"unsupported-persistence-type"):xo()?La(h===ji.NONE||h===ji.LOCAL&&(0,O.hl)(),_,"unsupported-persistence-type"):La(h===ji.NONE||Mr(),_,"unsupported-persistence-type")}(E._delegate,m),m){case ji.SESSION:T=rr;break;case ji.LOCAL:T=(yield ne(Pi)._isAvailable())?Pi:Rn;break;case ji.NONE:T=q;break;default:return Ie("argument-error",{appName:E._delegate.name})}return E._delegate.setPersistence(T)})()}signInAndRetrieveDataWithCredential(m){return this.signInWithCredential(m)}signInAnonymously(){return xr(this._delegate,function pu(_){return Gc.apply(this,arguments)}(this._delegate))}signInWithCredential(m){return xr(this._delegate,Mn(this._delegate,m))}signInWithCustomToken(m){return xr(this._delegate,function $s(_,h){return Hs.apply(this,arguments)}(this._delegate,m))}signInWithEmailAndPassword(m,E){return xr(this._delegate,function pl(_,h,m){return Mn((0,O.m9)(_),ll.credential(h,m))}(this._delegate,m,E))}signInWithEmailLink(m,E){return xr(this._delegate,function bu(_,h,m){return Gs.apply(this,arguments)}(this._delegate,m,E))}signInWithPhoneNumber(m,E){return df(this._delegate,function Su(_,h,m){return wn.apply(this,arguments)}(this._delegate,m,E))}signInWithPopup(m){var E=this;return(0,f.Z)(function*(){return Yl(Kl(),E._delegate,"operation-not-supported-in-this-environment"),xr(E._delegate,function Xs(_,h,m){return od.apply(this,arguments)}(E._delegate,m,yi))})()}signInWithRedirect(m){var E=this;return(0,f.Z)(function*(){return Yl(Kl(),E._delegate,"operation-not-supported-in-this-environment"),yield Va(E._delegate),function R(_,h,m){return function L(_,h,m){return W.apply(this,arguments)}(_,h,m)}(E._delegate,m,yi)})()}updateCurrentUser(m){return this._delegate.updateCurrentUser(m)}verifyPasswordResetCode(m){return function _n(_,h){return Wo.apply(this,arguments)}(this._delegate,m)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return _.Persistence=ji,_})();function pf(_,h,m){let E=_;"function"!=typeof _&&({next:E,error:h,complete:m}=_);const T=E;return{next:z=>T(z&&Ro.getOrCreate(z)),error:h,complete:m}}function r_(_,h){const m=function gg(_,h){const m=Zl();if(!m)return[];const E=ce(lf,_,h);switch(m.getItem(E)){case ji.NONE:return[q];case ji.LOCAL:return[Pi,rr];case ji.SESSION:return[rr];default:return[]}}(_,h);if("undefined"!=typeof self&&!m.includes(Pi)&&m.push(Pi),"undefined"!=typeof window)for(const E of[Rn,rr])m.includes(E)||m.push(E);return m.includes(q)||m.push(q),m}class gf{constructor(){this.providerId="phone",this._delegate=new Vi(mg(Z.Z.auth()))}static credential(h,m){return Vi.credential(h,m)}verifyPhoneNumber(h,m){return this._delegate.verifyPhoneNumber(h,m)}unwrap(){return this._delegate}}gf.PHONE_SIGN_IN_METHOD=Vi.PHONE_SIGN_IN_METHOD,gf.PROVIDER_ID=Vi.PROVIDER_ID;const i_=re;class s_{constructor(h,m,E=Z.Z.app()){var T;i_(null===(T=E.options)||void 0===T?void 0:T.apiKey,"invalid-api-key",{appName:E.name}),this._delegate=new ig(h,m,E.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function vg(_){_.INTERNAL.registerComponent(new ie.wA("auth-compat",h=>{const m=h.getProvider("app-compat").getImmediate(),E=h.getProvider("auth");return new ff(m,E)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"}},EmailAuthProvider:ll,FacebookAuthProvider:po,GithubAuthProvider:Hc,GoogleAuthProvider:Ta,OAuthProvider:qo,SAMLAuthProvider:li,PhoneAuthProvider:gf,PhoneMultiFactorGenerator:Hy,RecaptchaVerifier:s_,TwitterAuthProvider:hu,Auth:ff,AuthCredential:un,Error:O.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),_.registerVersion("@firebase/auth-compat","0.2.12")}(Z.Z)},8306:(dt,Ae,k)=>{k.d(Ae,{y:()=>$});var f=k(2961),Z=k(727),O=k(8822),ae=k(4671);var ie=k(2416),de=k(576),le=k(2806);let $=(()=>{class Se{constructor(Le){Le&&(this._subscribe=Le)}lift(Le){const he=new Se;return he.source=this,he.operator=Le,he}subscribe(Le,he,we){const it=function We(Se){return Se&&Se instanceof f.Lv||function Q(Se){return Se&&(0,de.m)(Se.next)&&(0,de.m)(Se.error)&&(0,de.m)(Se.complete)}(Se)&&(0,Z.Nn)(Se)}(Le)?Le:new f.Hp(Le,he,we);return(0,le.x)(()=>{const{operator:Qe,source:Ie}=this;it.add(Qe?Qe.call(it,Ie):Ie?this._subscribe(it):this._trySubscribe(it))}),it}_trySubscribe(Le){try{return this._subscribe(Le)}catch(he){Le.error(he)}}forEach(Le,he){return new(he=H(he))((we,it)=>{const Qe=new f.Hp({next:Ie=>{try{Le(Ie)}catch(ye){it(ye),Qe.unsubscribe()}},error:it,complete:we});this.subscribe(Qe)})}_subscribe(Le){var he;return null===(he=this.source)||void 0===he?void 0:he.subscribe(Le)}[O.L](){return this}pipe(...Le){return function pe(Se){return 0===Se.length?ae.y:1===Se.length?Se[0]:function(Le){return Se.reduce((he,we)=>we(he),Le)}}(Le)(this)}toPromise(Le){return new(Le=H(Le))((he,we)=>{let it;this.subscribe(Qe=>it=Qe,Qe=>we(Qe),()=>he(it))})}}return Se.create=Ne=>new Se(Ne),Se})();function H(Se){var Ne;return null!==(Ne=null!=Se?Se:ie.v.Promise)&&void 0!==Ne?Ne:Promise}},7579:(dt,Ae,k)=>{k.d(Ae,{x:()=>ie});var f=k(8306),Z=k(727);const ae=(0,k(3888).d)(le=>function(){le(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var X=k(8737),pe=k(2806);let ie=(()=>{class le extends f.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(H){const Q=new de(this,this);return Q.operator=H,Q}_throwIfClosed(){if(this.closed)throw new ae}next(H){(0,pe.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const Q of this.currentObservers)Q.next(H)}})}error(H){(0,pe.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=H;const{observers:Q}=this;for(;Q.length;)Q.shift().error(H)}})}complete(){(0,pe.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:H}=this;for(;H.length;)H.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var H;return(null===(H=this.observers)||void 0===H?void 0:H.length)>0}_trySubscribe(H){return this._throwIfClosed(),super._trySubscribe(H)}_subscribe(H){return this._throwIfClosed(),this._checkFinalizedStatuses(H),this._innerSubscribe(H)}_innerSubscribe(H){const{hasError:Q,isStopped:We,observers:Se}=this;return Q||We?Z.Lc:(this.currentObservers=null,Se.push(H),new Z.w0(()=>{this.currentObservers=null,(0,X.P)(Se,H)}))}_checkFinalizedStatuses(H){const{hasError:Q,thrownError:We,isStopped:Se}=this;Q?H.error(We):Se&&H.complete()}asObservable(){const H=new f.y;return H.source=this,H}}return le.create=($,H)=>new de($,H),le})();class de extends ie{constructor($,H){super(),this.destination=$,this.source=H}next($){var H,Q;null===(Q=null===(H=this.destination)||void 0===H?void 0:H.next)||void 0===Q||Q.call(H,$)}error($){var H,Q;null===(Q=null===(H=this.destination)||void 0===H?void 0:H.error)||void 0===Q||Q.call(H,$)}complete(){var $,H;null===(H=null===($=this.destination)||void 0===$?void 0:$.complete)||void 0===H||H.call($)}_subscribe($){var H,Q;return null!==(Q=null===(H=this.source)||void 0===H?void 0:H.subscribe($))&&void 0!==Q?Q:Z.Lc}}},2961:(dt,Ae,k)=>{k.d(Ae,{Hp:()=>Le,Lv:()=>Q});var f=k(576),Z=k(727),O=k(2416),ae=k(7849);function X(){}const pe=le("C",void 0,void 0);function le(Ie,ye,ve){return{kind:Ie,value:ye,error:ve}}var $=k(3410),H=k(2806);class Q extends Z.w0{constructor(ye){super(),this.isStopped=!1,ye?(this.destination=ye,(0,Z.Nn)(ye)&&ye.add(this)):this.destination=Qe}static create(ye,ve,He){return new Le(ye,ve,He)}next(ye){this.isStopped?it(function de(Ie){return le("N",Ie,void 0)}(ye),this):this._next(ye)}error(ye){this.isStopped?it(function ie(Ie){return le("E",void 0,Ie)}(ye),this):(this.isStopped=!0,this._error(ye))}complete(){this.isStopped?it(pe,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(ye){this.destination.next(ye)}_error(ye){try{this.destination.error(ye)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const We=Function.prototype.bind;function Se(Ie,ye){return We.call(Ie,ye)}class Ne{constructor(ye){this.partialObserver=ye}next(ye){const{partialObserver:ve}=this;if(ve.next)try{ve.next(ye)}catch(He){he(He)}}error(ye){const{partialObserver:ve}=this;if(ve.error)try{ve.error(ye)}catch(He){he(He)}else he(ye)}complete(){const{partialObserver:ye}=this;if(ye.complete)try{ye.complete()}catch(ve){he(ve)}}}class Le extends Q{constructor(ye,ve,He){let $e;if(super(),(0,f.m)(ye)||!ye)$e={next:null!=ye?ye:void 0,error:null!=ve?ve:void 0,complete:null!=He?He:void 0};else{let re;this&&O.v.useDeprecatedNextContext?(re=Object.create(ye),re.unsubscribe=()=>this.unsubscribe(),$e={next:ye.next&&Se(ye.next,re),error:ye.error&&Se(ye.error,re),complete:ye.complete&&Se(ye.complete,re)}):$e=ye}this.destination=new Ne($e)}}function he(Ie){O.v.useDeprecatedSynchronousErrorHandling?(0,H.O)(Ie):(0,ae.h)(Ie)}function it(Ie,ye){const{onStoppedNotification:ve}=O.v;ve&&$.z.setTimeout(()=>ve(Ie,ye))}const Qe={closed:!0,next:X,error:function we(Ie){throw Ie},complete:X}},727:(dt,Ae,k)=>{k.d(Ae,{Lc:()=>pe,w0:()=>X,Nn:()=>ie});var f=k(576);const O=(0,k(3888).d)(le=>function(H){le(this),this.message=H?`${H.length} errors occurred during unsubscription:\n${H.map((Q,We)=>`${We+1}) ${Q.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=H});var ae=k(8737);class X{constructor($){this.initialTeardown=$,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let $;if(!this.closed){this.closed=!0;const{_parentage:H}=this;if(H)if(this._parentage=null,Array.isArray(H))for(const Se of H)Se.remove(this);else H.remove(this);const{initialTeardown:Q}=this;if((0,f.m)(Q))try{Q()}catch(Se){$=Se instanceof O?Se.errors:[Se]}const{_finalizers:We}=this;if(We){this._finalizers=null;for(const Se of We)try{de(Se)}catch(Ne){$=null!=$?$:[],Ne instanceof O?$=[...$,...Ne.errors]:$.push(Ne)}}if($)throw new O($)}}add($){var H;if($&&$!==this)if(this.closed)de($);else{if($ instanceof X){if($.closed||$._hasParent(this))return;$._addParent(this)}(this._finalizers=null!==(H=this._finalizers)&&void 0!==H?H:[]).push($)}}_hasParent($){const{_parentage:H}=this;return H===$||Array.isArray(H)&&H.includes($)}_addParent($){const{_parentage:H}=this;this._parentage=Array.isArray(H)?(H.push($),H):H?[H,$]:$}_removeParent($){const{_parentage:H}=this;H===$?this._parentage=null:Array.isArray(H)&&(0,ae.P)(H,$)}remove($){const{_finalizers:H}=this;H&&(0,ae.P)(H,$),$ instanceof X&&$._removeParent(this)}}X.EMPTY=(()=>{const le=new X;return le.closed=!0,le})();const pe=X.EMPTY;function ie(le){return le instanceof X||le&&"closed"in le&&(0,f.m)(le.remove)&&(0,f.m)(le.add)&&(0,f.m)(le.unsubscribe)}function de(le){(0,f.m)(le)?le():le.unsubscribe()}},2416:(dt,Ae,k)=>{k.d(Ae,{v:()=>f});const f={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},515:(dt,Ae,k)=>{k.d(Ae,{E:()=>Z});const Z=new(k(8306).y)(X=>X.complete())},8996:(dt,Ae,k)=>{k.d(Ae,{D:()=>ye});var f=k(8421),Z=k(5363),O=k(9468),pe=k(8306),de=k(2202),le=k(576),$=k(9672);function Q(ve,He){if(!ve)throw new Error("Iterable cannot be null");return new pe.y($e=>{(0,$.f)($e,He,()=>{const re=ve[Symbol.asyncIterator]();(0,$.f)($e,He,()=>{re.next().then(Ke=>{Ke.done?$e.complete():$e.next(Ke.value)})},0,!0)})})}var We=k(3670),Se=k(8239),Ne=k(1144),Le=k(6495),he=k(2206),we=k(4532),it=k(3260);function ye(ve,He){return He?function Ie(ve,He){if(null!=ve){if((0,We.c)(ve))return function ae(ve,He){return(0,f.Xf)(ve).pipe((0,O.R)(He),(0,Z.Q)(He))}(ve,He);if((0,Ne.z)(ve))return function ie(ve,He){return new pe.y($e=>{let re=0;return He.schedule(function(){re===ve.length?$e.complete():($e.next(ve[re++]),$e.closed||this.schedule())})})}(ve,He);if((0,Se.t)(ve))return function X(ve,He){return(0,f.Xf)(ve).pipe((0,O.R)(He),(0,Z.Q)(He))}(ve,He);if((0,he.D)(ve))return Q(ve,He);if((0,Le.T)(ve))return function H(ve,He){return new pe.y($e=>{let re;return(0,$.f)($e,He,()=>{re=ve[de.h](),(0,$.f)($e,He,()=>{let Ke,J;try{({value:Ke,done:J}=re.next())}catch(oe){return void $e.error(oe)}J?$e.complete():$e.next(Ke)},0,!0)}),()=>(0,le.m)(null==re?void 0:re.return)&&re.return()})}(ve,He);if((0,it.L)(ve))return function Qe(ve,He){return Q((0,it.Q)(ve),He)}(ve,He)}throw(0,we.z)(ve)}(ve,He):(0,f.Xf)(ve)}},8421:(dt,Ae,k)=>{k.d(Ae,{Xf:()=>We});var f=k(655),Z=k(1144),O=k(8239),ae=k(8306),X=k(3670),pe=k(2206),ie=k(4532),de=k(6495),le=k(3260),$=k(576),H=k(7849),Q=k(8822);function We(Ie){if(Ie instanceof ae.y)return Ie;if(null!=Ie){if((0,X.c)(Ie))return function Se(Ie){return new ae.y(ye=>{const ve=Ie[Q.L]();if((0,$.m)(ve.subscribe))return ve.subscribe(ye);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(Ie);if((0,Z.z)(Ie))return function Ne(Ie){return new ae.y(ye=>{for(let ve=0;ve<Ie.length&&!ye.closed;ve++)ye.next(Ie[ve]);ye.complete()})}(Ie);if((0,O.t)(Ie))return function Le(Ie){return new ae.y(ye=>{Ie.then(ve=>{ye.closed||(ye.next(ve),ye.complete())},ve=>ye.error(ve)).then(null,H.h)})}(Ie);if((0,pe.D)(Ie))return we(Ie);if((0,de.T)(Ie))return function he(Ie){return new ae.y(ye=>{for(const ve of Ie)if(ye.next(ve),ye.closed)return;ye.complete()})}(Ie);if((0,le.L)(Ie))return function it(Ie){return we((0,le.Q)(Ie))}(Ie)}throw(0,ie.z)(Ie)}function we(Ie){return new ae.y(ye=>{(function Qe(Ie,ye){var ve,He,$e,re;return(0,f.mG)(this,void 0,void 0,function*(){try{for(ve=(0,f.KL)(Ie);!(He=yield ve.next()).done;)if(ye.next(He.value),ye.closed)return}catch(Ke){$e={error:Ke}}finally{try{He&&!He.done&&(re=ve.return)&&(yield re.call(ve))}finally{if($e)throw $e.error}}ye.complete()})})(Ie,ye).catch(ve=>ye.error(ve))})}},6451:(dt,Ae,k)=>{k.d(Ae,{T:()=>pe});var f=k(8189),Z=k(8421),O=k(515),ae=k(7669),X=k(8996);function pe(...ie){const de=(0,ae.yG)(ie),le=(0,ae._6)(ie,1/0),$=ie;return $.length?1===$.length?(0,Z.Xf)($[0]):(0,f.J)(le)((0,X.D)($,de)):O.E}},5403:(dt,Ae,k)=>{k.d(Ae,{x:()=>Z});var f=k(2961);function Z(ae,X,pe,ie,de){return new O(ae,X,pe,ie,de)}class O extends f.Lv{constructor(X,pe,ie,de,le,$){super(X),this.onFinalize=le,this.shouldUnsubscribe=$,this._next=pe?function(H){try{pe(H)}catch(Q){X.error(Q)}}:super._next,this._error=de?function(H){try{de(H)}catch(Q){X.error(Q)}finally{this.unsubscribe()}}:super._error,this._complete=ie?function(){try{ie()}catch(H){X.error(H)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var X;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:pe}=this;super.unsubscribe(),!pe&&(null===(X=this.onFinalize)||void 0===X||X.call(this))}}}},4004:(dt,Ae,k)=>{k.d(Ae,{U:()=>O});var f=k(4482),Z=k(5403);function O(ae,X){return(0,f.e)((pe,ie)=>{let de=0;pe.subscribe((0,Z.x)(ie,le=>{ie.next(ae.call(X,le,de++))}))})}},8189:(dt,Ae,k)=>{k.d(Ae,{J:()=>O});var f=k(5577),Z=k(4671);function O(ae=1/0){return(0,f.z)(Z.y,ae)}},5577:(dt,Ae,k)=>{k.d(Ae,{z:()=>de});var f=k(4004),Z=k(8421),O=k(4482),ae=k(9672),X=k(5403),ie=k(576);function de(le,$,H=1/0){return(0,ie.m)($)?de((Q,We)=>(0,f.U)((Se,Ne)=>$(Q,Se,We,Ne))((0,Z.Xf)(le(Q,We))),H):("number"==typeof $&&(H=$),(0,O.e)((Q,We)=>function pe(le,$,H,Q,We,Se,Ne,Le){const he=[];let we=0,it=0,Qe=!1;const Ie=()=>{Qe&&!he.length&&!we&&$.complete()},ye=He=>we<Q?ve(He):he.push(He),ve=He=>{Se&&$.next(He),we++;let $e=!1;(0,Z.Xf)(H(He,it++)).subscribe((0,X.x)($,re=>{null==We||We(re),Se?ye(re):$.next(re)},()=>{$e=!0},void 0,()=>{if($e)try{for(we--;he.length&&we<Q;){const re=he.shift();Ne?(0,ae.f)($,Ne,()=>ve(re)):ve(re)}Ie()}catch(re){$.error(re)}}))};return le.subscribe((0,X.x)($,ye,()=>{Qe=!0,Ie()})),()=>{null==Le||Le()}}(Q,We,le,H)))}},5363:(dt,Ae,k)=>{k.d(Ae,{Q:()=>ae});var f=k(9672),Z=k(4482),O=k(5403);function ae(X,pe=0){return(0,Z.e)((ie,de)=>{ie.subscribe((0,O.x)(de,le=>(0,f.f)(de,X,()=>de.next(le),pe),()=>(0,f.f)(de,X,()=>de.complete(),pe),le=>(0,f.f)(de,X,()=>de.error(le),pe)))})}},3099:(dt,Ae,k)=>{k.d(Ae,{B:()=>pe});var f=k(8996),Z=k(5698),O=k(7579),ae=k(2961),X=k(4482);function pe(de={}){const{connector:le=(()=>new O.x),resetOnError:$=!0,resetOnComplete:H=!0,resetOnRefCountZero:Q=!0}=de;return We=>{let Se=null,Ne=null,Le=null,he=0,we=!1,it=!1;const Qe=()=>{null==Ne||Ne.unsubscribe(),Ne=null},Ie=()=>{Qe(),Se=Le=null,we=it=!1},ye=()=>{const ve=Se;Ie(),null==ve||ve.unsubscribe()};return(0,X.e)((ve,He)=>{he++,!it&&!we&&Qe();const $e=Le=null!=Le?Le:le();He.add(()=>{he--,0===he&&!it&&!we&&(Ne=ie(ye,Q))}),$e.subscribe(He),Se||(Se=new ae.Hp({next:re=>$e.next(re),error:re=>{it=!0,Qe(),Ne=ie(Ie,$,re),$e.error(re)},complete:()=>{we=!0,Qe(),Ne=ie(Ie,H),$e.complete()}}),(0,f.D)(ve).subscribe(Se))})(We)}}function ie(de,le,...$){return!0===le?(de(),null):!1===le?null:le(...$).pipe((0,Z.q)(1)).subscribe(()=>de())}},9468:(dt,Ae,k)=>{k.d(Ae,{R:()=>Z});var f=k(4482);function Z(O,ae=0){return(0,f.e)((X,pe)=>{pe.add(O.schedule(()=>X.subscribe(pe),ae))})}},5698:(dt,Ae,k)=>{k.d(Ae,{q:()=>ae});var f=k(515),Z=k(4482),O=k(5403);function ae(X){return X<=0?()=>f.E:(0,Z.e)((pe,ie)=>{let de=0;pe.subscribe((0,O.x)(ie,le=>{++de<=X&&(ie.next(le),X<=de&&ie.complete())}))})}},8505:(dt,Ae,k)=>{k.d(Ae,{b:()=>X});var f=k(576),Z=k(4482),O=k(5403),ae=k(4671);function X(pe,ie,de){const le=(0,f.m)(pe)||ie||de?{next:pe,error:ie,complete:de}:pe;return le?(0,Z.e)(($,H)=>{var Q;null===(Q=le.subscribe)||void 0===Q||Q.call(le);let We=!0;$.subscribe((0,O.x)(H,Se=>{var Ne;null===(Ne=le.next)||void 0===Ne||Ne.call(le,Se),H.next(Se)},()=>{var Se;We=!1,null===(Se=le.complete)||void 0===Se||Se.call(le),H.complete()},Se=>{var Ne;We=!1,null===(Ne=le.error)||void 0===Ne||Ne.call(le,Se),H.error(Se)},()=>{var Se,Ne;We&&(null===(Se=le.unsubscribe)||void 0===Se||Se.call(le)),null===(Ne=le.finalize)||void 0===Ne||Ne.call(le)}))}):ae.y}},4408:(dt,Ae,k)=>{k.d(Ae,{o:()=>X});var f=k(727);class Z extends f.w0{constructor(ie,de){super()}schedule(ie,de=0){return this}}const O={setInterval(pe,ie,...de){const{delegate:le}=O;return(null==le?void 0:le.setInterval)?le.setInterval(pe,ie,...de):setInterval(pe,ie,...de)},clearInterval(pe){const{delegate:ie}=O;return((null==ie?void 0:ie.clearInterval)||clearInterval)(pe)},delegate:void 0};var ae=k(8737);class X extends Z{constructor(ie,de){super(ie,de),this.scheduler=ie,this.work=de,this.pending=!1}schedule(ie,de=0){if(this.closed)return this;this.state=ie;const le=this.id,$=this.scheduler;return null!=le&&(this.id=this.recycleAsyncId($,le,de)),this.pending=!0,this.delay=de,this.id=this.id||this.requestAsyncId($,this.id,de),this}requestAsyncId(ie,de,le=0){return O.setInterval(ie.flush.bind(ie,this),le)}recycleAsyncId(ie,de,le=0){if(null!=le&&this.delay===le&&!1===this.pending)return de;O.clearInterval(de)}execute(ie,de){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const le=this._execute(ie,de);if(le)return le;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(ie,de){let $,le=!1;try{this.work(ie)}catch(H){le=!0,$=H||new Error("Scheduled action threw falsy error")}if(le)return this.unsubscribe(),$}unsubscribe(){if(!this.closed){const{id:ie,scheduler:de}=this,{actions:le}=de;this.work=this.state=this.scheduler=null,this.pending=!1,(0,ae.P)(le,this),null!=ie&&(this.id=this.recycleAsyncId(de,ie,null)),this.delay=null,super.unsubscribe()}}}},7565:(dt,Ae,k)=>{k.d(Ae,{v:()=>O});var f=k(6063);class Z{constructor(X,pe=Z.now){this.schedulerActionCtor=X,this.now=pe}schedule(X,pe=0,ie){return new this.schedulerActionCtor(this,X).schedule(ie,pe)}}Z.now=f.l.now;class O extends Z{constructor(X,pe=Z.now){super(X,pe),this.actions=[],this._active=!1,this._scheduled=void 0}flush(X){const{actions:pe}=this;if(this._active)return void pe.push(X);let ie;this._active=!0;do{if(ie=X.execute(X.state,X.delay))break}while(X=pe.shift());if(this._active=!1,ie){for(;X=pe.shift();)X.unsubscribe();throw ie}}}},4986:(dt,Ae,k)=>{k.d(Ae,{z:()=>O});var f=k(4408);const O=new(k(7565).v)(f.o)},6063:(dt,Ae,k)=>{k.d(Ae,{l:()=>f});const f={now:()=>(f.delegate||Date).now(),delegate:void 0}},3410:(dt,Ae,k)=>{k.d(Ae,{z:()=>f});const f={setTimeout(Z,O,...ae){const{delegate:X}=f;return(null==X?void 0:X.setTimeout)?X.setTimeout(Z,O,...ae):setTimeout(Z,O,...ae)},clearTimeout(Z){const{delegate:O}=f;return((null==O?void 0:O.clearTimeout)||clearTimeout)(Z)},delegate:void 0}},2202:(dt,Ae,k)=>{k.d(Ae,{h:()=>Z});const Z=function f(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},8822:(dt,Ae,k)=>{k.d(Ae,{L:()=>f});const f="function"==typeof Symbol&&Symbol.observable||"@@observable"},7669:(dt,Ae,k)=>{k.d(Ae,{_6:()=>pe,jO:()=>ae,yG:()=>X});var f=k(576);function O(ie){return ie[ie.length-1]}function ae(ie){return(0,f.m)(O(ie))?ie.pop():void 0}function X(ie){return function Z(ie){return ie&&(0,f.m)(ie.schedule)}(O(ie))?ie.pop():void 0}function pe(ie,de){return"number"==typeof O(ie)?ie.pop():de}},8737:(dt,Ae,k)=>{function f(Z,O){if(Z){const ae=Z.indexOf(O);0<=ae&&Z.splice(ae,1)}}k.d(Ae,{P:()=>f})},3888:(dt,Ae,k)=>{function f(Z){const ae=Z(X=>{Error.call(X),X.stack=(new Error).stack});return ae.prototype=Object.create(Error.prototype),ae.prototype.constructor=ae,ae}k.d(Ae,{d:()=>f})},2806:(dt,Ae,k)=>{k.d(Ae,{O:()=>ae,x:()=>O});var f=k(2416);let Z=null;function O(X){if(f.v.useDeprecatedSynchronousErrorHandling){const pe=!Z;if(pe&&(Z={errorThrown:!1,error:null}),X(),pe){const{errorThrown:ie,error:de}=Z;if(Z=null,ie)throw de}}else X()}function ae(X){f.v.useDeprecatedSynchronousErrorHandling&&Z&&(Z.errorThrown=!0,Z.error=X)}},9672:(dt,Ae,k)=>{function f(Z,O,ae,X=0,pe=!1){const ie=O.schedule(function(){ae(),pe?Z.add(this.schedule(null,X)):this.unsubscribe()},X);if(Z.add(ie),!pe)return ie}k.d(Ae,{f:()=>f})},4671:(dt,Ae,k)=>{function f(Z){return Z}k.d(Ae,{y:()=>f})},1144:(dt,Ae,k)=>{k.d(Ae,{z:()=>f});const f=Z=>Z&&"number"==typeof Z.length&&"function"!=typeof Z},2206:(dt,Ae,k)=>{k.d(Ae,{D:()=>Z});var f=k(576);function Z(O){return Symbol.asyncIterator&&(0,f.m)(null==O?void 0:O[Symbol.asyncIterator])}},576:(dt,Ae,k)=>{function f(Z){return"function"==typeof Z}k.d(Ae,{m:()=>f})},3670:(dt,Ae,k)=>{k.d(Ae,{c:()=>O});var f=k(8822),Z=k(576);function O(ae){return(0,Z.m)(ae[f.L])}},6495:(dt,Ae,k)=>{k.d(Ae,{T:()=>O});var f=k(2202),Z=k(576);function O(ae){return(0,Z.m)(null==ae?void 0:ae[f.h])}},8239:(dt,Ae,k)=>{k.d(Ae,{t:()=>Z});var f=k(576);function Z(O){return(0,f.m)(null==O?void 0:O.then)}},3260:(dt,Ae,k)=>{k.d(Ae,{L:()=>ae,Q:()=>O});var f=k(655),Z=k(576);function O(X){return(0,f.FC)(this,arguments,function*(){const ie=X.getReader();try{for(;;){const{value:de,done:le}=yield(0,f.qq)(ie.read());if(le)return yield(0,f.qq)(void 0);yield yield(0,f.qq)(de)}}finally{ie.releaseLock()}})}function ae(X){return(0,Z.m)(null==X?void 0:X.getReader)}},4482:(dt,Ae,k)=>{k.d(Ae,{A:()=>Z,e:()=>O});var f=k(576);function Z(ae){return(0,f.m)(null==ae?void 0:ae.lift)}function O(ae){return X=>{if(Z(X))return X.lift(function(pe){try{return ae(pe,this)}catch(ie){this.error(ie)}});throw new TypeError("Unable to lift unknown Observable type")}}},7849:(dt,Ae,k)=>{k.d(Ae,{h:()=>O});var f=k(2416),Z=k(3410);function O(ae){Z.z.setTimeout(()=>{const{onUnhandledError:X}=f.v;if(!X)throw ae;X(ae)})}},4532:(dt,Ae,k)=>{function f(Z){return new TypeError(`You provided ${null!==Z&&"object"==typeof Z?"an invalid object":`'${Z}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}k.d(Ae,{z:()=>f})},655:(dt,Ae,k)=>{function ae(J,oe){var ne={};for(var be in J)Object.prototype.hasOwnProperty.call(J,be)&&oe.indexOf(be)<0&&(ne[be]=J[be]);if(null!=J&&"function"==typeof Object.getOwnPropertySymbols){var ge=0;for(be=Object.getOwnPropertySymbols(J);ge<be.length;ge++)oe.indexOf(be[ge])<0&&Object.prototype.propertyIsEnumerable.call(J,be[ge])&&(ne[be[ge]]=J[be[ge]])}return ne}function de(J,oe,ne,be){return new(ne||(ne=Promise))(function(Fe,St){function Qt(Wt){try{qe(be.next(Wt))}catch(Jn){St(Jn)}}function an(Wt){try{qe(be.throw(Wt))}catch(Jn){St(Jn)}}function qe(Wt){Wt.done?Fe(Wt.value):function ge(Fe){return Fe instanceof ne?Fe:new ne(function(St){St(Fe)})}(Wt.value).then(Qt,an)}qe((be=be.apply(J,oe||[])).next())})}function he(J){return this instanceof he?(this.v=J,this):new he(J)}function we(J,oe,ne){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var ge,be=ne.apply(J,oe||[]),Fe=[];return ge={},St("next"),St("throw"),St("return"),ge[Symbol.asyncIterator]=function(){return this},ge;function St(bn){be[bn]&&(ge[bn]=function(en){return new Promise(function(xi,Jt){Fe.push([bn,en,xi,Jt])>1||Qt(bn,en)})})}function Qt(bn,en){try{!function an(bn){bn.value instanceof he?Promise.resolve(bn.value.v).then(qe,Wt):Jn(Fe[0][2],bn)}(be[bn](en))}catch(xi){Jn(Fe[0][3],xi)}}function qe(bn){Qt("next",bn)}function Wt(bn){Qt("throw",bn)}function Jn(bn,en){bn(en),Fe.shift(),Fe.length&&Qt(Fe[0][0],Fe[0][1])}}function Qe(J){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var ne,oe=J[Symbol.asyncIterator];return oe?oe.call(J):(J=function Q(J){var oe="function"==typeof Symbol&&Symbol.iterator,ne=oe&&J[oe],be=0;if(ne)return ne.call(J);if(J&&"number"==typeof J.length)return{next:function(){return J&&be>=J.length&&(J=void 0),{value:J&&J[be++],done:!J}}};throw new TypeError(oe?"Object is not iterable.":"Symbol.iterator is not defined.")}(J),ne={},be("next"),be("throw"),be("return"),ne[Symbol.asyncIterator]=function(){return this},ne);function be(Fe){ne[Fe]=J[Fe]&&function(St){return new Promise(function(Qt,an){!function ge(Fe,St,Qt,an){Promise.resolve(an).then(function(qe){Fe({value:qe,done:Qt})},St)}(Qt,an,(St=J[Fe](St)).done,St.value)})}}}k.d(Ae,{FC:()=>we,KL:()=>Qe,_T:()=>ae,mG:()=>de,qq:()=>he})},5e3:(dt,Ae,k)=>{k.d(Ae,{$8M:()=>Do,$Z:()=>Aw,AFp:()=>Xa,ALo:()=>u0,AaK:()=>de,CHM:()=>fl,CRH:()=>Hb,CZH:()=>Tc,CqO:()=>cv,EJc:()=>eD,EpF:()=>Mw,F$t:()=>kw,F4k:()=>xw,FYo:()=>An,FiY:()=>mi,G48:()=>oo,GfV:()=>uh,Gpc:()=>H,Hsn:()=>Pw,JOm:()=>se,Jf7:()=>_g,LFG:()=>nt,LSH:()=>Fu,Lbi:()=>b0,MAs:()=>ww,NdJ:()=>Rw,O4$:()=>Qc,OlP:()=>En,Oqu:()=>Cs,PXZ:()=>kT,Q6J:()=>av,QGY:()=>ac,Qsj:()=>Tm,R0b:()=>os,RDi:()=>gs,Rgc:()=>Ec,SBq:()=>zu,Sil:()=>Di,Suo:()=>f0,TTD:()=>po,TgZ:()=>Xg,Tol:()=>mv,VKq:()=>ip,VLi:()=>Zm,W1O:()=>Qa,X6Q:()=>wh,XFs:()=>ht,Xpm:()=>Bt,Y36:()=>Kd,YKP:()=>Ib,YNc:()=>Ew,Yjl:()=>wr,Yz7:()=>en,ZZ4:()=>Rc,_Bn:()=>Eb,_UZ:()=>lv,_Vd:()=>_a,_c5:()=>sr,_uU:()=>Kw,aQg:()=>Zn,c2e:()=>Xb,cJS:()=>Jt,cg1:()=>Sv,dDg:()=>iD,deG:()=>tg,dqk:()=>Gt,eFA:()=>aD,ekj:()=>Ga,g9A:()=>Yu,h0i:()=>yc,hGG:()=>sy,hij:()=>vv,iGM:()=>$b,ifc:()=>Zt,ip1:()=>Bo,kL8:()=>cc,kcU:()=>Ny,lG2:()=>Xt,lcZ:()=>up,n5z:()=>id,oAB:()=>Y,oxw:()=>Hf,q4F:()=>wb,qLn:()=>xr,qOj:()=>hw,qZA:()=>em,sBO:()=>x0,sIi:()=>Lf,s_b:()=>cp,soG:()=>Ac,tBr:()=>Vr,tb:()=>vh,tp0:()=>Ao,uIk:()=>Q_,vHH:()=>Ne,vpe:()=>so,wAp:()=>wt,xp6:()=>E_,z2F:()=>Xu,zSh:()=>W_,zs3:()=>$a});var f=k(7579),Z=k(727),O=k(8306),ae=k(6451),X=k(3099);function pe(s){for(let o in s)if(s[o]===pe)return o;throw Error("Could not find renamed property on target object.")}function ie(s,o){for(const a in o)o.hasOwnProperty(a)&&!s.hasOwnProperty(a)&&(s[a]=o[a])}function de(s){if("string"==typeof s)return s;if(Array.isArray(s))return"["+s.map(de).join(", ")+"]";if(null==s)return""+s;if(s.overriddenName)return`${s.overriddenName}`;if(s.name)return`${s.name}`;const o=s.toString();if(null==o)return""+o;const a=o.indexOf("\n");return-1===a?o:o.substring(0,a)}function le(s,o){return null==s||""===s?null===o?"":o:null==o||""===o?s:s+" "+o}const $=pe({__forward_ref__:pe});function H(s){return s.__forward_ref__=H,s.toString=function(){return de(this())},s}function Q(s){return We(s)?s():s}function We(s){return"function"==typeof s&&s.hasOwnProperty($)&&s.__forward_ref__===H}class Ne extends Error{constructor(o,a){super(function Le(s,o){return`NG0${Math.abs(s)}${o?": "+o:""}`}(o,a)),this.code=o}}function he(s){return"string"==typeof s?s:null==s?"":String(s)}function we(s){return"function"==typeof s?s.name||s.toString():"object"==typeof s&&null!=s&&"function"==typeof s.type?s.type.name||s.type.toString():he(s)}function ye(s,o){const a=o?` in ${o}`:"";throw new Ne(-201,`No provider for ${we(s)} found${a}`)}function an(s,o){null==s&&function qe(s,o,a,l){throw new Error(`ASSERTION ERROR: ${s}`+(null==l?"":` [Expected=> ${a} ${l} ${o} <=Actual]`))}(o,s,null,"!=")}function en(s){return{token:s.token,providedIn:s.providedIn||null,factory:s.factory,value:void 0}}function Jt(s){return{providers:s.providers||[],imports:s.imports||[]}}function Kt(s){return ur(s,zi)||ur(s,us)}function ur(s,o){return s.hasOwnProperty(o)?s[o]:null}function kr(s){return s&&(s.hasOwnProperty(Pr)||s.hasOwnProperty(ls))?s[Pr]:null}const zi=pe({\u0275prov:pe}),Pr=pe({\u0275inj:pe}),us=pe({ngInjectableDef:pe}),ls=pe({ngInjectorDef:pe});var ht=(()=>((ht=ht||{})[ht.Default=0]="Default",ht[ht.Host=1]="Host",ht[ht.Self=2]="Self",ht[ht.SkipSelf=4]="SkipSelf",ht[ht.Optional=8]="Optional",ht))();let Hr;function Hn(s){const o=Hr;return Hr=s,o}function si(s,o,a){const l=Kt(s);return l&&"root"==l.providedIn?void 0===l.value?l.value=l.factory():l.value:a&ht.Optional?null:void 0!==o?o:void ye(de(s),"Injector")}function yn(s){return{toString:s}.toString()}var er=(()=>((er=er||{})[er.OnPush=0]="OnPush",er[er.Default=1]="Default",er))(),Zt=(()=>{return(s=Zt||(Zt={}))[s.Emulated=0]="Emulated",s[s.None=2]="None",s[s.ShadowDom=3]="ShadowDom",Zt;var s})();const lt="undefined"!=typeof globalThis&&globalThis,bt="undefined"!=typeof window&&window,lr="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,Gt=lt||"undefined"!=typeof global&&global||bt||lr,cr={},ft=[],Er=pe({\u0275cmp:pe}),jt=pe({\u0275dir:pe}),Xe=pe({\u0275pipe:pe}),Te=pe({\u0275mod:pe}),tt=pe({\u0275fac:pe}),pt=pe({__NG_ELEMENT_ID__:pe});let Ht=0;function Bt(s){return yn(()=>{const a={},l={type:s.type,providersResolver:null,decls:s.decls,vars:s.vars,factory:null,template:s.template||null,consts:s.consts||null,ngContentSelectors:s.ngContentSelectors,hostBindings:s.hostBindings||null,hostVars:s.hostVars||0,hostAttrs:s.hostAttrs||null,contentQueries:s.contentQueries||null,declaredInputs:a,inputs:null,outputs:null,exportAs:s.exportAs||null,onPush:s.changeDetection===er.OnPush,directiveDefs:null,pipeDefs:null,selectors:s.selectors||ft,viewQuery:s.viewQuery||null,features:s.features||null,data:s.data||{},encapsulation:s.encapsulation||Zt.Emulated,id:"c",styles:s.styles||ft,_:null,setInput:null,schemas:s.schemas||null,tView:null},d=s.directives,g=s.features,v=s.pipes;return l.id+=Ht++,l.inputs=vt(s.inputs,a),l.outputs=vt(s.outputs),g&&g.forEach(w=>w(l)),l.directiveDefs=d?()=>("function"==typeof d?d():d).map(V):null,l.pipeDefs=v?()=>("function"==typeof v?v():v).map(q):null,l})}function V(s){return Yt(s)||function Dn(s){return s[jt]||null}(s)}function q(s){return function kt(s){return s[Xe]||null}(s)}const ce={};function Y(s){return yn(()=>{const o={type:s.type,bootstrap:s.bootstrap||ft,declarations:s.declarations||ft,imports:s.imports||ft,exports:s.exports||ft,transitiveCompileScopes:null,schemas:s.schemas||null,id:s.id||null};return null!=s.id&&(ce[s.id]=s.type),o})}function vt(s,o){if(null==s)return cr;const a={};for(const l in s)if(s.hasOwnProperty(l)){let d=s[l],g=d;Array.isArray(d)&&(g=d[1],d=d[0]),a[d]=l,o&&(o[d]=g)}return a}const Xt=Bt;function wr(s){return{type:s.type,name:s.name,factory:null,pure:!1!==s.pure,onDestroy:s.type.prototype.ngOnDestroy||null}}function Yt(s){return s[Er]||null}function fn(s,o){const a=s[Te]||null;if(!a&&!0===o)throw new Error(`Type ${de(s)} does not have '\u0275mod' property.`);return a}function Ri(s){return Array.isArray(s)&&"object"==typeof s[1]}function ui(s){return Array.isArray(s)&&!0===s[1]}function Vc(s){return 0!=(8&s.flags)}function Fs(s){return 2==(2&s.flags)}function uu(s){return 1==(1&s.flags)}function Gr(s){return null!==s.template}function Vh(s){return 0!=(512&s[2])}function qr(s,o){return s.hasOwnProperty(tt)?s[tt]:null}class qo{constructor(o,a,l){this.previousValue=o,this.currentValue=a,this.firstChange=l}isFirstChange(){return this.firstChange}}function po(){return Ta}function Ta(s){return s.type.prototype.ngOnChanges&&(s.setInput=Jp),Hc}function Hc(){const s=Bs(this),o=null==s?void 0:s.current;if(o){const a=s.previous;if(a===cr)s.previous=o;else for(let l in o)a[l]=o[l];s.current=null,this.ngOnChanges(o)}}function Jp(s,o,a,l){const d=Bs(s)||function li(s,o){return s[br]=o}(s,{previous:cr,current:null}),g=d.current||(d.current={}),v=d.previous,w=this.declaredInputs[a],D=v[w];g[w]=new qo(D&&D.currentValue,o,v===cr),s[l]=o}po.ngInherit=!0;const br="__ngSimpleChanges__";function Bs(s){return s[br]||null}let mu;function gs(s){mu=s}function mn(s){return!!s.listen}const zo={createRenderer:(s,o)=>function Aa(){return void 0!==mu?mu:"undefined"!=typeof document?document:void 0}()};function cn(s){for(;Array.isArray(s);)s=s[0];return s}function mo(s,o){return cn(o[s])}function Cr(s,o){return cn(o[s.index])}function Sa(s,o){return s.data[o]}function Ni(s,o){return s[o]}function Ir(s,o){const a=o[s];return Ri(a)?a:a[0]}function js(s){return 4==(4&s[2])}function ms(s){return 128==(128&s[2])}function zr(s,o){return null==o?null:s[o]}function $s(s){s[18]=0}function Hs(s,o){s[5]+=o;let a=s,l=s[3];for(;null!==l&&(1===o&&1===a[5]||-1===o&&0===a[5]);)l[5]+=o,a=l,l=l[3]}const gt={lFrame:_o(null),bindingsEnabled:!0,isInCheckNoChangesMode:!1};function wu(){return gt.bindingsEnabled}function De(){return gt.lFrame.lView}function Ut(){return gt.lFrame.tView}function fl(s){return gt.lFrame.contextLView=s,s[8]}function _n(){let s=Wo();for(;null!==s&&64===s.type;)s=s.parent;return s}function Wo(){return gt.lFrame.currentTNode}function Wr(s,o){const a=gt.lFrame;a.currentTNode=s,a.isParent=o}function pl(){return gt.lFrame.isParent}function gl(){gt.lFrame.isParent=!1}function bu(){return gt.isInCheckNoChangesMode}function Gs(s){gt.isInCheckNoChangesMode=s}function fr(){const s=gt.lFrame;let o=s.bindingRootIndex;return-1===o&&(o=s.bindingRootIndex=s.tView.bindingStartIndex),o}function qs(){return gt.lFrame.bindingIndex++}function Oi(s){const o=gt.lFrame,a=o.bindingIndex;return o.bindingIndex=o.bindingIndex+s,a}function Iu(s,o){const a=gt.lFrame;a.bindingIndex=a.bindingRootIndex=s,xa(o)}function xa(s){gt.lFrame.currentDirectiveIndex=s}function vl(){return gt.lFrame.currentQueryIndex}function El(s){gt.lFrame.currentQueryIndex=s}function Wc(s){const o=s[1];return 2===o.type?o.declTNode:1===o.type?s[6]:null}function wl(s,o,a){if(a&ht.SkipSelf){let d=o,g=s;for(;!(d=d.parent,null!==d||a&ht.Host||(d=Wc(g),null===d||(g=g[15],10&d.type))););if(null===d)return!1;o=d,s=g}const l=gt.lFrame=Kc();return l.currentTNode=o,l.lView=s,!0}function yo(s){const o=Kc(),a=s[1];gt.lFrame=o,o.currentTNode=a.firstChild,o.lView=s,o.tView=a,o.contextLView=s,o.bindingIndex=a.bindingStartIndex,o.inI18n=!1}function Kc(){const s=gt.lFrame,o=null===s?null:s.child;return null===o?_o(s):o}function _o(s){const o={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:s,child:null,inI18n:!1};return null!==s&&(s.child=o),o}function Zc(){const s=gt.lFrame;return gt.lFrame=s.parent,s.currentTNode=null,s.lView=null,s}const Yc=Zc;function vo(){const s=Zc();s.isParent=!0,s.tView=null,s.selectedIndex=-1,s.contextLView=null,s.elementDepthCount=0,s.currentDirectiveIndex=-1,s.currentNamespace=null,s.bindingRootIndex=-1,s.bindingIndex=-1,s.currentQueryIndex=0}function Tr(){return gt.lFrame.selectedIndex}function Ws(s){gt.lFrame.selectedIndex=s}function Cn(){const s=gt.lFrame;return Sa(s.tView,s.selectedIndex)}function Qc(){gt.lFrame.currentNamespace="svg"}function Ny(){!function Dl(){gt.lFrame.currentNamespace=null}()}function ys(s,o){for(let a=o.directiveStart,l=o.directiveEnd;a<l;a++){const g=s.data[a].type.prototype,{ngAfterContentInit:v,ngAfterContentChecked:w,ngAfterViewInit:D,ngAfterViewChecked:A,ngOnDestroy:x}=g;v&&(s.contentHooks||(s.contentHooks=[])).push(-a,v),w&&((s.contentHooks||(s.contentHooks=[])).push(a,w),(s.contentCheckHooks||(s.contentCheckHooks=[])).push(a,w)),D&&(s.viewHooks||(s.viewHooks=[])).push(-a,D),A&&((s.viewHooks||(s.viewHooks=[])).push(a,A),(s.viewCheckHooks||(s.viewCheckHooks=[])).push(a,A)),null!=x&&(s.destroyHooks||(s.destroyHooks=[])).push(a,x)}}function Ra(s,o,a){Jc(s,o,3,a)}function Tu(s,o,a,l){(3&s[2])===a&&Jc(s,o,a,l)}function Vn(s,o){let a=s[2];(3&a)===o&&(a&=2047,a+=1,s[2]=a)}function Jc(s,o,a,l){const g=null!=l?l:-1,v=o.length-1;let w=0;for(let D=void 0!==l?65535&s[18]:0;D<v;D++)if("number"==typeof o[D+1]){if(w=o[D],null!=l&&w>=l)break}else o[D]<0&&(s[18]+=65536),(w<g||-1==g)&&(Xp(s,a,o,D),s[18]=(4294901760&s[18])+D+2),D++}function Xp(s,o,a,l){const d=a[l]<0,g=a[l+1],w=s[d?-a[l]:a[l]];if(d){if(s[2]>>11<s[18]>>16&&(3&s[2])===o){s[2]+=2048;try{g.call(w)}finally{}}}else try{g.call(w)}finally{}}class Yo{constructor(o,a,l){this.factory=o,this.resolving=!1,this.canSeeViewProviders=a,this.injectImpl=l}}function yt(s,o,a){const l=mn(s);let d=0;for(;d<a.length;){const g=a[d];if("number"==typeof g){if(0!==g)break;d++;const v=a[d++],w=a[d++],D=a[d++];l?s.setAttribute(o,w,D,v):o.setAttributeNS(v,w,D)}else{const v=g,w=a[++d];Kr(v)?l&&s.setProperty(o,v,w):l?s.setAttribute(o,v,w):o.setAttribute(v,w),d++}}return d}function rr(s){return 3===s||4===s||6===s}function Kr(s){return 64===s.charCodeAt(0)}function Fr(s,o){if(null!==o&&0!==o.length)if(null===s||0===s.length)s=o.slice();else{let a=-1;for(let l=0;l<o.length;l++){const d=o[l];"number"==typeof d?a=d:0===a||Qo(s,a,d,null,-1===a||2===a?o[++l]:null)}}return s}function Qo(s,o,a,l,d){let g=0,v=s.length;if(-1===o)v=-1;else for(;g<s.length;){const w=s[g++];if("number"==typeof w){if(w===o){v=-1;break}if(w>o){v=g-1;break}}}for(;g<s.length;){const w=s[g];if("number"==typeof w)break;if(w===a){if(null===l)return void(null!==d&&(s[g+1]=d));if(l===s[g+1])return void(s[g+2]=d)}g++,null!==l&&g++,null!==d&&g++}-1!==v&&(s.splice(v,0,o),g=v+1),s.splice(g++,0,a),null!==l&&s.splice(g++,0,l),null!==d&&s.splice(g++,0,d)}function td(s){return-1!==s}function gn(s){return 32767&s}function ki(s,o){let a=function $h(s){return s>>16}(s),l=o;for(;a>0;)l=l[15],a--;return l}let Au=!0;function di(s){const o=Au;return Au=s,o}let Al=0;function Bn(s,o){const a=Jo(s,o);if(-1!==a)return a;const l=o[1];l.firstCreatePass&&(s.injectorIndex=o.length,vs(l.data,s),vs(o,null),vs(l.blueprint,null));const d=hi(s,o),g=s.injectorIndex;if(td(d)){const v=gn(d),w=ki(d,o),D=w[1].data;for(let A=0;A<8;A++)o[g+A]=w[v+A]|D[v+A]}return o[g+8]=d,g}function vs(s,o){s.push(0,0,0,0,0,0,0,0,o)}function Jo(s,o){return-1===s.injectorIndex||s.parent&&s.parent.injectorIndex===s.injectorIndex||null===o[s.injectorIndex+8]?-1:s.injectorIndex}function hi(s,o){if(s.parent&&-1!==s.parent.injectorIndex)return s.parent.injectorIndex;let a=0,l=null,d=o;for(;null!==d;){const g=d[1],v=g.type;if(l=2===v?g.declTNode:1===v?d[6]:null,null===l)return-1;if(a++,d=d[15],-1!==l.injectorIndex)return l.injectorIndex|a<<16}return-1}function Ks(s,o,a){!function wo(s,o,a){let l;"string"==typeof a?l=a.charCodeAt(0)||0:a.hasOwnProperty(pt)&&(l=a[pt]),null==l&&(l=a[pt]=Al++);const d=255&l;o.data[s+(d>>5)]|=1<<d}(s,o,a)}function Zi(s,o,a){if(a&ht.Optional)return s;ye(o,"NodeInjector")}function Sl(s,o,a,l){if(a&ht.Optional&&void 0===l&&(l=null),0==(a&(ht.Self|ht.Host))){const d=s[9],g=Hn(void 0);try{return d?d.get(o,l,a&ht.Optional):si(o,l,a&ht.Optional)}finally{Hn(g)}}return Zi(l,o,a)}function Zs(s,o,a,l=ht.Default,d){if(null!==s){const g=function Xo(s){if("string"==typeof s)return s.charCodeAt(0)||0;const o=s.hasOwnProperty(pt)?s[pt]:void 0;return"number"==typeof o?o>=0?255&o:Ml:o}(a);if("function"==typeof g){if(!wl(o,s,l))return l&ht.Host?Zi(d,a,l):Sl(o,a,l,d);try{const v=g(l);if(null!=v||l&ht.Optional)return v;ye(a)}finally{Yc()}}else if("number"==typeof g){let v=null,w=Jo(s,o),D=-1,A=l&ht.Host?o[16][6]:null;for((-1===w||l&ht.SkipSelf)&&(D=-1===w?hi(s,o):o[w+8],-1!==D&&Lr(l,!1)?(v=o[1],w=gn(D),o=ki(D,o)):w=-1);-1!==w;){const x=o[1];if(ea(g,w,x.data)){const P=rd(w,o,a,v,l,A);if(P!==Yi)return P}D=o[w+8],-1!==D&&Lr(l,o[1].data[w+8]===A)&&ea(g,w,o)?(v=x,w=gn(D),o=ki(D,o)):w=-1}}}return Sl(o,a,l,d)}const Yi={};function Ml(){return new Fi(_n(),De())}function rd(s,o,a,l,d,g){const v=o[1],w=v.data[s+8],x=bo(w,v,a,null==l?Fs(w)&&Au:l!=v&&0!=(3&w.type),d&ht.Host&&g===w);return null!==x?Pi(o,v,x,w):Yi}function bo(s,o,a,l,d){const g=s.providerIndexes,v=o.data,w=1048575&g,D=s.directiveStart,x=g>>20,U=d?w+x:s.directiveEnd;for(let K=l?w:w+x;K<U;K++){const me=v[K];if(K<D&&a===me||K>=D&&me.type===a)return K}if(d){const K=v[D];if(K&&Gr(K)&&K.type===a)return D}return null}function Pi(s,o,a,l){let d=s[a];const g=o.data;if(function Xc(s){return s instanceof Yo}(d)){const v=d;v.resolving&&function it(s,o){const a=o?`. Dependency path: ${o.join(" > ")} > ${s}`:"";throw new Ne(-200,`Circular dependency in DI detected for ${s}${a}`)}(we(g[a]));const w=di(v.canSeeViewProviders);v.resolving=!0;const D=v.injectImpl?Hn(v.injectImpl):null;wl(s,l,ht.Default);try{d=s[a]=v.factory(void 0,g,s,l),o.firstCreatePass&&a>=l.directiveStart&&function Cl(s,o,a){const{ngOnChanges:l,ngOnInit:d,ngDoCheck:g}=o.type.prototype;if(l){const v=Ta(o);(a.preOrderHooks||(a.preOrderHooks=[])).push(s,v),(a.preOrderCheckHooks||(a.preOrderCheckHooks=[])).push(s,v)}d&&(a.preOrderHooks||(a.preOrderHooks=[])).push(0-s,d),g&&((a.preOrderHooks||(a.preOrderHooks=[])).push(s,g),(a.preOrderCheckHooks||(a.preOrderCheckHooks=[])).push(s,g))}(a,g[a],o)}finally{null!==D&&Hn(D),di(w),v.resolving=!1,Yc()}}return d}function ea(s,o,a){return!!(a[o+(s>>5)]&1<<s)}function Lr(s,o){return!(s&ht.Self||s&ht.Host&&o)}class Fi{constructor(o,a){this._tNode=o,this._lView=a}get(o,a,l){return Zs(this._tNode,this._lView,o,l,a)}}function id(s){return yn(()=>{const o=s.prototype.constructor,a=o[tt]||Nn(o),l=Object.prototype;let d=Object.getPrototypeOf(s.prototype).constructor;for(;d&&d!==l;){const g=d[tt]||Nn(d);if(g&&g!==a)return g;d=Object.getPrototypeOf(d)}return g=>new g})}function Nn(s){return We(s)?()=>{const o=Nn(Q(s));return o&&o()}:qr(s)}function Do(s){return function fi(s,o){if("class"===o)return s.classes;if("style"===o)return s.styles;const a=s.attrs;if(a){const l=a.length;let d=0;for(;d<l;){const g=a[d];if(rr(g))break;if(0===g)d+=2;else if("number"==typeof g)for(d++;d<l&&"string"==typeof a[d];)d++;else{if(g===o)return a[d+1];d+=2}}}return null}(_n(),s)}const ta="__parameters__";function vn(s,o,a){return yn(()=>{const l=function Ji(s){return function(...a){if(s){const l=s(...a);for(const d in l)this[d]=l[d]}}}(o);function d(...g){if(this instanceof d)return l.apply(this,g),this;const v=new d(...g);return w.annotation=v,w;function w(D,A,x){const P=D.hasOwnProperty(ta)?D[ta]:Object.defineProperty(D,ta,{value:[]})[ta];for(;P.length<=x;)P.push(null);return(P[x]=P[x]||[]).push(v),D}}return a&&(d.prototype=Object.create(a.prototype)),d.prototype.ngMetadataName=s,d.annotationCls=d,d})}class En{constructor(o,a){this._desc=o,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof a?this.__NG_ELEMENT_ID__=a:void 0!==a&&(this.\u0275prov=en({token:this,providedIn:a.providedIn||"root",factory:a.factory}))}toString(){return`InjectionToken ${this._desc}`}}const tg=new En("AnalyzeForEntryComponents");function Sr(s,o){void 0===o&&(o=s);for(let a=0;a<s.length;a++){let l=s[a];Array.isArray(l)?(o===s&&(o=s.slice(0,a)),Sr(l,o)):o!==s&&o.push(l)}return o}function pi(s,o){s.forEach(a=>Array.isArray(a)?pi(a,o):o(a))}function Nl(s,o,a){o>=s.length?s.push(a):s.splice(o,0,a)}function ws(s,o){return o>=s.length-1?s.pop():s.splice(o,1)[0]}function Vi(s,o){const a=[];for(let l=0;l<s;l++)a.push(o);return a}function qn(s,o,a){let l=Xs(s,o);return l>=0?s[1|l]=a:(l=~l,function Ol(s,o,a,l){let d=s.length;if(d==o)s.push(a,l);else if(1===d)s.push(l,s[0]),s[0]=a;else{for(d--,s.push(s[d-1],s[d]);d>o;)s[d]=s[d-2],d--;s[o]=a,s[o+1]=l}}(s,l,o,a)),l}function Fl(s,o){const a=Xs(s,o);if(a>=0)return s[1|a]}function Xs(s,o){return function Co(s,o,a){let l=0,d=s.length>>a;for(;d!==l;){const g=l+(d-l>>1),v=s[g<<a];if(o===v)return g<<a;v>o?d=g:l=g+1}return~(d<<a)}(s,o,1)}const Io={},ra="__NG_DI_FLAG__",Ru="ngTempTokenPath",I=/\n/gm,L="__source",W=pe({provide:String,useValue:pe});let ee;function Me(s){const o=ee;return ee=s,o}function xe(s,o=ht.Default){if(void 0===ee)throw new Ne(203,"");return null===ee?si(s,void 0,o):ee.get(s,o&ht.Optional?null:void 0,o)}function nt(s,o=ht.Default){return(function Xn(){return Hr}()||xe)(Q(s),o)}const Pt=nt;function Mt(s){const o=[];for(let a=0;a<s.length;a++){const l=Q(s[a]);if(Array.isArray(l)){if(0===l.length)throw new Ne(900,"");let d,g=ht.Default;for(let v=0;v<l.length;v++){const w=l[v],D=In(w);"number"==typeof D?-1===D?d=w.token:g|=D:d=w}o.push(nt(d,g))}else o.push(nt(l))}return o}function Un(s,o){return s[ra]=o,s.prototype[ra]=o,s}function In(s){return s[ra]}const Vr=Un(vn("Inject",s=>({token:s})),-1),mi=Un(vn("Optional"),8),Ao=Un(vn("SkipSelf"),4);class pd{constructor(o){this.changingThisBreaksApplicationSecurity=o}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}function eo(s){return s instanceof pd?s.changingThisBreaksApplicationSecurity:s}const to=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,Yh=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;var sn=(()=>((sn=sn||{})[sn.NONE=0]="NONE",sn[sn.HTML=1]="HTML",sn[sn.STYLE=2]="STYLE",sn[sn.SCRIPT=3]="SCRIPT",sn[sn.URL=4]="URL",sn[sn.RESOURCE_URL=5]="RESOURCE_URL",sn))();function Fu(s){const o=function ua(){const s=De();return s&&s[12]}();return o?o.sanitize(sn.URL,s)||"":function oa(s,o){const a=function Ou(s){return s instanceof pd&&s.getTypeName()||null}(s);if(null!=a&&a!==o){if("ResourceURL"===a&&"URL"===o)return!0;throw new Error(`Required a safe ${o}, got a ${a} (see https://g.co/ng/security#xss)`)}return a===o}(s,"URL")?eo(s):function ku(s){return(s=String(s)).match(to)||s.match(Yh)?s:"unsafe:"+s}(he(s))}const af="__ngContext__";function Br(s,o){s[af]=o}function uf(s){const o=function Fa(s){return s[af]||null}(s);return o?Array.isArray(o)?o:o.lView:null}function Ba(s){return s.ngOriginalError}function yg(s,...o){s.error(...o)}class xr{constructor(){this._console=console}handleError(o){const a=this._findOriginalError(o),l=function t_(s){return s&&s.ngErrorLogger||yg}(o);l(this._console,"ERROR",o),a&&l(this._console,"ORIGINAL ERROR",a)}_findOriginalError(o){let a=o&&Ba(o);for(;a&&Ba(a);)a=Ba(a);return a||null}}const s_=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(Gt))();function _g(s){return s.ownerDocument.defaultView}function m(s){return s instanceof Function?s():s}var se=(()=>((se=se||{})[se.Important=1]="Important",se[se.DashCase=2]="DashCase",se))();function rt(s,o){return undefined(s,o)}function Tn(s){const o=s[3];return ui(o)?o[3]:o}function Lu(s){return mf(s[13])}function Vu(s){return mf(s[4])}function mf(s){for(;null!==s&&!ui(s);)s=s[4];return s}function la(s,o,a,l,d){if(null!=l){let g,v=!1;ui(l)?g=l:Ri(l)&&(v=!0,l=l[0]);const w=cn(l);0===s&&null!==a?null==d?d_(o,a,w):Ds(o,a,w,d||null,!0):1===s&&null!==a?Ds(o,a,w,d||null,!0):2===s?function g_(s,o,a){const l=ca(s,o);l&&function EC(s,o,a,l){mn(s)?s.removeChild(o,a,l):o.removeChild(a)}(s,l,o,a)}(o,w,v):3===s&&o.destroyNode(w),null!=g&&function DC(s,o,a,l,d){const g=a[7];g!==cn(a)&&la(o,s,l,g,d);for(let w=10;w<a.length;w++){const D=a[w];Dg(D[1],D,s,o,l,g)}}(o,s,g,a,d)}}function bd(s,o,a){if(mn(s))return s.createElement(o,a);{const l=null!==a?function gu(s){const o=s.toLowerCase();return"svg"===o?"http://www.w3.org/2000/svg":"math"===o?"http://www.w3.org/1998/MathML/":null}(a):null;return null===l?s.createElement(o):s.createElementNS(l,o)}}function gE(s,o){const a=s[9],l=a.indexOf(o),d=o[3];1024&o[2]&&(o[2]&=-1025,Hs(d,-1)),a.splice(l,1)}function u_(s,o){if(s.length<=10)return;const a=10+o,l=s[a];if(l){const d=l[17];null!==d&&d!==s&&gE(d,l),o>0&&(s[a-1][4]=l[4]);const g=ws(s,10+o);!function $i(s,o){Dg(s,o,o[11],2,null,null),o[0]=null,o[6]=null}(l[1],l);const v=g[19];null!==v&&v.detachView(g[1]),l[3]=null,l[4]=null,l[2]&=-129}return l}function l_(s,o){if(!(256&o[2])){const a=o[11];mn(a)&&a.destroyNode&&Dg(s,o,a,3,null,null),function vf(s){let o=s[13];if(!o)return c_(s[1],s);for(;o;){let a=null;if(Ri(o))a=o[13];else{const l=o[10];l&&(a=l)}if(!a){for(;o&&!o[4]&&o!==s;)Ri(o)&&c_(o[1],o),o=o[3];null===o&&(o=s),Ri(o)&&c_(o[1],o),a=o&&o[4]}o=a}}(o)}}function c_(s,o){if(!(256&o[2])){o[2]&=-129,o[2]|=256,function yE(s,o){let a;if(null!=s&&null!=(a=s.destroyHooks))for(let l=0;l<a.length;l+=2){const d=o[a[l]];if(!(d instanceof Yo)){const g=a[l+1];if(Array.isArray(g))for(let v=0;v<g.length;v+=2){const w=d[g[v]],D=g[v+1];try{D.call(w)}finally{}}else try{g.call(d)}finally{}}}}(s,o),function mE(s,o){const a=s.cleanup,l=o[7];let d=-1;if(null!==a)for(let g=0;g<a.length-1;g+=2)if("string"==typeof a[g]){const v=a[g+1],w="function"==typeof v?v(o):cn(o[v]),D=l[d=a[g+2]],A=a[g+3];"boolean"==typeof A?w.removeEventListener(a[g],D,A):A>=0?l[d=A]():l[d=-A].unsubscribe(),g+=2}else{const v=l[d=a[g+1]];a[g].call(v)}if(null!==l){for(let g=d+1;g<l.length;g++)l[g]();o[7]=null}}(s,o),1===o[1].type&&mn(o[11])&&o[11].destroy();const a=o[17];if(null!==a&&ui(o[3])){a!==o[3]&&gE(a,o);const l=o[19];null!==l&&l.detachView(s)}}}function wg(s,o,a){return function vC(s,o,a){let l=o;for(;null!==l&&40&l.type;)l=(o=l).parent;if(null===l)return a[0];if(2&l.flags){const d=s.data[l.directiveStart].encapsulation;if(d===Zt.None||d===Zt.Emulated)return null}return Cr(l,a)}(s,o.parent,a)}function Ds(s,o,a,l,d){mn(s)?s.insertBefore(o,a,l,d):o.insertBefore(a,l,d)}function d_(s,o,a){mn(s)?s.appendChild(o,a):o.appendChild(a)}function _E(s,o,a,l,d){null!==l?Ds(s,o,a,l,d):d_(s,o,a)}function ca(s,o){return mn(s)?s.parentNode(o):o.parentNode}function vE(s,o,a){return h_(s,o,a)}let h_=function EE(s,o,a){return 40&s.type?Cr(s,a):null};function bg(s,o,a,l){const d=wg(s,l,o),g=o[11],w=vE(l.parent||o[6],l,o);if(null!=d)if(Array.isArray(a))for(let D=0;D<a.length;D++)_E(g,d,a[D],w,!1);else _E(g,d,a,w,!1)}function Cd(s,o){if(null!==o){const a=o.type;if(3&a)return Cr(o,s);if(4&a)return p_(-1,s[o.index]);if(8&a){const l=o.child;if(null!==l)return Cd(s,l);{const d=s[o.index];return ui(d)?p_(-1,d):cn(d)}}if(32&a)return rt(o,s)()||cn(s[o.index]);{const l=bE(s,o);return null!==l?Array.isArray(l)?l[0]:Cd(Tn(s[16]),l):Cd(s,o.next)}}return null}function bE(s,o){return null!==o?s[16][6].projection[o.projection]:null}function p_(s,o){const a=10+s+1;if(a<o.length){const l=o[a],d=l[1].firstChild;if(null!==d)return Cd(l,d)}return o[7]}function m_(s,o,a,l,d,g,v){for(;null!=a;){const w=l[a.index],D=a.type;if(v&&0===o&&(w&&Br(cn(w),l),a.flags|=4),64!=(64&a.flags))if(8&D)m_(s,o,a.child,l,d,g,!1),la(o,s,d,w,g);else if(32&D){const A=rt(a,l);let x;for(;x=A();)la(o,s,d,x,g);la(o,s,d,w,g)}else 16&D?DE(s,o,l,a,d,g):la(o,s,d,w,g);a=v?a.projectionNext:a.next}}function Dg(s,o,a,l,d,g){m_(a,l,s.firstChild,o,d,g,!1)}function DE(s,o,a,l,d,g){const v=a[16],D=v[6].projection[l.projection];if(Array.isArray(D))for(let A=0;A<D.length;A++)la(o,s,d,D[A],g);else m_(s,o,D,v[3],d,g,!0)}function y_(s,o,a){mn(s)?s.setAttribute(o,"style",a):o.style.cssText=a}function Ef(s,o,a){mn(s)?""===a?s.removeAttribute(o,"class"):s.setAttribute(o,"class",a):o.className=a}function __(s,o,a){let l=s.length;for(;;){const d=s.indexOf(o,a);if(-1===d)return d;if(0===d||s.charCodeAt(d-1)<=32){const g=o.length;if(d+g===l||s.charCodeAt(d+g)<=32)return d}a=d+1}}const v_="ng-template";function Jl(s,o,a){let l=0;for(;l<s.length;){let d=s[l++];if(a&&"class"===d){if(d=s[l],-1!==__(d.toLowerCase(),o,0))return!0}else if(1===d){for(;l<s.length&&"string"==typeof(d=s[l++]);)if(d.toLowerCase()===o)return!0;return!1}}return!1}function No(s){return 4===s.type&&s.value!==v_}function IC(s,o,a){return o===(4!==s.type||a?s.value:v_)}function CE(s,o,a){let l=4;const d=s.attrs||[],g=function Bu(s){for(let o=0;o<s.length;o++)if(rr(s[o]))return o;return s.length}(d);let v=!1;for(let w=0;w<o.length;w++){const D=o[w];if("number"!=typeof D){if(!v)if(4&l){if(l=2|1&l,""!==D&&!IC(s,D,a)||""===D&&1===o.length){if(Oo(l))return!1;v=!0}}else{const A=8&l?D:o[++w];if(8&l&&null!==s.attrs){if(!Jl(s.attrs,A,a)){if(Oo(l))return!1;v=!0}continue}const P=TC(8&l?"class":D,d,No(s),a);if(-1===P){if(Oo(l))return!1;v=!0;continue}if(""!==A){let U;U=P>g?"":d[P+1].toLowerCase();const K=8&l?U:null;if(K&&-1!==__(K,A,0)||2&l&&A!==U){if(Oo(l))return!1;v=!0}}}}else{if(!v&&!Oo(l)&&!Oo(D))return!1;if(v&&Oo(D))continue;v=!1,l=D|1&l}}return Oo(l)||v}function Oo(s){return 0==(1&s)}function TC(s,o,a,l){if(null===o)return-1;let d=0;if(l||!a){let g=!1;for(;d<o.length;){const v=o[d];if(v===s)return d;if(3===v||6===v)g=!0;else{if(1===v||2===v){let w=o[++d];for(;"string"==typeof w;)w=o[++d];continue}if(4===v)break;if(0===v){d+=4;continue}}d+=g?1:2}return-1}return function TE(s,o){let a=s.indexOf(4);if(a>-1)for(a++;a<s.length;){const l=s[a];if("number"==typeof l)return-1;if(l===o)return a;a++}return-1}(o,s)}function IE(s,o,a=!1){for(let l=0;l<o.length;l++)if(CE(s,o[l],a))return!0;return!1}function _i(s,o){e:for(let a=0;a<o.length;a++){const l=o[a];if(s.length===l.length){for(let d=0;d<s.length;d++)if(s[d]!==l[d])continue e;return!0}}return!1}function Ua(s,o){return s?":not("+o.trim()+")":o}function AC(s){let o=s[0],a=1,l=2,d="",g=!1;for(;a<s.length;){let v=s[a];if("string"==typeof v)if(2&l){const w=s[++a];d+="["+v+(w.length>0?'="'+w+'"':"")+"]"}else 8&l?d+="."+v:4&l&&(d+=" "+v);else""!==d&&!Oo(v)&&(o+=Ua(g,d),d=""),l=v,g=g||!Oo(l);a++}return""!==d&&(o+=Ua(g,d)),o}const Nt={};function E_(s){w_(Ut(),De(),Tr()+s,bu())}function w_(s,o,a,l){if(!l)if(3==(3&o[2])){const g=s.preOrderCheckHooks;null!==g&&Ra(o,g,a)}else{const g=s.preOrderHooks;null!==g&&Tu(o,g,0,a)}Ws(a)}function wf(s,o){return s<<17|o<<2}function no(s){return s>>17&32767}function Tg(s){return 2|s}function da(s){return(131068&s)>>2}function Ag(s,o){return-131069&s|o<<2}function I_(s){return 1|s}function LE(s,o){const a=s.contentQueries;if(null!==a)for(let l=0;l<a.length;l+=2){const d=a[l],g=a[l+1];if(-1!==g){const v=s.data[g];El(d),v.contentQueries(2,o[g],g)}}}function Ad(s,o,a,l,d,g,v,w,D,A){const x=o.blueprint.slice();return x[0]=d,x[2]=140|l,$s(x),x[3]=x[15]=s,x[8]=a,x[10]=v||s&&s[10],x[11]=w||s&&s[11],x[12]=D||s&&s[12]||null,x[9]=A||s&&s[9]||null,x[6]=g,x[16]=2==o.type?s[16]:x,x}function Sd(s,o,a,l,d){let g=s.data[o];if(null===g)g=function BE(s,o,a,l,d){const g=Wo(),v=pl(),D=s.data[o]=function k_(s,o,a,l,d,g){return{type:a,index:l,insertBeforeIndex:null,injectorIndex:o?o.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:d,attrs:g,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:o,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,v?g:g&&g.parent,a,o,l,d);return null===s.firstChild&&(s.firstChild=D),null!==g&&(v?null==g.child&&null!==D.parent&&(g.child=D):null===g.next&&(g.next=D)),D}(s,o,a,l,d),function yl(){return gt.lFrame.inI18n}()&&(g.flags|=64);else if(64&g.type){g.type=a,g.value=l,g.attrs=d;const v=function Ko(){const s=gt.lFrame,o=s.currentTNode;return s.isParent?o:o.parent}();g.injectorIndex=null===v?-1:v.injectorIndex}return Wr(g,!0),g}function Md(s,o,a,l){if(0===a)return-1;const d=o.length;for(let g=0;g<a;g++)o.push(l),s.blueprint.push(l),s.data.push(null);return d}function xd(s,o,a){yo(o);try{const l=s.viewQuery;null!==l&&q_(1,l,a);const d=s.template;null!==d&&UE(s,o,d,1,a),s.firstCreatePass&&(s.firstCreatePass=!1),s.staticContentQueries&&LE(s,o),s.staticViewQueries&&q_(2,s.viewQuery,a);const g=s.components;null!==g&&function NC(s,o){for(let a=0;a<o.length;a++)ZE(s,o[a])}(o,g)}catch(l){throw s.firstCreatePass&&(s.incompleteFirstPass=!0,s.firstCreatePass=!1),l}finally{o[2]&=-5,vo()}}function If(s,o,a,l){const d=o[2];if(256==(256&d))return;yo(o);const g=bu();try{$s(o),function Du(s){return gt.lFrame.bindingIndex=s}(s.bindingStartIndex),null!==a&&UE(s,o,a,2,l);const v=3==(3&d);if(!g)if(v){const A=s.preOrderCheckHooks;null!==A&&Ra(o,A,null)}else{const A=s.preOrderHooks;null!==A&&Tu(o,A,0,null),Vn(o,0)}if(function LM(s){for(let o=Lu(s);null!==o;o=Vu(o)){if(!o[2])continue;const a=o[9];for(let l=0;l<a.length;l++){const d=a[l],g=d[3];0==(1024&d[2])&&Hs(g,1),d[2]|=1024}}}(o),function UC(s){for(let o=Lu(s);null!==o;o=Vu(o))for(let a=10;a<o.length;a++){const l=o[a],d=l[1];ms(l)&&If(d,l,d.template,l[8])}}(o),null!==s.contentQueries&&LE(s,o),!g)if(v){const A=s.contentCheckHooks;null!==A&&Ra(o,A)}else{const A=s.contentHooks;null!==A&&Tu(o,A,1),Vn(o,1)}!function RC(s,o){const a=s.hostBindingOpCodes;if(null!==a)try{for(let l=0;l<a.length;l++){const d=a[l];if(d<0)Ws(~d);else{const g=d,v=a[++l],w=a[++l];Iu(v,g),w(2,o[g])}}}finally{Ws(-1)}}(s,o);const w=s.components;null!==w&&function VE(s,o){for(let a=0;a<o.length;a++)KE(s,o[a])}(o,w);const D=s.viewQuery;if(null!==D&&q_(2,D,l),!g)if(v){const A=s.viewCheckHooks;null!==A&&Ra(o,A)}else{const A=s.viewHooks;null!==A&&Tu(o,A,2),Vn(o,2)}!0===s.firstUpdatePass&&(s.firstUpdatePass=!1),g||(o[2]&=-73),1024&o[2]&&(o[2]&=-1025,Hs(o[3],-1))}finally{vo()}}function N_(s,o,a,l){const d=o[10],g=!bu(),v=js(o);try{g&&!v&&d.begin&&d.begin(),v&&xd(s,o,l),If(s,o,a,l)}finally{g&&!v&&d.end&&d.end()}}function UE(s,o,a,l,d){const g=Tr(),v=2&l;try{Ws(-1),v&&o.length>20&&w_(s,o,20,bu()),a(l,d)}finally{Ws(g)}}function Tf(s,o,a){!wu()||(function LC(s,o,a,l){const d=a.directiveStart,g=a.directiveEnd;s.firstCreatePass||Bn(a,o),Br(l,o);const v=a.initialInputs;for(let w=d;w<g;w++){const D=s.data[w],A=Gr(D);A&&zE(o,a,D);const x=Pi(o,s,w,a);Br(x,o),null!==v&&WE(0,w-d,x,D,0,v),A&&(Ir(a.index,o)[8]=x)}}(s,o,a,Cr(a,o)),128==(128&a.flags)&&function Rf(s,o,a){const l=a.directiveStart,d=a.directiveEnd,v=a.index,w=function _l(){return gt.lFrame.currentDirectiveIndex}();try{Ws(v);for(let D=l;D<d;D++){const A=s.data[D],x=o[D];xa(D),(null!==A.hostBindings||0!==A.hostVars||null!==A.hostAttrs)&&kg(A,x)}}finally{Ws(-1),xa(w)}}(s,o,a))}function Af(s,o,a=Cr){const l=o.localNames;if(null!==l){let d=o.index+1;for(let g=0;g<l.length;g+=2){const v=l[g+1],w=-1===v?a(o,s):s[v];s[d++]=w}}}function OC(s){const o=s.tView;return null===o||o.incompleteFirstPass?s.tView=Rd(1,null,s.template,s.decls,s.vars,s.directiveDefs,s.pipeDefs,s.viewQuery,s.schemas,s.consts):o}function Rd(s,o,a,l,d,g,v,w,D,A){const x=20+l,P=x+d,U=function Sf(s,o){const a=[];for(let l=0;l<o;l++)a.push(l<s?null:Nt);return a}(x,P),K="function"==typeof A?A():A;return U[1]={type:s,blueprint:U,template:a,queries:null,viewQuery:w,declTNode:o,data:U.slice().fill(null,x),bindingStartIndex:x,expandoStartIndex:P,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof g?g():g,pipeRegistry:"function"==typeof v?v():v,firstChild:null,schemas:D,consts:K,incompleteFirstPass:!1}}function jE(s,o,a,l){const d=JE(o);null===a?d.push(l):(d.push(a),s.firstCreatePass&&Lg(s).push(l,d.length-1))}function P_(s,o,a){for(let l in s)if(s.hasOwnProperty(l)){const d=s[l];(a=null===a?{}:a).hasOwnProperty(l)?a[l].push(o,d):a[l]=[o,d]}return a}function Od(s,o,a,l){let d=!1;if(wu()){const g=function GE(s,o,a){const l=s.directiveRegistry;let d=null;if(l)for(let g=0;g<l.length;g++){const v=l[g];IE(a,v.selectors,!1)&&(d||(d=[]),Ks(Bn(a,o),s,v.type),Gr(v)?(VC(s,a),d.unshift(v)):d.push(v))}return d}(s,o,a),v=null===l?null:{"":-1};if(null!==g){d=!0,BC(a,s.data.length,g.length);for(let x=0;x<g.length;x++){const P=g[x];P.providersResolver&&P.providersResolver(P)}let w=!1,D=!1,A=Md(s,o,g.length,null);for(let x=0;x<g.length;x++){const P=g[x];a.mergedAttrs=Fr(a.mergedAttrs,P.hostAttrs),qE(s,a,o,A,P),PM(A,P,v),null!==P.contentQueries&&(a.flags|=8),(null!==P.hostBindings||null!==P.hostAttrs||0!==P.hostVars)&&(a.flags|=128);const U=P.type.prototype;!w&&(U.ngOnChanges||U.ngOnInit||U.ngDoCheck)&&((s.preOrderHooks||(s.preOrderHooks=[])).push(a.index),w=!0),!D&&(U.ngOnChanges||U.ngDoCheck)&&((s.preOrderCheckHooks||(s.preOrderCheckHooks=[])).push(a.index),D=!0),A++}!function F_(s,o){const l=o.directiveEnd,d=s.data,g=o.attrs,v=[];let w=null,D=null;for(let A=o.directiveStart;A<l;A++){const x=d[A],P=x.inputs,U=null===g||No(o)?null:U_(P,g);v.push(U),w=P_(P,A,w),D=P_(x.outputs,A,D)}null!==w&&(w.hasOwnProperty("class")&&(o.flags|=16),w.hasOwnProperty("style")&&(o.flags|=32)),o.initialInputs=v,o.inputs=w,o.outputs=D}(s,a)}v&&function kM(s,o,a){if(o){const l=s.localNames=[];for(let d=0;d<o.length;d+=2){const g=a[o[d+1]];if(null==g)throw new Ne(-301,!1);l.push(o[d],g)}}}(a,l,v)}return a.mergedAttrs=Fr(a.mergedAttrs,a.attrs),d}function kd(s,o,a,l,d,g){const v=g.hostBindings;if(v){let w=s.hostBindingOpCodes;null===w&&(w=s.hostBindingOpCodes=[]);const D=~o.index;(function FC(s){let o=s.length;for(;o>0;){const a=s[--o];if("number"==typeof a&&a<0)return a}return 0})(w)!=D&&w.push(D),w.push(l,d,v)}}function kg(s,o){null!==s.hostBindings&&s.hostBindings(1,o)}function VC(s,o){o.flags|=2,(s.components||(s.components=[])).push(o.index)}function PM(s,o,a){if(a){if(o.exportAs)for(let l=0;l<o.exportAs.length;l++)a[o.exportAs[l]]=s;Gr(o)&&(a[""]=s)}}function BC(s,o,a){s.flags|=1,s.directiveStart=o,s.directiveEnd=o+a,s.providerIndexes=o}function qE(s,o,a,l,d){s.data[l]=d;const g=d.factory||(d.factory=qr(d.type)),v=new Yo(g,Gr(d),null);s.blueprint[l]=v,a[l]=v,kd(s,o,0,l,Md(s,a,d.hostVars,Nt),d)}function zE(s,o,a){const l=Cr(o,s),d=OC(a),g=s[10],v=Nf(s,Ad(s,d,null,a.onPush?64:16,l,o,g,g.createRenderer(l,a),null,null));s[o.index]=v}function ha(s,o,a,l,d,g){const v=Cr(s,o);!function Pg(s,o,a,l,d,g,v){if(null==g)mn(s)?s.removeAttribute(o,d,a):o.removeAttribute(d);else{const w=null==v?he(g):v(g,l||"",d);mn(s)?s.setAttribute(o,d,w,a):a?o.setAttributeNS(a,d,w):o.setAttribute(d,w)}}(o[11],v,g,s.value,a,l,d)}function WE(s,o,a,l,d,g){const v=g[o];if(null!==v){const w=l.setInput;for(let D=0;D<v.length;){const A=v[D++],x=v[D++],P=v[D++];null!==w?l.setInput(a,P,A,x):a[x]=P}}}function U_(s,o){let a=null,l=0;for(;l<o.length;){const d=o[l];if(0!==d)if(5!==d){if("number"==typeof d)break;s.hasOwnProperty(d)&&(null===a&&(a=[]),a.push(d,s[d],o[l+1])),l+=2}else l+=2;else l+=4}return a}function j_(s,o,a,l){return new Array(s,!0,!1,o,null,0,l,a,null,null)}function KE(s,o){const a=Ir(o,s);if(ms(a)){const l=a[1];80&a[2]?If(l,a,l.template,a[8]):a[5]>0&&$_(a)}}function $_(s){for(let l=Lu(s);null!==l;l=Vu(l))for(let d=10;d<l.length;d++){const g=l[d];if(1024&g[2]){const v=g[1];If(v,g,v.template,g[8])}else g[5]>0&&$_(g)}const a=s[1].components;if(null!==a)for(let l=0;l<a.length;l++){const d=Ir(a[l],s);ms(d)&&d[5]>0&&$_(d)}}function ZE(s,o){const a=Ir(o,s),l=a[1];(function jC(s,o){for(let a=o.length;a<s.blueprint.length;a++)o.push(s.blueprint[a])})(l,a),xd(l,a,a[8])}function Nf(s,o){return s[13]?s[14][4]=o:s[13]=o,s[14]=o,o}function Of(s){for(;s;){s[2]|=64;const o=Tn(s);if(Vh(s)&&!o)return s;s=o}return null}function H_(s,o,a){const l=o[10];l.begin&&l.begin();try{If(s,o,s.template,a)}catch(d){throw z_(o,d),d}finally{l.end&&l.end()}}function Pd(s){!function Fg(s){for(let o=0;o<s.components.length;o++){const a=s.components[o],l=uf(a),d=l[1];N_(d,l,d.template,a)}}(s[8])}function q_(s,o,a){El(0),o(s,a)}const QE=(()=>Promise.resolve(null))();function JE(s){return s[7]||(s[7]=[])}function Lg(s){return s.cleanup||(s.cleanup=[])}function z_(s,o){const a=s[9],l=a?a.get(xr,null):null;l&&l.handleError(o)}function ew(s,o,a,l,d){for(let g=0;g<a.length;){const v=a[g++],w=a[g++],D=o[v],A=s.data[v];null!==A.setInput?A.setInput(D,d,l,w):D[w]=d}}function Po(s,o,a){const l=mo(o,s);!function wd(s,o,a){mn(s)?s.setValue(o,a):o.textContent=a}(s[11],l,a)}function Vg(s,o,a){let l=a?s.styles:null,d=a?s.classes:null,g=0;if(null!==o)for(let v=0;v<o.length;v++){const w=o[v];"number"==typeof w?g=w:1==g?d=le(d,w):2==g&&(l=le(l,w+": "+o[++v]+";"))}a?s.styles=l:s.stylesWithoutHost=l,a?s.classes=d:s.classesWithoutHost=d}const nw=new En("INJECTOR",-1);class Bg{get(o,a=Io){if(a===Io){const l=new Error(`NullInjectorError: No provider for ${de(o)}!`);throw l.name="NullInjectorError",l}return a}}const W_=new En("Set Injector scope."),Fd={},qC={};let Ug;function ju(){return void 0===Ug&&(Ug=new Bg),Ug}function rw(s,o=null,a=null,l){const d=K_(s,o,a,l);return d._resolveInjectorDefTypes(),d}function K_(s,o=null,a=null,l){return new zC(s,a,o||ju(),l)}class zC{constructor(o,a,l,d=null){this.parent=l,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const g=[];a&&pi(a,w=>this.processProvider(w,o,a)),pi([o],w=>this.processInjectorType(w,[],g)),this.records.set(nw,ec(void 0,this));const v=this.records.get(W_);this.scope=null!=v?v.value:null,this.source=d||("object"==typeof o?null:de(o))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(o=>o.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(o,a=Io,l=ht.Default){this.assertNotDestroyed();const d=Me(this),g=Hn(void 0);try{if(!(l&ht.SkipSelf)){let w=this.records.get(o);if(void 0===w){const D=function aw(s){return"function"==typeof s||"object"==typeof s&&s instanceof En}(o)&&Kt(o);w=D&&this.injectableDefInScope(D)?ec(jg(o),Fd):null,this.records.set(o,w)}if(null!=w)return this.hydrate(o,w)}return(l&ht.Self?ju():this.parent).get(o,a=l&ht.Optional&&a===Io?null:a)}catch(v){if("NullInjectorError"===v.name){if((v[Ru]=v[Ru]||[]).unshift(de(o)),d)throw v;return function ia(s,o,a,l){const d=s[Ru];throw o[L]&&d.unshift(o[L]),s.message=function To(s,o,a,l=null){s=s&&"\n"===s.charAt(0)&&"\u0275"==s.charAt(1)?s.substr(2):s;let d=de(o);if(Array.isArray(o))d=o.map(de).join(" -> ");else if("object"==typeof o){let g=[];for(let v in o)if(o.hasOwnProperty(v)){let w=o[v];g.push(v+":"+("string"==typeof w?JSON.stringify(w):de(w)))}d=`{${g.join(", ")}}`}return`${a}${l?"("+l+")":""}[${d}]: ${s.replace(I,"\n  ")}`}("\n"+s.message,d,a,l),s.ngTokenPath=d,s[Ru]=null,s}(v,o,"R3InjectorError",this.source)}throw v}finally{Hn(g),Me(d)}}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(o=>this.get(o))}toString(){const o=[];return this.records.forEach((l,d)=>o.push(de(d))),`R3Injector[${o.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Ne(205,!1)}processInjectorType(o,a,l){if(!(o=Q(o)))return!1;let d=kr(o);const g=null==d&&o.ngModule||void 0,v=void 0===g?o:g,w=-1!==l.indexOf(v);if(void 0!==g&&(d=kr(g)),null==d)return!1;if(null!=d.imports&&!w){let x;l.push(v);try{pi(d.imports,P=>{this.processInjectorType(P,a,l)&&(void 0===x&&(x=[]),x.push(P))})}finally{}if(void 0!==x)for(let P=0;P<x.length;P++){const{ngModule:U,providers:K}=x[P];pi(K,me=>this.processProvider(me,U,K||ft))}}this.injectorDefTypes.add(v);const D=qr(v)||(()=>new v);this.records.set(v,ec(D,Fd));const A=d.providers;if(null!=A&&!w){const x=o;pi(A,P=>this.processProvider(P,x,A))}return void 0!==g&&void 0!==o.providers}processProvider(o,a,l){let d=tc(o=Q(o))?o:Q(o&&o.provide);const g=function KC(s,o,a){return iw(s)?ec(void 0,s.useValue):ec(kf(s),Fd)}(o);if(tc(o)||!0!==o.multi)this.records.get(d);else{let v=this.records.get(d);v||(v=ec(void 0,Fd,!0),v.factory=()=>Mt(v.multi),this.records.set(d,v)),d=o,v.multi.push(o)}this.records.set(d,g)}hydrate(o,a){return a.value===Fd&&(a.value=qC,a.value=a.factory()),"object"==typeof a.value&&a.value&&function QC(s){return null!==s&&"object"==typeof s&&"function"==typeof s.ngOnDestroy}(a.value)&&this.onDestroy.add(a.value),a.value}injectableDefInScope(o){if(!o.providedIn)return!1;const a=Q(o.providedIn);return"string"==typeof a?"any"===a||a===this.scope:this.injectorDefTypes.has(a)}}function jg(s){const o=Kt(s),a=null!==o?o.factory:qr(s);if(null!==a)return a;if(s instanceof En)throw new Ne(204,!1);if(s instanceof Function)return function WC(s){const o=s.length;if(o>0)throw Vi(o,"?"),new Ne(204,!1);const a=function ii(s){const o=s&&(s[zi]||s[us]);if(o){const a=function Rs(s){if(s.hasOwnProperty("name"))return s.name;const o=(""+s).match(/^function\s*([^\s(]+)/);return null===o?"":o[1]}(s);return console.warn(`DEPRECATED: DI is instantiating a token "${a}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${a}" class.`),o}return null}(s);return null!==a?()=>a.factory(s):()=>new s}(s);throw new Ne(204,!1)}function kf(s,o,a){let l;if(tc(s)){const d=Q(s);return qr(d)||jg(d)}if(iw(s))l=()=>Q(s.useValue);else if(function ZC(s){return!(!s||!s.useFactory)}(s))l=()=>s.useFactory(...Mt(s.deps||[]));else if(function sw(s){return!(!s||!s.useExisting)}(s))l=()=>nt(Q(s.useExisting));else{const d=Q(s&&(s.useClass||s.provide));if(!function ow(s){return!!s.deps}(s))return qr(d)||jg(d);l=()=>new d(...Mt(s.deps))}return l}function ec(s,o,a=!1){return{factory:s,value:o,multi:a?[]:void 0}}function iw(s){return null!==s&&"object"==typeof s&&W in s}function tc(s){return"function"==typeof s}let $a=(()=>{class s{static create(a,l){var d;if(Array.isArray(a))return rw({name:""},l,a,"");{const g=null!==(d=a.name)&&void 0!==d?d:"";return rw({name:g},a.parent,a.providers,g)}}}return s.THROW_IF_NOT_FOUND=Io,s.NULL=new Bg,s.\u0275prov=en({token:s,providedIn:"any",factory:()=>nt(nw)}),s.__NG_ELEMENT_ID__=-1,s})();function $g(s,o){ys(uf(s)[1],_n())}function hw(s){let o=function Hg(s){return Object.getPrototypeOf(s.prototype).constructor}(s.type),a=!0;const l=[s];for(;o;){let d;if(Gr(s))d=o.\u0275cmp||o.\u0275dir;else{if(o.\u0275cmp)throw new Ne(903,"");d=o.\u0275dir}if(d){if(a){l.push(d);const v=s;v.inputs=Gg(s.inputs),v.declaredInputs=Gg(s.declaredInputs),v.outputs=Gg(s.outputs);const w=d.hostBindings;w&&dI(s,w);const D=d.viewQuery,A=d.contentQueries;if(D&&cI(s,D),A&&Pf(s,A),ie(s.inputs,d.inputs),ie(s.declaredInputs,d.declaredInputs),ie(s.outputs,d.outputs),Gr(d)&&d.data.animation){const x=s.data;x.animation=(x.animation||[]).concat(d.data.animation)}}const g=d.features;if(g)for(let v=0;v<g.length;v++){const w=g[v];w&&w.ngInherit&&w(s),w===hw&&(a=!1)}}o=Object.getPrototypeOf(o)}!function Ha(s){let o=0,a=null;for(let l=s.length-1;l>=0;l--){const d=s[l];d.hostVars=o+=d.hostVars,d.hostAttrs=Fr(d.hostAttrs,a=Fr(a,d.hostAttrs))}}(l)}function Gg(s){return s===cr?{}:s===ft?[]:s}function cI(s,o){const a=s.viewQuery;s.viewQuery=a?(l,d)=>{o(l,d),a(l,d)}:o}function Pf(s,o){const a=s.contentQueries;s.contentQueries=a?(l,d,g)=>{o(l,d,g),a(l,d,g)}:o}function dI(s,o){const a=s.hostBindings;s.hostBindings=a?(l,d)=>{o(l,d),a(l,d)}:o}let Ff=null;function Ld(){if(!Ff){const s=Gt.Symbol;if(s&&s.iterator)Ff=s.iterator;else{const o=Object.getOwnPropertyNames(Map.prototype);for(let a=0;a<o.length;++a){const l=o[a];"entries"!==l&&"size"!==l&&Map.prototype[l]===Map.prototype.entries&&(Ff=l)}}}return Ff}function Lf(s){return!!pw(s)&&(Array.isArray(s)||!(s instanceof Map)&&Ld()in s)}function pw(s){return null!==s&&("function"==typeof s||"object"==typeof s)}function Ei(s,o,a){return!Object.is(s[o],a)&&(s[o]=a,!0)}function Q_(s,o,a,l){const d=De();return Ei(d,qs(),o)&&(Ut(),ha(Cn(),d,s,o,a,l)),Q_}function Ew(s,o,a,l,d,g,v,w){const D=De(),A=Ut(),x=s+20,P=A.firstCreatePass?function fI(s,o,a,l,d,g,v,w,D){const A=o.consts,x=Sd(o,s,4,v||null,zr(A,w));Od(o,a,x,zr(A,D)),ys(o,x);const P=x.tViews=Rd(2,x,l,d,g,o.directiveRegistry,o.pipeRegistry,null,o.schemas,A);return null!==o.queries&&(o.queries.template(o,x),P.queries=o.queries.embeddedTView(x)),x}(x,A,D,o,a,l,d,g,v):A.data[x];Wr(P,!1);const U=D[11].createComment("");bg(A,D,U,P),Br(U,D),Nf(D,D[x]=j_(U,D,U,P)),uu(P)&&Tf(A,D,P),null!=v&&Af(D,P,w)}function ww(s){return Ni(function ml(){return gt.lFrame.contextLView}(),20+s)}function Kd(s,o=ht.Default){const a=De();return null===a?nt(s,o):Zs(_n(),a,Q(s),o)}function Aw(){throw new Error("invalid")}function av(s,o,a){const l=De();return Ei(l,qs(),o)&&function vi(s,o,a,l,d,g,v,w){const D=Cr(o,a);let x,A=o.inputs;!w&&null!=A&&(x=A[l])?(ew(s,a,x,l,d),Fs(o)&&function HE(s,o){const a=Ir(o,s);16&a[2]||(a[2]|=64)}(a,o.index)):3&o.type&&(l=function $E(s){return"class"===s?"className":"for"===s?"htmlFor":"formaction"===s?"formAction":"innerHtml"===s?"innerHTML":"readonly"===s?"readOnly":"tabindex"===s?"tabIndex":s}(l),d=null!=v?v(d,o.value||"",l):d,mn(g)?g.setProperty(D,l,d):Kr(l)||(D.setProperty?D.setProperty(l,d):D[l]=d))}(Ut(),Cn(),l,s,o,l[11],a,!1),av}function uv(s,o,a,l,d){const v=d?"class":"style";ew(s,a,o.inputs[v],v,l)}function Xg(s,o,a,l){const d=De(),g=Ut(),v=20+s,w=d[11],D=d[v]=bd(w,o,function Oy(){return gt.lFrame.currentNamespace}()),A=g.firstCreatePass?function AI(s,o,a,l,d,g,v){const w=o.consts,A=Sd(o,s,2,d,zr(w,g));return Od(o,a,A,zr(w,v)),null!==A.attrs&&Vg(A,A.attrs,!1),null!==A.mergedAttrs&&Vg(A,A.mergedAttrs,!0),null!==o.queries&&o.queries.elementStart(o,A),A}(v,g,d,0,o,a,l):g.data[v];Wr(A,!0);const x=A.mergedAttrs;null!==x&&yt(w,D,x);const P=A.classes;null!==P&&Ef(w,D,P);const U=A.styles;return null!==U&&y_(w,D,U),64!=(64&A.flags)&&bg(g,d,D,A),0===function Ma(){return gt.lFrame.elementDepthCount}()&&Br(D,d),function vu(){gt.lFrame.elementDepthCount++}(),uu(A)&&(Tf(g,d,A),function O_(s,o,a){if(Vc(o)){const d=o.directiveEnd;for(let g=o.directiveStart;g<d;g++){const v=s.data[g];v.contentQueries&&v.contentQueries(1,a[g],g)}}}(g,A,d)),null!==l&&Af(d,A),Xg}function em(){let s=_n();pl()?gl():(s=s.parent,Wr(s,!1));const o=s;!function Eu(){gt.lFrame.elementDepthCount--}();const a=Ut();return a.firstCreatePass&&(ys(a,s),Vc(s)&&a.queries.elementEnd(s)),null!=o.classesWithoutHost&&function jh(s){return 0!=(16&s.flags)}(o)&&uv(a,o,De(),o.classesWithoutHost,!0),null!=o.stylesWithoutHost&&function eg(s){return 0!=(32&s.flags)}(o)&&uv(a,o,De(),o.stylesWithoutHost,!1),em}function lv(s,o,a,l){return Xg(s,o,a,l),em(),lv}function Mw(){return De()}function ac(s){return!!s&&"function"==typeof s.then}function xw(s){return!!s&&"function"==typeof s.subscribe}const cv=xw;function Rw(s,o,a,l){const d=De(),g=Ut(),v=_n();return function Nw(s,o,a,l,d,g,v,w){const D=uu(l),x=s.firstCreatePass&&Lg(s),P=o[8],U=JE(o);let K=!0;if(3&l.type||w){const Ve=Cr(l,o),st=w?w(Ve):Ve,Ce=U.length,Je=w?zt=>w(cn(zt[l.index])):l.index;if(mn(a)){let zt=null;if(!w&&D&&(zt=function nm(s,o,a,l){const d=s.cleanup;if(null!=d)for(let g=0;g<d.length-1;g+=2){const v=d[g];if(v===a&&d[g+1]===l){const w=o[7],D=d[g+2];return w.length>D?w[D]:null}"string"==typeof v&&(g+=2)}return null}(s,o,d,l.index)),null!==zt)(zt.__ngLastListenerFn__||zt).__ngNextListenerFn__=g,zt.__ngLastListenerFn__=g,K=!1;else{g=Ow(l,o,P,g,!1);const dn=a.listen(st,d,g);U.push(g,dn),x&&x.push(d,Je,Ce,Ce+1)}}else g=Ow(l,o,P,g,!0),st.addEventListener(d,g,v),U.push(g),x&&x.push(d,Je,Ce,v)}else g=Ow(l,o,P,g,!1);const me=l.outputs;let Pe;if(K&&null!==me&&(Pe=me[d])){const Ve=Pe.length;if(Ve)for(let st=0;st<Ve;st+=2){const ni=o[Pe[st]][Pe[st+1]].subscribe(g),Ii=U.length;U.push(g,ni),x&&x.push(d,l.index,Ii,-(Ii+1))}}}(g,d,d[11],v,s,o,!!a,l),Rw}function Hi(s,o,a,l){try{return!1!==a(l)}catch(d){return z_(s,d),!1}}function Ow(s,o,a,l,d){return function g(v){if(v===Function)return l;const w=2&s.flags?Ir(s.index,o):o;0==(32&o[2])&&Of(w);let D=Hi(o,0,l,v),A=g.__ngNextListenerFn__;for(;A;)D=Hi(o,0,A,v)&&D,A=A.__ngNextListenerFn__;return d&&!1===D&&(v.preventDefault(),v.returnValue=!1),D}}function Hf(s=1){return function zs(s){return(gt.lFrame.contextLView=function bl(s,o){for(;s>0;)o=o[15],s--;return o}(s,gt.lFrame.contextLView))[8]}(s)}function hv(s,o){let a=null;const l=function Cg(s){const o=s.attrs;if(null!=o){const a=o.indexOf(5);if(0==(1&a))return o[a+1]}return null}(s);for(let d=0;d<o.length;d++){const g=o[d];if("*"!==g){if(null===l?IE(s,g,!0):_i(l,g))return d}else a=d}return a}function kw(s){const o=De()[16][6];if(!o.projection){const l=o.projection=Vi(s?s.length:1,null),d=l.slice();let g=o.child;for(;null!==g;){const v=s?hv(g,s):0;null!==v&&(d[v]?d[v].projectionNext=g:l[v]=g,d[v]=g),g=g.next}}}function Pw(s,o=0,a){const l=De(),d=Ut(),g=Sd(d,20+s,16,null,a||null);null===g.projection&&(g.projection=o),gl(),64!=(64&g.flags)&&function bC(s,o,a){DE(o[11],0,o,a,wg(s,a,o),vE(a.parent||o[6],a,o))}(d,l,g)}function pv(s,o,a,l,d){const g=s[a+1],v=null===o;let w=l?no(g):da(g),D=!1;for(;0!==w&&(!1===D||v);){const x=s[w+1];im(s[w],o)&&(D=!0,s[w+1]=l?I_(x):Tg(x)),w=l?no(x):da(x)}D&&(s[a+1]=l?Tg(g):I_(g))}function im(s,o){return null===s||null==o||(Array.isArray(s)?s[1]:s)===o||!(!Array.isArray(s)||"string"!=typeof o)&&Xs(s,o)>=0}const Ur={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function NI(s){return s.substring(Ur.key,Ur.keyEnd)}function OI(s,o){const a=Ur.textEnd;return a===o?-1:(o=Ur.keyEnd=function qf(s,o,a){for(;o<a&&s.charCodeAt(o)>32;)o++;return o}(s,Ur.key=o,a),uc(s,o,a))}function uc(s,o,a){for(;o<a&&s.charCodeAt(o)<=32;)o++;return o}function Ga(s,o){return function Lo(s,o,a,l){const d=De(),g=Ut(),v=Oi(2);g.firstUpdatePass&&$w(g,s,v,l),o!==Nt&&Ei(d,v,o)&&qw(g,g.data[Tr()],d,d[11],s,d[v+1]=function _v(s,o){return null==s||("string"==typeof o?s+=o:"object"==typeof s&&(s=de(eo(s)))),s}(o,a),l,v)}(s,o,null,!0),Ga}function mv(s){!function Vo(s,o,a,l){const d=Ut(),g=Oi(2);d.firstUpdatePass&&$w(d,null,g,l);const v=De();if(a!==Nt&&Ei(v,g,a)){const w=d.data[Tr()];if(Ww(w,l)&&!jw(d,g)){let D=l?w.classesWithoutHost:w.stylesWithoutHost;null!==D&&(a=le(D,a||"")),uv(d,w,v,a,l)}else!function $I(s,o,a,l,d,g,v,w){d===Nt&&(d=ft);let D=0,A=0,x=0<d.length?d[0]:null,P=0<g.length?g[0]:null;for(;null!==x||null!==P;){const U=D<d.length?d[D+1]:void 0,K=A<g.length?g[A+1]:void 0;let Pe,me=null;x===P?(D+=2,A+=2,U!==K&&(me=P,Pe=K)):null===P||null!==x&&x<P?(D+=2,me=x):(A+=2,me=P,Pe=K),null!==me&&qw(s,o,a,l,me,Pe,v,w),x=D<d.length?d[D]:null,P=A<g.length?g[A]:null}}(d,w,v,v[11],v[g+1],v[g+1]=function Hw(s,o,a){if(null==a||""===a)return ft;const l=[],d=eo(a);if(Array.isArray(d))for(let g=0;g<d.length;g++)s(l,d[g],!0);else if("object"==typeof d)for(const g in d)d.hasOwnProperty(g)&&s(l,g,d[g]);else"string"==typeof d&&o(l,d);return l}(s,o,a),l,g)}}(qn,ma,s,!0)}function ma(s,o){for(let a=function XM(s){return function PI(s){Ur.key=0,Ur.keyEnd=0,Ur.value=0,Ur.valueEnd=0,Ur.textEnd=s.length}(s),OI(s,uc(s,0,Ur.textEnd))}(o);a>=0;a=OI(o,a))qn(s,NI(o),!0)}function jw(s,o){return o>=s.expandoStartIndex}function $w(s,o,a,l){const d=s.data;if(null===d[a+1]){const g=d[Tr()],v=jw(s,a);Ww(g,l)&&null===o&&!v&&(o=!1),o=function VI(s,o,a,l){const d=function Zo(s){const o=gt.lFrame.currentDirectiveIndex;return-1===o?null:s[o]}(s);let g=l?o.residualClasses:o.residualStyles;if(null===d)0===(l?o.classBindings:o.styleBindings)&&(a=zf(a=yv(null,s,o,a,l),o.attrs,l),g=null);else{const v=o.directiveStylingLast;if(-1===v||s[v]!==d)if(a=yv(d,s,o,a,l),null===g){let D=function BI(s,o,a){const l=a?o.classBindings:o.styleBindings;if(0!==da(l))return s[no(l)]}(s,o,l);void 0!==D&&Array.isArray(D)&&(D=yv(null,s,o,D[1],l),D=zf(D,o.attrs,l),function UI(s,o,a,l){s[no(a?o.classBindings:o.styleBindings)]=l}(s,o,l,D))}else g=function jI(s,o,a){let l;const d=o.directiveEnd;for(let g=1+o.directiveStylingLast;g<d;g++)l=zf(l,s[g].hostAttrs,a);return zf(l,o.attrs,a)}(s,o,l)}return void 0!==g&&(l?o.residualClasses=g:o.residualStyles=g),a}(d,g,o,l),function RI(s,o,a,l,d,g){let v=g?o.classBindings:o.styleBindings,w=no(v),D=da(v);s[l]=a;let x,A=!1;if(Array.isArray(a)){const P=a;x=P[1],(null===x||Xs(P,x)>0)&&(A=!0)}else x=a;if(d)if(0!==D){const U=no(s[w+1]);s[l+1]=wf(U,w),0!==U&&(s[U+1]=Ag(s[U+1],l)),s[w+1]=function Ig(s,o){return 131071&s|o<<17}(s[w+1],l)}else s[l+1]=wf(w,0),0!==w&&(s[w+1]=Ag(s[w+1],l)),w=l;else s[l+1]=wf(D,0),0===w?w=l:s[D+1]=Ag(s[D+1],l),D=l;A&&(s[l+1]=Tg(s[l+1])),pv(s,x,l,!0),pv(s,x,l,!1),function QM(s,o,a,l,d){const g=d?s.residualClasses:s.residualStyles;null!=g&&"string"==typeof o&&Xs(g,o)>=0&&(a[l+1]=I_(a[l+1]))}(o,x,s,l,g),v=wf(w,D),g?o.classBindings=v:o.styleBindings=v}(d,g,o,a,v,l)}}function yv(s,o,a,l,d){let g=null;const v=a.directiveEnd;let w=a.directiveStylingLast;for(-1===w?w=a.directiveStart:w++;w<v&&(g=o[w],l=zf(l,g.hostAttrs,d),g!==s);)w++;return null!==s&&(a.directiveStylingLast=w),l}function zf(s,o,a){const l=a?1:2;let d=-1;if(null!==o)for(let g=0;g<o.length;g++){const v=o[g];"number"==typeof v?d=v:d===l&&(Array.isArray(s)||(s=void 0===s?[]:["",s]),qn(s,v,!!a||o[++g]))}return void 0===s?null:s}function qw(s,o,a,l,d,g,v,w){if(!(3&o.type))return;const D=s.data,A=D[w+1];pr(function C_(s){return 1==(1&s)}(A)?zw(D,o,a,d,da(A),v):void 0)||(pr(g)||function D_(s){return 2==(2&s)}(A)&&(g=zw(D,null,a,d,w,v)),function CC(s,o,a,l,d){const g=mn(s);if(o)d?g?s.addClass(a,l):a.classList.add(l):g?s.removeClass(a,l):a.classList.remove(l);else{let v=-1===l.indexOf("-")?void 0:se.DashCase;if(null==d)g?s.removeStyle(a,l,v):a.style.removeProperty(l);else{const w="string"==typeof d&&d.endsWith("!important");w&&(d=d.slice(0,-10),v|=se.Important),g?s.setStyle(a,l,d,v):a.style.setProperty(l,d,w?"important":"")}}}(l,v,mo(Tr(),a),d,g))}function zw(s,o,a,l,d,g){const v=null===o;let w;for(;d>0;){const D=s[d],A=Array.isArray(D),x=A?D[1]:D,P=null===x;let U=a[d+1];U===Nt&&(U=P?ft:void 0);let K=P?Fl(U,l):x===l?U:void 0;if(A&&!pr(K)&&(K=Fl(D,l)),pr(K)&&(w=K,v))return w;const me=s[d+1];d=v?no(me):da(me)}if(null!==o){let D=g?o.residualClasses:o.residualStyles;null!=D&&(w=Fl(D,l))}return w}function pr(s){return void 0!==s}function Ww(s,o){return 0!=(s.flags&(o?16:32))}function Kw(s,o=""){const a=De(),l=Ut(),d=s+20,g=l.firstCreatePass?Sd(l,d,1,o,null):l.data[d],v=a[d]=function Ed(s,o){return mn(s)?s.createText(o):s.createTextNode(o)}(a[11],o);bg(l,a,v,g),Wr(g,!1)}function Cs(s){return vv("",s,""),Cs}function vv(s,o,a){const l=De(),d=function rc(s,o,a,l){return Ei(s,qs(),a)?o+he(a)+l:Nt}(l,s,o,a);return d!==Nt&&Po(l,Tr(),d),vv}const za=void 0;var eb=["en",[["a","p"],["AM","PM"],za],[["AM","PM"],za,za],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],za,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],za,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",za,"{1} 'at' {0}",za],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function Xw(s){const a=Math.floor(Math.abs(s)),l=s.toString().replace(/^[^.]*\.?/,"").length;return 1===a&&0===l?1:5}];let lc={};function Sv(s){const o=function ZI(s){return s.toLowerCase().replace(/_/g,"-")}(s);let a=Mv(o);if(a)return a;const l=o.split("-")[0];if(a=Mv(l),a)return a;if("en"===l)return eb;throw new Error(`Missing locale data for the locale "${s}".`)}function cc(s){return Sv(s)[wt.PluralCase]}function Mv(s){return s in lc||(lc[s]=Gt.ng&&Gt.ng.common&&Gt.ng.common.locales&&Gt.ng.common.locales[s]),lc[s]}var wt=(()=>((wt=wt||{})[wt.LocaleId=0]="LocaleId",wt[wt.DayPeriodsFormat=1]="DayPeriodsFormat",wt[wt.DayPeriodsStandalone=2]="DayPeriodsStandalone",wt[wt.DaysFormat=3]="DaysFormat",wt[wt.DaysStandalone=4]="DaysStandalone",wt[wt.MonthsFormat=5]="MonthsFormat",wt[wt.MonthsStandalone=6]="MonthsStandalone",wt[wt.Eras=7]="Eras",wt[wt.FirstDayOfWeek=8]="FirstDayOfWeek",wt[wt.WeekendRange=9]="WeekendRange",wt[wt.DateFormat=10]="DateFormat",wt[wt.TimeFormat=11]="TimeFormat",wt[wt.DateTimeFormat=12]="DateTimeFormat",wt[wt.NumberSymbols=13]="NumberSymbols",wt[wt.NumberFormats=14]="NumberFormats",wt[wt.CurrencyCode=15]="CurrencyCode",wt[wt.CurrencySymbol=16]="CurrencySymbol",wt[wt.CurrencyName=17]="CurrencyName",wt[wt.Currencies=18]="Currencies",wt[wt.Directionality=19]="Directionality",wt[wt.PluralCase=20]="PluralCase",wt[wt.ExtraData=21]="ExtraData",wt))();const Qd="en-US";let Rv=Qd;function bm(s,o,a,l,d){if(s=Q(s),Array.isArray(s))for(let g=0;g<s.length;g++)bm(s[g],o,a,l,d);else{const g=Ut(),v=De();let w=tc(s)?s:Q(s.provide),D=kf(s);const A=_n(),x=1048575&A.providerIndexes,P=A.directiveStart,U=A.providerIndexes>>20;if(tc(s)||!s.multi){const K=new Yo(D,d,Kd),me=Dm(w,o,d?x:x+U,P);-1===me?(Ks(Bn(A,v),g,w),Jv(g,s,o.length),o.push(w),A.directiveStart++,A.directiveEnd++,d&&(A.providerIndexes+=1048576),a.push(K),v.push(K)):(a[me]=K,v[me]=K)}else{const K=Dm(w,o,x+U,P),me=Dm(w,o,x,x+U),Pe=K>=0&&a[K],Ve=me>=0&&a[me];if(d&&!Ve||!d&&!Pe){Ks(Bn(A,v),g,w);const st=function Xv(s,o,a,l,d){const g=new Yo(s,a,Kd);return g.multi=[],g.index=o,g.componentProviders=0,ah(g,d,l&&!a),g}(d?ep:Cm,a.length,d,l,D);!d&&Ve&&(a[me].providerFactory=st),Jv(g,s,o.length,0),o.push(w),A.directiveStart++,A.directiveEnd++,d&&(A.providerIndexes+=1048576),a.push(st),v.push(st)}else Jv(g,s,K>-1?K:me,ah(a[d?me:K],D,!d&&l));!d&&l&&Ve&&a[me].componentProviders++}}}function Jv(s,o,a,l){const d=tc(o),g=function YC(s){return!!s.useClass}(o);if(d||g){const D=(g?Q(o.useClass):o).prototype.ngOnDestroy;if(D){const A=s.destroyHooks||(s.destroyHooks=[]);if(!d&&o.multi){const x=A.indexOf(a);-1===x?A.push(a,[l,D]):A[x+1].push(l,D)}else A.push(a,D)}}}function ah(s,o,a){return a&&s.componentProviders++,s.multi.push(o)-1}function Dm(s,o,a,l){for(let d=a;d<l;d++)if(o[d]===s)return d;return-1}function Cm(s,o,a,l){return Wa(this.multi,[])}function ep(s,o,a,l){const d=this.multi;let g;if(this.providerFactory){const v=this.providerFactory.componentProviders,w=Pi(a,a[1],this.providerFactory.index,l);g=w.slice(0,v),Wa(d,g);for(let D=v;D<w.length;D++)g.push(w[D])}else g=[],Wa(d,g);return g}function Wa(s,o){for(let a=0;a<s.length;a++)o.push((0,s[a])());return o}function Eb(s,o=[]){return a=>{a.providersResolver=(l,d)=>function vb(s,o,a){const l=Ut();if(l.firstCreatePass){const d=Gr(s);bm(a,l.data,l.blueprint,d,!0),bm(o,l.data,l.blueprint,d,!1)}}(l,d?d(s):s,o)}}class mc{}class lT{resolveComponentFactory(o){throw function t0(s){const o=Error(`No component factory found for ${de(s)}. Did you add it to @NgModule.entryComponents?`);return o.ngComponent=s,o}(o)}}let _a=(()=>{class s{}return s.NULL=new lT,s})();function Ka(){return Za(_n(),De())}function Za(s,o){return new zu(Cr(s,o))}let zu=(()=>{class s{constructor(a){this.nativeElement=a}}return s.__NG_ELEMENT_ID__=Ka,s})();function Im(s){return s instanceof zu?s.nativeElement:s}class An{}let Tm=(()=>{class s{}return s.__NG_ELEMENT_ID__=()=>function hT(){const s=De(),a=Ir(_n().index,s);return function dT(s){return s[11]}(Ri(a)?a:s)}(),s})(),tp=(()=>{class s{}return s.\u0275prov=en({token:s,providedIn:"root",factory:()=>null}),s})();class uh{constructor(o){this.full=o,this.major=o.split(".")[0],this.minor=o.split(".")[1],this.patch=o.split(".").slice(2).join(".")}}const wb=new uh("13.3.6"),Am={};function Sm(s,o,a,l,d=!1){for(;null!==a;){const g=o[a.index];if(null!==g&&l.push(cn(g)),ui(g))for(let w=10;w<g.length;w++){const D=g[w],A=D[1].firstChild;null!==A&&Sm(D[1],D,A,l)}const v=a.type;if(8&v)Sm(s,o,a.child,l);else if(32&v){const w=rt(a,o);let D;for(;D=w();)l.push(D)}else if(16&v){const w=bE(o,a);if(Array.isArray(w))l.push(...w);else{const D=Tn(o[16]);Sm(D[1],D,w,l,!0)}}a=d?a.projectionNext:a.next}return l}class np{constructor(o,a){this._lView=o,this._cdRefInjectingView=a,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const o=this._lView,a=o[1];return Sm(a,o,a.firstChild,[])}get context(){return this._lView[8]}set context(o){this._lView[8]=o}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const o=this._lView[3];if(ui(o)){const a=o[8],l=a?a.indexOf(this):-1;l>-1&&(u_(o,l),ws(a,l))}this._attachedToViewContainer=!1}l_(this._lView[1],this._lView)}onDestroy(o){jE(this._lView[1],this._lView,null,o)}markForCheck(){Of(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){H_(this._lView[1],this._lView,this.context)}checkNoChanges(){!function HC(s,o,a){Gs(!0);try{H_(s,o,a)}finally{Gs(!1)}}(this._lView[1],this._lView,this.context)}attachToViewContainerRef(){if(this._appRef)throw new Ne(902,"");this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function Eg(s,o){Dg(s,o,o[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(o){if(this._attachedToViewContainer)throw new Ne(902,"");this._appRef=o}}class fT extends np{constructor(o){super(o),this._view=o}detectChanges(){Pd(this._view)}checkNoChanges(){!function G_(s){Gs(!0);try{Pd(s)}finally{Gs(!1)}}(this._view)}get context(){return null}}class bb extends _a{constructor(o){super(),this.ngModule=o}resolveComponentFactory(o){const a=Yt(o);return new Mm(a,this.ngModule)}}function lh(s){const o=[];for(let a in s)s.hasOwnProperty(a)&&o.push({propName:s[a],templateName:a});return o}class Mm extends mc{constructor(o,a){super(),this.componentDef=o,this.ngModule=a,this.componentType=o.type,this.selector=function xM(s){return s.map(AC).join(",")}(o.selectors),this.ngContentSelectors=o.ngContentSelectors?o.ngContentSelectors:[],this.isBoundToModule=!!a}get inputs(){return lh(this.componentDef.inputs)}get outputs(){return lh(this.componentDef.outputs)}create(o,a,l,d){const g=(d=d||this.ngModule)?function Db(s,o){return{get:(a,l,d)=>{const g=s.get(a,Am,d);return g!==Am||l===Am?g:o.get(a,l,d)}}}(o,d.injector):o,v=g.get(An,zo),w=g.get(tp,null),D=v.createRenderer(null,this.componentDef),A=this.componentDef.selectors[0][0]||"div",x=l?function Nd(s,o,a){if(mn(s))return s.selectRootElement(o,a===Zt.ShadowDom);let l="string"==typeof o?s.querySelector(o):o;return l.textContent="",l}(D,l,this.componentDef.encapsulation):bd(v.createRenderer(null,this.componentDef),A,function Wu(s){const o=s.toLowerCase();return"svg"===o?"svg":"math"===o?"math":null}(A)),P=this.componentDef.onPush?576:528,U=function lI(s,o){return{components:[],scheduler:s||s_,clean:QE,playerHandler:o||null,flags:0}}(),K=Rd(0,null,null,1,0,null,null,null,null,null),me=Ad(null,K,U,P,null,null,v,D,w,g);let Pe,Ve;yo(me);try{const st=function aI(s,o,a,l,d,g){const v=a[1];a[20]=s;const D=Sd(v,20,2,"#host",null),A=D.mergedAttrs=o.hostAttrs;null!==A&&(Vg(D,A,!0),null!==s&&(yt(d,s,A),null!==D.classes&&Ef(d,s,D.classes),null!==D.styles&&y_(d,s,D.styles)));const x=l.createRenderer(s,o),P=Ad(a,OC(o),null,o.onPush?64:16,a[20],D,l,x,g||null,null);return v.firstCreatePass&&(Ks(Bn(D,a),v,o.type),VC(v,D),BC(D,a.length,1)),Nf(a,P),a[20]=P}(x,this.componentDef,me,v,D);if(x)if(l)yt(D,x,["ng-version",wb.full]);else{const{attrs:Ce,classes:Je}=function AE(s){const o=[],a=[];let l=1,d=2;for(;l<s.length;){let g=s[l];if("string"==typeof g)2===d?""!==g&&o.push(g,s[++l]):8===d&&a.push(g);else{if(!Oo(d))break;d=g}l++}return{attrs:o,classes:a}}(this.componentDef.selectors[0]);Ce&&yt(D,x,Ce),Je&&Je.length>0&&Ef(D,x,Je.join(" "))}if(Ve=Sa(K,20),void 0!==a){const Ce=Ve.projection=[];for(let Je=0;Je<this.ngContentSelectors.length;Je++){const zt=a[Je];Ce.push(null!=zt?Array.from(zt):null)}}Pe=function uI(s,o,a,l,d){const g=a[1],v=function B_(s,o,a){const l=_n();s.firstCreatePass&&(a.providersResolver&&a.providersResolver(a),qE(s,l,o,Md(s,o,1,null),a));const d=Pi(o,s,l.directiveStart,l);Br(d,o);const g=Cr(l,o);return g&&Br(g,o),d}(g,a,o);if(l.components.push(v),s[8]=v,d&&d.forEach(D=>D(v,o)),o.contentQueries){const D=_n();o.contentQueries(1,v,D.directiveStart)}const w=_n();return!g.firstCreatePass||null===o.hostBindings&&null===o.hostAttrs||(Ws(w.index),kd(a[1],w,0,w.directiveStart,w.directiveEnd,o),kg(o,v)),v}(st,this.componentDef,me,U,[$g]),xd(K,me,null)}finally{vo()}return new pT(this.componentType,Pe,Za(Ve,me),me,Ve)}}class pT extends class e0{}{constructor(o,a,l,d,g){super(),this.location=l,this._rootLView=d,this._tNode=g,this.instance=a,this.hostView=this.changeDetectorRef=new fT(d),this.componentType=o}get injector(){return new Fi(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(o){this.hostView.onDestroy(o)}}class yc{}class Ib{}const _c=new Map;class Ab extends yc{constructor(o,a){super(),this._parent=a,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new bb(this);const l=fn(o);this._bootstrapComponents=m(l.bootstrap),this._r3Injector=K_(o,a,[{provide:yc,useValue:this},{provide:_a,useValue:this.componentFactoryResolver}],de(o)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(o)}get(o,a=$a.THROW_IF_NOT_FOUND,l=ht.Default){return o===$a||o===yc||o===nw?this:this._r3Injector.get(o,a,l)}destroy(){const o=this._r3Injector;!o.destroyed&&o.destroy(),this.destroyCbs.forEach(a=>a()),this.destroyCbs=null}onDestroy(o){this.destroyCbs.push(o)}}class s0 extends Ib{constructor(o){super(),this.moduleType=o,null!==fn(o)&&function n0(s){const o=new Set;!function a(l){const d=fn(l,!0),g=d.id;null!==g&&(function xm(s,o,a){if(o&&o!==a)throw new Error(`Duplicate module registered for ${s} - ${de(o)} vs ${de(o.name)}`)}(g,_c.get(g),l),_c.set(g,l));const v=m(d.imports);for(const w of v)o.has(w)||(o.add(w),a(w))}(s)}(o)}create(o){return new Ab(this.moduleType,o)}}function ip(s,o,a,l){return Mb(De(),fr(),s,o,a,l)}function Mb(s,o,a,l,d,g){const v=o+a;return Ei(s,v,d)?function Fo(s,o,a){return s[o]=a}(s,v+1,g?l.call(g,d):l(d)):function ch(s,o){const a=s[o];return a===Nt?void 0:a}(s,v+1)}function u0(s,o){const a=Ut();let l;const d=s+20;a.firstCreatePass?(l=function Ob(s,o){if(o)for(let a=o.length-1;a>=0;a--){const l=o[a];if(s===l.name)return l}}(o,a.pipeRegistry),a.data[d]=l,l.onDestroy&&(a.destroyHooks||(a.destroyHooks=[])).push(d,l.onDestroy)):l=a.data[d];const g=l.factory||(l.factory=qr(l.type)),v=Hn(Kd);try{const w=di(!1),D=g();return di(w),function pI(s,o,a,l){a>=s.data.length&&(s.data[a]=null,s.blueprint[a]=null),o[a]=l}(a,De(),d,D),D}finally{Hn(v)}}function up(s,o,a){const l=s+20,d=De(),g=Ni(d,l);return function vc(s,o){return s[1].data[o].pure}(d,l)?Mb(d,fr(),o,g.transform,a,g):g.transform(a)}function Nm(s){return o=>{setTimeout(s,void 0,o)}}const so=class lp extends f.x{constructor(o=!1){super(),this.__isAsync=o}emit(o){super.next(o)}subscribe(o,a,l){var d,g,v;let w=o,D=a||(()=>null),A=l;if(o&&"object"==typeof o){const P=o;w=null===(d=P.next)||void 0===d?void 0:d.bind(P),D=null===(g=P.error)||void 0===g?void 0:g.bind(P),A=null===(v=P.complete)||void 0===v?void 0:v.bind(P)}this.__isAsync&&(D=Nm(D),w&&(w=Nm(w)),A&&(A=Nm(A)));const x=super.subscribe({next:w,error:D,complete:A});return o instanceof Z.w0&&o.add(x),x}};function Om(){return this._results[Ld()]()}class km{constructor(o=!1){this._emitDistinctChangesOnly=o,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const a=Ld(),l=km.prototype;l[a]||(l[a]=Om)}get changes(){return this._changes||(this._changes=new so)}get(o){return this._results[o]}map(o){return this._results.map(o)}filter(o){return this._results.filter(o)}find(o){return this._results.find(o)}reduce(o,a){return this._results.reduce(o,a)}forEach(o){this._results.forEach(o)}some(o){return this._results.some(o)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(o,a){const l=this;l.dirty=!1;const d=Sr(o);(this._changesDetected=!function Rl(s,o,a){if(s.length!==o.length)return!1;for(let l=0;l<s.length;l++){let d=s[l],g=o[l];if(a&&(d=a(d),g=a(g)),g!==d)return!1}return!0}(l._results,d,a))&&(l._results=d,l.length=d.length,l.last=d[this.length-1],l.first=d[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}Symbol;let Ec=(()=>{class s{}return s.__NG_ELEMENT_ID__=Fb,s})();const Pm=Ec,wT=class extends Pm{constructor(o,a,l){super(),this._declarationLView=o,this._declarationTContainer=a,this.elementRef=l}createEmbeddedView(o){const a=this._declarationTContainer.tViews,l=Ad(this._declarationLView,a,o,16,null,a.declTNode,null,null,null,null);l[17]=this._declarationLView[this._declarationTContainer.index];const g=this._declarationLView[19];return null!==g&&(l[19]=g.createEmbeddedView(a)),xd(a,l,o),new np(l)}};function Fb(){return Ku(_n(),De())}function Ku(s,o){return 4&s.type?new wT(o,s,Za(s,o)):null}let cp=(()=>{class s{}return s.__NG_ELEMENT_ID__=Lb,s})();function Lb(){return d0(_n(),De())}const l0=cp,Fm=class extends l0{constructor(o,a,l){super(),this._lContainer=o,this._hostTNode=a,this._hostLView=l}get element(){return Za(this._hostTNode,this._hostLView)}get injector(){return new Fi(this._hostTNode,this._hostLView)}get parentInjector(){const o=hi(this._hostTNode,this._hostLView);if(td(o)){const a=ki(o,this._hostLView),l=gn(o);return new Fi(a[1].data[l+8],a)}return new Fi(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(o){const a=c0(this._lContainer);return null!==a&&a[o]||null}get length(){return this._lContainer.length-10}createEmbeddedView(o,a,l){const d=o.createEmbeddedView(a||{});return this.insert(d,l),d}createComponent(o,a,l,d,g){const v=o&&!function na(s){return"function"==typeof s}(o);let w;if(v)w=a;else{const P=a||{};w=P.index,l=P.injector,d=P.projectableNodes,g=P.ngModuleRef}const D=v?o:new Mm(Yt(o)),A=l||this.parentInjector;if(!g&&null==D.ngModule){const U=(v?A:this.parentInjector).get(yc,null);U&&(g=U)}const x=D.create(A,d,void 0,g);return this.insert(x.hostView,w),x}insert(o,a){const l=o._lView,d=l[1];if(function yu(s){return ui(s[3])}(l)){const x=this.indexOf(o);if(-1!==x)this.detach(x);else{const P=l[3],U=new Fm(P,P[6],P[3]);U.detach(U.indexOf(o))}}const g=this._adjustIndex(a),v=this._lContainer;!function a_(s,o,a,l){const d=10+l,g=a.length;l>0&&(a[d-1][4]=o),l<g-10?(o[4]=a[d],Nl(a,10+l,o)):(a.push(o),o[4]=null),o[3]=a;const v=o[17];null!==v&&a!==v&&function Dd(s,o){const a=s[9];o[16]!==o[3][3][16]&&(s[2]=!0),null===a?s[9]=[o]:a.push(o)}(v,o);const w=o[19];null!==w&&w.insertView(s),o[2]|=128}(d,l,v,g);const w=p_(g,v),D=l[11],A=ca(D,v[7]);return null!==A&&function _f(s,o,a,l,d,g){l[0]=d,l[6]=o,Dg(s,l,a,1,d,g)}(d,v[6],D,l,A,w),o.attachToViewContainerRef(),Nl(dh(v),g,o),o}move(o,a){return this.insert(o,a)}indexOf(o){const a=c0(this._lContainer);return null!==a?a.indexOf(o):-1}remove(o){const a=this._adjustIndex(o,-1),l=u_(this._lContainer,a);l&&(ws(dh(this._lContainer),a),l_(l[1],l))}detach(o){const a=this._adjustIndex(o,-1),l=u_(this._lContainer,a);return l&&null!=ws(dh(this._lContainer),a)?new np(l):null}_adjustIndex(o,a=0){return null==o?this.length+a:o}};function c0(s){return s[8]}function dh(s){return s[8]||(s[8]=[])}function d0(s,o){let a;const l=o[s.index];if(ui(l))a=l;else{let d;if(8&s.type)d=cn(l);else{const g=o[11];d=g.createComment("");const v=Cr(s,o);Ds(g,ca(g,v),d,function wC(s,o){return mn(s)?s.nextSibling(o):o.nextSibling}(g,v),!1)}o[s.index]=a=j_(l,o,d,s),Nf(o,a)}return new Fm(a,s,o)}class Lm{constructor(o){this.queryList=o,this.matches=null}clone(){return new Lm(this.queryList)}setDirty(){this.queryList.setDirty()}}class Vm{constructor(o=[]){this.queries=o}createEmbeddedView(o){const a=o.queries;if(null!==a){const l=null!==o.contentQueries?o.contentQueries[0]:a.length,d=[];for(let g=0;g<l;g++){const v=a.getByIndex(g);d.push(this.queries[v.indexInDeclarationView].clone())}return new Vm(d)}return null}insertView(o){this.dirtyQueriesWithMatches(o)}detachView(o){this.dirtyQueriesWithMatches(o)}dirtyQueriesWithMatches(o){for(let a=0;a<this.queries.length;a++)null!==bc(o,a).matches&&this.queries[a].setDirty()}}class h0{constructor(o,a,l=null){this.predicate=o,this.flags=a,this.read=l}}class hh{constructor(o=[]){this.queries=o}elementStart(o,a){for(let l=0;l<this.queries.length;l++)this.queries[l].elementStart(o,a)}elementEnd(o){for(let a=0;a<this.queries.length;a++)this.queries[a].elementEnd(o)}embeddedTView(o){let a=null;for(let l=0;l<this.length;l++){const d=null!==a?a.length:0,g=this.getByIndex(l).embeddedTView(o,d);g&&(g.indexInDeclarationView=l,null!==a?a.push(g):a=[g])}return null!==a?new hh(a):null}template(o,a){for(let l=0;l<this.queries.length;l++)this.queries[l].template(o,a)}getByIndex(o){return this.queries[o]}get length(){return this.queries.length}track(o){this.queries.push(o)}}class qi{constructor(o,a=-1){this.metadata=o,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=a}elementStart(o,a){this.isApplyingToNode(a)&&this.matchTNode(o,a)}elementEnd(o){this._declarationNodeIndex===o.index&&(this._appliesToNextNode=!1)}template(o,a){this.elementStart(o,a)}embeddedTView(o,a){return this.isApplyingToNode(o)?(this.crossesNgTemplate=!0,this.addMatch(-o.index,a),new qi(this.metadata)):null}isApplyingToNode(o){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const a=this._declarationNodeIndex;let l=o.parent;for(;null!==l&&8&l.type&&l.index!==a;)l=l.parent;return a===(null!==l?l.index:-1)}return this._appliesToNextNode}matchTNode(o,a){const l=this.metadata.predicate;if(Array.isArray(l))for(let d=0;d<l.length;d++){const g=l[d];this.matchTNodeWithReadOption(o,a,Bb(a,g)),this.matchTNodeWithReadOption(o,a,bo(a,o,g,!1,!1))}else l===Ec?4&a.type&&this.matchTNodeWithReadOption(o,a,-1):this.matchTNodeWithReadOption(o,a,bo(a,o,l,!1,!1))}matchTNodeWithReadOption(o,a,l){if(null!==l){const d=this.metadata.read;if(null!==d)if(d===zu||d===cp||d===Ec&&4&a.type)this.addMatch(a.index,-2);else{const g=bo(a,o,d,!1,!1);null!==g&&this.addMatch(a.index,g)}else this.addMatch(a.index,l)}}addMatch(o,a){null===this.matches?this.matches=[o,a]:this.matches.push(o,a)}}function Bb(s,o){const a=s.localNames;if(null!==a)for(let l=0;l<a.length;l+=2)if(a[l]===o)return a[l+1];return null}function fh(s,o,a,l){return-1===a?function Ub(s,o){return 11&s.type?Za(s,o):4&s.type?Ku(s,o):null}(o,s):-2===a?function DT(s,o,a){return a===zu?Za(o,s):a===Ec?Ku(o,s):a===cp?d0(o,s):void 0}(s,o,l):Pi(s,s[1],a,o)}function jb(s,o,a,l){const d=o[19].queries[l];if(null===d.matches){const g=s.data,v=a.matches,w=[];for(let D=0;D<v.length;D+=2){const A=v[D];w.push(A<0?null:fh(o,g[A],v[D+1],a.metadata.read))}d.matches=w}return d.matches}function dp(s,o,a,l){const d=s.queries.getByIndex(a),g=d.matches;if(null!==g){const v=jb(s,o,d,a);for(let w=0;w<g.length;w+=2){const D=g[w];if(D>0)l.push(v[w/2]);else{const A=g[w+1],x=o[-D];for(let P=10;P<x.length;P++){const U=x[P];U[17]===U[3]&&dp(U[1],U,A,l)}if(null!==x[9]){const P=x[9];for(let U=0;U<P.length;U++){const K=P[U];dp(K[1],K,A,l)}}}}}return l}function $b(s){const o=De(),a=Ut(),l=vl();El(l+1);const d=bc(a,l);if(s.dirty&&js(o)===(2==(2&d.metadata.flags))){if(null===d.matches)s.reset([]);else{const g=d.crossesNgTemplate?dp(a,o,l,[]):jb(a,o,d,l);s.reset(g,Im),s.notifyOnChanges()}return!0}return!1}function f0(s,o,a,l){const d=Ut();if(d.firstCreatePass){const g=_n();(function p0(s,o,a){null===s.queries&&(s.queries=new hh),s.queries.track(new qi(o,a))})(d,new h0(o,a,l),g.index),function ei(s,o){const a=s.contentQueries||(s.contentQueries=[]);o!==(a.length?a[a.length-1]:-1)&&a.push(s.queries.length-1,o)}(d,s),2==(2&a)&&(d.staticContentQueries=!0)}!function Gb(s,o,a){const l=new km(4==(4&a));jE(s,o,l,l.destroy),null===o[19]&&(o[19]=new Vm),o[19].queries.push(new Lm(l))}(d,De(),a)}function Hb(){return function Bm(s,o){return s[19].queries[o].queryList}(De(),vl())}function bc(s,o){return s.queries.getByIndex(o)}function Qa(s,o){return Ku(s,o)}function fp(...s){}const Bo=new En("Application Initializer");let Tc=(()=>{class s{constructor(a){this.appInits=a,this.resolve=fp,this.reject=fp,this.initialized=!1,this.done=!1,this.donePromise=new Promise((l,d)=>{this.resolve=l,this.reject=d})}runInitializers(){if(this.initialized)return;const a=[],l=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let d=0;d<this.appInits.length;d++){const g=this.appInits[d]();if(ac(g))a.push(g);else if(cv(g)){const v=new Promise((w,D)=>{g.subscribe({complete:w,error:D})});a.push(v)}}Promise.all(a).then(()=>{l()}).catch(d=>{this.reject(d)}),0===a.length&&l(),this.initialized=!0}}return s.\u0275fac=function(a){return new(a||s)(nt(Bo,8))},s.\u0275prov=en({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();const Xa=new En("AppId",{providedIn:"root",factory:function w0(){return`${gp()}${gp()}${gp()}`}});function gp(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const Yu=new En("Platform Initializer"),b0=new En("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),vh=new En("appBootstrapListener");let Xb=(()=>{class s{log(a){console.log(a)}warn(a){console.warn(a)}}return s.\u0275fac=function(a){return new(a||s)},s.\u0275prov=en({token:s,factory:s.\u0275fac,providedIn:"platform"}),s})();const Ac=new En("LocaleId",{providedIn:"root",factory:()=>Pt(Ac,ht.Optional|ht.SkipSelf)||function qm(){return"undefined"!=typeof $localize&&$localize.locale||Qd}()}),eD=new En("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});class tD{constructor(o,a){this.ngModuleFactory=o,this.componentFactories=a}}let Di=(()=>{class s{compileModuleSync(a){return new s0(a)}compileModuleAsync(a){return Promise.resolve(this.compileModuleSync(a))}compileModuleAndAllComponentsSync(a){const l=this.compileModuleSync(a),g=m(fn(a).declarations).reduce((v,w)=>{const D=Yt(w);return D&&v.push(new Mm(D)),v},[]);return new tD(l,g)}compileModuleAndAllComponentsAsync(a){return Promise.resolve(this.compileModuleAndAllComponentsSync(a))}clearCache(){}clearCacheFor(a){}getModuleId(a){}}return s.\u0275fac=function(a){return new(a||s)},s.\u0275prov=en({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();const zm=(()=>Promise.resolve(0))();function mp(s){"undefined"==typeof Zone?zm.then(()=>{s&&s.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",s)}class os{constructor({enableLongStackTrace:o=!1,shouldCoalesceEventChangeDetection:a=!1,shouldCoalesceRunChangeDetection:l=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new so(!1),this.onMicrotaskEmpty=new so(!1),this.onStable=new so(!1),this.onError=new so(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const d=this;d._nesting=0,d._outer=d._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(d._inner=d._inner.fork(new Zone.TaskTrackingZoneSpec)),o&&Zone.longStackTraceZoneSpec&&(d._inner=d._inner.fork(Zone.longStackTraceZoneSpec)),d.shouldCoalesceEventChangeDetection=!l&&a,d.shouldCoalesceRunChangeDetection=l,d.lastRequestAnimationFrameId=-1,d.nativeRequestAnimationFrame=function Sc(){let s=Gt.requestAnimationFrame,o=Gt.cancelAnimationFrame;if("undefined"!=typeof Zone&&s&&o){const a=s[Zone.__symbol__("OriginalDelegate")];a&&(s=a);const l=o[Zone.__symbol__("OriginalDelegate")];l&&(o=l)}return{nativeRequestAnimationFrame:s,nativeCancelAnimationFrame:o}}().nativeRequestAnimationFrame,function eu(s){const o=()=>{!function NT(s){s.isCheckStableRunning||-1!==s.lastRequestAnimationFrameId||(s.lastRequestAnimationFrameId=s.nativeRequestAnimationFrame.call(Gt,()=>{s.fakeTopEventTask||(s.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{s.lastRequestAnimationFrameId=-1,D0(s),s.isCheckStableRunning=!0,Wm(s),s.isCheckStableRunning=!1},void 0,()=>{},()=>{})),s.fakeTopEventTask.invoke()}),D0(s))}(s)};s._inner=s._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(a,l,d,g,v,w)=>{try{return rD(s),a.invokeTask(d,g,v,w)}finally{(s.shouldCoalesceEventChangeDetection&&"eventTask"===g.type||s.shouldCoalesceRunChangeDetection)&&o(),C0(s)}},onInvoke:(a,l,d,g,v,w,D)=>{try{return rD(s),a.invoke(d,g,v,w,D)}finally{s.shouldCoalesceRunChangeDetection&&o(),C0(s)}},onHasTask:(a,l,d,g)=>{a.hasTask(d,g),l===d&&("microTask"==g.change?(s._hasPendingMicrotasks=g.microTask,D0(s),Wm(s)):"macroTask"==g.change&&(s.hasPendingMacrotasks=g.macroTask))},onHandleError:(a,l,d,g)=>(a.handleError(d,g),s.runOutsideAngular(()=>s.onError.emit(g)),!1)})}(d)}static isInAngularZone(){return"undefined"!=typeof Zone&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!os.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(os.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(o,a,l){return this._inner.run(o,a,l)}runTask(o,a,l,d){const g=this._inner,v=g.scheduleEventTask("NgZoneEvent: "+d,o,yp,fp,fp);try{return g.runTask(v,a,l)}finally{g.cancelTask(v)}}runGuarded(o,a,l){return this._inner.runGuarded(o,a,l)}runOutsideAngular(o){return this._outer.run(o)}}const yp={};function Wm(s){if(0==s._nesting&&!s.hasPendingMicrotasks&&!s.isStable)try{s._nesting++,s.onMicrotaskEmpty.emit(null)}finally{if(s._nesting--,!s.hasPendingMicrotasks)try{s.runOutsideAngular(()=>s.onStable.emit(null))}finally{s.isStable=!0}}}function D0(s){s.hasPendingMicrotasks=!!(s._hasPendingMicrotasks||(s.shouldCoalesceEventChangeDetection||s.shouldCoalesceRunChangeDetection)&&-1!==s.lastRequestAnimationFrameId)}function rD(s){s._nesting++,s.isStable&&(s.isStable=!1,s.onUnstable.emit(null))}function C0(s){s._nesting--,Wm(s)}class Mc{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new so,this.onMicrotaskEmpty=new so,this.onStable=new so,this.onError=new so}run(o,a,l){return o.apply(a,l)}runGuarded(o,a,l){return o.apply(a,l)}runOutsideAngular(o){return o()}runTask(o,a,l,d){return o.apply(a,l)}}let iD=(()=>{class s{constructor(a){this._ngZone=a,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),a.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{os.assertNotInAngularZone(),mp(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())mp(()=>{for(;0!==this._callbacks.length;){let a=this._callbacks.pop();clearTimeout(a.timeoutId),a.doneCb(this._didWork)}this._didWork=!1});else{let a=this.getPendingTasks();this._callbacks=this._callbacks.filter(l=>!l.updateCb||!l.updateCb(a)||(clearTimeout(l.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(a=>({source:a.source,creationLocation:a.creationLocation,data:a.data})):[]}addCallback(a,l,d){let g=-1;l&&l>0&&(g=setTimeout(()=>{this._callbacks=this._callbacks.filter(v=>v.timeoutId!==g),a(this._didWork,this.getPendingTasks())},l)),this._callbacks.push({doneCb:a,timeoutId:g,updateCb:d})}whenStable(a,l,d){if(d&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(a,l,d),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(a,l,d){return[]}}return s.\u0275fac=function(a){return new(a||s)(nt(os))},s.\u0275prov=en({token:s,factory:s.\u0275fac}),s})(),_p=(()=>{class s{constructor(){this._applications=new Map,Ym.addToWindow(this)}registerApplication(a,l){this._applications.set(a,l)}unregisterApplication(a){this._applications.delete(a)}unregisterAllApplications(){this._applications.clear()}getTestability(a){return this._applications.get(a)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(a,l=!0){return Ym.findTestabilityInTree(this,a,l)}}return s.\u0275fac=function(a){return new(a||s)},s.\u0275prov=en({token:s,factory:s.\u0275fac,providedIn:"platform"}),s})();class Km{addToWindow(o){}findTestabilityInTree(o,a,l){return null}}function Zm(s){Ym=s}let Ym=new Km,Qu=null;const jr=new En("AllowMultipleToken"),sD=new En("PlatformOnDestroy");class kT{constructor(o,a){this.name=o,this.token=a}}function aD(s,o,a=[]){const l=`Platform: ${o}`,d=new En(l);return(g=[])=>{let v=I0();if(!v||v.injector.get(jr,!1)){const w=[...a,...g,{provide:d,useValue:!0}];s?s(w):function PT(s){if(Qu&&!Qu.get(jr,!1))throw new Ne(400,"");Qu=s;const o=s.get(T0),a=s.get(Yu,null);a&&a.forEach(l=>l())}(function Ju(s=[],o){return $a.create({name:o,providers:[{provide:W_,useValue:"platform"},{provide:sD,useValue:()=>Qu=null},...s]})}(w,l))}return function FT(s){const o=I0();if(!o)throw new Ne(401,"");return o}()}}function I0(){var s;return null!==(s=null==Qu?void 0:Qu.get(T0))&&void 0!==s?s:null}let T0=(()=>{class s{constructor(a){this._injector=a,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(a,l){const w=function uD(s,o){let a;return a="noop"===s?new Mc:("zone.js"===s?void 0:s)||new os({enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!!(null==o?void 0:o.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==o?void 0:o.ngZoneRunCoalescing)}),a}(l?l.ngZone:void 0,{ngZoneEventCoalescing:l&&l.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:l&&l.ngZoneRunCoalescing||!1}),D=[{provide:os,useValue:w}];return w.run(()=>{const A=$a.create({providers:D,parent:this.injector,name:a.moduleType.name}),x=a.create(A),P=x.injector.get(xr,null);if(!P)throw new Ne(402,"");return w.runOutsideAngular(()=>{const U=w.onError.subscribe({next:K=>{P.handleError(K)}});x.onDestroy(()=>{Eh(this._modules,x),U.unsubscribe()})}),function tu(s,o,a){try{const l=a();return ac(l)?l.catch(d=>{throw o.runOutsideAngular(()=>s.handleError(d)),d}):l}catch(l){throw o.runOutsideAngular(()=>s.handleError(l)),l}}(P,w,()=>{const U=x.injector.get(Tc);return U.runInitializers(),U.donePromise.then(()=>(function YI(s){an(s,"Expected localeId to be defined"),"string"==typeof s&&(Rv=s.toLowerCase().replace(/_/g,"-"))}(x.injector.get(Ac,Qd)||Qd),this._moduleDoBootstrap(x),x))})})}bootstrapModule(a,l=[]){const d=A0({},l);return function OT(s,o,a){const l=new s0(a);return Promise.resolve(l)}(0,0,a).then(g=>this.bootstrapModuleFactory(g,d))}_moduleDoBootstrap(a){const l=a.injector.get(Xu);if(a._bootstrapComponents.length>0)a._bootstrapComponents.forEach(d=>l.bootstrap(d));else{if(!a.instance.ngDoBootstrap)throw new Ne(403,"");a.instance.ngDoBootstrap(l)}this._modules.push(a)}onDestroy(a){this._destroyListeners.push(a)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Ne(404,"");this._modules.slice().forEach(l=>l.destroy()),this._destroyListeners.forEach(l=>l());const a=this._injector.get(sD,null);null==a||a(),this._destroyed=!0}get destroyed(){return this._destroyed}}return s.\u0275fac=function(a){return new(a||s)(nt($a))},s.\u0275prov=en({token:s,factory:s.\u0275fac,providedIn:"platform"}),s})();function A0(s,o){return Array.isArray(o)?o.reduce(A0,s):Object.assign(Object.assign({},s),o)}let Xu=(()=>{class s{constructor(a,l,d,g){this._zone=a,this._injector=l,this._exceptionHandler=d,this._initStatus=g,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const v=new O.y(D=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{D.next(this._stable),D.complete()})}),w=new O.y(D=>{let A;this._zone.runOutsideAngular(()=>{A=this._zone.onStable.subscribe(()=>{os.assertNotInAngularZone(),mp(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,D.next(!0))})})});const x=this._zone.onUnstable.subscribe(()=>{os.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{D.next(!1)}))});return()=>{A.unsubscribe(),x.unsubscribe()}});this.isStable=(0,ae.T)(v,w.pipe((0,X.B)()))}bootstrap(a,l){if(!this._initStatus.done)throw new Ne(405,"");let d;d=a instanceof mc?a:this._injector.get(_a).resolveComponentFactory(a),this.componentTypes.push(d.componentType);const g=function oD(s){return s.isBoundToModule}(d)?void 0:this._injector.get(yc),w=d.create($a.NULL,[],l||d.selector,g),D=w.location.nativeElement,A=w.injector.get(iD,null),x=A&&w.injector.get(_p);return A&&x&&x.registerApplication(D,A),w.onDestroy(()=>{this.detachView(w.hostView),Eh(this.components,w),x&&x.unregisterApplication(D)}),this._loadComponent(w),w}tick(){if(this._runningTick)throw new Ne(101,"");try{this._runningTick=!0;for(let a of this._views)a.detectChanges()}catch(a){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(a))}finally{this._runningTick=!1}}attachView(a){const l=a;this._views.push(l),l.attachToAppRef(this)}detachView(a){const l=a;Eh(this._views,l),l.detachFromAppRef()}_loadComponent(a){this.attachView(a.hostView),this.tick(),this.components.push(a),this._injector.get(vh,[]).concat(this._bootstrapListeners).forEach(d=>d(a))}ngOnDestroy(){this._views.slice().forEach(a=>a.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return s.\u0275fac=function(a){return new(a||s)(nt(os),nt($a),nt(xr),nt(Tc))},s.\u0275prov=en({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();function Eh(s,o){const a=s.indexOf(o);a>-1&&s.splice(a,1)}let Qm=!0,Jm=!1;function wh(){return Jm=!0,Qm}function oo(){if(Jm)throw new Error("Cannot enable prod mode after platform setup.");Qm=!1}let x0=(()=>{class s{}return s.__NG_ELEMENT_ID__=R0,s})();function R0(s){return function lD(s,o,a){if(Fs(s)&&!a){const l=Ir(s.index,o);return new np(l,l)}return 47&s.type?new np(o[16],o):null}(_n(),De(),16==(16&s))}class wp{constructor(){}supports(o){return Lf(o)}create(o){return new k0(o)}}const HT=(s,o)=>o;class k0{constructor(o){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=o||HT}forEachItem(o){let a;for(a=this._itHead;null!==a;a=a._next)o(a)}forEachOperation(o){let a=this._itHead,l=this._removalsHead,d=0,g=null;for(;a||l;){const v=!l||a&&a.currentIndex<Dh(l,d,g)?a:l,w=Dh(v,d,g),D=v.currentIndex;if(v===l)d--,l=l._nextRemoved;else if(a=a._next,null==v.previousIndex)d++;else{g||(g=[]);const A=w-d,x=D-d;if(A!=x){for(let U=0;U<A;U++){const K=U<g.length?g[U]:g[U]=0,me=K+U;x<=me&&me<A&&(g[U]=K+1)}g[v.previousIndex]=x-A}}w!==D&&o(v,w,D)}}forEachPreviousItem(o){let a;for(a=this._previousItHead;null!==a;a=a._nextPrevious)o(a)}forEachAddedItem(o){let a;for(a=this._additionsHead;null!==a;a=a._nextAdded)o(a)}forEachMovedItem(o){let a;for(a=this._movesHead;null!==a;a=a._nextMoved)o(a)}forEachRemovedItem(o){let a;for(a=this._removalsHead;null!==a;a=a._nextRemoved)o(a)}forEachIdentityChange(o){let a;for(a=this._identityChangesHead;null!==a;a=a._nextIdentityChange)o(a)}diff(o){if(null==o&&(o=[]),!Lf(o))throw new Ne(900,"");return this.check(o)?this:null}onDestroy(){}check(o){this._reset();let d,g,v,a=this._itHead,l=!1;if(Array.isArray(o)){this.length=o.length;for(let w=0;w<this.length;w++)g=o[w],v=this._trackByFn(w,g),null!==a&&Object.is(a.trackById,v)?(l&&(a=this._verifyReinsertion(a,g,v,w)),Object.is(a.item,g)||this._addIdentityChange(a,g)):(a=this._mismatch(a,g,v,w),l=!0),a=a._next}else d=0,function fw(s,o){if(Array.isArray(s))for(let a=0;a<s.length;a++)o(s[a]);else{const a=s[Ld()]();let l;for(;!(l=a.next()).done;)o(l.value)}}(o,w=>{v=this._trackByFn(d,w),null!==a&&Object.is(a.trackById,v)?(l&&(a=this._verifyReinsertion(a,w,v,d)),Object.is(a.item,w)||this._addIdentityChange(a,w)):(a=this._mismatch(a,w,v,d),l=!0),a=a._next,d++}),this.length=d;return this._truncate(a),this.collection=o,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let o;for(o=this._previousItHead=this._itHead;null!==o;o=o._next)o._nextPrevious=o._next;for(o=this._additionsHead;null!==o;o=o._nextAdded)o.previousIndex=o.currentIndex;for(this._additionsHead=this._additionsTail=null,o=this._movesHead;null!==o;o=o._nextMoved)o.previousIndex=o.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(o,a,l,d){let g;return null===o?g=this._itTail:(g=o._prev,this._remove(o)),null!==(o=null===this._unlinkedRecords?null:this._unlinkedRecords.get(l,null))?(Object.is(o.item,a)||this._addIdentityChange(o,a),this._reinsertAfter(o,g,d)):null!==(o=null===this._linkedRecords?null:this._linkedRecords.get(l,d))?(Object.is(o.item,a)||this._addIdentityChange(o,a),this._moveAfter(o,g,d)):o=this._addAfter(new GT(a,l),g,d),o}_verifyReinsertion(o,a,l,d){let g=null===this._unlinkedRecords?null:this._unlinkedRecords.get(l,null);return null!==g?o=this._reinsertAfter(g,o._prev,d):o.currentIndex!=d&&(o.currentIndex=d,this._addToMoves(o,d)),o}_truncate(o){for(;null!==o;){const a=o._next;this._addToRemovals(this._unlink(o)),o=a}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(o,a,l){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(o);const d=o._prevRemoved,g=o._nextRemoved;return null===d?this._removalsHead=g:d._nextRemoved=g,null===g?this._removalsTail=d:g._prevRemoved=d,this._insertAfter(o,a,l),this._addToMoves(o,l),o}_moveAfter(o,a,l){return this._unlink(o),this._insertAfter(o,a,l),this._addToMoves(o,l),o}_addAfter(o,a,l){return this._insertAfter(o,a,l),this._additionsTail=null===this._additionsTail?this._additionsHead=o:this._additionsTail._nextAdded=o,o}_insertAfter(o,a,l){const d=null===a?this._itHead:a._next;return o._next=d,o._prev=a,null===d?this._itTail=o:d._prev=o,null===a?this._itHead=o:a._next=o,null===this._linkedRecords&&(this._linkedRecords=new P0),this._linkedRecords.put(o),o.currentIndex=l,o}_remove(o){return this._addToRemovals(this._unlink(o))}_unlink(o){null!==this._linkedRecords&&this._linkedRecords.remove(o);const a=o._prev,l=o._next;return null===a?this._itHead=l:a._next=l,null===l?this._itTail=a:l._prev=a,o}_addToMoves(o,a){return o.previousIndex===a||(this._movesTail=null===this._movesTail?this._movesHead=o:this._movesTail._nextMoved=o),o}_addToRemovals(o){return null===this._unlinkedRecords&&(this._unlinkedRecords=new P0),this._unlinkedRecords.put(o),o.currentIndex=null,o._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=o,o._prevRemoved=null):(o._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=o),o}_addIdentityChange(o,a){return o.item=a,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=o:this._identityChangesTail._nextIdentityChange=o,o}}class GT{constructor(o,a){this.item=o,this.trackById=a,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class dD{constructor(){this._head=null,this._tail=null}add(o){null===this._head?(this._head=this._tail=o,o._nextDup=null,o._prevDup=null):(this._tail._nextDup=o,o._prevDup=this._tail,o._nextDup=null,this._tail=o)}get(o,a){let l;for(l=this._head;null!==l;l=l._nextDup)if((null===a||a<=l.currentIndex)&&Object.is(l.trackById,o))return l;return null}remove(o){const a=o._prevDup,l=o._nextDup;return null===a?this._head=l:a._nextDup=l,null===l?this._tail=a:l._prevDup=a,null===this._head}}class P0{constructor(){this.map=new Map}put(o){const a=o.trackById;let l=this.map.get(a);l||(l=new dD,this.map.set(a,l)),l.add(o)}get(o,a){const d=this.map.get(o);return d?d.get(o,a):null}remove(o){const a=o.trackById;return this.map.get(a).remove(o)&&this.map.delete(a),o}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function Dh(s,o,a){const l=s.previousIndex;if(null===l)return l;let d=0;return a&&l<a.length&&(d=a[l]),l+o+d}class tl{constructor(){}supports(o){return o instanceof Map||pw(o)}create(){return new hD}}class hD{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(o){let a;for(a=this._mapHead;null!==a;a=a._next)o(a)}forEachPreviousItem(o){let a;for(a=this._previousMapHead;null!==a;a=a._nextPrevious)o(a)}forEachChangedItem(o){let a;for(a=this._changesHead;null!==a;a=a._nextChanged)o(a)}forEachAddedItem(o){let a;for(a=this._additionsHead;null!==a;a=a._nextAdded)o(a)}forEachRemovedItem(o){let a;for(a=this._removalsHead;null!==a;a=a._nextRemoved)o(a)}diff(o){if(o){if(!(o instanceof Map||pw(o)))throw new Ne(900,"")}else o=new Map;return this.check(o)?this:null}onDestroy(){}check(o){this._reset();let a=this._mapHead;if(this._appendAfter=null,this._forEach(o,(l,d)=>{if(a&&a.key===d)this._maybeAddToChanges(a,l),this._appendAfter=a,a=a._next;else{const g=this._getOrCreateRecordForKey(d,l);a=this._insertBeforeOrAppend(a,g)}}),a){a._prev&&(a._prev._next=null),this._removalsHead=a;for(let l=a;null!==l;l=l._nextRemoved)l===this._mapHead&&(this._mapHead=null),this._records.delete(l.key),l._nextRemoved=l._next,l.previousValue=l.currentValue,l.currentValue=null,l._prev=null,l._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(o,a){if(o){const l=o._prev;return a._next=o,a._prev=l,o._prev=a,l&&(l._next=a),o===this._mapHead&&(this._mapHead=a),this._appendAfter=o,o}return this._appendAfter?(this._appendAfter._next=a,a._prev=this._appendAfter):this._mapHead=a,this._appendAfter=a,null}_getOrCreateRecordForKey(o,a){if(this._records.has(o)){const d=this._records.get(o);this._maybeAddToChanges(d,a);const g=d._prev,v=d._next;return g&&(g._next=v),v&&(v._prev=g),d._next=null,d._prev=null,d}const l=new fD(o);return this._records.set(o,l),l.currentValue=a,this._addToAdditions(l),l}_reset(){if(this.isDirty){let o;for(this._previousMapHead=this._mapHead,o=this._previousMapHead;null!==o;o=o._next)o._nextPrevious=o._next;for(o=this._changesHead;null!==o;o=o._nextChanged)o.previousValue=o.currentValue;for(o=this._additionsHead;null!=o;o=o._nextAdded)o.previousValue=o.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(o,a){Object.is(a,o.currentValue)||(o.previousValue=o.currentValue,o.currentValue=a,this._addToChanges(o))}_addToAdditions(o){null===this._additionsHead?this._additionsHead=this._additionsTail=o:(this._additionsTail._nextAdded=o,this._additionsTail=o)}_addToChanges(o){null===this._changesHead?this._changesHead=this._changesTail=o:(this._changesTail._nextChanged=o,this._changesTail=o)}_forEach(o,a){o instanceof Map?o.forEach(a):Object.keys(o).forEach(l=>a(o[l],l))}}class fD{constructor(o){this.key=o,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function F0(){return new Rc([new wp])}let Rc=(()=>{class s{constructor(a){this.factories=a}static create(a,l){if(null!=l){const d=l.factories.slice();a=a.concat(d)}return new s(a)}static extend(a){return{provide:s,useFactory:l=>s.create(a,l||F0()),deps:[[s,new Ao,new mi]]}}find(a){const l=this.factories.find(d=>d.supports(a));if(null!=l)return l;throw new Ne(901,"")}}return s.\u0275prov=en({token:s,providedIn:"root",factory:F0}),s})();function gD(){return new Zn([new tl])}let Zn=(()=>{class s{constructor(a){this.factories=a}static create(a,l){if(l){const d=l.factories.slice();a=a.concat(d)}return new s(a)}static extend(a){return{provide:s,useFactory:l=>s.create(a,l||gD()),deps:[[s,new Ao,new mi]]}}find(a){const l=this.factories.find(g=>g.supports(a));if(l)return l;throw new Ne(901,"")}}return s.\u0275prov=en({token:s,providedIn:"root",factory:gD}),s})();const sr=aD(null,"core",[]);let sy=(()=>{class s{constructor(a){}}return s.\u0275fac=function(a){return new(a||s)(nt(Xu))},s.\u0275mod=Y({type:s}),s.\u0275inj=Jt({}),s})()},3942:(dt,Ae,k)=>{k.d(Ae,{Z:()=>Ne});var f=k(2090),Z=k(4859),O=k(9681),ae=k(1877);class X{constructor(he,we){this._delegate=he,this.firebase=we,(0,O._addComponent)(he,new Z.wA("app-compat",()=>this,"PUBLIC")),this.container=he.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(he){this._delegate.automaticDataCollectionEnabled=he}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(he=>{this._delegate.checkDestroyed(),he()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,O.deleteApp)(this._delegate)))}_getService(he,we=O._DEFAULT_ENTRY_NAME){var it;this._delegate.checkDestroyed();const Qe=this._delegate.container.getProvider(he);return!Qe.isInitialized()&&"EXPLICIT"===(null===(it=Qe.getComponent())||void 0===it?void 0:it.instantiationMode)&&Qe.initialize(),Qe.getImmediate({identifier:we})}_removeServiceInstance(he,we=O._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(he).clearInstance(we)}_addComponent(he){(0,O._addComponent)(this._delegate,he)}_addOrOverwriteComponent(he){(0,O._addOrOverwriteComponent)(this._delegate,he)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const ie=new f.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),$=function le(){const Le=function de(Le){const he={},we={__esModule:!0,initializeApp:function Ie($e,re={}){const Ke=O.initializeApp($e,re);if((0,f.r3)(he,Ke.name))return he[Ke.name];const J=new Le(Ke,we);return he[Ke.name]=J,J},app:Qe,registerVersion:O.registerVersion,setLogLevel:O.setLogLevel,onLog:O.onLog,apps:null,SDK_VERSION:O.SDK_VERSION,INTERNAL:{registerComponent:function ve($e){const re=$e.name,Ke=re.replace("-compat","");if(O._registerComponent($e)&&"PUBLIC"===$e.type){const J=(oe=Qe())=>{if("function"!=typeof oe[Ke])throw ie.create("invalid-app-argument",{appName:re});return oe[Ke]()};void 0!==$e.serviceProps&&(0,f.ZB)(J,$e.serviceProps),we[Ke]=J,Le.prototype[Ke]=function(...oe){return this._getService.bind(this,re).apply(this,$e.multipleInstances?oe:[])}}return"PUBLIC"===$e.type?we[Ke]:null},removeApp:function it($e){delete he[$e]},useAsService:function He($e,re){return"serverAuth"===re?null:re},modularAPIs:O}};function Qe($e){if(!(0,f.r3)(he,$e=$e||O._DEFAULT_ENTRY_NAME))throw ie.create("no-app",{appName:$e});return he[$e]}return we.default=we,Object.defineProperty(we,"apps",{get:function ye(){return Object.keys(he).map($e=>he[$e])}}),Qe.App=Le,we}(X);return Le.INTERNAL=Object.assign(Object.assign({},Le.INTERNAL),{createFirebaseNamespace:le,extendNamespace:function he(we){(0,f.ZB)(Le,we)},createSubscribe:f.ne,ErrorFactory:f.LL,deepExtend:f.ZB}),Le}(),H=new ae.Yd("@firebase/app-compat");if((0,f.jU)()&&void 0!==self.firebase){H.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const Le=self.firebase.SDK_VERSION;Le&&Le.indexOf("LITE")>=0&&H.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const Ne=$;!function Se(Le){(0,O.registerVersion)("@firebase/app-compat","0.1.22",Le)}()},9681:(dt,Ae,k)=>{k.r(Ae),k.d(Ae,{FirebaseError:()=>ae.ZR,SDK_VERSION:()=>kr,_DEFAULT_ENTRY_NAME:()=>Qt,_addComponent:()=>Jn,_addOrOverwriteComponent:()=>bn,_apps:()=>qe,_clearComponents:()=>Kt,_components:()=>Wt,_getProvider:()=>xi,_registerComponent:()=>en,_removeServiceInstance:()=>Jt,deleteApp:()=>ls,getApp:()=>Pr,getApps:()=>us,initializeApp:()=>zi,onLog:()=>Xn,registerVersion:()=>Hr,setLogLevel:()=>Hn});var f=k(5861),Z=k(4859),O=k(1877),ae=k(2090);class X{constructor(Te){this.container=Te}getPlatformInfoString(){return this.container.getProviders().map(tt=>{if(function pe(Xe){const Te=Xe.getComponent();return"VERSION"===(null==Te?void 0:Te.type)}(tt)){const pt=tt.getImmediate();return`${pt.library}/${pt.version}`}return null}).filter(tt=>tt).join(" ")}}const ie="@firebase/app",le=new O.Yd("@firebase/app"),Qt="[DEFAULT]",an={[ie]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},qe=new Map,Wt=new Map;function Jn(Xe,Te){try{Xe.container.addComponent(Te)}catch(tt){le.debug(`Component ${Te.name} failed to register with FirebaseApp ${Xe.name}`,tt)}}function bn(Xe,Te){Xe.container.addOrOverwriteComponent(Te)}function en(Xe){const Te=Xe.name;if(Wt.has(Te))return le.debug(`There were multiple attempts to register component ${Te}.`),!1;Wt.set(Te,Xe);for(const tt of qe.values())Jn(tt,Xe);return!0}function xi(Xe,Te){const tt=Xe.container.getProvider("heartbeat").getImmediate({optional:!0});return tt&&tt.triggerHeartbeat(),Xe.container.getProvider(Te)}function Jt(Xe,Te,tt=Qt){xi(Xe,Te).clearInstance(tt)}function Kt(){Wt.clear()}const ii=new ae.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}."});class Rs{constructor(Te,tt,pt){this._isDeleted=!1,this._options=Object.assign({},Te),this._config=Object.assign({},tt),this._name=tt.name,this._automaticDataCollectionEnabled=tt.automaticDataCollectionEnabled,this._container=pt,this.container.addComponent(new Z.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(Te){this.checkDestroyed(),this._automaticDataCollectionEnabled=Te}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(Te){this._isDeleted=Te}checkDestroyed(){if(this.isDeleted)throw ii.create("app-deleted",{appName:this._name})}}const kr="9.6.11";function zi(Xe,Te={}){"object"!=typeof Te&&(Te={name:Te});const tt=Object.assign({name:Qt,automaticDataCollectionEnabled:!1},Te),pt=tt.name;if("string"!=typeof pt||!pt)throw ii.create("bad-app-name",{appName:String(pt)});const Ht=qe.get(pt);if(Ht){if((0,ae.vZ)(Xe,Ht.options)&&(0,ae.vZ)(tt,Ht.config))return Ht;throw ii.create("duplicate-app",{appName:pt})}const Bt=new Z.H0(pt);for(const V of Wt.values())Bt.addComponent(V);const j=new Rs(Xe,tt,Bt);return qe.set(pt,j),j}function Pr(Xe=Qt){const Te=qe.get(Xe);if(!Te)throw ii.create("no-app",{appName:Xe});return Te}function us(){return Array.from(qe.values())}function ls(Xe){return ht.apply(this,arguments)}function ht(){return(ht=(0,f.Z)(function*(Xe){const Te=Xe.name;qe.has(Te)&&(qe.delete(Te),yield Promise.all(Xe.container.getProviders().map(tt=>tt.delete())),Xe.isDeleted=!0)})).apply(this,arguments)}function Hr(Xe,Te,tt){var pt;let Ht=null!==(pt=an[Xe])&&void 0!==pt?pt:Xe;tt&&(Ht+=`-${tt}`);const Bt=Ht.match(/\s|\//),j=Te.match(/\s|\//);if(Bt||j){const V=[`Unable to register library "${Ht}" with version "${Te}":`];return Bt&&V.push(`library name "${Ht}" contains illegal characters (whitespace or "/")`),Bt&&j&&V.push("and"),j&&V.push(`version name "${Te}" contains illegal characters (whitespace or "/")`),void le.warn(V.join(" "))}en(new Z.wA(`${Ht}-version`,()=>({library:Ht,version:Te}),"VERSION"))}function Xn(Xe,Te){if(null!==Xe&&"function"!=typeof Xe)throw ii.create("invalid-log-argument");(0,O.Am)(Xe,Te)}function Hn(Xe){(0,O.Ub)(Xe)}const yn="firebase-heartbeat-store";let er=null;function Ns(){return er||(er=(0,ae.X3)("firebase-heartbeat-database",1,(Xe,Te)=>{0===Te&&Xe.createObjectStore(yn)}).catch(Xe=>{throw ii.create("storage-open",{originalErrorMessage:Xe.message})})),er}function Zt(){return(Zt=(0,f.Z)(function*(Xe){try{return(yield Ns()).transaction(yn).objectStore(yn).get(lr(Xe))}catch(Te){throw ii.create("storage-get",{originalErrorMessage:Te.message})}})).apply(this,arguments)}function lt(Xe,Te){return bt.apply(this,arguments)}function bt(){return(bt=(0,f.Z)(function*(Xe,Te){try{const pt=(yield Ns()).transaction(yn,"readwrite");return yield pt.objectStore(yn).put(Te,lr(Xe)),pt.complete}catch(tt){throw ii.create("storage-set",{originalErrorMessage:tt.message})}})).apply(this,arguments)}function lr(Xe){return`${Xe.name}!${Xe.options.appId}`}class co{constructor(Te){this.container=Te,this._heartbeatsCache=null;const tt=this.container.getProvider("app").getImmediate();this._storage=new ft(tt),this._heartbeatsCachePromise=this._storage.read().then(pt=>(this._heartbeatsCache=pt,pt))}triggerHeartbeat(){var Te=this;return(0,f.Z)(function*(){const pt=Te.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),Ht=vr();if(null===Te._heartbeatsCache&&(Te._heartbeatsCache=yield Te._heartbeatsCachePromise),Te._heartbeatsCache.lastSentHeartbeatDate!==Ht&&!Te._heartbeatsCache.heartbeats.some(Bt=>Bt.date===Ht))return Te._heartbeatsCache.heartbeats.push({date:Ht,agent:pt}),Te._heartbeatsCache.heartbeats=Te._heartbeatsCache.heartbeats.filter(Bt=>{const j=new Date(Bt.date).valueOf();return Date.now()-j<=2592e6}),Te._storage.overwrite(Te._heartbeatsCache)})()}getHeartbeatsHeader(){var Te=this;return(0,f.Z)(function*(){if(null===Te._heartbeatsCache&&(yield Te._heartbeatsCachePromise),null===Te._heartbeatsCache||0===Te._heartbeatsCache.heartbeats.length)return"";const tt=vr(),{heartbeatsToSend:pt,unsentEntries:Ht}=function cr(Xe,Te=1024){const tt=[];let pt=Xe.slice();for(const Ht of Xe){const Bt=tt.find(j=>j.agent===Ht.agent);if(Bt){if(Bt.dates.push(Ht.date),Er(tt)>Te){Bt.dates.pop();break}}else if(tt.push({agent:Ht.agent,dates:[Ht.date]}),Er(tt)>Te){tt.pop();break}pt=pt.slice(1)}return{heartbeatsToSend:tt,unsentEntries:pt}}(Te._heartbeatsCache.heartbeats),Bt=(0,ae.L)(JSON.stringify({version:2,heartbeats:pt}));return Te._heartbeatsCache.lastSentHeartbeatDate=tt,Ht.length>0?(Te._heartbeatsCache.heartbeats=Ht,yield Te._storage.overwrite(Te._heartbeatsCache)):(Te._heartbeatsCache.heartbeats=[],Te._storage.overwrite(Te._heartbeatsCache)),Bt})()}}function vr(){return(new Date).toISOString().substring(0,10)}class ft{constructor(Te){this.app=Te,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,f.Z)(function*(){return!!(0,ae.hl)()&&(0,ae.eu)().then(()=>!0).catch(()=>!1)})()}read(){var Te=this;return(0,f.Z)(function*(){return(yield Te._canUseIndexedDBPromise)&&(yield function ba(Xe){return Zt.apply(this,arguments)}(Te.app))||{heartbeats:[]}})()}overwrite(Te){var tt=this;return(0,f.Z)(function*(){var pt;if(yield tt._canUseIndexedDBPromise){const Bt=yield tt.read();return lt(tt.app,{lastSentHeartbeatDate:null!==(pt=Te.lastSentHeartbeatDate)&&void 0!==pt?pt:Bt.lastSentHeartbeatDate,heartbeats:Te.heartbeats})}})()}add(Te){var tt=this;return(0,f.Z)(function*(){var pt;if(yield tt._canUseIndexedDBPromise){const Bt=yield tt.read();return lt(tt.app,{lastSentHeartbeatDate:null!==(pt=Te.lastSentHeartbeatDate)&&void 0!==pt?pt:Bt.lastSentHeartbeatDate,heartbeats:[...Bt.heartbeats,...Te.heartbeats]})}})()}}function Er(Xe){return(0,ae.L)(JSON.stringify({version:2,heartbeats:Xe})).length}!function jt(Xe){en(new Z.wA("platform-logger",Te=>new X(Te),"PRIVATE")),en(new Z.wA("heartbeat",Te=>new co(Te),"PRIVATE")),Hr(ie,"0.7.21",Xe),Hr(ie,"0.7.21","esm2017"),Hr("fire-js","")}("")},4859:(dt,Ae,k)=>{k.d(Ae,{H0:()=>de,wA:()=>O});var f=k(5861),Z=k(2090);class O{constructor($,H,Q){this.name=$,this.instanceFactory=H,this.type=Q,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode($){return this.instantiationMode=$,this}setMultipleInstances($){return this.multipleInstances=$,this}setServiceProps($){return this.serviceProps=$,this}setInstanceCreatedCallback($){return this.onInstanceCreated=$,this}}const ae="[DEFAULT]";class X{constructor($,H){this.name=$,this.container=H,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get($){const H=this.normalizeInstanceIdentifier($);if(!this.instancesDeferred.has(H)){const Q=new Z.BH;if(this.instancesDeferred.set(H,Q),this.isInitialized(H)||this.shouldAutoInitialize())try{const We=this.getOrInitializeService({instanceIdentifier:H});We&&Q.resolve(We)}catch(We){}}return this.instancesDeferred.get(H).promise}getImmediate($){var H;const Q=this.normalizeInstanceIdentifier(null==$?void 0:$.identifier),We=null!==(H=null==$?void 0:$.optional)&&void 0!==H&&H;if(!this.isInitialized(Q)&&!this.shouldAutoInitialize()){if(We)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:Q})}catch(Se){if(We)return null;throw Se}}getComponent(){return this.component}setComponent($){if($.name!==this.name)throw Error(`Mismatching Component ${$.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=$,this.shouldAutoInitialize()){if(function ie(le){return"EAGER"===le.instantiationMode}($))try{this.getOrInitializeService({instanceIdentifier:ae})}catch(H){}for(const[H,Q]of this.instancesDeferred.entries()){const We=this.normalizeInstanceIdentifier(H);try{const Se=this.getOrInitializeService({instanceIdentifier:We});Q.resolve(Se)}catch(Se){}}}}clearInstance($=ae){this.instancesDeferred.delete($),this.instancesOptions.delete($),this.instances.delete($)}delete(){var $=this;return(0,f.Z)(function*(){const H=Array.from($.instances.values());yield Promise.all([...H.filter(Q=>"INTERNAL"in Q).map(Q=>Q.INTERNAL.delete()),...H.filter(Q=>"_delete"in Q).map(Q=>Q._delete())])})()}isComponentSet(){return null!=this.component}isInitialized($=ae){return this.instances.has($)}getOptions($=ae){return this.instancesOptions.get($)||{}}initialize($={}){const{options:H={}}=$,Q=this.normalizeInstanceIdentifier($.instanceIdentifier);if(this.isInitialized(Q))throw Error(`${this.name}(${Q}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const We=this.getOrInitializeService({instanceIdentifier:Q,options:H});for(const[Se,Ne]of this.instancesDeferred.entries())Q===this.normalizeInstanceIdentifier(Se)&&Ne.resolve(We);return We}onInit($,H){var Q;const We=this.normalizeInstanceIdentifier(H),Se=null!==(Q=this.onInitCallbacks.get(We))&&void 0!==Q?Q:new Set;Se.add($),this.onInitCallbacks.set(We,Se);const Ne=this.instances.get(We);return Ne&&$(Ne,We),()=>{Se.delete($)}}invokeOnInitCallbacks($,H){const Q=this.onInitCallbacks.get(H);if(Q)for(const We of Q)try{We($,H)}catch(Se){}}getOrInitializeService({instanceIdentifier:$,options:H={}}){let Q=this.instances.get($);if(!Q&&this.component&&(Q=this.component.instanceFactory(this.container,{instanceIdentifier:(le=$,le===ae?void 0:le),options:H}),this.instances.set($,Q),this.instancesOptions.set($,H),this.invokeOnInitCallbacks(Q,$),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,$,Q)}catch(We){}var le;return Q||null}normalizeInstanceIdentifier($=ae){return this.component?this.component.multipleInstances?$:ae:$}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class de{constructor($){this.name=$,this.providers=new Map}addComponent($){const H=this.getProvider($.name);if(H.isComponentSet())throw new Error(`Component ${$.name} has already been registered with ${this.name}`);H.setComponent($)}addOrOverwriteComponent($){this.getProvider($.name).isComponentSet()&&this.providers.delete($.name),this.addComponent($)}getProvider($){if(this.providers.has($))return this.providers.get($);const H=new X($,this);return this.providers.set($,H),H}getProviders(){return Array.from(this.providers.values())}}},1877:(dt,Ae,k)=>{k.d(Ae,{Am:()=>le,Ub:()=>de,Yd:()=>ie,in:()=>Z});const f=[];var Z=(()=>{return($=Z||(Z={}))[$.DEBUG=0]="DEBUG",$[$.VERBOSE=1]="VERBOSE",$[$.INFO=2]="INFO",$[$.WARN=3]="WARN",$[$.ERROR=4]="ERROR",$[$.SILENT=5]="SILENT",Z;var $})();const O={debug:Z.DEBUG,verbose:Z.VERBOSE,info:Z.INFO,warn:Z.WARN,error:Z.ERROR,silent:Z.SILENT},ae=Z.INFO,X={[Z.DEBUG]:"log",[Z.VERBOSE]:"log",[Z.INFO]:"info",[Z.WARN]:"warn",[Z.ERROR]:"error"},pe=($,H,...Q)=>{if(H<$.logLevel)return;const We=(new Date).toISOString(),Se=X[H];if(!Se)throw new Error(`Attempted to log a message with an invalid logType (value: ${H})`);console[Se](`[${We}]  ${$.name}:`,...Q)};class ie{constructor(H){this.name=H,this._logLevel=ae,this._logHandler=pe,this._userLogHandler=null,f.push(this)}get logLevel(){return this._logLevel}set logLevel(H){if(!(H in Z))throw new TypeError(`Invalid value "${H}" assigned to \`logLevel\``);this._logLevel=H}setLogLevel(H){this._logLevel="string"==typeof H?O[H]:H}get logHandler(){return this._logHandler}set logHandler(H){if("function"!=typeof H)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=H}get userLogHandler(){return this._userLogHandler}set userLogHandler(H){this._userLogHandler=H}debug(...H){this._userLogHandler&&this._userLogHandler(this,Z.DEBUG,...H),this._logHandler(this,Z.DEBUG,...H)}log(...H){this._userLogHandler&&this._userLogHandler(this,Z.VERBOSE,...H),this._logHandler(this,Z.VERBOSE,...H)}info(...H){this._userLogHandler&&this._userLogHandler(this,Z.INFO,...H),this._logHandler(this,Z.INFO,...H)}warn(...H){this._userLogHandler&&this._userLogHandler(this,Z.WARN,...H),this._logHandler(this,Z.WARN,...H)}error(...H){this._userLogHandler&&this._userLogHandler(this,Z.ERROR,...H),this._logHandler(this,Z.ERROR,...H)}}function de($){f.forEach(H=>{H.setLogLevel($)})}function le($,H){for(const Q of f){let We=null;H&&H.level&&(We=O[H.level]),Q.userLogHandler=null===$?null:(Se,Ne,...Le)=>{const he=Le.map(we=>{if(null==we)return null;if("string"==typeof we)return we;if("number"==typeof we||"boolean"==typeof we)return we.toString();if(we instanceof Error)return we.message;try{return JSON.stringify(we)}catch(it){return null}}).filter(we=>we).join(" ");Ne>=(null!=We?We:Se.logLevel)&&$({level:Z[Ne].toLowerCase(),message:he,args:Le,type:Se.name})}}}},5861:(dt,Ae,k)=>{function f(O,ae,X,pe,ie,de,le){try{var $=O[de](le),H=$.value}catch(Q){return void X(Q)}$.done?ae(H):Promise.resolve(H).then(pe,ie)}function Z(O){return function(){var ae=this,X=arguments;return new Promise(function(pe,ie){var de=O.apply(ae,X);function le(H){f(de,pe,ie,le,$,"next",H)}function $(H){f(de,pe,ie,le,$,"throw",H)}le(void 0)})}}k.d(Ae,{Z:()=>Z})}},dt=>{dt(dt.s=1947)}]);